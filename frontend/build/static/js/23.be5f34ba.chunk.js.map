{"version":3,"file":"static/js/23.be5f34ba.chunk.js","mappings":"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","sources":["components/dashboard/ManualSync.jsx","components/dashboard/PageHeader.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './ManualSync.css';\r\nimport PageHeader from './PageHeader';\r\n\r\nconst ManualSync = () => {\r\n  const [schedules, setSchedules] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [processing, setProcessing] = useState({}); // { task_id: boolean }\r\n  const [progress, setProgress] = useState({}); // { task_id: percentage }\r\n  const [message, setMessage] = useState(null);\r\n  const [showResultModal, setShowResultModal] = useState(false);\r\n  const [currentResult, setCurrentResult] = useState(null);\r\n  const [dateRange, setDateRange] = useState({\r\n    startDate: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\r\n    endDate: new Date().toISOString().split('T')[0]\r\n  });\r\n  const [taskDateRanges, setTaskDateRanges] = useState({}); // { task_id: { startDate, endDate } }\r\n\r\n  const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\n  useEffect(() => {\r\n    fetchSchedules();\r\n    \r\n    // Initialize default date ranges for attendance cache\r\n    setTaskDateRanges({\r\n      attendance_cache: {\r\n        startDate: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\r\n        endDate: new Date().toISOString().split('T')[0]\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const fetchSchedules = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const res = await axios.get(`${API_BASE_URL}/sync-schedule`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      if (res.data.success) {\r\n        setSchedules(res.data.data);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching schedules:', err);\r\n      // Fallback/Mock data if API fails (during dev/migration)\r\n      setSchedules([\r\n          { task_id: 'divisions_sync', task_name: 'Divisions Sync', description: 'Sync company divisions from HRIS', mode: 'manual', repeat_interval: 'none', repeat_enabled: false, last_run: null, status: 'idle' },\r\n          { task_id: 'sections_sync', task_name: 'Sections Sync', description: 'Sync organizational sections from HRIS', mode: 'manual', repeat_interval: 'none', repeat_enabled: false, last_run: null, status: 'idle' },\r\n          { task_id: 'employees_sync', task_name: 'Employees Sync', description: 'Sync employee records from HRIS', mode: 'manual', repeat_interval: 'none', repeat_enabled: false, last_run: null, status: 'idle' },\r\n          { task_id: 'dashboard_sync', task_name: 'Dashboard Totals Sync', description: 'Sync dashboard with latest data', mode: 'manual', repeat_interval: 'none', repeat_enabled: false, last_run: null, status: 'idle' },\r\n          { task_id: 'attendance_cache', task_name: 'Attendance Table Cache', description: 'Cache attendance data', mode: 'manual', repeat_interval: 'none', repeat_enabled: false, last_run: null, status: 'idle' },\r\n          { task_id: 'employees_cache', task_name: 'Employees Cache', description: 'Preload employees cache', mode: 'manual', repeat_interval: 'none', repeat_enabled: false, last_run: null, status: 'idle' },\r\n          { task_id: 'divisions_cache', task_name: 'Divisions Cache', description: 'Preload divisions cache', mode: 'manual', repeat_interval: 'none', repeat_enabled: false, last_run: null, status: 'idle' },\r\n          { task_id: 'sections_cache', task_name: 'Sections Cache', description: 'Preload sections cache', mode: 'manual', repeat_interval: 'none', repeat_enabled: false, last_run: null, status: 'idle' },\r\n          { task_id: 'subsections_cache', task_name: 'Sub-Sections Cache', description: 'Preload sub-sections cache', mode: 'manual', repeat_interval: 'none', repeat_enabled: false, last_run: null, status: 'idle' }\r\n      ]);\r\n      setMessage({ type: 'warning', text: 'Could not load schedules from server, showing defaults.' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const [saving, setSaving] = useState({});\r\n\r\n  const handleUpdateSchedule = async (task_id, updates) => {\r\n    // Optimistic UI update with saving flag and preserved previous state\r\n    const current = schedules.find(s => s.task_id === task_id);\r\n    if (!current) {\r\n      setMessage({ type: 'error', text: 'Schedule not found' });\r\n      return;\r\n    }\r\n\r\n    const previous = { ...current };\r\n    const optimistic = { ...current, ...updates };\r\n\r\n    console.debug('[ManualSync] Updating schedule', task_id, 'updates=', updates, 'optimistic=', optimistic);\r\n\r\n    setSchedules(prev => prev.map(s => s.task_id === task_id ? optimistic : s));\r\n    setSaving(prev => ({ ...prev, [task_id]: true }));\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n\r\n      const payload = {\r\n        task_id: optimistic.task_id,\r\n        task_name: optimistic.task_name,\r\n        description: optimistic.description,\r\n        mode: optimistic.mode,\r\n        schedule_date: optimistic.schedule_date,\r\n        schedule_time: optimistic.schedule_time,\r\n        date_range_start: optimistic.date_range_start,\r\n        date_range_end: optimistic.date_range_end,\r\n        repeat_interval: optimistic.repeat_interval || 'none',\r\n        repeat_enabled: optimistic.repeat_enabled || false,\r\n        last_run: optimistic.last_run || null,\r\n        status: optimistic.status || undefined\r\n      };\r\n\r\n      console.debug('[ManualSync] PUT payload', payload);\r\n\r\n      const response = await axios.put(`${API_BASE_URL}/sync-schedule/${task_id}`, payload, {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      console.debug('[ManualSync] PUT response', response?.data);\r\n\r\n      if (response.data && response.data.success) {\r\n        setSchedules(prev => prev.map(s => s.task_id === task_id ? { ...s, ...response.data.data } : s));\r\n        setMessage({ type: 'success', text: 'Schedule updated successfully' });\r\n        setTimeout(() => setMessage(null), 3000);\r\n      } else {\r\n        const msg = response.data?.message || 'Unknown server response';\r\n        throw new Error(msg);\r\n      }\r\n\r\n    } catch (err) {\r\n      console.error('[ManualSync] Error updating schedule:', err);\r\n      const errorMsg = err.response?.data?.message || err.message || 'Failed to update schedule';\r\n      setMessage({ type: 'error', text: errorMsg });\r\n\r\n      // Revert optimistic update locally to avoid flicker caused by full reload\r\n      setSchedules(prev => prev.map(s => s.task_id === task_id ? previous : s));\r\n\r\n      // If auth error, suggest re-login (keep it concise)\r\n      if (err.response?.status === 401) {\r\n        setMessage({ type: 'error', text: 'Authentication error. Please login again.' });\r\n      }\r\n\r\n      // Don't automatically reload the whole list to avoid UI jank; allow manual refresh if needed\r\n      console.debug('[ManualSync] Reverted schedule to previous state');\r\n    } finally {\r\n      setSaving(prev => ({ ...prev, [task_id]: false }));\r\n    }\r\n  };\r\n\r\n  const handleStartSync = async (task) => {\r\n    if (processing[task.task_id]) return;\r\n\r\n    // For attendance_cache, use the task-specific date range\r\n    if (task.task_id === 'attendance_cache') {\r\n      const taskRange = taskDateRanges[task.task_id] || dateRange;\r\n      await executeSync(task, taskRange);\r\n    } else {\r\n      await executeSync(task, {});\r\n    }\r\n  };\r\n\r\n  const executeSync = async (task, options = {}) => {\r\n    setProcessing(prev => ({ ...prev, [task.task_id]: true }));\r\n    setProgress(prev => ({ ...prev, [task.task_id]: 0 }));\r\n    setMessage({ type: 'info', text: `Starting ${task.task_name}...` });\r\n\r\n    // Simulate progress\r\n    const progressInterval = setInterval(() => {\r\n      setProgress(prev => {\r\n        const current = prev[task.task_id] || 0;\r\n        if (current < 90) {\r\n          return { ...prev, [task.task_id]: current + 10 };\r\n        }\r\n        return prev;\r\n      });\r\n    }, 300);\r\n\r\n    try {\r\n      let endpoint = '';\r\n      // Map task_id to endpoint\r\n      switch(task.task_id) {\r\n        case 'divisions_sync': endpoint = '/sync/trigger/divisions'; break;\r\n        case 'sections_sync': endpoint = '/sync/trigger/sections'; break;\r\n        case 'employees_sync': endpoint = '/sync/trigger/employees'; break;\r\n        case 'dashboard_sync': endpoint = '/dashboard/total-counts/refresh'; break;\r\n        case 'attendance_cache': endpoint = '/cache/warmup'; break;\r\n        case 'employees_cache': endpoint = '/hris-cache/employees/refresh'; break;\r\n        case 'divisions_cache': endpoint = '/hris-cache/divisions/refresh'; break;\r\n        case 'sections_cache': endpoint = '/hris-cache/sections/refresh'; break;\r\n        case 'subsections_cache': endpoint = '/hris-cache/subsections/refresh'; break;\r\n        default: break;\r\n      }\r\n\r\n      if (endpoint) {\r\n        const token = localStorage.getItem('token');\r\n        let url = `${API_BASE_URL}${endpoint}`;\r\n        \r\n        // Add date range query params for attendance cache\r\n        if (task.task_id === 'attendance_cache' && options.startDate && options.endDate) {\r\n          url += `?startDate=${options.startDate}&endDate=${options.endDate}`;\r\n        }\r\n        \r\n        const response = await axios.post(url, {}, {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        \r\n        clearInterval(progressInterval);\r\n        setProgress(prev => ({ ...prev, [task.task_id]: 100 }));\r\n        \r\n        // Show result modal\r\n        setCurrentResult({\r\n          taskName: task.task_name,\r\n          taskId: task.task_id,\r\n          data: response.data\r\n        });\r\n        setShowResultModal(true);\r\n        \r\n        setMessage({ type: 'success', text: `${task.task_name} completed successfully` });\r\n      } else {\r\n        clearInterval(progressInterval);\r\n        setMessage({ type: 'error', text: 'No endpoint defined for this task' });\r\n      }\r\n      \r\n      // Update last run time locally\r\n      handleUpdateSchedule(task.task_id, { last_run: new Date(), status: 'completed' });\r\n\r\n    } catch (err) {\r\n      clearInterval(progressInterval);\r\n      console.error('Error starting sync:', err);\r\n      setMessage({ type: 'error', text: `Failed to start ${task.task_name}: ${err.response?.data?.message || err.message}` });\r\n      setProgress(prev => ({ ...prev, [task.task_id]: 0 }));\r\n    } finally {\r\n      setTimeout(() => {\r\n        setProcessing(prev => ({ ...prev, [task.task_id]: false }));\r\n        setProgress(prev => ({ ...prev, [task.task_id]: 0 }));\r\n      }, 2000);\r\n    }\r\n  };\r\n\r\n  const handleStopSync = (task) => {\r\n     // Since we can't easily cancel backend request, we just reset UI state\r\n     setProcessing(prev => ({ ...prev, [task.task_id]: false }));\r\n     setMessage({ type: 'info', text: 'Stopped (UI only)' });\r\n  };\r\n\r\n  return (\r\n    <div className=\"manual-sync-container\">\r\n      <PageHeader \r\n        title=\"Manual Sync & Cache Management\" \r\n        subtitle=\"Manage synchronization schedules and manual triggers\"\r\n        icon=\"bi-arrow-repeat\" \r\n      />\r\n\r\n      {message && (\r\n        <div className={`alert alert-${message.type === 'error' ? 'danger' : message.type === 'success' ? 'success' : 'info'} mb-3`}>\r\n          {message.text}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"card shadow-sm\">\r\n        <div className=\"card-body p-0\">\r\n          <div className=\"table-responsive\">\r\n            <table className=\"table table-hover align-middle mb-0\">\r\n              <thead className=\"bg-light\">\r\n                <tr>\r\n                  <th style={{width: '12%'}}>Name</th>\r\n                  <th style={{width: '12%'}}>Description</th>\r\n                  <th style={{width: '10%'}}>Last Run</th>\r\n                  <th style={{width: '8%'}}>Progress</th>\r\n                  <th style={{width: '8%'}}>Action</th>\r\n                  <th style={{width: '8%'}}>Mode</th>\r\n                  <th style={{width: '10%'}}>Repeat Interval</th>\r\n                  <th style={{width: '16%'}}>Cache Date Range</th>\r\n                  <th style={{width: '16%'}}>Schedule</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {loading ? (\r\n                  <tr><td colSpan=\"9\" className=\"text-center p-4\">Loading schedules...</td></tr>\r\n                ) : schedules.map(task => (\r\n                  <tr key={task.task_id}>\r\n                    <td className=\"fw-bold\">\r\n                        {task.task_name}\r\n                        {task.last_run && <div className=\"text-muted small fw-normal\">Last: {new Date(task.last_run).toLocaleString()}</div>}\r\n                    </td>\r\n                    <td className=\"text-muted small\">{task.description}</td>\r\n                    <td className=\"text-muted small\">{task.last_run ? new Date(task.last_run).toLocaleString() : 'Never'}</td>\r\n                    <td>\r\n                      {processing[task.task_id] ? (\r\n                        <div>\r\n                          <div className=\"progress\" style={{height: '20px'}}>\r\n                            <div \r\n                              className=\"progress-bar progress-bar-striped progress-bar-animated bg-primary\" \r\n                              role=\"progressbar\" \r\n                              style={{width: `${progress[task.task_id] || 0}%`}}\r\n                              aria-valuenow={progress[task.task_id] || 0} \r\n                              aria-valuemin=\"0\" \r\n                              aria-valuemax=\"100\"\r\n                            >\r\n                              {progress[task.task_id] || 0}%\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      ) : (\r\n                        <span className=\"text-muted small\">Ready</span>\r\n                      )}\r\n                    </td>\r\n                    <td>\r\n                      <div className=\"d-flex gap-1 flex-column\">\r\n                        <button \r\n                          className=\"btn btn-sm btn-primary\"\r\n                          onClick={() => handleStartSync(task)}\r\n                          disabled={processing[task.task_id]}\r\n                        >\r\n                          {processing[task.task_id] ? (\r\n                            <span className=\"spinner-border spinner-border-sm me-1\" role=\"status\" aria-hidden=\"true\"></span>\r\n                          ) : (\r\n                            <i className=\"bi bi-play-fill me-1\"></i>\r\n                          )}\r\n                          Start\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                    <td>\r\n                      <div className=\"btn-group btn-group-sm\" role=\"group\">\r\n                        <input \r\n                          type=\"radio\" \r\n                          className=\"btn-check\" \r\n                          name={`mode-${task.task_id}`} \r\n                          id={`auto-${task.task_id}`} \r\n                          autoComplete=\"off\"\r\n                          checked={task.mode === 'auto'}\r\n                          disabled={!!saving[task.task_id]}\r\n                          onChange={() => handleUpdateSchedule(task.task_id, { mode: 'auto' })}\r\n                        />\r\n                        <label\r\n                          className={`btn ${task.mode === 'auto' ? 'btn-success' : 'btn-outline-secondary'}`}\r\n                          htmlFor={`auto-${task.task_id}`}\r\n                          onClick={() => !saving[task.task_id] && handleUpdateSchedule(task.task_id, { mode: 'auto' })}\r\n                          style={{ cursor: saving[task.task_id] ? 'not-allowed' : 'pointer' }}\r\n                        >Auto</label>\r\n\r\n                        <input \r\n                          type=\"radio\" \r\n                          className=\"btn-check\" \r\n                          name={`mode-${task.task_id}`} \r\n                          id={`manual-${task.task_id}`} \r\n                          autoComplete=\"off\"\r\n                          checked={task.mode === 'manual'}\r\n                          disabled={!!saving[task.task_id]}\r\n                          onChange={() => handleUpdateSchedule(task.task_id, { mode: 'manual' })}\r\n                        />\r\n                        <label\r\n                          className={`btn ${task.mode === 'manual' ? 'btn-secondary' : 'btn-outline-secondary'}`}\r\n                          htmlFor={`manual-${task.task_id}`}\r\n                          onClick={() => !saving[task.task_id] && handleUpdateSchedule(task.task_id, { mode: 'manual' })}\r\n                          style={{ cursor: saving[task.task_id] ? 'not-allowed' : 'pointer' }}\r\n                        >Manual</label>\r\n                        {saving[task.task_id] && (\r\n                          <div className=\"spinner-border spinner-border-sm ms-2\" role=\"status\" aria-hidden=\"true\"></div>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    <td>\r\n                      <div className=\"d-flex flex-column gap-2\">\r\n                        <select \r\n                          className=\"form-select form-select-sm\" \r\n                          disabled={task.mode !== 'auto' || !!saving[task.task_id]}\r\n                          value={task.repeat_interval || 'none'}\r\n                          onChange={(e) => handleUpdateSchedule(task.task_id, { repeat_interval: e.target.value, repeat_enabled: e.target.value !== 'none' })}\r\n                        >\r\n                          <option value=\"none\">No Repeat</option>\r\n                          <option value=\"every_30_seconds\">Every 30 Seconds</option>\r\n                          <option value=\"every_minute\">Every Minute</option>\r\n                          <option value=\"every_5_minutes\">Every 5 Minutes</option>\r\n                          <option value=\"every_15_minutes\">Every 15 Minutes</option>\r\n                          <option value=\"every_30_minutes\">Every 30 Minutes</option>\r\n                          <option value=\"hourly\">Hourly</option>\r\n                          <option value=\"daily\">Daily</option>\r\n                          <option value=\"weekly\">Weekly</option>\r\n                        </select>\r\n                        {task.repeat_enabled && task.repeat_interval !== 'none' && (\r\n                          <span className=\"badge bg-info text-dark small\">\r\n                            <i className=\"bi bi-arrow-repeat me-1\"></i>Recurring\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    <td>\r\n                      {task.task_id === 'attendance_cache' ? (\r\n                        <div className=\"row g-1\">\r\n                          <div className=\"col-6\">\r\n                            <input \r\n                              type=\"date\" \r\n                              className=\"form-control form-control-sm\" \r\n                              value={taskDateRanges[task.task_id]?.startDate || dateRange.startDate}\r\n                              onChange={(e) => setTaskDateRanges(prev => ({\r\n                                ...prev,\r\n                                [task.task_id]: {\r\n                                  ...prev[task.task_id],\r\n                                  startDate: e.target.value\r\n                                }\r\n                              }))}\r\n                              placeholder=\"Start\"\r\n                            />\r\n                          </div>\r\n                          <div className=\"col-6\">\r\n                            <input \r\n                              type=\"date\" \r\n                              className=\"form-control form-control-sm\" \r\n                              value={taskDateRanges[task.task_id]?.endDate || dateRange.endDate}\r\n                              onChange={(e) => setTaskDateRanges(prev => ({\r\n                                ...prev,\r\n                                [task.task_id]: {\r\n                                  ...prev[task.task_id],\r\n                                  endDate: e.target.value\r\n                                }\r\n                              }))}\r\n                              placeholder=\"End\"\r\n                              max={new Date().toISOString().split('T')[0]}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      ) : (\r\n                        <span className=\"text-muted small\">N/A</span>\r\n                      )}\r\n                    </td>\r\n                    <td>\r\n                      <div className=\"row g-2 align-items-center\">\r\n                        <div className=\"col-6\">\r\n                          <input \r\n                            type=\"date\" \r\n                            className=\"form-control form-control-sm\" \r\n                            disabled={task.mode !== 'auto' || !!saving[task.task_id]}\r\n                            value={task.schedule_date || ''}\r\n                            onChange={(e) => handleUpdateSchedule(task.task_id, { schedule_date: e.target.value })}\r\n                            placeholder={task.repeat_enabled ? \"Start date\" : \"Date\"}\r\n                          />\r\n                        </div>\r\n                        <div className=\"col-6\">\r\n                          <input \r\n                            type=\"time\" \r\n                            className=\"form-control form-control-sm\" \r\n                            disabled={task.mode !== 'auto' || !!saving[task.task_id]}\r\n                            value={task.schedule_time || ''}\r\n                            onChange={(e) => handleUpdateSchedule(task.task_id, { schedule_time: e.target.value })}\r\n                            placeholder={task.repeat_enabled ? \"Start time\" : \"Time\"}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Result Modal */}\r\n      {showResultModal && currentResult && (\r\n        <div className=\"modal show d-block\" tabIndex=\"-1\" style={{backgroundColor: 'rgba(0,0,0,0.5)'}}>\r\n          <div className=\"modal-dialog modal-lg modal-dialog-centered\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header bg-primary text-white\">\r\n                <h5 className=\"modal-title\">\r\n                  <i className=\"bi bi-check-circle me-2\"></i>\r\n                  {currentResult.taskName} - Results\r\n                </h5>\r\n                <button type=\"button\" className=\"btn-close btn-close-white\" onClick={() => setShowResultModal(false)}></button>\r\n              </div>\r\n              <div className=\"modal-body\">\r\n                {renderResultContent(currentResult)}\r\n              </div>\r\n              <div className=\"modal-footer\">\r\n                <button type=\"button\" className=\"btn btn-secondary\" onClick={() => setShowResultModal(false)}>Close</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Date Range Modal for Attendance Cache - REMOVED: Now using inline date range inputs */}\r\n      {/* {showDateRangeModal && (\r\n        <div className=\"modal show d-block\" tabIndex=\"-1\" style={{backgroundColor: 'rgba(0,0,0,0.5)'}}>\r\n          <div className=\"modal-dialog modal-dialog-centered\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header bg-warning text-dark\">\r\n                <h5 className=\"modal-title\">\r\n                  <i className=\"bi bi-calendar-range me-2\"></i>\r\n                  Select Attendance Date Range\r\n                </h5>\r\n                <button type=\"button\" className=\"btn-close\" onClick={() => setShowDateRangeModal(false)}></button>\r\n              </div>\r\n              <div className=\"modal-body\">\r\n                <p className=\"text-muted mb-3\">\r\n                  Select the date range for attendance data to cache. This will improve report generation speed for the selected period.\r\n                </p>\r\n                <div className=\"row g-3\">\r\n                  <div className=\"col-md-6\">\r\n                    <label className=\"form-label fw-bold\">Start Date</label>\r\n                    <input\r\n                      type=\"date\"\r\n                      className=\"form-control\"\r\n                      value={dateRange.startDate}\r\n                      onChange={(e) => setDateRange(prev => ({ ...prev, startDate: e.target.value }))}\r\n                    />\r\n                  </div>\r\n                  <div className=\"col-md-6\">\r\n                    <label className=\"form-label fw-bold\">End Date</label>\r\n                    <input\r\n                      type=\"date\"\r\n                      className=\"form-control\"\r\n                      value={dateRange.endDate}\r\n                      onChange={(e) => setDateRange(prev => ({ ...prev, endDate: e.target.value }))}\r\n                      max={new Date().toISOString().split('T')[0]}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"alert alert-info mt-3 mb-0\">\r\n                  <i className=\"bi bi-info-circle me-2\"></i>\r\n                  <small>\r\n                    Selected: {Math.ceil((new Date(dateRange.endDate) - new Date(dateRange.startDate)) / (1000 * 60 * 60 * 24))} days\r\n                  </small>\r\n                </div>\r\n              </div>\r\n              <div className=\"modal-footer\">\r\n                <button type=\"button\" className=\"btn btn-secondary\" onClick={() => setShowDateRangeModal(false)}>\r\n                  Cancel\r\n                </button>\r\n                <button type=\"button\" className=\"btn btn-warning\" onClick={handleDateRangeConfirm}>\r\n                  <i className=\"bi bi-check-circle me-1\"></i>\r\n                  Start Caching\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )} */}\r\n    </div>\r\n  );\r\n\r\n  function renderResultContent(result) {\r\n    const { data, taskId } = result;\r\n    \r\n    // Handle sync operations\r\n    if (taskId.includes('_sync')) {\r\n      const syncData = data.data || {};\r\n      return (\r\n        <div>\r\n          <div className=\"row mb-3\">\r\n            <div className=\"col-md-3\">\r\n              <div className=\"card text-center border-primary\">\r\n                <div className=\"card-body\">\r\n                  <h3 className=\"text-primary mb-0\">{syncData.synced || syncData.total || 0}</h3>\r\n                  <small className=\"text-muted\">Total Synced</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-3\">\r\n              <div className=\"card text-center border-success\">\r\n                <div className=\"card-body\">\r\n                  <h3 className=\"text-success mb-0\">{syncData.created || 0}</h3>\r\n                  <small className=\"text-muted\">New Records</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-3\">\r\n              <div className=\"card text-center border-warning\">\r\n                <div className=\"card-body\">\r\n                  <h3 className=\"text-warning mb-0\">{syncData.updated || 0}</h3>\r\n                  <small className=\"text-muted\">Updated</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-3\">\r\n              <div className=\"card text-center border-danger\">\r\n                <div className=\"card-body\">\r\n                  <h3 className=\"text-danger mb-0\">{syncData.failed || 0}</h3>\r\n                  <small className=\"text-muted\">Failed</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {syncData.records && syncData.records.length > 0 && (\r\n            <div>\r\n              <h6 className=\"mb-3\">New Records:</h6>\r\n              <div className=\"table-responsive\" style={{maxHeight: '300px', overflowY: 'auto'}}>\r\n                <table className=\"table table-sm table-striped\">\r\n                  <thead className=\"sticky-top bg-light\">\r\n                    <tr>\r\n                      {taskId === 'divisions_sync' && (\r\n                        <>\r\n                          <th>Code</th>\r\n                          <th>Name</th>\r\n                        </>\r\n                      )}\r\n                      {taskId === 'sections_sync' && (\r\n                        <>\r\n                          <th>Code</th>\r\n                          <th>Name</th>\r\n                          <th>Division</th>\r\n                        </>\r\n                      )}\r\n                      {taskId === 'employees_sync' && (\r\n                        <>\r\n                          <th>Emp No</th>\r\n                          <th>Name</th>\r\n                          <th>Division</th>\r\n                          <th>Section</th>\r\n                        </>\r\n                      )}\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {syncData.records.slice(0, 50).map((record, idx) => (\r\n                      <tr key={idx}>\r\n                        {taskId === 'divisions_sync' && (\r\n                          <>\r\n                            <td>{record.HIE_CODE || record.code}</td>\r\n                            <td>{record.HIE_NAME || record.name}</td>\r\n                          </>\r\n                        )}\r\n                        {taskId === 'sections_sync' && (\r\n                          <>\r\n                            <td>{record.HIE_CODE || record.code}</td>\r\n                            <td>{record.HIE_NAME || record.name}</td>\r\n                            <td>{record.DIV_CODE || record.divisionCode}</td>\r\n                          </>\r\n                        )}\r\n                        {taskId === 'employees_sync' && (\r\n                          <>\r\n                            <td>{record.EMP_NO || record.empNo}</td>\r\n                            <td>{record.EMP_NAME || record.name}</td>\r\n                            <td>{record.DIV_NAME || record.division}</td>\r\n                            <td>{record.SEC_NAME || record.section}</td>\r\n                          </>\r\n                        )}\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n                {syncData.records.length > 50 && (\r\n                  <p className=\"text-muted text-center\">Showing first 50 of {syncData.records.length} records</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n    \r\n    // Handle cache operations\r\n    if (taskId.includes('_cache') || taskId === 'dashboard_sync') {\r\n      return (\r\n        <div>\r\n          <div className=\"alert alert-success\">\r\n            <i className=\"bi bi-check-circle me-2\"></i>\r\n            <strong>Success!</strong> Cache operation completed successfully.\r\n          </div>\r\n          {data.data && (\r\n            <div className=\"bg-light p-3 rounded\">\r\n              <pre className=\"mb-0\" style={{maxHeight: '300px', overflowY: 'auto'}}>\r\n                {JSON.stringify(data.data, null, 2)}\r\n              </pre>\r\n            </div>\r\n          )}\r\n          {data.message && (\r\n            <p className=\"mt-3 mb-0\">{data.message}</p>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n    \r\n    return (\r\n      <div>\r\n        <div className=\"alert alert-info\">\r\n          <i className=\"bi bi-info-circle me-2\"></i>\r\n          Operation completed successfully\r\n        </div>\r\n        {data.message && <p>{data.message}</p>}\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default ManualSync;\r\n","import React from 'react';\r\nimport './PageHeader.css';\r\nimport logo from '../../assets/logo.jpg';\r\n\r\n/**\r\n * Reusable Page Header Component with Logo\r\n * @param {string} title - The page title\r\n * @param {string} subtitle - The page subtitle/description\r\n * @param {string} icon - Bootstrap icon class (e.g., \"bi-building\")\r\n * @param {React.ReactNode} actions - Optional action buttons\r\n * @param {function} onBack - Optional back navigation function\r\n */\r\nconst PageHeader = ({ title, subtitle, icon = 'bi-folder', actions, onBack }) => {\r\n  return (\r\n    <>\r\n      {onBack && (\r\n        <button \r\n          className=\"back-arrow-btn\"\r\n          onClick={onBack}\r\n          title=\"Back to Dashboard\"\r\n          style={{ marginBottom: '12px', background: 'transparent', color: '#0f172a', border: '1px solid rgba(15,23,42,0.08)', width: 'auto', padding: '8px 12px' }}\r\n        >\r\n          <i className=\"bi bi-arrow-left\"></i>&nbsp;<span style={{ fontWeight: 600 }}>Back</span>\r\n        </button>\r\n      )}\r\n      <div className=\"page-header-banner\">\r\n        <div className=\"page-header-content\">\r\n          <div className=\"page-header-left\">\r\n            <div className=\"page-header-icon\">\r\n              <i className={`bi ${icon}`}></i>\r\n            </div>\r\n            <div className=\"page-header-text\">\r\n              <h1>{title}</h1>\r\n              {subtitle && <p>{subtitle}</p>}\r\n            </div>\r\n          </div>\r\n        <div className=\"page-header-right\">\r\n          {actions && <div className=\"page-header-actions\">{actions}</div>}\r\n          <div className=\"page-header-logo\">\r\n            <img src={logo} alt=\"Company Logo\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Decorative Elements */}\r\n      <div className=\"page-header-decoration\">\r\n        <div className=\"decoration-circle decoration-circle-1\"></div>\r\n        <div className=\"decoration-circle decoration-circle-2\"></div>\r\n        <div className=\"decoration-circle decoration-circle-3\"></div>\r\n      </div>\r\n    </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PageHeader;\r\n"],"names":["ManualSync","schedules","setSchedules","useState","loading","setLoading","processing","setProcessing","progress","setProgress","message","setMessage","showResultModal","setShowResultModal","currentResult","setCurrentResult","dateRange","setDateRange","startDate","Date","now","toISOString","split","endDate","taskDateRanges","setTaskDateRanges","API_BASE_URL","process","useEffect","fetchSchedules","attendance_cache","async","token","localStorage","getItem","res","axios","get","headers","data","success","err","console","error","task_id","task_name","description","mode","repeat_interval","repeat_enabled","last_run","status","type","text","saving","setSaving","handleUpdateSchedule","updates","current","find","s","previous","optimistic","debug","prev","map","payload","schedule_date","schedule_time","date_range_start","date_range_end","undefined","response","put","_response$data","msg","Error","setTimeout","_err$response","_err$response$data","_err$response2","errorMsg","executeSync","task","options","arguments","length","progressInterval","setInterval","endpoint","url","post","clearInterval","taskName","taskId","_err$response3","_err$response3$data","_jsxs","className","children","_jsx","PageHeader","title","subtitle","icon","style","width","colSpan","_taskDateRanges$task$","_taskDateRanges$task$2","toLocaleString","height","role","onClick","taskRange","handleStartSync","disabled","name","id","autoComplete","checked","onChange","htmlFor","cursor","value","e","target","placeholder","max","tabIndex","backgroundColor","result","includes","syncData","synced","total","created","updated","failed","records","maxHeight","overflowY","_Fragment","slice","record","idx","HIE_CODE","code","HIE_NAME","DIV_CODE","divisionCode","EMP_NO","empNo","EMP_NAME","DIV_NAME","division","SEC_NAME","section","JSON","stringify","renderResultContent","_ref","actions","onBack","marginBottom","background","color","border","padding","fontWeight","src","logo","alt"],"sourceRoot":""}