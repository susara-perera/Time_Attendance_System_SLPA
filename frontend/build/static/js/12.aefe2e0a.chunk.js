"use strict";(self.webpackChunktime_attendance_frontend=self.webpackChunktime_attendance_frontend||[]).push([[12],{96:(e,s,i)=>{i.r(s),i.d(s,{default:()=>c});var n=i(43),a=i(803),t=i(68),r=i(154),o=(i(785),i(420),i(83)),l=i(579);const c=e=>{var s,i,c,d;let{onBack:m}=e;const{user:u,hasPermission:g}=(0,n.useContext)(t.c),p="super_admin"===(null===u||void 0===u?void 0:u.role),[v,h]=(0,n.useState)([]),[f,b]=(0,n.useState)([]),[y,x]=(0,n.useState)(""),[w,j]=(0,n.useState)({}),[_,N]=(0,n.useState)(!1),[C,S]=(0,n.useState)(!1),[k,E]=(0,n.useState)(!0),[R,$]=(0,n.useState)(!1),[M,A]=(0,n.useState)(!1),[T,P]=(0,n.useState)({}),V=Object.keys(T||{}).length>0;(0,n.useEffect)(()=>{q(),I();const e=()=>{q(!0)},s=()=>{q(!0)},i=()=>{q(!0),x("")};return window.addEventListener("roleAdded",e),window.addEventListener("roleUpdated",s),window.addEventListener("roleDeleted",i),()=>{window.removeEventListener("roleAdded",e),window.removeEventListener("roleUpdated",s),window.removeEventListener("roleDeleted",i)}},[]),(0,n.useEffect)(()=>{if(y){const e=v.find(e=>e.value===y),s=(null===e||void 0===e?void 0:e.permissions)||{},i={...s};s.subsections&&(s.subsections.transfer||s.subsections.recall)&&!s.transfer_recall&&(i.transfer_recall={transfer:!!s.subsections.transfer,recall:!!s.subsections.recall}),j(i)}},[y,v]),(0,n.useEffect)(()=>{if(!R&&!y&&!V){const e=setInterval(()=>{q()},3e4);return()=>clearInterval(e)}return()=>{}},[R,y,V]);const L=()=>!!p||(g("role_management.view_roles")||g("role_management.view")||g("view_roles")||g("roles.read")||g("roles.view")),D=()=>p||g("update_role")||g("roles.update")||g("permission_management.manage_permission"),q=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{e&&A(!0),E(!0);const s=localStorage.getItem("token"),i=await fetch("http://localhost:5000/api/roles",{headers:{...s?{Authorization:`Bearer ${s}`}:{}}});if(i.ok){const e=await i.json();h(e.data||[])}else console.error("Failed to fetch roles")}catch(s){console.error("Error fetching roles:",s)}finally{E(!1),e&&setTimeout(()=>A(!1),500)}},I=async()=>{try{const e=localStorage.getItem("token"),s=await fetch("http://localhost:5000/api/permissions/catalog",{headers:{...e?{Authorization:`Bearer ${e}`}:{}}});if(s.ok){const e=await s.json();b(e.data||[])}else console.error("Failed to fetch permission catalog")}catch(e){console.error("Error fetching permission catalog:",e)}},z=(()=>{const e=f.map(e=>"divisions"===e.category||"sections"===e.category||"employees"===e.category?{...e,permissions:(e.permissions||[]).filter(e=>"read"===e.id)}:"reports"===e.category?{...e,permissions:[{id:"attendance_generate",name:"Attendance Report - Generate Report"},{id:"attendance_download",name:"Attendance Report - Download Report"},{id:"audit_generate",name:"Audit Report - Generate Report"},{id:"meal_generate",name:"Meal Report - Generate Report"},{id:"view_reports",name:"View Reports"}]}:"settings"===e.category?{...e,permissions:[{id:"settings_view",name:"View Settings"},{id:"settings_general",name:"Change General Settings"},{id:"settings_appearance",name:"Change Appearance"},{id:"settings_security",name:"Change Security"}]}:"subsections"===e.category?{...e,permissions:(e.permissions||[]).filter(e=>["create","read","update","delete"].includes(e.id))}:"transfer_recall"===e.category?{...e,permissions:(e.permissions||[]).filter(e=>["transfer","recall"].includes(e.id))}:e).slice();e.some(e=>"subsections"===e.category)||e.push({category:"subsections",name:"Sub-Section Management",permissions:[{id:"create",name:"Create Sub-Sections"},{id:"read",name:"View Sub-Sections"},{id:"update",name:"Update Sub-Sections"},{id:"delete",name:"Delete Sub-Sections"}]});e.some(e=>"transfer_recall"===e.category)||e.push({category:"transfer_recall",name:"Transfer & Recall Management",permissions:[{id:"transfer",name:"Transfer Employee to Sub-Section"},{id:"recall",name:"Recall Transferred Employee"}]});const s=e.findIndex(e=>"sections"===e.category),i=e.findIndex(e=>"employees"===e.category);if(-1!==s&&-1!==i&&1!==Math.abs(s-i)){const s=e.splice(i,1)[0],n=e.findIndex(e=>"sections"===e.category)+1;e.splice(n,0,s)}const n=e.filter(e=>"attendance"!==e.category&&"roles"!==e.category);n.some(e=>"role_management"===e.category)||n.push({category:"role_management",name:"Role Management",permissions:[{id:"create_role",name:"Create Role"},{id:"update_role",name:"Update Role"},{id:"delete_role",name:"Delete Role"},{id:"view_roles",name:"View Roles"}]});return n.some(e=>"permission_management"===e.category)||n.push({category:"permission_management",name:"Permission Management",permissions:[{id:"manage_permission",name:"Manage Permission"}]}),n})(),B=()=>z.reduce((e,s)=>{var i;return e+((null===(i=s.permissions)||void 0===i?void 0:i.length)||0)},0),U=()=>{let e=0;return z.forEach(s=>{(s.permissions||[]).forEach(i=>{var n;null!==(n=w[s.category])&&void 0!==n&&n[i.id]&&e++})}),e},G=e=>({users:"bi-people-fill",attendance:"bi-clock-fill",reports:"bi-bar-chart-fill",divisions:"bi-building-fill",sections:"bi-diagram-3-fill",subsections:"bi-list-check",transfer_recall:"bi-arrow-left-right",roles:"bi-shield-fill-check",role_management:"bi-people-fill",permission_management:"bi-key-fill",settings:"bi-gear-fill",employees:"bi-person-badge-fill"}[e]||"bi-gear-fill"),F=e=>({users:"Manage user accounts, profiles, and authentication settings",attendance:"Track, monitor, and manage employee attendance records",reports:"Generate, view, and manage various system reports",divisions:"Create and manage organizational divisions and departments",sections:"Organize and manage different sections within divisions",subsections:"Create and manage sub-sections within sections",transfer_recall:"Manage transferring and recalling employees to and from sub-sections",roles:"Define user roles and assign permission levels",role_management:"Create, update, delete and view roles",permission_management:"Manage the permission catalog and assignments",settings:"Configure system-wide settings and preferences",employees:"Manage employee information and employment records"}[e]||"Manage related system features and data"),O=(e,s)=>{const i={create:`Add new ${"users"===s?"user accounts":"employees"===s?"employee records":"subsections"===s?"sub-section":s}`,read:"reports"===s?"Download and export existing reports":`View and browse existing ${"users"===s?"user information":"employees"===s?"employee data":"subsections"===s?"sub-section":s}`,update:`Edit and modify existing ${"users"===s?"user details":"employees"===s?"employee information":"subsections"===s?"sub-section":s}`,delete:`Remove and delete ${"users"===s?"user accounts":"employees"===s?"employee records":"subsections"===s?"sub-section":s}`,transfer:"Transfer employee to "+("subsections"===s||"transfer_recall"===s?"sub-section":"that module"),recall:"Recall transferred employees from "+("subsections"===s||"transfer_recall"===s?"sub-section":"that module"),manage:`Full administrative access to ${s} management`,attendance_generate:"Generate attendance reports for selected date ranges and filters",attendance_download:"Download/export attendance reports (CSV, PDF) for distribution",audit_generate:"Generate system audit reports showing activity and changes",meal_generate:"Generate meal reports for employee meal tracking",view_reports:"Browse and view available reports and their metadata",settings_general:"Change general system settings (timezone, locale, defaults)",settings_appearance:"Change appearance options (theme, layout, branding)",settings_security:"Change security settings (password policies, 2FA, session rules)",settings_view:"View system settings and read configuration without editing",create_role:"Create new roles that can be assigned to users",update_role:"Modify existing role details and assigned permissions",delete_role:"Delete roles that are no longer needed",view_roles:"View list of roles and their basic details",manage_permission:"Manage the permission catalog and assignments (view and update)"};return i[e]||`Perform ${e} operations`};return k?(0,l.jsx)("div",{children:"Loading..."}):(0,l.jsxs)("div",{className:"role-access-wrapper",children:[(0,l.jsx)(o.A,{title:"Role Access Management",subtitle:"Configure permissions and access levels for each role",icon:"bi-people-fill",onBack:m,actions:(0,l.jsxs)("button",{className:"btn-manage-roles",onClick:()=>{L()&&window.dispatchEvent(new CustomEvent("navigateTo",{detail:"role-management"}))},disabled:!L(),title:L()?"Manage Roles":"You need 'view_roles' or 'roles.read' access to manage roles",children:[(0,l.jsx)("i",{className:"bi bi-gear",style:{marginRight:"6px",fontSize:"1.1rem"}})," Manage Roles"]})}),L()?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"stats-section",children:[(0,l.jsxs)("div",{className:"stats-item",children:[(0,l.jsx)("span",{className:"stats-number",children:v.length}),(0,l.jsx)("span",{className:"stats-label",children:"Available Roles"})]}),(0,l.jsxs)("div",{className:"stats-item",children:[(0,l.jsx)("span",{className:"stats-number",children:B()}),(0,l.jsx)("span",{className:"stats-label",children:"Available Permissions"})]}),y&&(0,l.jsxs)("div",{className:"stats-item",children:[(0,l.jsx)("span",{className:"stats-number",children:U()}),(0,l.jsx)("span",{className:"stats-label",children:"Granted Permissions"})]})]}),(0,l.jsxs)("div",{className:"form-section",children:[(0,l.jsxs)("label",{htmlFor:"role",className:"form-label-modern",children:[(0,l.jsx)("i",{className:"bi bi-person-gear text-primary mr-2"}),"Select Role to Manage",M&&(0,l.jsx)("span",{className:"refresh-indicator ml-2",children:"\ud83d\udd04 Updating..."})]}),(0,l.jsxs)(a.A.Select,{name:"role",id:"role",className:"form-control-modern",value:y,onChange:e=>{x(e.target.value)},disabled:!D()||M,title:D()?"":'You need "Update Role Permissions" access to change role selection',children:[(0,l.jsx)("option",{value:"",children:"-- Choose a role to configure --"}),v.map(e=>(0,l.jsxs)("option",{value:e.value,children:[e.label," - ",e.description||"No description"]},e.value))]}),y&&(0,l.jsxs)("small",{className:"text-muted mt-2 d-block",children:[(0,l.jsx)("i",{className:"bi bi-info-circle mr-1"}),"This will update permissions for users with the role: ",(null===(s=v.find(e=>e.value===y))||void 0===s?void 0:s.label)||y]}),!D()&&(0,l.jsxs)("div",{className:"alert alert-warning mt-3",children:[(0,l.jsx)("i",{className:"bi bi-lock-fill mr-2"}),'You have view-only access. To modify role permissions, you need the "Update Role Permissions" access.']})]}),y&&(0,l.jsxs)("div",{className:"permissions-container",children:[(0,l.jsxs)("div",{className:"permissions-header",children:[(0,l.jsxs)("div",{className:"permissions-title",children:[(0,l.jsxs)("h4",{children:["Configure Permissions for ",(0,l.jsx)("span",{className:"role-highlight",children:(null===(i=v.find(e=>e.value===y))||void 0===i?void 0:i.label)||y})]}),(0,l.jsx)("p",{className:"permissions-subtitle",children:"Grant or revoke access to different system modules and features"})]}),(0,l.jsx)("div",{className:"permissions-actions",children:(0,l.jsxs)("button",{className:"btn-toggle-all",onClick:()=>{const e=U()!==B(),s={...w};z.forEach(i=>{s[i.category]=s[i.category]||{},i.permissions.forEach(n=>{s[i.category][n.id]=e})}),j(s)},children:[(0,l.jsx)("i",{className:"bi "+(U()===B()?"bi-check-square":"bi-square")}),U()===B()?"Unselect All":"Select All"]})})]}),(0,l.jsx)("div",{className:"permissions-grid",children:z.map(e=>(0,l.jsxs)("div",{className:"permission-card",children:[(0,l.jsxs)("div",{className:"permission-card-header",children:[(0,l.jsx)("div",{className:"permission-icon",children:(0,l.jsx)("i",{className:G(e.category)})}),(0,l.jsxs)("div",{className:"permission-card-title",children:[(0,l.jsx)("h5",{children:e.name}),(0,l.jsx)("p",{children:F(e.category)})]}),(0,l.jsxs)("div",{className:"permission-status",children:[(0,l.jsx)("span",{className:"enabled-count",children:e.permissions.filter(s=>{var i;return null===(i=w[e.category])||void 0===i?void 0:i[s.id]}).length}),(0,l.jsxs)("span",{className:"total-count",children:["/",e.permissions.length]})]})]}),(0,l.jsx)("div",{className:"permission-card-body",children:e.permissions.map(s=>{var i,n,a,t,o,c,d,m,u;const g=(null===(i=w[e.category])||void 0===i?void 0:i[s.id])||!1,p=`${e.category}_${s.id}`;return(0,l.jsxs)("div",{className:"permission-toggle "+(g?"active":""),children:[(0,l.jsxs)("label",{className:"permission-switch",children:[(0,l.jsx)("input",{type:"checkbox",checked:g,onChange:()=>(async(e,s)=>{var i;if(!D())return;if(!y)return;const n=v.find(e=>e.value===y);if(!n)return;const a=`${e}_${s}`,t=!(null===(i=w[e])||void 0===i||!i[s]);if("settings"===e&&"settings_view"===s&&!0===t){var o;const s=(null===(o=z.find(e=>"settings"===e.category))||void 0===o?void 0:o.permissions)||[],i={};s.forEach(e=>{i[e.id]=!1}),j(s=>({...s,[e]:{...s[e]||{},...i}}))}else if("subsections"===e&&"read"===s&&!0===t){var l;const s=(null===(l=z.find(e=>"subsections"===e.category))||void 0===l?void 0:l.permissions)||[],i={};s.forEach(e=>{i[e.id]=!1}),j(s=>({...s,[e]:{...s[e]||{},...i}}))}else if("users"===e&&"read"===s&&!0===t){var c;const s=(null===(c=z.find(e=>"users"===e.category))||void 0===c?void 0:c.permissions)||[],i={};s.forEach(e=>{i[e.id]=!1}),j(s=>({...s,[e]:{...s[e]||{},...i}}))}else if("reports"===e&&"view_reports"===s&&!0===t){var d;const s=(null===(d=z.find(e=>"reports"===e.category))||void 0===d?void 0:d.permissions)||[],i={};s.forEach(e=>{i[e.id]=!1}),j(s=>({...s,[e]:{...s[e]||{},...i}}))}else if("reports"===e&&"view_reports"!==s&&!0===!t){var m;if(null===(m=w[e])||void 0===m||!m.view_reports)return void(0,r.Vv)({type:"warning",title:"Prerequisite Required",message:'Cannot enable report permissions without "View Reports" permission. Please enable "View Reports" first.',duration:4e3});j(i=>({...i,[e]:{...i[e],[s]:!t}}))}else if("role_management"===e&&"view_roles"===s&&!0===t){var u;const s=(null===(u=z.find(e=>"role_management"===e.category))||void 0===u?void 0:u.permissions)||[],i={};s.forEach(e=>{i[e.id]=!1}),j(s=>({...s,[e]:{...s[e]||{},...i}}))}else if("role_management"===e&&"view_roles"!==s&&!0===!t){var g;if(null===(g=w[e])||void 0===g||!g.view_roles)return void(0,r.Vv)({type:"warning",title:"Prerequisite Required",message:'Cannot enable role-management permissions without "View Roles" permission. Please enable "View Roles" first.',duration:4e3});j(i=>({...i,[e]:{...i[e],[s]:!t}}))}else j(i=>({...i,[e]:{...i[e],[s]:!t}}));P(e=>({...e,[a]:!0}));try{const i=localStorage.getItem("token"),a={...n.permissions||{}};if(a[e]={...a[e]||{}},"settings"===e&&"settings_view"===s&&!0===t){var p;const s=(null===(p=z.find(e=>"settings"===e.category))||void 0===p?void 0:p.permissions)||[];a[e]=a[e]||{},s.forEach(s=>{a[e][s.id]=!1})}else if("subsections"===e&&"read"===s&&!0===t){var f;const s=(null===(f=z.find(e=>"subsections"===e.category))||void 0===f?void 0:f.permissions)||[];a[e]=a[e]||{},s.forEach(s=>{a[e][s.id]=!1})}else if("users"===e&&"read"===s&&!0===t){var b;const s=(null===(b=z.find(e=>"users"===e.category))||void 0===b?void 0:b.permissions)||[];a[e]=a[e]||{},s.forEach(s=>{a[e][s.id]=!1})}else if("reports"===e&&"view_reports"===s&&!0===t){var x;const s=(null===(x=z.find(e=>"reports"===e.category))||void 0===x?void 0:x.permissions)||[];a[e]=a[e]||{},s.forEach(s=>{a[e][s.id]=!1})}else if("role_management"===e&&"view_roles"===s&&!0===t){var _;const s=(null===(_=z.find(e=>"role_management"===e.category))||void 0===_?void 0:_.permissions)||[];a[e]=a[e]||{},s.forEach(s=>{a[e][s.id]=!1})}else a[e][s]=!t;const r=await fetch(`http://localhost:5000/api/permissions/roles/${n._id}`,{method:"PUT",headers:{"Content-Type":"application/json",...i?{Authorization:`Bearer ${i}`}:{}},body:JSON.stringify({permissions:a})});if(r.ok){const e=await r.json().catch(()=>({}));e&&e.data&&(h(s=>s.map(s=>s._id===n._id?e.data:s)),window.dispatchEvent(new CustomEvent("permissionsChanged")))}else j(i=>({...i,[e]:{...i[e],[s]:t}})),console.error("Failed to update permission toggle",await r.text())}catch(N){j(i=>({...i,[e]:{...i[e],[s]:t}})),console.error("Error updating permission toggle:",N)}finally{P(e=>{const s={...e};return delete s[a],s})}})(e.category,s.id),disabled:!D()||!!T[p]||"settings"===e.category&&"settings_view"!==s.id&&!(null!==w&&void 0!==w&&null!==(n=w.settings)&&void 0!==n&&n.settings_view)||"subsections"===e.category&&"read"!==s.id&&!(null!==w&&void 0!==w&&null!==(a=w.subsections)&&void 0!==a&&a.read)||"users"===e.category&&"read"!==s.id&&!(null!==w&&void 0!==w&&null!==(t=w.users)&&void 0!==t&&t.read)||"role_management"===e.category&&"view_roles"!==s.id&&!(null!==w&&void 0!==w&&null!==(o=w.role_management)&&void 0!==o&&o.view_roles),title:`${s.name} - ${O(s.id,e.category)}`+("settings"!==e.category||"settings_view"===s.id||null!==w&&void 0!==w&&null!==(c=w.settings)&&void 0!==c&&c.settings_view?"":' \u2014 Requires "View Settings" permission')+("subsections"!==e.category||"read"===s.id||null!==w&&void 0!==w&&null!==(d=w.subsections)&&void 0!==d&&d.read?"":' \u2014 Requires "View Sub-Sections" permission')+("users"!==e.category||"read"===s.id||null!==w&&void 0!==w&&null!==(m=w.users)&&void 0!==m&&m.read?"":' \u2014 Requires "View Users" permission')+("role_management"!==e.category||"view_roles"===s.id||null!==w&&void 0!==w&&null!==(u=w.role_management)&&void 0!==u&&u.view_roles?"":' \u2014 Requires "View Roles" permission')}),(0,l.jsx)("span",{className:"slider"})]}),(0,l.jsxs)("div",{className:"permission-info",children:[(0,l.jsx)("span",{className:"permission-name",children:s.name}),T[p]&&(0,l.jsx)("span",{className:"save-indicator ml-2",title:"Saving...",children:"\ud83d\udd04"}),(0,l.jsx)("span",{className:"permission-desc",children:O(s.id,e.category)})]})]},`${e.category}_${s.id}`)})})]},e.category))}),(0,l.jsxs)("div",{className:"permissions-footer",children:[(0,l.jsxs)("div",{className:"permission-summary",children:[(0,l.jsxs)("div",{className:"summary-stat",children:[(0,l.jsx)("span",{className:"stat-number",children:U()}),(0,l.jsx)("span",{className:"stat-label",children:"permissions granted"})]}),(0,l.jsxs)("div",{className:"summary-stat",children:[(0,l.jsx)("span",{className:"stat-number",children:B()-U()}),(0,l.jsx)("span",{className:"stat-label",children:"permissions restricted"})]})]}),(0,l.jsxs)("button",{className:"btn-save-permissions",onClick:e=>{e.preventDefault(),S(!0)},disabled:!D()||V,children:[(0,l.jsx)("i",{className:"bi bi-shield-check"}),V?"Applying...":"Save Permission Changes"]})]})]})]}):(0,l.jsxs)("div",{className:"alert alert-warning mt-4",children:[(0,l.jsx)("i",{className:"bi bi-lock-fill mr-2"}),'You do not have permission to view role access management. Contact a Super Admin for "roles.read" access.']}),C&&(0,l.jsx)("div",{className:"modal-overlay confirm-overlay",onClick:()=>S(!1),children:(0,l.jsxs)("div",{className:"modal-content confirm-modal",onClick:e=>e.stopPropagation(),children:[(0,l.jsx)("div",{className:"modal-header",children:(0,l.jsx)("h4",{className:"confirm-title",children:"Confirm Save"})}),(0,l.jsx)("div",{className:"modal-body",children:(0,l.jsxs)("p",{children:["Are you sure you want to save these permission changes for ",(0,l.jsx)("strong",{children:(null===(c=v.find(e=>e.value===y))||void 0===c?void 0:c.label)||y}),"?"]})}),(0,l.jsxs)("div",{className:"modal-footer",children:[(0,l.jsx)("button",{className:"btn-save-modern btn-secondary btn-confirm-cancel",onClick:()=>S(!1),children:"Cancel"}),(0,l.jsx)("button",{className:"btn-save-modern btn-success btn-confirm-confirm",onClick:async()=>{await(async()=>{S(!1);const e=v.find(e=>e.value===y);if(e)try{const s=localStorage.getItem("token"),i={...e.permissions||{}};Object.keys(w).forEach(e=>{i[e]={...i[e],...w[e]}}),await fetch(`http://localhost:5000/api/permissions/roles/${e._id}`,{method:"PUT",headers:{"Content-Type":"application/json",...s?{Authorization:`Bearer ${s}`}:{}},body:JSON.stringify({permissions:i})}),await q(),window.dispatchEvent(new CustomEvent("permissionsChanged")),N(!0)}catch(s){console.error("Error saving permissions:",s);try{await q()}catch(i){console.error("Error refreshing roles after failed save:",i)}}})()},children:"Yes, Save"})]})]})}),_&&(0,l.jsx)("div",{className:"modal-overlay",style:{backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9999},children:(0,l.jsx)("div",{className:"modal-content success-modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:"400px",textAlign:"center",border:"3px solid #2575fc",borderRadius:"15px",background:"linear-gradient(135deg, #f8f9fa, #e9ecef)",boxShadow:"0 10px 30px rgba(37,117,252,0.15)"},children:(0,l.jsxs)("div",{style:{padding:"30px"},children:[(0,l.jsx)("div",{style:{fontSize:"48px",color:"#2575fc",marginBottom:"18px"},children:(0,l.jsx)("i",{className:"bi bi-check-circle-fill"})}),(0,l.jsx)("h2",{style:{color:"#2575fc",marginBottom:"12px",fontWeight:"bold"},children:"Success!"}),(0,l.jsxs)("p",{style:{fontSize:"15px",color:"#495057",marginBottom:"18px",lineHeight:"1.5"},children:["Permissions updated for ",(0,l.jsx)("strong",{children:(null===(d=v.find(e=>e.value===y))||void 0===d?void 0:d.label)||y}),"."]}),(0,l.jsxs)("button",{className:"btn-save-modern btn-success",onClick:()=>N(!1),style:{padding:"8px 24px",fontSize:"15px",fontWeight:"bold"},children:[(0,l.jsx)("i",{className:"bi bi-check2"})," OK"]})]})})})]})}},154:(e,s,i)=>{i.d(s,{M5:()=>l,Vv:()=>o});let n=null;const a=()=>(n||(n=document.createElement("div"),n.id="modern-alert-container",n.className="modern-alert-container",document.body.appendChild(n)),n),t=()=>`alert-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,r=e=>{const s={success:"bi-check-circle-fill",error:"bi-x-circle-fill",warning:"bi-exclamation-triangle-fill",info:"bi-info-circle-fill",question:"bi-question-circle-fill"};return s[e]||s.info},o=e=>{let{type:s="info",title:i="",message:n="",duration:o=3e3,showConfetti:l=!1}=e;const d=a(),u=t(),g=document.createElement("div");if(g.id=u,g.className=`modern-alert modern-alert-${s} modern-alert-enter`,g.innerHTML=`\n    <div class="modern-alert-content">\n      <div class="modern-alert-icon">\n        <i class="bi ${r(s)}"></i>\n      </div>\n      <div class="modern-alert-body">\n        ${i?`<div class="modern-alert-title">${i}</div>`:""}\n        <div class="modern-alert-message">${n}</div>\n      </div>\n      <button class="modern-alert-close" onclick="this.closest('.modern-alert').remove()">\n        <i class="bi bi-x"></i>\n      </button>\n    </div>\n    <div class="modern-alert-progress"></div>\n  `,d.appendChild(g),setTimeout(()=>{g.classList.remove("modern-alert-enter"),g.classList.add("modern-alert-active")},10),l&&"success"===s&&m(),o>0){const e=g.querySelector(".modern-alert-progress");e&&(e.style.animationDuration=`${o}ms`),setTimeout(()=>{c(u)},o)}return u},l=e=>{let{title:s="Confirm",message:i="Are you sure?",confirmText:n="Confirm",cancelText:o="Cancel",type:l="warning",showIcon:c=!0}=e;return new Promise(e=>{const m=a(),u=t(),g=document.createElement("div");g.id=u,g.className="modern-dialog-overlay modern-dialog-enter",g.innerHTML=`\n      <div class="modern-dialog modern-dialog-${l}">\n        <div class="modern-dialog-content">\n          ${c?`\n            <div class="modern-dialog-icon">\n              <i class="bi ${r("danger"===l?"error":l)}"></i>\n            </div>\n          `:""}\n          <div class="modern-dialog-body">\n            <h3 class="modern-dialog-title">${s}</h3>\n            <p class="modern-dialog-message">${i}</p>\n          </div>\n        </div>\n        <div class="modern-dialog-footer">\n          <button class="modern-btn modern-btn-cancel" data-action="cancel">\n            <i class="bi bi-x-circle"></i>\n            ${o}\n          </button>\n          <button class="modern-btn modern-btn-confirm modern-btn-${l}" data-action="confirm">\n            <i class="bi bi-check-circle"></i>\n            ${n}\n          </button>\n        </div>\n      </div>\n    `,m.appendChild(g),setTimeout(()=>{g.classList.remove("modern-dialog-enter"),g.classList.add("modern-dialog-active")},10),g.addEventListener("click",s=>{if(s.target.closest("[data-action]")){const i=s.target.closest("[data-action]").dataset.action;d(u),e("confirm"===i)}else s.target===g&&(d(u),e(!1))})})},c=e=>{const s=document.getElementById(e);s&&(s.classList.remove("modern-alert-active"),s.classList.add("modern-alert-exit"),setTimeout(()=>{s.remove()},300))},d=e=>{const s=document.getElementById(e);s&&(s.classList.remove("modern-dialog-active"),s.classList.add("modern-dialog-exit"),setTimeout(()=>{s.remove()},300))},m=()=>{const e=document.body;for(let s=0;s<50;s++){const s=document.createElement("div");s.className="confetti",s.style.left=100*Math.random()+"%",s.style.animationDelay=.5*Math.random()+"s",s.style.backgroundColor=u(),e.appendChild(s),setTimeout(()=>s.remove(),3e3)}},u=()=>{const e=["#ff6b6b","#4ecdc4","#45b7d1","#f9ca24","#6c5ce7","#a29bfe","#fd79a8"];return e[Math.floor(Math.random()*e.length)]}}}]);
//# sourceMappingURL=12.aefe2e0a.chunk.js.map