/*! For license information please see main.b5a06bc1.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},139:(e,t)=>{var n;!function(){"use strict";var i={}.hasOwnProperty;function s(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,o(n)))}return e}function o(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return s.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)i.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(s.default=s,e.exports=s):void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()},153:(e,t,n)=>{"use strict";var i=n(43),s=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,r=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,n){var i,o={},d=null,c=null;for(i in void 0!==n&&(d=""+n),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,i)&&!l.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===o[i]&&(o[i]=t[i]);return{$$typeof:s,type:e,key:d,ref:c,props:o,_owner:r.current}}t.Fragment=o,t.jsx=d,t.jsxs=d},173:(e,t,n)=>{e.exports=n(497)()},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function x(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=v.prototype;var y=b.prototype=new x;y.constructor=b,m(y,v.prototype),y.isPureReactComponent=!0;var S=Array.isArray,j=Object.prototype.hasOwnProperty,w={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,i){var s,o={},a=null,r=null;if(null!=t)for(s in void 0!==t.ref&&(r=t.ref),void 0!==t.key&&(a=""+t.key),t)j.call(t,s)&&!_.hasOwnProperty(s)&&(o[s]=t[s]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var d=Array(l),c=0;c<l;c++)d[c]=arguments[c+2];o.children=d}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===o[s]&&(o[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:r,props:o,_owner:w.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,s,o,a){var r=typeof e;"undefined"!==r&&"boolean"!==r||(e=null);var l=!1;if(null===e)l=!0;else switch(r){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=e),e=""===o?"."+E(l,0):o,S(a)?(s="",null!=e&&(s=e.replace(C,"$&/")+"/"),I(a,t,s,"",function(e){return e})):null!=a&&(k(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",S(e))for(var d=0;d<e.length;d++){var c=o+E(r=e[d],d);l+=I(r,t,s,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),d=0;!(r=e.next()).done;)l+=I(r=r.value,t,s,c=o+E(r,d++),a);else if("object"===r)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function D(e,t,n){if(null==e)return e;var i=[],s=0;return I(e,i,"","",function(e){return t.call(n,e,s++)}),i}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},M={transition:null},R={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:M,ReactCurrentOwner:w};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:D,forEach:function(e,t,n){D(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return D(e,function(){t++}),t},toArray:function(e){return D(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=O,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),o=e.key,a=e.ref,r=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,r=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(d in t)j.call(t,d)&&!_.hasOwnProperty(d)&&(s[d]=void 0===t[d]&&void 0!==l?l[d]:t[d])}var d=arguments.length-2;if(1===d)s.children=i;else if(1<d){l=Array(d);for(var c=0;c<d;c++)l[c]=arguments[c+2];s.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:s,_owner:r}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:r,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return T.current.useCallback(e,t)},t.useContext=function(e){return T.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return T.current.useDeferredValue(e)},t.useEffect=function(e,t){return T.current.useEffect(e,t)},t.useId=function(){return T.current.useId()},t.useImperativeHandle=function(e,t,n){return T.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.current.useMemo(e,t)},t.useReducer=function(e,t,n){return T.current.useReducer(e,t,n)},t.useRef=function(e){return T.current.useRef(e)},t.useState=function(e){return T.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return T.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return T.current.useTransition()},t.version="18.3.1"},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,s=e[i];if(!(0<o(s,t)))break e;e[i]=t,e[n]=s,n=i}}function i(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,s=e.length,a=s>>>1;i<a;){var r=2*(i+1)-1,l=e[r],d=r+1,c=e[d];if(0>o(l,n))d<s&&0>o(c,l)?(e[i]=c,e[d]=n,i=d):(e[i]=l,e[r]=n,i=r);else{if(!(d<s&&0>o(c,n)))break e;e[i]=c,e[d]=n,i=d}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var r=Date,l=r.now();t.unstable_now=function(){return r.now()-l}}var d=[],c=[],u=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=i(c);null!==t;){if(null===t.callback)s(c);else{if(!(t.startTime<=e))break;s(c),t.sortIndex=t.expirationTime,n(d,t)}t=i(c)}}function S(e){if(g=!1,y(e),!m)if(null!==i(d))m=!0,M(j);else{var t=i(c);null!==t&&R(S,t.startTime-e)}}function j(e,n){m=!1,g&&(g=!1,x(k),k=-1),f=!0;var o=p;try{for(y(n),h=i(d);null!==h&&(!(h.expirationTime>n)||e&&!I());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var r=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof r?h.callback=r:h===i(d)&&s(d),y(n)}else s(d);h=i(d)}if(null!==h)var l=!0;else{var u=i(c);null!==u&&R(S,u.startTime-n),l=!1}return l}finally{h=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,_=!1,N=null,k=-1,C=5,E=-1;function I(){return!(t.unstable_now()-E<C)}function D(){if(null!==N){var e=t.unstable_now();E=e;var n=!0;try{n=N(!0,e)}finally{n?w():(_=!1,N=null)}}else _=!1}if("function"===typeof b)w=function(){b(D)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,T=A.port2;A.port1.onmessage=D,w=function(){T.postMessage(null)}}else w=function(){v(D,0)};function M(e){N=e,_||(_=!0,w())}function R(e,n){k=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,M(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(d)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,s,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var r=-1;break;case 2:r=250;break;case 5:r=1073741823;break;case 4:r=1e4;break;default:r=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:o,expirationTime:r=o+r,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===i(d)&&e===i(c)&&(g?(x(k),k=-1):g=!0,R(S,o-a))):(e.sortIndex=r,n(d,e),m||f||(m=!0,M(j))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},391:(e,t,n)=>{"use strict";var i=n(950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},440:e=>{"use strict";var t=function(){};e.exports=t},497:(e,t,n)=>{"use strict";var i=n(218);function s(){}function o(){}o.resetWarningCache=s,e.exports=function(){function e(e,t,n,s,o,a){if(a!==i){var r=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:s};return n.PropTypes=n,n}},579:(e,t,n)=>{"use strict";e.exports=n(153)},730:(e,t,n)=>{"use strict";var i=n(43),s=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,r={};function l(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(r[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,i,s,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function b(e,t,n,i){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,i)&&(n=null),i||null===s?function(e){return!!u.call(f,e)||!u.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,i=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,x);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,x);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,x);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var y=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),j=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var P,L=Object.assign;function z(e){if(void 0===P)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return"\n"+P+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var i=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){i=d}e.call(t.prototype)}else{try{throw Error()}catch(d){i=d}e()}}catch(d){if(d&&i&&"string"===typeof d.stack){for(var s=d.stack.split("\n"),o=i.stack.split("\n"),a=s.length-1,r=o.length-1;1<=a&&0<=r&&s[a]!==o[r];)r--;for(;1<=a&&0<=r;a--,r--)if(s[a]!==o[r]){if(1!==a||1!==r)do{if(a--,0>--r||s[a]!==o[r]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=r);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function $(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case j:return"Portal";case N:return"Profiler";case _:return"StrictMode";case I:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){i=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=V(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Q(e,t);var n=H(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(i&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),i=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function re(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?re(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var de,ce,ue=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((de=de||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=de.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return ce(e,t)})}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),s=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,s):e[n]=s}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,we=null,_e=null;function Ne(e){if(e=bs(e)){if("function"!==typeof je)throw Error(o(280));var t=e.stateNode;t&&(t=Ss(t),je(e.stateNode,e.type,t))}}function ke(e){we?_e?_e.push(e):_e=[e]:we=e}function Ce(){if(we){var e=we,t=_e;if(_e=we=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Ee(e,t){return e(t)}function Ie(){}var De=!1;function Ae(e,t,n){if(De)return e(t,n);De=!0;try{return Ee(e,t,n)}finally{De=!1,(null!==we||null!==_e)&&(Ie(),Ce())}}function Te(e,t){var n=e.stateNode;if(null===n)return null;var i=Ss(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Me=!1;if(c)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ce){Me=!1}function Oe(e,t,n,i,s,o,a,r,l){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(c){this.onError(c)}}var Pe=!1,Le=null,ze=!1,Fe=null,Be={onError:function(e){Pe=!0,Le=e}};function $e(e,t,n,i,s,o,a,r,l){Pe=!1,Le=null,Oe.apply(Be,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ue(e)!==e)throw Error(o(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(i=s.return)){n=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return He(s),e;if(a===i)return He(s),t;a=a.sibling}throw Error(o(188))}if(n.return!==i.return)n=s,i=a;else{for(var r=!1,l=s.child;l;){if(l===n){r=!0,n=s,i=a;break}if(l===i){r=!0,i=s,n=a;break}l=l.sibling}if(!r){for(l=a.child;l;){if(l===n){r=!0,n=a,i=s;break}if(l===i){r=!0,i=a,n=s;break}l=l.sibling}if(!r)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ye=s.unstable_scheduleCallback,Ge=s.unstable_cancelCallback,Je=s.unstable_shouldYield,Ke=s.unstable_requestPaint,Qe=s.unstable_now,Xe=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,it=s.unstable_IdlePriority,st=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(rt(e)/lt|0)|0},rt=Math.log,lt=Math.LN2;var dt=64,ct=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,s=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var r=a&~s;0!==r?i=ut(r):0!==(o&=a)&&(i=ut(o))}else 0!==(a=n&~s)?i=ut(a):0!==o&&(i=ut(o));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(o=t&-t)||16===s&&0!==(4194240&o)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)s=1<<(n=31-at(t)),i|=e[n],t&=~s;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=dt;return 0===(4194240&(dt<<=1))&&(dt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function xt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-at(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}var bt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var St,jt,wt,_t,Nt,kt=!1,Ct=[],Et=null,It=null,Dt=null,At=new Map,Tt=new Map,Mt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Pt(e,t,n,i,s,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},null!==t&&(null!==(t=bs(t))&&jt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Lt(e){var t=xs(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Nt(e.priority,function(){wt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bs(n))&&jt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);ye=i,n.target.dispatchEvent(i),ye=null,t.shift()}return!0}function Ft(e,t,n){zt(e)&&n.delete(t)}function Bt(){kt=!1,null!==Et&&zt(Et)&&(Et=null),null!==It&&zt(It)&&(It=null),null!==Dt&&zt(Dt)&&(Dt=null),At.forEach(Ft),Tt.forEach(Ft)}function $t(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Bt)))}function Ut(e){function t(t){return $t(t,e)}if(0<Ct.length){$t(Ct[0],e);for(var n=1;n<Ct.length;n++){var i=Ct[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Et&&$t(Et,e),null!==It&&$t(It,e),null!==Dt&&$t(Dt,e),At.forEach(t),Tt.forEach(t),n=0;n<Mt.length;n++)(i=Mt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Mt.shift()}var Wt=y.ReactCurrentBatchConfig,Ht=!0;function Vt(e,t,n,i){var s=bt,o=Wt.transition;Wt.transition=null;try{bt=1,Yt(e,t,n,i)}finally{bt=s,Wt.transition=o}}function qt(e,t,n,i){var s=bt,o=Wt.transition;Wt.transition=null;try{bt=4,Yt(e,t,n,i)}finally{bt=s,Wt.transition=o}}function Yt(e,t,n,i){if(Ht){var s=Jt(e,t,n,i);if(null===s)Hi(e,t,i,Gt,n),Ot(e,i);else if(function(e,t,n,i,s){switch(t){case"focusin":return Et=Pt(Et,e,t,n,i,s),!0;case"dragenter":return It=Pt(It,e,t,n,i,s),!0;case"mouseover":return Dt=Pt(Dt,e,t,n,i,s),!0;case"pointerover":var o=s.pointerId;return At.set(o,Pt(At.get(o)||null,e,t,n,i,s)),!0;case"gotpointercapture":return o=s.pointerId,Tt.set(o,Pt(Tt.get(o)||null,e,t,n,i,s)),!0}return!1}(s,e,t,n,i))i.stopPropagation();else if(Ot(e,i),4&t&&-1<Rt.indexOf(e)){for(;null!==s;){var o=bs(s);if(null!==o&&St(o),null===(o=Jt(e,t,n,i))&&Hi(e,t,i,Gt,n),o===s)break;s=o}null!==s&&i.stopPropagation()}else Hi(e,t,i,null,n)}}var Gt=null;function Jt(e,t,n,i){if(Gt=null,null!==(e=xs(e=Se(i))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Qt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,i=n.length,s="value"in Qt?Qt.value:Qt.textContent,o=s.length;for(e=0;e<i&&n[e]===s[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===s[o-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function sn(){return!1}function on(e){function t(t,n,i,s,o){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:sn,this.isPropagationStopped=sn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,rn,ln,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(dn),un=L({},dn,{view:0,detail:0}),hn=on(un),pn=L({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,rn=e.screenY-ln.screenY):rn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:rn}}),fn=on(pn),mn=on(L({},pn,{dataTransfer:0})),gn=on(L({},un,{relatedTarget:0})),vn=on(L({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=L({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(xn),yn=on(L({},dn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function Nn(){return _n}var kn=L({},un,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=on(kn),En=on(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=on(L({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn})),Dn=on(L({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tn=on(An),Mn=[9,13,27,32],Rn=c&&"CompositionEvent"in window,On=null;c&&"documentMode"in document&&(On=document.documentMode);var Pn=c&&"TextEvent"in window&&!On,Ln=c&&(!Rn||On&&8<On&&11>=On),zn=String.fromCharCode(32),Fn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Vn(e,t,n,i){ke(i),0<(t=qi(t,"onChange")).length&&(n=new cn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var qn=null,Yn=null;function Gn(e){zi(e,0)}function Jn(e){if(Y(ys(e)))return e}function Kn(e,t){if("change"===e)return t}var Qn=!1;if(c){var Xn;if(c){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"===typeof ei.oninput}Xn=Zn}else Xn=!1;Qn=Xn&&(!document.documentMode||9<document.documentMode)}function ti(){qn&&(qn.detachEvent("onpropertychange",ni),Yn=qn=null)}function ni(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];Vn(t,Yn,e,Se(e)),Ae(Gn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Yn=n,(qn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function si(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function oi(e,t){if("click"===e)return Jn(t)}function ai(e,t){if("input"===e||"change"===e)return Jn(t)}var ri="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(ri(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!u.call(t,s)||!ri(e[s],t[s]))return!1}return!0}function di(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ci(e,t){var n,i=di(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=di(i)}}function ui(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ui(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ui(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(i.start,s);i=void 0===i.end?o:Math.min(i.end,s),!e.extend&&o>i&&(s=i,i=o,o=s),s=ci(n,o);var a=ci(n,i);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=c&&"documentMode"in document&&11>=document.documentMode,gi=null,vi=null,xi=null,bi=!1;function yi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==gi||gi!==G(i)||("selectionStart"in(i=gi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},xi&&li(xi,i)||(xi=i,0<(i=qi(vi,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function Si(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ji={animationend:Si("Animation","AnimationEnd"),animationiteration:Si("Animation","AnimationIteration"),animationstart:Si("Animation","AnimationStart"),transitionend:Si("Transition","TransitionEnd")},wi={},_i={};function Ni(e){if(wi[e])return wi[e];if(!ji[e])return e;var t,n=ji[e];for(t in n)if(n.hasOwnProperty(t)&&t in _i)return wi[e]=n[t];return e}c&&(_i=document.createElement("div").style,"AnimationEvent"in window||(delete ji.animationend.animation,delete ji.animationiteration.animation,delete ji.animationstart.animation),"TransitionEvent"in window||delete ji.transitionend.transition);var ki=Ni("animationend"),Ci=Ni("animationiteration"),Ei=Ni("animationstart"),Ii=Ni("transitionend"),Di=new Map,Ai="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ti(e,t){Di.set(e,t),l(t,[e])}for(var Mi=0;Mi<Ai.length;Mi++){var Ri=Ai[Mi];Ti(Ri.toLowerCase(),"on"+(Ri[0].toUpperCase()+Ri.slice(1)))}Ti(ki,"onAnimationEnd"),Ti(Ci,"onAnimationIteration"),Ti(Ei,"onAnimationStart"),Ti("dblclick","onDoubleClick"),Ti("focusin","onFocus"),Ti("focusout","onBlur"),Ti(Ii,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oi));function Li(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,s,a,r,l,d){if($e.apply(this,arguments),Pe){if(!Pe)throw Error(o(198));var c=Le;Pe=!1,Le=null,ze||(ze=!0,Fe=c)}}(i,t,void 0,e),e.currentTarget=null}function zi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var a=i.length-1;0<=a;a--){var r=i[a],l=r.instance,d=r.currentTarget;if(r=r.listener,l!==o&&s.isPropagationStopped())break e;Li(s,r,d),o=l}else for(a=0;a<i.length;a++){if(l=(r=i[a]).instance,d=r.currentTarget,r=r.listener,l!==o&&s.isPropagationStopped())break e;Li(s,r,d),o=l}}}if(ze)throw e=Fe,ze=!1,Fe=null,e}function Fi(e,t){var n=t[ms];void 0===n&&(n=t[ms]=new Set);var i=e+"__bubble";n.has(i)||(Wi(t,e,2,!1),n.add(i))}function Bi(e,t,n){var i=0;t&&(i|=4),Wi(n,e,i,t)}var $i="_reactListening"+Math.random().toString(36).slice(2);function Ui(e){if(!e[$i]){e[$i]=!0,a.forEach(function(t){"selectionchange"!==t&&(Pi.has(t)||Bi(t,!1,e),Bi(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$i]||(t[$i]=!0,Bi("selectionchange",!1,t))}}function Wi(e,t,n,i){switch(Kt(t)){case 1:var s=Vt;break;case 4:s=qt;break;default:s=Yt}n=s.bind(null,t,n,e),s=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),i?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Hi(e,t,n,i,s){var o=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var r=i.stateNode.containerInfo;if(r===s||8===r.nodeType&&r.parentNode===s)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==r;){if(null===(a=xs(r)))return;if(5===(l=a.tag)||6===l){i=o=a;continue e}r=r.parentNode}}i=i.return}Ae(function(){var i=o,s=Se(n),a=[];e:{var r=Di.get(e);if(void 0!==r){var l=cn,d=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":d="focus",l=gn;break;case"focusout":d="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case ki:case Ci:case Ei:l=vn;break;case Ii:l=Dn;break;case"scroll":l=hn;break;case"wheel":l=Tn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var c=0!==(4&t),u=!c&&"scroll"===e,h=c?null!==r?r+"Capture":null:r;c=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Te(f,h))&&c.push(Vi(f,m,p)))),u)break;f=f.return}0<c.length&&(r=new l(r,d,null,n,s),a.push({event:r,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(r="mouseover"===e||"pointerover"===e)||n===ye||!(d=n.relatedTarget||n.fromElement)||!xs(d)&&!d[fs])&&(l||r)&&(r=s.window===s?s:(r=s.ownerDocument)?r.defaultView||r.parentWindow:window,l?(l=i,null!==(d=(d=n.relatedTarget||n.toElement)?xs(d):null)&&(d!==(u=Ue(d))||5!==d.tag&&6!==d.tag)&&(d=null)):(l=null,d=i),l!==d)){if(c=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=En,m="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==l?r:ys(l),p=null==d?r:ys(d),(r=new c(m,f+"leave",l,n,s)).target=u,r.relatedTarget=p,m=null,xs(s)===i&&((c=new c(h,f+"enter",d,n,s)).target=p,c.relatedTarget=u,m=c),u=m,l&&d)e:{for(h=d,f=0,p=c=l;p;p=Yi(p))f++;for(p=0,m=h;m;m=Yi(m))p++;for(;0<f-p;)c=Yi(c),f--;for(;0<p-f;)h=Yi(h),p--;for(;f--;){if(c===h||null!==h&&c===h.alternate)break e;c=Yi(c),h=Yi(h)}c=null}else c=null;null!==l&&Gi(a,r,l,c,!1),null!==d&&null!==u&&Gi(a,u,d,c,!0)}if("select"===(l=(r=i?ys(i):window).nodeName&&r.nodeName.toLowerCase())||"input"===l&&"file"===r.type)var g=Kn;else if(Hn(r))if(Qn)g=ai;else{g=si;var v=ii}else(l=r.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(g=oi);switch(g&&(g=g(e,i))?Vn(a,g,n,s):(v&&v(e,r,i),"focusout"===e&&(v=r._wrapperState)&&v.controlled&&"number"===r.type&&ee(r,"number",r.value)),v=i?ys(i):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gi=v,vi=i,xi=null);break;case"focusout":xi=vi=gi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,yi(a,n,s);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":yi(a,n,s)}var x;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Un?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Un||"onCompositionStart"!==b?"onCompositionEnd"===b&&Un&&(x=en()):(Xt="value"in(Qt=s)?Qt.value:Qt.textContent,Un=!0)),0<(v=qi(i,b)).length&&(b=new yn(b,e,null,n,s),a.push({event:b,listeners:v}),x?b.data=x:null!==(x=$n(n))&&(b.data=x))),(x=Pn?function(e,t){switch(e){case"compositionend":return $n(t);case"keypress":return 32!==t.which?null:(Fn=!0,zn);case"textInput":return(e=t.data)===zn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Rn&&Bn(e,t)?(e=en(),Zt=Xt=Qt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=qi(i,"onBeforeInput")).length&&(s=new yn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:i}),s.data=x))}zi(a,t)})}function Vi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",i=[];null!==e;){var s=e,o=s.stateNode;5===s.tag&&null!==o&&(s=o,null!=(o=Te(e,n))&&i.unshift(Vi(e,o,s)),null!=(o=Te(e,t))&&i.push(Vi(e,o,s))),e=e.return}return i}function Yi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gi(e,t,n,i,s){for(var o=t._reactName,a=[];null!==n&&n!==i;){var r=n,l=r.alternate,d=r.stateNode;if(null!==l&&l===i)break;5===r.tag&&null!==d&&(r=d,s?null!=(l=Te(n,o))&&a.unshift(Vi(n,l,r)):s||null!=(l=Te(n,o))&&a.push(Vi(n,l,r))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Ji=/\r\n?/g,Ki=/\u0000|\uFFFD/g;function Qi(e){return("string"===typeof e?e:""+e).replace(Ji,"\n").replace(Ki,"")}function Xi(e,t,n){if(t=Qi(t),Qi(e)!==t&&n)throw Error(o(425))}function Zi(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var is="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,os="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof os?function(e){return os.resolve(null).then(e).catch(rs)}:is;function rs(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===i)return e.removeChild(s),void Ut(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=s}while(n);Ut(t)}function ds(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function cs(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),hs="__reactFiber$"+us,ps="__reactProps$"+us,fs="__reactContainer$"+us,ms="__reactEvents$"+us,gs="__reactListeners$"+us,vs="__reactHandles$"+us;function xs(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fs]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=cs(e);null!==e;){if(n=e[hs])return n;e=cs(e)}return t}n=(e=n).parentNode}return null}function bs(e){return!(e=e[hs]||e[fs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ys(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Ss(e){return e[ps]||null}var js=[],ws=-1;function _s(e){return{current:e}}function Ns(e){0>ws||(e.current=js[ws],js[ws]=null,ws--)}function ks(e,t){ws++,js[ws]=e.current,e.current=t}var Cs={},Es=_s(Cs),Is=_s(!1),Ds=Cs;function As(e,t){var n=e.type.contextTypes;if(!n)return Cs;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s,o={};for(s in n)o[s]=t[s];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ts(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ms(){Ns(Is),Ns(Es)}function Rs(e,t,n){if(Es.current!==Cs)throw Error(o(168));ks(Es,t),ks(Is,n)}function Os(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var s in i=i.getChildContext())if(!(s in t))throw Error(o(108,W(e)||"Unknown",s));return L({},n,i)}function Ps(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,Ds=Es.current,ks(Es,e),ks(Is,Is.current),!0}function Ls(e,t,n){var i=e.stateNode;if(!i)throw Error(o(169));n?(e=Os(e,t,Ds),i.__reactInternalMemoizedMergedChildContext=e,Ns(Is),Ns(Es),ks(Es,e)):Ns(Is),ks(Is,n)}var zs=null,Fs=!1,Bs=!1;function $s(e){null===zs?zs=[e]:zs.push(e)}function Us(){if(!Bs&&null!==zs){Bs=!0;var e=0,t=bt;try{var n=zs;for(bt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}zs=null,Fs=!1}catch(s){throw null!==zs&&(zs=zs.slice(e+1)),Ye(Ze,Us),s}finally{bt=t,Bs=!1}}return null}var Ws=[],Hs=0,Vs=null,qs=0,Ys=[],Gs=0,Js=null,Ks=1,Qs="";function Xs(e,t){Ws[Hs++]=qs,Ws[Hs++]=Vs,Vs=e,qs=t}function Zs(e,t,n){Ys[Gs++]=Ks,Ys[Gs++]=Qs,Ys[Gs++]=Js,Js=e;var i=Ks;e=Qs;var s=32-at(i)-1;i&=~(1<<s),n+=1;var o=32-at(t)+s;if(30<o){var a=s-s%5;o=(i&(1<<a)-1).toString(32),i>>=a,s-=a,Ks=1<<32-at(t)+s|n<<s|i,Qs=o+e}else Ks=1<<o|n<<s|i,Qs=e}function eo(e){null!==e.return&&(Xs(e,1),Zs(e,1,0))}function to(e){for(;e===Vs;)Vs=Ws[--Hs],Ws[Hs]=null,qs=Ws[--Hs],Ws[Hs]=null;for(;e===Js;)Js=Ys[--Gs],Ys[Gs]=null,Qs=Ys[--Gs],Ys[Gs]=null,Ks=Ys[--Gs],Ys[Gs]=null}var no=null,io=null,so=!1,oo=null;function ao(e,t){var n=Ad(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ro(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,io=ds(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,io=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Js?{id:Ks,overflow:Qs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ad(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,io=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(so){var t=io;if(t){var n=t;if(!ro(e,t)){if(lo(e))throw Error(o(418));t=ds(n.nextSibling);var i=no;t&&ro(e,t)?ao(i,n):(e.flags=-4097&e.flags|2,so=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,so=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!so)return uo(e),so=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=io)){if(lo(e))throw po(),Error(o(418));for(;t;)ao(e,t),t=ds(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){io=ds(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}io=null}}else io=no?ds(e.stateNode.nextSibling):null;return!0}function po(){for(var e=io;e;)e=ds(e.nextSibling)}function fo(){io=no=null,so=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=y.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,e));var s=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function xo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function yo(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Md(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function r(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Ld(n,e.mode,i)).return=e,t):((t=s(t,n)).return=e,t)}function d(e,t,n,i){var o=n.type;return o===w?u(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===T&&bo(o)===t.type)?((i=s(t,n.props)).ref=vo(e,t,n),i.return=e,i):((i=Rd(n.type,n.key,n.props,null,e.mode,i)).ref=vo(e,t,n),i.return=e,i)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zd(n,e.mode,i)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,i,o){return null===t||7!==t.tag?((t=Od(n,e.mode,i,o)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ld(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return(n=Rd(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case j:return(t=zd(t,e.mode,n)).return=e,t;case T:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Od(t,e.mode,n,null)).return=e,t;xo(e,t)}return null}function p(e,t,n,i){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===s?d(e,t,n,i):null;case j:return n.key===s?c(e,t,n,i):null;case T:return p(e,t,(s=n._init)(n._payload),i)}if(te(n)||O(n))return null!==s?null:u(e,t,n,i,null);xo(e,n)}return null}function f(e,t,n,i,s){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,s);if("object"===typeof i&&null!==i){switch(i.$$typeof){case S:return d(t,e=e.get(null===i.key?n:i.key)||null,i,s);case j:return c(t,e=e.get(null===i.key?n:i.key)||null,i,s);case T:return f(e,t,n,(0,i._init)(i._payload),s)}if(te(i)||O(i))return u(t,e=e.get(n)||null,i,s,null);xo(t,i)}return null}function m(s,o,r,l){for(var d=null,c=null,u=o,m=o=0,g=null;null!==u&&m<r.length;m++){u.index>m?(g=u,u=null):g=u.sibling;var v=p(s,u,r[m],l);if(null===v){null===u&&(u=g);break}e&&u&&null===v.alternate&&t(s,u),o=a(v,o,m),null===c?d=v:c.sibling=v,c=v,u=g}if(m===r.length)return n(s,u),so&&Xs(s,m),d;if(null===u){for(;m<r.length;m++)null!==(u=h(s,r[m],l))&&(o=a(u,o,m),null===c?d=u:c.sibling=u,c=u);return so&&Xs(s,m),d}for(u=i(s,u);m<r.length;m++)null!==(g=f(u,s,m,r[m],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?m:g.key),o=a(g,o,m),null===c?d=g:c.sibling=g,c=g);return e&&u.forEach(function(e){return t(s,e)}),so&&Xs(s,m),d}function g(s,r,l,d){var c=O(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var u=c=null,m=r,g=r=0,v=null,x=l.next();null!==m&&!x.done;g++,x=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(s,m,x.value,d);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(s,m),r=a(b,r,g),null===u?c=b:u.sibling=b,u=b,m=v}if(x.done)return n(s,m),so&&Xs(s,g),c;if(null===m){for(;!x.done;g++,x=l.next())null!==(x=h(s,x.value,d))&&(r=a(x,r,g),null===u?c=x:u.sibling=x,u=x);return so&&Xs(s,g),c}for(m=i(s,m);!x.done;g++,x=l.next())null!==(x=f(m,s,g,x.value,d))&&(e&&null!==x.alternate&&m.delete(null===x.key?g:x.key),r=a(x,r,g),null===u?c=x:u.sibling=x,u=x);return e&&m.forEach(function(e){return t(s,e)}),so&&Xs(s,g),c}return function e(i,o,a,l){if("object"===typeof a&&null!==a&&a.type===w&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case S:e:{for(var d=a.key,c=o;null!==c;){if(c.key===d){if((d=a.type)===w){if(7===c.tag){n(i,c.sibling),(o=s(c,a.props.children)).return=i,i=o;break e}}else if(c.elementType===d||"object"===typeof d&&null!==d&&d.$$typeof===T&&bo(d)===c.type){n(i,c.sibling),(o=s(c,a.props)).ref=vo(i,c,a),o.return=i,i=o;break e}n(i,c);break}t(i,c),c=c.sibling}a.type===w?((o=Od(a.props.children,i.mode,l,a.key)).return=i,i=o):((l=Rd(a.type,a.key,a.props,null,i.mode,l)).ref=vo(i,o,a),l.return=i,i=l)}return r(i);case j:e:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(i,o.sibling),(o=s(o,a.children||[])).return=i,i=o;break e}n(i,o);break}t(i,o),o=o.sibling}(o=zd(a,i.mode,l)).return=i,i=o}return r(i);case T:return e(i,o,(c=a._init)(a._payload),l)}if(te(a))return m(i,o,a,l);if(O(a))return g(i,o,a,l);xo(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(i,o.sibling),(o=s(o,a)).return=i,i=o):(n(i,o),(o=Ld(a,i.mode,l)).return=i,i=o),r(i)):n(i,o)}}var So=yo(!0),jo=yo(!1),wo=_s(null),_o=null,No=null,ko=null;function Co(){ko=No=_o=null}function Eo(e){var t=wo.current;Ns(wo),e._currentValue=t}function Io(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Do(e,t){_o=e,ko=No=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(br=!0),e.firstContext=null)}function Ao(e){var t=e._currentValue;if(ko!==e)if(e={context:e,memoizedValue:t,next:null},null===No){if(null===_o)throw Error(o(308));No=e,_o.dependencies={lanes:0,firstContext:e}}else No=No.next=e;return t}var To=null;function Mo(e){null===To?To=[e]:To.push(e)}function Ro(e,t,n,i){var s=t.interleaved;return null===s?(n.next=n,Mo(t)):(n.next=s.next,s.next=n),t.interleaved=n,Oo(e,i)}function Oo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Po=!1;function Lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bo(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&El)){var s=i.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),i.pending=t,Oo(e,n)}return null===(s=i.interleaved)?(t.next=t,Mo(i)):(t.next=s.next,s.next=t),i.interleaved=t,Oo(e,n)}function $o(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,xt(e,n)}}function Uo(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var s=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?s=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?s=o=t:o=o.next=t}else s=o=t;return n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wo(e,t,n,i){var s=e.updateQueue;Po=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,r=s.shared.pending;if(null!==r){s.shared.pending=null;var l=r,d=l.next;l.next=null,null===a?o=d:a.next=d,a=l;var c=e.alternate;null!==c&&((r=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===r?c.firstBaseUpdate=d:r.next=d,c.lastBaseUpdate=l))}if(null!==o){var u=s.baseState;for(a=0,c=d=l=null,r=o;;){var h=r.lane,p=r.eventTime;if((i&h)===h){null!==c&&(c=c.next={eventTime:p,lane:0,tag:r.tag,payload:r.payload,callback:r.callback,next:null});e:{var f=e,m=r;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){u=f.call(p,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,u,h):f)||void 0===h)break e;u=L({},u,h);break e;case 2:Po=!0}}null!==r.callback&&0!==r.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[r]:h.push(r))}else p={eventTime:p,lane:h,tag:r.tag,payload:r.payload,callback:r.callback,next:null},null===c?(d=c=p,l=u):c=c.next=p,a|=h;if(null===(r=r.next)){if(null===(r=s.shared.pending))break;r=(h=r).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===c&&(l=u),s.baseState=l,s.firstBaseUpdate=d,s.lastBaseUpdate=c,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===o&&(s.shared.lanes=0);Pl|=a,e.lanes=a,e.memoizedState=u}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(null!==s){if(i.callback=null,i=n,"function"!==typeof s)throw Error(o(191,s));s.call(i)}}}var Vo={},qo=_s(Vo),Yo=_s(Vo),Go=_s(Vo);function Jo(e){if(e===Vo)throw Error(o(174));return e}function Ko(e,t){switch(ks(Go,t),ks(Yo,e),ks(qo,Vo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ns(qo),ks(qo,t)}function Qo(){Ns(qo),Ns(Yo),Ns(Go)}function Xo(e){Jo(Go.current);var t=Jo(qo.current),n=le(t,e.type);t!==n&&(ks(Yo,e),ks(qo,n))}function Zo(e){Yo.current===e&&(Ns(qo),Ns(Yo))}var ea=_s(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ia(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var sa=y.ReactCurrentDispatcher,oa=y.ReactCurrentBatchConfig,aa=0,ra=null,la=null,da=null,ca=!1,ua=!1,ha=0,pa=0;function fa(){throw Error(o(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ri(e[n],t[n]))return!1;return!0}function ga(e,t,n,i,s,a){if(aa=a,ra=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sa.current=null===e||null===e.memoizedState?Za:er,e=n(i,s),ua){a=0;do{if(ua=!1,ha=0,25<=a)throw Error(o(301));a+=1,da=la=null,t.updateQueue=null,sa.current=tr,e=n(i,s)}while(ua)}if(sa.current=Xa,t=null!==la&&null!==la.next,aa=0,da=la=ra=null,ca=!1,t)throw Error(o(300));return e}function va(){var e=0!==ha;return ha=0,e}function xa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===da?ra.memoizedState=da=e:da=da.next=e,da}function ba(){if(null===la){var e=ra.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===da?ra.memoizedState:da.next;if(null!==t)da=t,la=e;else{if(null===e)throw Error(o(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===da?ra.memoizedState=da=e:da=da.next=e}return da}function ya(e,t){return"function"===typeof t?t(e):t}function Sa(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=la,s=i.baseQueue,a=n.pending;if(null!==a){if(null!==s){var r=s.next;s.next=a.next,a.next=r}i.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,i=i.baseState;var l=r=null,d=null,c=a;do{var u=c.lane;if((aa&u)===u)null!==d&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===d?(l=d=h,r=i):d=d.next=h,ra.lanes|=u,Pl|=u}c=c.next}while(null!==c&&c!==a);null===d?r=i:d.next=l,ri(i,t.memoizedState)||(br=!0),t.memoizedState=i,t.baseState=r,t.baseQueue=d,n.lastRenderedState=i}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,ra.lanes|=a,Pl|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ja(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var r=s=s.next;do{a=e(a,r.action),r=r.next}while(r!==s);ri(a,t.memoizedState)||(br=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function wa(){}function _a(e,t){var n=ra,i=ba(),s=t(),a=!ri(i.memoizedState,s);if(a&&(i.memoizedState=s,br=!0),i=i.queue,Pa(Ca.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==da&&1&da.memoizedState.tag){if(n.flags|=2048,Aa(9,ka.bind(null,n,i,s,t),void 0,null),null===Il)throw Error(o(349));0!==(30&aa)||Na(n,t,s)}return s}function Na(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ra.updateQueue)?(t={lastEffect:null,stores:null},ra.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ka(e,t,n,i){t.value=n,t.getSnapshot=i,Ea(t)&&Ia(e)}function Ca(e,t,n){return n(function(){Ea(t)&&Ia(e)})}function Ea(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ri(e,n)}catch(i){return!0}}function Ia(e){var t=Oo(e,1);null!==t&&nd(t,e,1,-1)}function Da(e){var t=xa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:e},t.queue=e,e=e.dispatch=Ga.bind(null,ra,e),[t.memoizedState,e]}function Aa(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=ra.updateQueue)?(t={lastEffect:null,stores:null},ra.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ta(){return ba().memoizedState}function Ma(e,t,n,i){var s=xa();ra.flags|=e,s.memoizedState=Aa(1|t,n,void 0,void 0===i?null:i)}function Ra(e,t,n,i){var s=ba();i=void 0===i?null:i;var o=void 0;if(null!==la){var a=la.memoizedState;if(o=a.destroy,null!==i&&ma(i,a.deps))return void(s.memoizedState=Aa(t,n,o,i))}ra.flags|=e,s.memoizedState=Aa(1|t,n,o,i)}function Oa(e,t){return Ma(8390656,8,e,t)}function Pa(e,t){return Ra(2048,8,e,t)}function La(e,t){return Ra(4,2,e,t)}function za(e,t){return Ra(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ba(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4,4,Fa.bind(null,t,e),n)}function $a(){}function Ua(e,t){var n=ba();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ma(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Wa(e,t){var n=ba();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ma(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,br=!0),e.memoizedState=n):(ri(n,t)||(n=mt(),ra.lanes|=n,Pl|=n,e.baseState=!0),t)}function Va(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var i=oa.transition;oa.transition={};try{e(!1),t()}finally{bt=n,oa.transition=i}}function qa(){return ba().memoizedState}function Ya(e,t,n){var i=td(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ja(e))Ka(t,n);else if(null!==(n=Ro(e,t,n,i))){nd(n,e,i,ed()),Qa(n,t,i)}}function Ga(e,t,n){var i=td(e),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ja(e))Ka(t,s);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,r=o(a,n);if(s.hasEagerState=!0,s.eagerState=r,ri(r,a)){var l=t.interleaved;return null===l?(s.next=s,Mo(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(d){}null!==(n=Ro(e,t,s,i))&&(nd(n,e,i,s=ed()),Qa(n,t,i))}}function Ja(e){var t=e.alternate;return e===ra||null!==t&&t===ra}function Ka(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qa(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,xt(e,n)}}var Xa={readContext:Ao,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Za={readContext:Ao,useCallback:function(e,t){return xa().memoizedState=[e,void 0===t?null:t],e},useContext:Ao,useEffect:Oa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var n=xa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=xa();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Ya.bind(null,ra,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},xa().memoizedState=e},useState:Da,useDebugValue:$a,useDeferredValue:function(e){return xa().memoizedState=e},useTransition:function(){var e=Da(!1),t=e[0];return e=Va.bind(null,e[1]),xa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=ra,s=xa();if(so){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Il)throw Error(o(349));0!==(30&aa)||Na(i,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Oa(Ca.bind(null,i,a,e),[e]),i.flags|=2048,Aa(9,ka.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=xa(),t=Il.identifierPrefix;if(so){var n=Qs;t=":"+t+"R"+(n=(Ks&~(1<<32-at(Ks)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},er={readContext:Ao,useCallback:Ua,useContext:Ao,useEffect:Pa,useImperativeHandle:Ba,useInsertionEffect:La,useLayoutEffect:za,useMemo:Wa,useReducer:Sa,useRef:Ta,useState:function(){return Sa(ya)},useDebugValue:$a,useDeferredValue:function(e){return Ha(ba(),la.memoizedState,e)},useTransition:function(){return[Sa(ya)[0],ba().memoizedState]},useMutableSource:wa,useSyncExternalStore:_a,useId:qa,unstable_isNewReconciler:!1},tr={readContext:Ao,useCallback:Ua,useContext:Ao,useEffect:Pa,useImperativeHandle:Ba,useInsertionEffect:La,useLayoutEffect:za,useMemo:Wa,useReducer:ja,useRef:Ta,useState:function(){return ja(ya)},useDebugValue:$a,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:Ha(t,la.memoizedState,e)},useTransition:function(){return[ja(ya)[0],ba().memoizedState]},useMutableSource:wa,useSyncExternalStore:_a,useId:qa,unstable_isNewReconciler:!1};function nr(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ir(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var sr={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ed(),s=td(e),o=Fo(i,s);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Bo(e,o,s))&&(nd(t,e,s,i),$o(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ed(),s=td(e),o=Fo(i,s);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Bo(e,o,s))&&(nd(t,e,s,i),$o(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ed(),i=td(e),s=Fo(n,i);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Bo(e,s,i))&&(nd(t,e,i,n),$o(t,e,i))}};function or(e,t,n,i,s,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(s,o))}function ar(e,t,n){var i=!1,s=Cs,o=t.contextType;return"object"===typeof o&&null!==o?o=Ao(o):(s=Ts(t)?Ds:Es.current,o=(i=null!==(i=t.contextTypes)&&void 0!==i)?As(e,s):Cs),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=sr,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function rr(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&sr.enqueueReplaceState(t,t.state,null)}function lr(e,t,n,i){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Lo(e);var o=t.contextType;"object"===typeof o&&null!==o?s.context=Ao(o):(o=Ts(t)?Ds:Es.current,s.context=As(e,o)),s.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ir(e,t,o,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&sr.enqueueReplaceState(s,s.state,null),Wo(e,n,s,i),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function dr(e,t){try{var n="",i=t;do{n+=$(i),i=i.return}while(i);var s=n}catch(o){s="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:s,digest:null}}function cr(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ur(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hr="function"===typeof WeakMap?WeakMap:Map;function pr(e,t,n){(n=Fo(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Hl||(Hl=!0,Vl=i),ur(0,t)},n}function fr(e,t,n){(n=Fo(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var s=t.value;n.payload=function(){return i(s)},n.callback=function(){ur(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ur(0,t),"function"!==typeof i&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mr(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new hr;var s=new Set;i.set(t,s)}else void 0===(s=i.get(t))&&(s=new Set,i.set(t,s));s.has(n)||(s.add(n),e=Nd.bind(null,e,t,n),t.then(e,e))}function gr(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vr(e,t,n,i,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fo(-1,1)).tag=2,Bo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var xr=y.ReactCurrentOwner,br=!1;function yr(e,t,n,i){t.child=null===e?jo(t,null,n,i):So(t,e.child,n,i)}function Sr(e,t,n,i,s){n=n.render;var o=t.ref;return Do(t,s),i=ga(e,t,n,i,o,s),n=va(),null===e||br?(so&&n&&eo(t),t.flags|=1,yr(e,t,i,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Hr(e,t,s))}function jr(e,t,n,i,s){if(null===e){var o=n.type;return"function"!==typeof o||Td(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rd(n.type,null,i,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,wr(e,t,o,i,s))}if(o=e.child,0===(e.lanes&s)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:li)(a,i)&&e.ref===t.ref)return Hr(e,t,s)}return t.flags|=1,(e=Md(o,i)).ref=t.ref,e.return=t,t.child=e}function wr(e,t,n,i,s){if(null!==e){var o=e.memoizedProps;if(li(o,i)&&e.ref===t.ref){if(br=!1,t.pendingProps=i=o,0===(e.lanes&s))return t.lanes=e.lanes,Hr(e,t,s);0!==(131072&e.flags)&&(br=!0)}}return kr(e,t,n,i,s)}function _r(e,t,n){var i=t.pendingProps,s=i.children,o=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ks(Ml,Tl),Tl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ks(Ml,Tl),Tl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==o?o.baseLanes:n,ks(Ml,Tl),Tl|=i}else null!==o?(i=o.baseLanes|n,t.memoizedState=null):i=n,ks(Ml,Tl),Tl|=i;return yr(e,t,s,n),t.child}function Nr(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function kr(e,t,n,i,s){var o=Ts(n)?Ds:Es.current;return o=As(t,o),Do(t,s),n=ga(e,t,n,i,o,s),i=va(),null===e||br?(so&&i&&eo(t),t.flags|=1,yr(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Hr(e,t,s))}function Cr(e,t,n,i,s){if(Ts(n)){var o=!0;Ps(t)}else o=!1;if(Do(t,s),null===t.stateNode)Wr(e,t),ar(t,n,i),lr(t,n,i,s),i=!0;else if(null===e){var a=t.stateNode,r=t.memoizedProps;a.props=r;var l=a.context,d=n.contextType;"object"===typeof d&&null!==d?d=Ao(d):d=As(t,d=Ts(n)?Ds:Es.current);var c=n.getDerivedStateFromProps,u="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(r!==i||l!==d)&&rr(t,a,i,d),Po=!1;var h=t.memoizedState;a.state=h,Wo(t,i,a,s),l=t.memoizedState,r!==i||h!==l||Is.current||Po?("function"===typeof c&&(ir(t,n,c,i),l=t.memoizedState),(r=Po||or(t,n,r,i,h,l,d))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=d,i=r):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,zo(e,t),r=t.memoizedProps,d=t.type===t.elementType?r:nr(t.type,r),a.props=d,u=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ao(l):l=As(t,l=Ts(n)?Ds:Es.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(r!==u||h!==l)&&rr(t,a,i,l),Po=!1,h=t.memoizedState,a.state=h,Wo(t,i,a,s);var f=t.memoizedState;r!==u||h!==f||Is.current||Po?("function"===typeof p&&(ir(t,n,p,i),f=t.memoizedState),(d=Po||or(t,n,d,i,h,f,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=l,i=d):("function"!==typeof a.componentDidUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Er(e,t,n,i,o,s)}function Er(e,t,n,i,s,o){Nr(e,t);var a=0!==(128&t.flags);if(!i&&!a)return s&&Ls(t,n,!1),Hr(e,t,o);i=t.stateNode,xr.current=t;var r=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=So(t,e.child,null,o),t.child=So(t,null,r,o)):yr(e,t,r,o),t.memoizedState=i.state,s&&Ls(t,n,!0),t.child}function Ir(e){var t=e.stateNode;t.pendingContext?Rs(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Rs(0,t.context,!1),Ko(e,t.containerInfo)}function Dr(e,t,n,i,s){return fo(),mo(s),t.flags|=256,yr(e,t,n,i),t.child}var Ar,Tr,Mr,Rr,Or={dehydrated:null,treeContext:null,retryLane:0};function Pr(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lr(e,t,n){var i,s=t.pendingProps,a=ea.current,r=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(r=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),ks(ea,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,r?(s=t.mode,r=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==r?(r.childLanes=0,r.pendingProps=l):r=Pd(l,s,0,null),e=Od(e,s,n,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=Pr(n),t.memoizedState=Or,e):zr(t,l));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,n,i,s,a,r){if(n)return 256&t.flags?(t.flags&=-257,Fr(e,t,r,i=cr(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,s=t.mode,i=Pd({mode:"visible",children:i.children},s,0,null),(a=Od(a,s,r,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!==(1&t.mode)&&So(t,e.child,null,r),t.child.memoizedState=Pr(r),t.memoizedState=Or,a);if(0===(1&t.mode))return Fr(e,t,r,null);if("$!"===s.data){if(i=s.nextSibling&&s.nextSibling.dataset)var l=i.dgst;return i=l,Fr(e,t,r,i=cr(a=Error(o(419)),i,void 0))}if(l=0!==(r&e.childLanes),br||l){if(null!==(i=Il)){switch(r&-r){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(i.suspendedLanes|r))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Oo(e,s),nd(i,e,s,-1))}return md(),Fr(e,t,r,i=cr(Error(o(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Cd.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,io=ds(s.nextSibling),no=t,so=!0,oo=null,null!==e&&(Ys[Gs++]=Ks,Ys[Gs++]=Qs,Ys[Gs++]=Js,Ks=e.id,Qs=e.overflow,Js=t),t=zr(t,i.children),t.flags|=4096,t)}(e,t,l,s,i,a,n);if(r){r=s.fallback,l=t.mode,i=(a=e.child).sibling;var d={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=d,t.deletions=null):(s=Md(a,d)).subtreeFlags=14680064&a.subtreeFlags,null!==i?r=Md(i,r):(r=Od(r,l,n,null)).flags|=2,r.return=t,s.return=t,s.sibling=r,t.child=s,s=r,r=t.child,l=null===(l=e.child.memoizedState)?Pr(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},r.memoizedState=l,r.childLanes=e.childLanes&~n,t.memoizedState=Or,s}return e=(r=e.child).sibling,s=Md(r,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function zr(e,t){return(t=Pd({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fr(e,t,n,i){return null!==i&&mo(i),So(t,e.child,null,n),(e=zr(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Br(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Io(e.return,t,n)}function $r(e,t,n,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s)}function Ur(e,t,n){var i=t.pendingProps,s=i.revealOrder,o=i.tail;if(yr(e,t,i.children,n),0!==(2&(i=ea.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Br(e,n,t);else if(19===e.tag)Br(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(ks(ea,i),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),$r(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ta(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}$r(t,!0,n,null,o);break;case"together":$r(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wr(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hr(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Pl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Md(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Md(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vr(e,t){if(!so)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function qr(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,i|=14680064&s.subtreeFlags,i|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Yr(e,t,n){var i=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qr(t),null;case 1:case 17:return Ts(t.type)&&Ms(),qr(t),null;case 3:return i=t.stateNode,Qo(),Ns(Is),Ns(Es),ia(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ad(oo),oo=null))),Tr(e,t),qr(t),null;case 5:Zo(t);var s=Jo(Go.current);if(n=t.type,null!==e&&null!=t.stateNode)Mr(e,t,n,i,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(o(166));return qr(t),null}if(e=Jo(qo.current),ho(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[hs]=t,i[ps]=a,e=0!==(1&t.mode),n){case"dialog":Fi("cancel",i),Fi("close",i);break;case"iframe":case"object":case"embed":Fi("load",i);break;case"video":case"audio":for(s=0;s<Oi.length;s++)Fi(Oi[s],i);break;case"source":Fi("error",i);break;case"img":case"image":case"link":Fi("error",i),Fi("load",i);break;case"details":Fi("toggle",i);break;case"input":K(i,a),Fi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Fi("invalid",i);break;case"textarea":se(i,a),Fi("invalid",i)}for(var l in xe(n,a),s=null,a)if(a.hasOwnProperty(l)){var d=a[l];"children"===l?"string"===typeof d?i.textContent!==d&&(!0!==a.suppressHydrationWarning&&Xi(i.textContent,d,e),s=["children",d]):"number"===typeof d&&i.textContent!==""+d&&(!0!==a.suppressHydrationWarning&&Xi(i.textContent,d,e),s=["children",""+d]):r.hasOwnProperty(l)&&null!=d&&"onScroll"===l&&Fi("scroll",i)}switch(n){case"input":q(i),Z(i,a,!0);break;case"textarea":q(i),ae(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=Zi)}i=s,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=re(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[hs]=t,e[ps]=i,Ar(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,i),n){case"dialog":Fi("cancel",e),Fi("close",e),s=i;break;case"iframe":case"object":case"embed":Fi("load",e),s=i;break;case"video":case"audio":for(s=0;s<Oi.length;s++)Fi(Oi[s],e);s=i;break;case"source":Fi("error",e),s=i;break;case"img":case"image":case"link":Fi("error",e),Fi("load",e),s=i;break;case"details":Fi("toggle",e),s=i;break;case"input":K(e,i),s=J(e,i),Fi("invalid",e);break;case"option":default:s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=L({},i,{value:void 0}),Fi("invalid",e);break;case"textarea":se(e,i),s=ie(e,i),Fi("invalid",e)}for(a in xe(n,s),d=s)if(d.hasOwnProperty(a)){var c=d[a];"style"===a?ge(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&ue(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(r.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Fi("scroll",e):null!=c&&b(e,a,c,l))}switch(n){case"input":q(e),Z(e,i,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=i.value&&e.setAttribute("value",""+H(i.value));break;case"select":e.multiple=!!i.multiple,null!=(a=i.value)?ne(e,!!i.multiple,a,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qr(t),null;case 6:if(e&&null!=t.stateNode)Rr(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(o(166));if(n=Jo(Go.current),Jo(qo.current),ho(t)){if(i=t.stateNode,n=t.memoizedProps,i[hs]=t,(a=i.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Xi(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xi(i.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[hs]=t,t.stateNode=i}return qr(t),null;case 13:if(Ns(ea),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(so&&null!==io&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,a=!1;else if(a=ho(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[hs]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qr(t),a=!1}else null!==oo&&(ad(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Rl&&(Rl=3):md())),null!==t.updateQueue&&(t.flags|=4),qr(t),null);case 4:return Qo(),Tr(e,t),null===e&&Ui(t.stateNode.containerInfo),qr(t),null;case 10:return Eo(t.type._context),qr(t),null;case 19:if(Ns(ea),null===(a=t.memoizedState))return qr(t),null;if(i=0!==(128&t.flags),null===(l=a.rendering))if(i)Vr(a,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Vr(a,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ks(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Ul&&(t.flags|=128,i=!0,Vr(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ta(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vr(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!so)return qr(t),null}else 2*Qe()-a.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,i=!0,Vr(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=ea.current,ks(ea,i?1&n|2:1&n),t):(qr(t),null);case 22:case 23:return ud(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Tl)&&(qr(t),6&t.subtreeFlags&&(t.flags|=8192)):qr(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Gr(e,t){switch(to(t),t.tag){case 1:return Ts(t.type)&&Ms(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qo(),Ns(Is),Ns(Es),ia(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Ns(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ns(ea),null;case 4:return Qo(),null;case 10:return Eo(t.type._context),null;case 22:case 23:return ud(),null;default:return null}}Ar=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Tr=function(){},Mr=function(e,t,n,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,Jo(qo.current);var o,a=null;switch(n){case"input":s=J(e,s),i=J(e,i),a=[];break;case"select":s=L({},s,{value:void 0}),i=L({},i,{value:void 0}),a=[];break;case"textarea":s=ie(e,s),i=ie(e,i),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof i.onClick&&(e.onclick=Zi)}for(c in xe(n,i),n=null,s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&null!=s[c])if("style"===c){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(r.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in i){var d=i[c];if(l=null!=s?s[c]:void 0,i.hasOwnProperty(c)&&d!==l&&(null!=d||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in d)d.hasOwnProperty(o)&&l[o]!==d[o]&&(n||(n={}),n[o]=d[o])}else n||(a||(a=[]),a.push(c,n)),n=d;else"dangerouslySetInnerHTML"===c?(d=d?d.__html:void 0,l=l?l.__html:void 0,null!=d&&l!==d&&(a=a||[]).push(c,d)):"children"===c?"string"!==typeof d&&"number"!==typeof d||(a=a||[]).push(c,""+d):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(r.hasOwnProperty(c)?(null!=d&&"onScroll"===c&&Fi("scroll",e),a||l===d||(a=[])):(a=a||[]).push(c,d))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Rr=function(e,t,n,i){n!==i&&(t.flags|=4)};var Jr=!1,Kr=!1,Qr="function"===typeof WeakSet?WeakSet:Set,Xr=null;function Zr(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){_d(e,t,i)}else n.current=null}function el(e,t,n){try{n()}catch(i){_d(e,t,i)}}var tl=!1;function nl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var s=i=i.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,void 0!==o&&el(t,n,o)}s=s.next}while(s!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[ps],delete t[ms],delete t[gs],delete t[vs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function rl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function dl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(dl(e,t,n),e=e.sibling;null!==e;)dl(e,t,n),e=e.sibling}var cl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(st,n)}catch(r){}switch(n.tag){case 5:Kr||Zr(n,t);case 6:var i=cl,s=ul;cl=null,hl(e,t,n),ul=s,null!==(cl=i)&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Ut(e)):ls(cl,n.stateNode));break;case 4:i=cl,s=ul,cl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),cl=i,ul=s;break;case 0:case 11:case 14:case 15:if(!Kr&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){s=i=i.next;do{var o=s,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,t,a),s=s.next}while(s!==i)}hl(e,t,n);break;case 1:if(!Kr&&(Zr(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(r){_d(n,t,r)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Kr=(i=Kr)||null!==n.memoizedState,hl(e,t,n),Kr=i):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qr),t.forEach(function(t){var i=Ed.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var s=n[i];try{var a=e,r=t,l=r;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,ul=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===cl)throw Error(o(160));pl(a,r,s),cl=null,ul=!1;var d=s.alternate;null!==d&&(d.return=null),s.return=null}catch(c){_d(s,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&i){try{nl(3,e,e.return),il(3,e)}catch(g){_d(e,e.return,g)}try{nl(5,e,e.return)}catch(g){_d(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&i&&null!==n&&Zr(n,n.return);break;case 5:if(ml(t,e),vl(e),512&i&&null!==n&&Zr(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){_d(e,e.return,g)}}if(4&i&&null!=(s=e.stateNode)){var a=e.memoizedProps,r=null!==n?n.memoizedProps:a,l=e.type,d=e.updateQueue;if(e.updateQueue=null,null!==d)try{"input"===l&&"radio"===a.type&&null!=a.name&&Q(s,a),be(l,r);var c=be(l,a);for(r=0;r<d.length;r+=2){var u=d[r],h=d[r+1];"style"===u?ge(s,h):"dangerouslySetInnerHTML"===u?ue(s,h):"children"===u?he(s,h):b(s,u,h,c)}switch(l){case"input":X(s,a);break;case"textarea":oe(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(s,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[ps]=a}catch(g){_d(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&i){if(null===e.stateNode)throw Error(o(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){_d(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(g){_d(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||($l=Qe())),4&i&&fl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Kr=(c=Kr)||u,ml(t,e),Kr=c):ml(t,e),vl(e),8192&i){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&0!==(1&e.mode))for(Xr=e,u=e.child;null!==u;){for(h=Xr=u;null!==Xr;){switch(f=(p=Xr).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zr(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){i=p,n=p.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){_d(i,n,g)}}break;case 5:Zr(p,p.return);break;case 22:if(null!==p.memoizedState){Sl(h);continue}}null!==f?(f.return=p,Xr=f):Sl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{s=h.stateNode,c?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,r=void 0!==(d=h.memoizedProps.style)&&null!==d&&d.hasOwnProperty("display")?d.display:null,l.style.display=me("display",r))}catch(g){_d(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){_d(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&i&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var i=n;break e}n=n.return}throw Error(o(160))}switch(i.tag){case 5:var s=i.stateNode;32&i.flags&&(he(s,""),i.flags&=-33),dl(e,rl(e),s);break;case 3:case 4:var a=i.stateNode.containerInfo;ll(e,rl(e),a);break;default:throw Error(o(161))}}catch(r){_d(e,e.return,r)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){Xr=e,bl(e,t,n)}function bl(e,t,n){for(var i=0!==(1&e.mode);null!==Xr;){var s=Xr,o=s.child;if(22===s.tag&&i){var a=null!==s.memoizedState||Jr;if(!a){var r=s.alternate,l=null!==r&&null!==r.memoizedState||Kr;r=Jr;var d=Kr;if(Jr=a,(Kr=l)&&!d)for(Xr=s;null!==Xr;)l=(a=Xr).child,22===a.tag&&null!==a.memoizedState?jl(s):null!==l?(l.return=a,Xr=l):jl(s);for(;null!==o;)Xr=o,bl(o,t,n),o=o.sibling;Xr=s,Jr=r,Kr=d}yl(e)}else 0!==(8772&s.subtreeFlags)&&null!==o?(o.return=s,Xr=o):yl(e)}}function yl(e){for(;null!==Xr;){var t=Xr;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Kr||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Kr)if(null===n)i.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:nr(t.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ho(t,a,i);break;case 3:var r=t.updateQueue;if(null!==r){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,r,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Ut(h)}}}break;default:throw Error(o(163))}Kr||512&t.flags&&sl(t)}catch(p){_d(t,t.return,p)}}if(t===e){Xr=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xr=n;break}Xr=t.return}}function Sl(e){for(;null!==Xr;){var t=Xr;if(t===e){Xr=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xr=n;break}Xr=t.return}}function jl(e){for(;null!==Xr;){var t=Xr;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){_d(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var s=t.return;try{i.componentDidMount()}catch(l){_d(t,s,l)}}var o=t.return;try{sl(t)}catch(l){_d(t,o,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){_d(t,a,l)}}}catch(l){_d(t,t.return,l)}if(t===e){Xr=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Xr=r;break}Xr=t.return}}var wl,_l=Math.ceil,Nl=y.ReactCurrentDispatcher,kl=y.ReactCurrentOwner,Cl=y.ReactCurrentBatchConfig,El=0,Il=null,Dl=null,Al=0,Tl=0,Ml=_s(0),Rl=0,Ol=null,Pl=0,Ll=0,zl=0,Fl=null,Bl=null,$l=0,Ul=1/0,Wl=null,Hl=!1,Vl=null,ql=null,Yl=!1,Gl=null,Jl=0,Kl=0,Ql=null,Xl=-1,Zl=0;function ed(){return 0!==(6&El)?Qe():-1!==Xl?Xl:Xl=Qe()}function td(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Al?Al&-Al:null!==go.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function nd(e,t,n,i){if(50<Kl)throw Kl=0,Ql=null,Error(o(185));vt(e,n,i),0!==(2&El)&&e===Il||(e===Il&&(0===(2&El)&&(Ll|=n),4===Rl&&rd(e,Al)),id(e,i),1===n&&0===El&&0===(1&t.mode)&&(Ul=Qe()+500,Fs&&Us()))}function id(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),r=1<<a,l=s[a];-1===l?0!==(r&n)&&0===(r&i)||(s[a]=pt(r,t)):l<=t&&(e.expiredLanes|=r),o&=~r}}(e,t);var i=ht(e,e===Il?Al:0);if(0===i)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Fs=!0,$s(e)}(ld.bind(null,e)):$s(ld.bind(null,e)),as(function(){0===(6&El)&&Us()}),n=null;else{switch(yt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Id(n,sd.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sd(e,t){if(Xl=-1,Zl=0,0!==(6&El))throw Error(o(327));var n=e.callbackNode;if(jd()&&e.callbackNode!==n)return null;var i=ht(e,e===Il?Al:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=gd(e,i);else{t=i;var s=El;El|=2;var a=fd();for(Il===e&&Al===t||(Wl=null,Ul=Qe()+500,hd(e,t));;)try{xd();break}catch(l){pd(e,l)}Co(),Nl.current=a,El=s,null!==Dl?t=0:(Il=null,Al=0,t=Rl)}if(0!==t){if(2===t&&(0!==(s=ft(e))&&(i=s,t=od(e,s))),1===t)throw n=Ol,hd(e,0),rd(e,i),id(e,Qe()),n;if(6===t)rd(e,i);else{if(s=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var s=n[i],o=s.getSnapshot;s=s.value;try{if(!ri(o(),s))return!1}catch(r){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=gd(e,i))&&(0!==(a=ft(e))&&(i=a,t=od(e,a))),1===t))throw n=Ol,hd(e,0),rd(e,i),id(e,Qe()),n;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(o(345));case 2:case 5:Sd(e,Bl,Wl);break;case 3:if(rd(e,i),(130023424&i)===i&&10<(t=$l+500-Qe())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&i)!==i){ed(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=is(Sd.bind(null,e,Bl,Wl),t);break}Sd(e,Bl,Wl);break;case 4:if(rd(e,i),(4194240&i)===i)break;for(t=e.eventTimes,s=-1;0<i;){var r=31-at(i);a=1<<r,(r=t[r])>s&&(s=r),i&=~a}if(i=s,10<(i=(120>(i=Qe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*_l(i/1960))-i)){e.timeoutHandle=is(Sd.bind(null,e,Bl,Wl),i);break}Sd(e,Bl,Wl);break;default:throw Error(o(329))}}}return id(e,Qe()),e.callbackNode===n?sd.bind(null,e):null}function od(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hd(e,t).flags|=256),2!==(e=gd(e,t))&&(t=Bl,Bl=n,null!==t&&ad(t)),e}function ad(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function rd(e,t){for(t&=~zl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),i=1<<n;e[n]=-1,t&=~i}}function ld(e){if(0!==(6&El))throw Error(o(327));jd();var t=ht(e,0);if(0===(1&t))return id(e,Qe()),null;var n=gd(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=od(e,i))}if(1===n)throw n=Ol,hd(e,0),rd(e,t),id(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sd(e,Bl,Wl),id(e,Qe()),null}function dd(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(Ul=Qe()+500,Fs&&Us())}}function cd(e){null!==Gl&&0===Gl.tag&&0===(6&El)&&jd();var t=El;El|=1;var n=Cl.transition,i=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=i,Cl.transition=n,0===(6&(El=t))&&Us()}}function ud(){Tl=Ml.current,Ns(Ml)}function hd(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Dl)for(n=Dl.return;null!==n;){var i=n;switch(to(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Ms();break;case 3:Qo(),Ns(Is),Ns(Es),ia();break;case 5:Zo(i);break;case 4:Qo();break;case 13:case 19:Ns(ea);break;case 10:Eo(i.type._context);break;case 22:case 23:ud()}n=n.return}if(Il=e,Dl=e=Md(e.current,null),Al=Tl=t,Rl=0,Ol=null,zl=Ll=Pl=0,Bl=Fl=null,null!==To){for(t=0;t<To.length;t++)if(null!==(i=(n=To[t]).interleaved)){n.interleaved=null;var s=i.next,o=n.pending;if(null!==o){var a=o.next;o.next=s,i.next=a}n.pending=i}To=null}return e}function pd(e,t){for(;;){var n=Dl;try{if(Co(),sa.current=Xa,ca){for(var i=ra.memoizedState;null!==i;){var s=i.queue;null!==s&&(s.pending=null),i=i.next}ca=!1}if(aa=0,da=la=ra=null,ua=!1,ha=0,kl.current=null,null===n||null===n.return){Rl=1,Ol=t,Dl=null;break}e:{var a=e,r=n.return,l=n,d=t;if(t=Al,l.flags|=32768,null!==d&&"object"===typeof d&&"function"===typeof d.then){var c=d,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=gr(r);if(null!==f){f.flags&=-257,vr(f,r,l,0,t),1&f.mode&&mr(a,c,t),d=c;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(d),t.updateQueue=g}else m.add(d);break e}if(0===(1&t)){mr(a,c,t),md();break e}d=Error(o(426))}else if(so&&1&l.mode){var v=gr(r);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vr(v,r,l,0,t),mo(dr(d,l));break e}}a=d=dr(d,l),4!==Rl&&(Rl=2),null===Fl?Fl=[a]:Fl.push(a),a=r;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Uo(a,pr(0,d,t));break e;case 1:l=d;var x=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof x.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Uo(a,fr(a,l,t));break e}}a=a.return}while(null!==a)}yd(n)}catch(y){t=y,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function fd(){var e=Nl.current;return Nl.current=Xa,null===e?Xa:e}function md(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Il||0===(268435455&Pl)&&0===(268435455&Ll)||rd(Il,Al)}function gd(e,t){var n=El;El|=2;var i=fd();for(Il===e&&Al===t||(Wl=null,hd(e,t));;)try{vd();break}catch(s){pd(e,s)}if(Co(),El=n,Nl.current=i,null!==Dl)throw Error(o(261));return Il=null,Al=0,Rl}function vd(){for(;null!==Dl;)bd(Dl)}function xd(){for(;null!==Dl&&!Je();)bd(Dl)}function bd(e){var t=wl(e.alternate,e,Tl);e.memoizedProps=e.pendingProps,null===t?yd(e):Dl=t,kl.current=null}function yd(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yr(n,t,Tl)))return void(Dl=n)}else{if(null!==(n=Gr(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Rl=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Rl&&(Rl=5)}function Sd(e,t,n){var i=bt,s=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,i){do{jd()}while(null!==Gl);if(0!==(6&El))throw Error(o(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),o=1<<s;t[s]=0,i[s]=-1,e[s]=-1,n&=~o}}(e,a),e===Il&&(Dl=Il=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Id(tt,function(){return jd(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var r=bt;bt=1;var l=El;El|=4,kl.current=null,function(e,t){if(es=Ht,pi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(S){n=null;break e}var r=0,l=-1,d=-1,c=0,u=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==s&&3!==h.nodeType||(l=r+s),h!==a||0!==i&&3!==h.nodeType||(d=r+i),3===h.nodeType&&(r+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++c===s&&(l=r),p===a&&++u===i&&(d=r),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===d?null:{start:l,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Ht=!1,Xr=t;null!==Xr;)if(e=(t=Xr).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xr=e;else for(;null!==Xr;){t=Xr;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:nr(t.type,g),v);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(o(163))}}catch(S){_d(t,t.return,S)}if(null!==(e=t.sibling)){e.return=t.return,Xr=e;break}Xr=t.return}m=tl,tl=!1}(e,n),gl(n,e),fi(ts),Ht=!!es,ts=es=null,e.current=n,xl(n,e,s),Ke(),El=l,bt=r,Cl.transition=a}else e.current=n;if(Yl&&(Yl=!1,Gl=e,Jl=s),a=e.pendingLanes,0===a&&(ql=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),id(e,Qe()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,e=Vl,Vl=null,e;0!==(1&Jl)&&0!==e.tag&&jd(),a=e.pendingLanes,0!==(1&a)?e===Ql?Kl++:(Kl=0,Ql=e):Kl=0,Us()}(e,t,n,i)}finally{Cl.transition=s,bt=i}return null}function jd(){if(null!==Gl){var e=yt(Jl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Gl)var i=!1;else{if(e=Gl,Gl=null,Jl=0,0!==(6&El))throw Error(o(331));var s=El;for(El|=4,Xr=e.current;null!==Xr;){var a=Xr,r=a.child;if(0!==(16&Xr.flags)){var l=a.deletions;if(null!==l){for(var d=0;d<l.length;d++){var c=l[d];for(Xr=c;null!==Xr;){var u=Xr;switch(u.tag){case 0:case 11:case 15:nl(8,u,a)}var h=u.child;if(null!==h)h.return=u,Xr=h;else for(;null!==Xr;){var p=(u=Xr).sibling,f=u.return;if(ol(u),u===c){Xr=null;break}if(null!==p){p.return=f,Xr=p;break}Xr=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xr=a}}if(0!==(2064&a.subtreeFlags)&&null!==r)r.return=a,Xr=r;else e:for(;null!==Xr;){if(0!==(2048&(a=Xr).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var x=a.sibling;if(null!==x){x.return=a.return,Xr=x;break e}Xr=a.return}}var b=e.current;for(Xr=b;null!==Xr;){var y=(r=Xr).child;if(0!==(2064&r.subtreeFlags)&&null!==y)y.return=r,Xr=y;else e:for(r=b;null!==Xr;){if(0!==(2048&(l=Xr).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(j){_d(l,l.return,j)}if(l===r){Xr=null;break e}var S=l.sibling;if(null!==S){S.return=l.return,Xr=S;break e}Xr=l.return}}if(El=s,Us(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(st,e)}catch(j){}i=!0}return i}finally{bt=n,Cl.transition=t}}return!1}function wd(e,t,n){e=Bo(e,t=pr(0,t=dr(n,t),1),1),t=ed(),null!==e&&(vt(e,1,t),id(e,t))}function _d(e,t,n){if(3===e.tag)wd(e,e,n);else for(;null!==t;){if(3===t.tag){wd(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===ql||!ql.has(i))){t=Bo(t,e=fr(t,e=dr(n,e),1),1),e=ed(),null!==t&&(vt(t,1,e),id(t,e));break}}t=t.return}}function Nd(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=ed(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Al&n)===n&&(4===Rl||3===Rl&&(130023424&Al)===Al&&500>Qe()-$l?hd(e,0):zl|=n),id(e,t)}function kd(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=ed();null!==(e=Oo(e,t))&&(vt(e,t,n),id(e,n))}function Cd(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kd(e,n)}function Ed(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(o(314))}null!==i&&i.delete(t),kd(e,n)}function Id(e,t){return Ye(e,t)}function Dd(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ad(e,t,n,i){return new Dd(e,t,n,i)}function Td(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Md(e,t){var n=e.alternate;return null===n?((n=Ad(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rd(e,t,n,i,s,a){var r=2;if(i=e,"function"===typeof e)Td(e)&&(r=1);else if("string"===typeof e)r=5;else e:switch(e){case w:return Od(n.children,s,a,t);case _:r=8,s|=8;break;case N:return(e=Ad(12,n,t,2|s)).elementType=N,e.lanes=a,e;case I:return(e=Ad(13,n,t,s)).elementType=I,e.lanes=a,e;case D:return(e=Ad(19,n,t,s)).elementType=D,e.lanes=a,e;case M:return Pd(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:r=10;break e;case C:r=9;break e;case E:r=11;break e;case A:r=14;break e;case T:r=16,i=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ad(r,n,t,s)).elementType=e,t.type=i,t.lanes=a,t}function Od(e,t,n,i){return(e=Ad(7,e,i,t)).lanes=n,e}function Pd(e,t,n,i){return(e=Ad(22,e,i,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function Ld(e,t,n){return(e=Ad(6,e,null,t)).lanes=n,e}function zd(e,t,n){return(t=Ad(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fd(e,t,n,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bd(e,t,n,i,s,o,a,r,l){return e=new Fd(e,t,n,r,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ad(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(o),e}function $d(e){if(!e)return Cs;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ts(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ts(n))return Os(e,n,t)}return t}function Ud(e,t,n,i,s,o,a,r,l){return(e=Bd(n,i,!0,e,0,o,0,r,l)).context=$d(null),n=e.current,(o=Fo(i=ed(),s=td(n))).callback=void 0!==t&&null!==t?t:null,Bo(n,o,s),e.current.lanes=s,vt(e,s,i),id(e,i),e}function Wd(e,t,n,i){var s=t.current,o=ed(),a=td(s);return n=$d(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fo(o,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Bo(s,t,a))&&(nd(e,s,a,o),$o(e,s,a)),a}function Hd(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qd(e,t){Vd(e,t),(e=e.alternate)&&Vd(e,t)}wl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Is.current)br=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return br=!1,function(e,t,n){switch(t.tag){case 3:Ir(t),fo();break;case 5:Xo(t);break;case 1:Ts(t.type)&&Ps(t);break;case 4:Ko(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;ks(wo,i._currentValue),i._currentValue=s;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(ks(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Lr(e,t,n):(ks(ea,1&ea.current),null!==(e=Hr(e,t,n))?e.sibling:null);ks(ea,1&ea.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Ur(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),ks(ea,ea.current),i)break;return null;case 22:case 23:return t.lanes=0,_r(e,t,n)}return Hr(e,t,n)}(e,t,n);br=0!==(131072&e.flags)}else br=!1,so&&0!==(1048576&t.flags)&&Zs(t,qs,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Wr(e,t),e=t.pendingProps;var s=As(t,Es.current);Do(t,n),s=ga(null,t,i,e,s,n);var a=va();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ts(i)?(a=!0,Ps(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Lo(t),s.updater=sr,t.stateNode=s,s._reactInternals=t,lr(t,i,e,n),t=Er(null,t,i,!0,a,n)):(t.tag=0,so&&a&&eo(t),yr(null,t,s,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Wr(e,t),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"===typeof e)return Td(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===A)return 14}return 2}(i),e=nr(i,e),s){case 0:t=kr(null,t,i,e,n);break e;case 1:t=Cr(null,t,i,e,n);break e;case 11:t=Sr(null,t,i,e,n);break e;case 14:t=jr(null,t,i,nr(i.type,e),n);break e}throw Error(o(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,kr(e,t,i,s=t.elementType===i?s:nr(i,s),n);case 1:return i=t.type,s=t.pendingProps,Cr(e,t,i,s=t.elementType===i?s:nr(i,s),n);case 3:e:{if(Ir(t),null===e)throw Error(o(387));i=t.pendingProps,s=(a=t.memoizedState).element,zo(e,t),Wo(t,i,null,n);var r=t.memoizedState;if(i=r.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:r.cache,pendingSuspenseBoundaries:r.pendingSuspenseBoundaries,transitions:r.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Dr(e,t,i,n,s=dr(Error(o(423)),t));break e}if(i!==s){t=Dr(e,t,i,n,s=dr(Error(o(424)),t));break e}for(io=ds(t.stateNode.containerInfo.firstChild),no=t,so=!0,oo=null,n=jo(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),i===s){t=Hr(e,t,n);break e}yr(e,t,i,n)}t=t.child}return t;case 5:return Xo(t),null===e&&co(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,r=s.children,ns(i,s)?r=null:null!==a&&ns(i,a)&&(t.flags|=32),Nr(e,t),yr(e,t,r,n),t.child;case 6:return null===e&&co(t),null;case 13:return Lr(e,t,n);case 4:return Ko(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=So(t,null,i,n):yr(e,t,i,n),t.child;case 11:return i=t.type,s=t.pendingProps,Sr(e,t,i,s=t.elementType===i?s:nr(i,s),n);case 7:return yr(e,t,t.pendingProps,n),t.child;case 8:case 12:return yr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,s=t.pendingProps,a=t.memoizedProps,r=s.value,ks(wo,i._currentValue),i._currentValue=r,null!==a)if(ri(a.value,r)){if(a.children===s.children&&!Is.current){t=Hr(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){r=a.child;for(var d=l.firstContext;null!==d;){if(d.context===i){if(1===a.tag){(d=Fo(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?d.next=d:(d.next=u.next,u.next=d),c.pending=d}}a.lanes|=n,null!==(d=a.alternate)&&(d.lanes|=n),Io(a.return,n,t),l.lanes|=n;break}d=d.next}}else if(10===a.tag)r=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(r=a.return))throw Error(o(341));r.lanes|=n,null!==(l=r.alternate)&&(l.lanes|=n),Io(r,n,t),r=a.sibling}else r=a.child;if(null!==r)r.return=a;else for(r=a;null!==r;){if(r===t){r=null;break}if(null!==(a=r.sibling)){a.return=r.return,r=a;break}r=r.return}a=r}yr(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,Do(t,n),i=i(s=Ao(s)),t.flags|=1,yr(e,t,i,n),t.child;case 14:return s=nr(i=t.type,t.pendingProps),jr(e,t,i,s=nr(i.type,s),n);case 15:return wr(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:nr(i,s),Wr(e,t),t.tag=1,Ts(i)?(e=!0,Ps(t)):e=!1,Do(t,n),ar(t,i,s),lr(t,i,s,n),Er(null,t,i,!0,e,n);case 19:return Ur(e,t,n);case 22:return _r(e,t,n)}throw Error(o(156,t.tag))};var Yd="function"===typeof reportError?reportError:function(e){console.error(e)};function Gd(e){this._internalRoot=e}function Jd(e){this._internalRoot=e}function Kd(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qd(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xd(){}function Zd(e,t,n,i,s){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof s){var r=s;s=function(){var e=Hd(a);r.call(e)}}Wd(t,a,e,s)}else a=function(e,t,n,i,s){if(s){if("function"===typeof i){var o=i;i=function(){var e=Hd(a);o.call(e)}}var a=Ud(t,i,e,0,null,!1,0,"",Xd);return e._reactRootContainer=a,e[fs]=a.current,Ui(8===e.nodeType?e.parentNode:e),cd(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof i){var r=i;i=function(){var e=Hd(l);r.call(e)}}var l=Bd(e,0,!1,null,0,!1,0,"",Xd);return e._reactRootContainer=l,e[fs]=l.current,Ui(8===e.nodeType?e.parentNode:e),cd(function(){Wd(t,l,n,i)}),l}(n,t,e,s,i);return Hd(a)}Jd.prototype.render=Gd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Wd(e,t,null,null)},Jd.prototype.unmount=Gd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cd(function(){Wd(null,e,null,null)}),t[fs]=null}},Jd.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Lt(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(xt(t,1|n),id(t,Qe()),0===(6&El)&&(Ul=Qe()+500,Us()))}break;case 13:cd(function(){var t=Oo(e,1);if(null!==t){var n=ed();nd(t,e,1,n)}}),qd(e,1)}},jt=function(e){if(13===e.tag){var t=Oo(e,134217728);if(null!==t)nd(t,e,134217728,ed());qd(e,134217728)}},wt=function(e){if(13===e.tag){var t=td(e),n=Oo(e,t);if(null!==n)nd(n,e,t,ed());qd(e,t)}},_t=function(){return bt},Nt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},je=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=Ss(i);if(!s)throw Error(o(90));Y(i),X(i,s)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=dd,Ie=cd;var ec={usingClientEntryPoint:!1,Events:[bs,ys,Ss,ke,Ce,dd]},tc={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{st=ic.inject(nc),ot=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kd(t))throw Error(o(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Kd(e))throw Error(o(299));var n=!1,i="",s=Yd;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Bd(e,1,!1,null,0,n,0,i,s),e[fs]=t.current,Ui(8===e.nodeType?e.parentNode:e),new Gd(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return cd(e)},t.hydrate=function(e,t,n){if(!Qd(t))throw Error(o(200));return Zd(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Kd(e))throw Error(o(405));var i=null!=n&&n.hydratedSources||null,s=!1,a="",r=Yd;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(r=n.onRecoverableError)),t=Ud(t,null,e,1,null!=n?n:null,s,0,a,r),e[fs]=t.current,Ui(e),i)for(e=0;e<i.length;e++)s=(s=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Jd(t)},t.render=function(e,t,n){if(!Qd(t))throw Error(o(200));return Zd(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qd(e))throw Error(o(40));return!!e._reactRootContainer&&(cd(function(){Zd(null,null,e,!1,function(){e._reactRootContainer=null,e[fs]=null})}),!0)},t.unstable_batchedUpdates=dd,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Qd(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zd(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{"use strict";e.exports=n(234)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,s){if(1&s&&(i=this(i)),8&s)return i;if("object"===typeof i&&i){if(4&s&&i.__esModule)return i;if(16&s&&"function"===typeof i.then)return i}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var r=2&s&&i;("object"==typeof r||"function"==typeof r)&&!~e.indexOf(r);r=t(r))Object.getOwnPropertyNames(r).forEach(e=>a[e]=()=>i[e]);return a.default=()=>i,n.d(o,a),o}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>Fl,hasStandardBrowserEnv:()=>$l,hasStandardBrowserWebWorkerEnv:()=>Ul,navigator:()=>Bl,origin:()=>Wl});var t,i=n(43),s=n.t(i,2),o=n(391),a=n(950),r=n.t(a,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const d="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,i){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function g(e,n,i,s){void 0===s&&(s={});let{window:o=document.defaultView,v5Compat:a=!1}=s,r=o.history,u=t.Pop,m=null,g=v();function v(){return(r.state||{idx:null}).idx}function x(){u=t.Pop;let e=v(),n=null==e?null:e-g;g=e,m&&m({action:u,location:y.location,delta:n})}function b(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,r.replaceState(l({},r.state,{idx:g}),""));let y={get action(){return u},get location(){return e(o,r)},listen(e){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(d,x),m=e,()=>{o.removeEventListener(d,x),m=null}},createHref:e=>n(o,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){u=t.Push;let s=p(y.location,e,n);i&&i(s,e),g=v()+1;let l=h(s,g),d=y.createHref(s);try{r.pushState(l,"",d)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;o.location.assign(d)}a&&m&&m({action:u,location:y.location,delta:1})},replace:function(e,n){u=t.Replace;let s=p(y.location,e,n);i&&i(s,e),g=v();let o=h(s,g),l=y.createHref(s);r.replaceState(o,"",l),a&&m&&m({action:u,location:y.location,delta:0})},go:e=>r.go(e)};return y}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function x(e,t,n){return void 0===n&&(n="/"),b(e,t,n,!1)}function b(e,t,n,i){let s=M(("string"===typeof t?m(t):t).pathname||"/",n);if(null==s)return null;let o=y(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let a=null;for(let r=0;null==a&&r<o.length;++r){let e=T(s);a=D(o[r],e,i)}return a}function y(e,t,n,i){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i="");let s=(e,s,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(c(a.relativePath.startsWith(i),'Absolute route path "'+a.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(i.length));let r=z([i,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+r+'".'),y(e.children,t,l,r)),(null!=e.path||e.index)&&t.push({path:r,score:I(r,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let i of S(e.path))s(e,t,i);else s(e,t)}),t}function S(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===i.length)return s?[o,""]:[o];let a=S(i.join("/")),r=[];return r.push(...a.map(e=>""===e?o:[o,e].join("/"))),s&&r.push(...a),r.map(t=>e.startsWith("/")&&""===t?"/":t)}const j=/^:[\w-]+$/,w=3,_=2,N=1,k=10,C=-2,E=e=>"*"===e;function I(e,t){let n=e.split("/"),i=n.length;return n.some(E)&&(i+=C),t&&(i+=_),n.filter(e=>!E(e)).reduce((e,t)=>e+(j.test(t)?w:""===t?N:k),i)}function D(e,t,n){void 0===n&&(n=!1);let{routesMeta:i}=e,s={},o="/",a=[];for(let r=0;r<i.length;++r){let e=i[r],l=r===i.length-1,d="/"===o?t:t.slice(o.length)||"/",c=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},d),u=e.route;if(!c&&l&&n&&!i[i.length-1].route.index&&(c=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},d)),!c)return null;Object.assign(s,c.params),a.push({params:s,pathname:z([o,c.pathname]),pathnameBase:F(z([o,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(o=z([o,c.pathnameBase]))}return a}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let i=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(i.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let o=new RegExp(s,t?void 0:"i");return[o,i]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),r=s.slice(1),l=i.reduce((e,t,n)=>{let{paramName:i,isOptional:s}=t;if("*"===i){let e=r[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=r[n];return e[i]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:o,pathnameBase:a,pattern:e}}function T(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function R(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function P(e,t){let n=O(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,i){let s;void 0===i&&(i=!1),"string"===typeof e?s=m(e):(s=l({},e),c(!s.pathname||!s.pathname.includes("?"),R("?","pathname","search",s)),c(!s.pathname||!s.pathname.includes("#"),R("#","pathname","hash",s)),c(!s.search||!s.search.includes("#"),R("#","search","hash",s)));let o,a=""===e||""===s.pathname,r=a?"/":s.pathname;if(null==r)o=n;else{let e=t.length-1;if(!i&&r.startsWith("..")){let t=r.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}o=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:n,search:i="",hash:s=""}="string"===typeof e?m(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:B(i),hash:$(s)}}(s,o),u=r&&"/"!==r&&r.endsWith("/"),h=(a||"."===r)&&n.endsWith("/");return d.pathname.endsWith("/")||!u&&!h||(d.pathname+="/"),d}const z=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",$=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function U(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],H=(new Set(W),["get",...W]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},V.apply(this,arguments)}const q=i.createContext(null);const Y=i.createContext(null);const G=i.createContext(null);const J=i.createContext(null);const K=i.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=i.createContext(null);function X(){return null!=i.useContext(J)}function Z(){return X()||c(!1),i.useContext(J).location}function ee(e){i.useContext(G).static||i.useLayoutEffect(e)}function te(){let{isDataRoute:e}=i.useContext(K);return e?function(){let{router:e}=ce(le.UseNavigateStable),t=he(de.UseNavigateStable),n=i.useRef(!1);ee(()=>{n.current=!0});let s=i.useCallback(function(i,s){void 0===s&&(s={}),n.current&&("number"===typeof i?e.navigate(i):e.navigate(i,V({fromRouteId:t},s)))},[e,t]);return s}():function(){X()||c(!1);let e=i.useContext(q),{basename:t,future:n,navigator:s}=i.useContext(G),{matches:o}=i.useContext(K),{pathname:a}=Z(),r=JSON.stringify(P(o,n.v7_relativeSplatPath)),l=i.useRef(!1);ee(()=>{l.current=!0});let d=i.useCallback(function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void s.go(n);let o=L(n,JSON.parse(r),a,"path"===i.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:z([t,o.pathname])),(i.replace?s.replace:s.push)(o,i.state,i)},[t,s,r,a,e]);return d}()}function ne(e,n,s,o){X()||c(!1);let{navigator:a}=i.useContext(G),{matches:r}=i.useContext(K),l=r[r.length-1],d=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,p=Z();if(n){var f;let e="string"===typeof n?m(n):n;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||c(!1),h=e}else h=p;let g=h.pathname||"/",v=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=x(e,{pathname:v});let y=re(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:z([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:z([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),r,s,o);return n&&y?i.createElement(J.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:t.Pop}},y):y}function ie(){let e=function(){var e;let t=i.useContext(Q),n=ue(de.UseRouteError),s=he(de.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[s]}(),t=U(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:o},n):null,null)}const se=i.createElement(ie,null);class oe extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(K.Provider,{value:this.props.routeContext},i.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:n,children:s}=e,o=i.useContext(q);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(K.Provider,{value:t},s)}function re(e,t,n,s){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===s&&(s=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=s)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let r=e,l=null==(o=n)?void 0:o.errors;if(null!=l){let e=r.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),r=r.slice(0,Math.min(r.length,e+1))}let d=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let i=0;i<r.length;i++){let e=r[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=i),e.route.id){let{loaderData:t,errors:i}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!i||void 0===i[e.route.id]);if(e.route.lazy||s){d=!0,r=u>=0?r.slice(0,u+1):[r[0]];break}}}return r.reduceRight((e,s,o)=>{let a,c=!1,h=null,p=null;var f;n&&(a=l&&s.route.id?l[s.route.id]:void 0,h=s.route.errorElement||se,d&&(u<0&&0===o?(f="route-fallback",!1||pe[f]||(pe[f]=!0),c=!0,p=null):u===o&&(c=!0,p=s.route.hydrateFallbackElement||null)));let m=t.concat(r.slice(0,o+1)),g=()=>{let t;return t=a?h:c?p:s.route.Component?i.createElement(s.route.Component,null):s.route.element?s.route.element:e,i.createElement(ae,{match:s,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(s.route.ErrorBoundary||s.route.errorElement||0===o)?i.createElement(oe,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function ce(e){let t=i.useContext(q);return t||c(!1),t}function ue(e){let t=i.useContext(Y);return t||c(!1),t}function he(e){let t=function(){let e=i.useContext(K);return e||c(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const pe={};function fe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function me(e){let{to:t,replace:n,state:s,relative:o}=e;X()||c(!1);let{future:a,static:r}=i.useContext(G),{matches:l}=i.useContext(K),{pathname:d}=Z(),u=te(),h=L(t,P(l,a.v7_relativeSplatPath),d,"path"===o),p=JSON.stringify(h);return i.useEffect(()=>u(JSON.parse(p),{replace:n,state:s,relative:o}),[u,p,o,n,s]),null}function ge(e){c(!1)}function ve(e){let{basename:n="/",children:s=null,location:o,navigationType:a=t.Pop,navigator:r,static:l=!1,future:d}=e;X()&&c(!1);let u=n.replace(/^\/*/,"/"),h=i.useMemo(()=>({basename:u,navigator:r,static:l,future:V({v7_relativeSplatPath:!1},d)}),[u,d,r,l]);"string"===typeof o&&(o=m(o));let{pathname:p="/",search:f="",hash:g="",state:v=null,key:x="default"}=o,b=i.useMemo(()=>{let e=M(p,u);return null==e?null:{location:{pathname:e,search:f,hash:g,state:v,key:x},navigationType:a}},[u,p,f,g,v,x,a]);return null==b?null:i.createElement(G.Provider,{value:h},i.createElement(J.Provider,{children:s,value:b}))}function xe(e){let{children:t,location:n}=e;return ne(be(t),n)}new Promise(()=>{});i.Component;function be(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,(e,s)=>{if(!i.isValidElement(e))return;let o=[...t,s];if(e.type===i.Fragment)return void n.push.apply(n,be(e.props.children,o));e.type!==ge&&c(!1),e.props.index&&e.props.children&&c(!1);let a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=be(e.props.children,o)),n.push(a)}),n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(cu){}new Map;const ye=s.startTransition;r.flushSync,s.useId;function Se(e){let{basename:t,children:n,future:s,window:o}=e,a=i.useRef();var r;null==a.current&&(a.current=(void 0===(r={window:o,v5Compat:!0})&&(r={}),g(function(e,t){let{pathname:n,search:i,hash:s}=e.location;return p("",{pathname:n,search:i,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:f(t)},null,r)));let l=a.current,[d,c]=i.useState({action:l.action,location:l.location}),{v7_startTransition:u}=s||{},h=i.useCallback(e=>{u&&ye?ye(()=>c(e)):c(e)},[c,u]);return i.useLayoutEffect(()=>l.listen(h),[l,h]),i.useEffect(()=>fe(s),[s]),i.createElement(ve,{basename:t,children:n,location:d.location,navigationType:d.action,navigator:l,future:s})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var je,we;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(je||(je={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(we||(we={}));var _e=n(579);const Ne=(0,i.createContext)(),ke=e=>{let{children:t}=e;const[n,s]=(0,i.useState)(null),[o,a]=(0,i.useState)([]),[r,l]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{try{const e=localStorage.getItem("token");if(e){const t=await fetch("http://localhost:5000/api/auth/verify",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include"});if(t.ok){const n=await t.json();n.success&&n.user?(s(n.user),(async()=>{try{const t=await fetch("http://localhost:5000/api/roles",{headers:{...e?{Authorization:`Bearer ${e}`}:{}}});if(t.ok){const e=await t.json().catch(()=>({}));e&&e.data&&a(e.data)}}catch(t){}})()):localStorage.removeItem("token")}else localStorage.removeItem("token")}}catch(e){console.error("Auth check error:",e),localStorage.removeItem("token")}finally{l(!1)}})()},[]),(0,i.useEffect)(()=>{const e=async e=>{try{const e=localStorage.getItem("token");if(!e)return;const t=await fetch("http://localhost:5000/api/auth/verify",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include"});if(!t.ok)return;const n=await t.json().catch(()=>({}));n&&n.success&&n.user&&s(n.user);const i=await fetch("http://localhost:5000/api/roles",{headers:{...e?{Authorization:`Bearer ${e}`}:{}}});if(i.ok){const e=await i.json().catch(()=>({}));e&&e.data&&a(e.data)}}catch(t){console.warn("permissionsChanged handler error:",t)}};window.addEventListener("permissionsChanged",e);const t=e=>{try{const t=null===e||void 0===e?void 0:e.detail;t?s(t):(async()=>{try{const e=localStorage.getItem("token");if(!e)return;const t=await fetch("http://localhost:5000/api/auth/me",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include"});if(!t.ok)return;const n=await t.json();n&&n.success&&n.data&&s(n.data)}catch(e){}})()}catch(t){console.warn("profileUpdated handler error:",t)}};return window.addEventListener("profileUpdated",t),()=>{window.removeEventListener("permissionsChanged",e),window.removeEventListener("profileUpdated",t)}},[]),(0,i.useEffect)(()=>{let e;return n&&(e=setInterval(async()=>{try{const e=localStorage.getItem("token");if(!e)return;const t=await fetch("http://localhost:5000/api/roles",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json().catch(()=>({}));e&&e.data&&a(e.data)}}catch(e){}},5e3)),()=>clearInterval(e)},[n]);const d={user:n,rolesList:o,login:async e=>{try{console.log("Attempting login with credentials:",e);const n=await fetch("http://localhost:5000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});console.log("Login response status:",n.status);const i=await n.json();if(console.log("Login response data:",i),!n.ok)throw 401===n.status?new Error(i.message||"Invalid credentials"):423===n.status?new Error("Account locked due to multiple failed attempts"):403===n.status?new Error("Account deactivated. Contact administrator"):new Error(i.message||"Login failed");if(!i.success)throw new Error(i.message||"Login failed");if(!i.user||!i.user.id)throw new Error("Invalid user data received");if(!1===i.user.isActive)throw new Error("Your account has been deactivated");i.token&&localStorage.setItem("token",i.token),s(i.user);try{const e=i.token||localStorage.getItem("token");if(e){const t=await fetch("http://localhost:5000/api/auth/me",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include"});if(t.ok){const e=await t.json().catch(()=>({}));e&&e.success&&e.data&&s(e.data)}}}catch(t){}return i}catch(n){throw console.error("Login error:",n),n}},logout:async()=>{try{const e=localStorage.getItem("token");e&&await fetch("http://localhost:5000/api/auth/logout",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include"})}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("token"),s(null)}},loading:r,isAuthenticated:!!n};return d.hasPermission=e=>{if(!n)return!1;if("super_admin"===(null===n||void 0===n?void 0:n.role)||"admin"===(null===n||void 0===n?void 0:n.role))return!0;const t=(()=>{const e=(null===n||void 0===n?void 0:n.permissions)||{};if(null===n||void 0===n||!n.role)return e;const t=o.find(e=>e.value===n.role||e.value===(null===n||void 0===n?void 0:n.role)||e.label===n.role||e._id===n.role);return(t&&t.permissions?t.permissions:null)||e})();if(!t)return!1;if(e.includes(".")){const n=e.split(".");let i=t;for(const e of n){if(!i)return!1;i=i[e]}if(i)return!!i;const s=n.join("_");return!(!t[n[0]]||!t[n[0]][s])}if(!0===t[e])return!0;const i=e.split("_");if(i.length>=2){const n=i[0],s=i.slice(1).join("_");if(t[s]&&"object"===typeof t[s]&&t[s][n])return!0;if(t.role_management&&t.role_management[e])return!0;if(t.roles&&t.roles[n])return!0}return!1},(0,_e.jsx)(Ne.Provider,{value:d,children:t})},Ce=n.p+"static/media/logo.3aeeffa6501eb1ffb80a.jpg",Ee=()=>{const[e,t]=(0,i.useState)(""),[n,s]=(0,i.useState)(""),[o,a]=(0,i.useState)(!1),[r,l]=(0,i.useState)(""),[d,c]=(0,i.useState)(!1),[u,h]=(0,i.useState)(!1),[p,f]=(0,i.useState)({}),[m,g]=(0,i.useState)(0),[v,x]=(0,i.useState)(!1),[b,y]=(0,i.useState)(0),{login:S}=(0,i.useContext)(Ne)||{},j=te();(0,i.useEffect)(()=>{const e=document.createElement("style");e.textContent="\n      @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@200;400;500;600;700;800;900&display=swap');\n      @import url('https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;700;900&display=swap');\n\n      @keyframes slideInUp {\n        from {\n          opacity: 0;\n          transform: translateY(40px);\n        }\n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n\n      @keyframes spin {\n        from { transform: rotate(0deg); }\n        to { transform: rotate(360deg); }\n      }\n\n      @keyframes float {\n        0%, 100% { transform: translateY(0px) rotate(0deg); }\n        25% { transform: translateY(-8px) rotate(1deg); }\n        75% { transform: translateY(-8px) rotate(-1deg); }\n      }\n      \n      @keyframes pulseGlow {\n        0%, 100% {\n          box-shadow: 0 0 20px rgba(255, 255, 255, 0.3),\n                      0 25px 45px rgba(0, 0, 0, 0.2);\n        }\n        50% {\n          box-shadow: 0 0 40px rgba(255, 255, 255, 0.5),\n                      0 30px 50px rgba(0, 0, 0, 0.25);\n        }\n      }\n\n      @keyframes colorChange {\n        0% { \n          color: #ffffff;\n          text-shadow: \n            0 0 30px rgba(255, 255, 255, 0.9),\n            0 4px 20px rgba(0, 0, 0, 0.6),\n            0 0 15px rgba(255, 255, 255, 0.6);\n        }\n        25% { \n          color: #e0e7ff;\n          text-shadow: \n            0 0 35px rgba(99, 102, 241, 0.8),\n            0 4px 18px rgba(0, 0, 0, 0.5),\n            0 0 12px rgba(99, 102, 241, 0.5);\n        }\n        50% { \n          color: #60a5fa;\n          text-shadow: \n            0 0 40px rgba(96, 165, 250, 0.9),\n            0 4px 15px rgba(0, 0, 0, 0.4),\n            0 0 20px rgba(96, 165, 250, 0.7);\n        }\n        75% { \n          color: #c7d2fe;\n          text-shadow: \n            0 0 35px rgba(199, 210, 254, 0.8),\n            0 4px 18px rgba(0, 0, 0, 0.5),\n            0 0 12px rgba(199, 210, 254, 0.5);\n        }\n        100% { \n          color: #ffffff;\n          text-shadow: \n            0 0 30px rgba(255, 255, 255, 0.9),\n            0 4px 20px rgba(0, 0, 0, 0.6),\n            0 0 15px rgba(255, 255, 255, 0.6);\n        }\n      }\n\n      @keyframes underlineColorChange {\n        0%, 100% { \n          background: linear-gradient(90deg, transparent, #ffffff 15%, #e0e7ff 30%, #ffffff 50%, #e0e7ff 70%, #ffffff 85%, transparent);\n          opacity: 0.9; \n          transform: translateX(-50%) scaleX(0.95); \n        }\n        50% { \n          background: linear-gradient(90deg, transparent, #60a5fa 15%, #3b82f6 30%, #2563eb 50%, #3b82f6 70%, #60a5fa 85%, transparent);\n          opacity: 1; \n          transform: translateX(-50%) scaleX(1.1); \n        }\n      }\n\n      @keyframes gradientShift {\n        0% { background-position: 0% 50%; }\n        50% { background-position: 100% 50%; }\n        100% { background-position: 0% 50%; }\n      }\n      \n      @keyframes borderGlow {\n        0%, 100% {\n          border-color: rgba(255, 255, 255, 0.3);\n          box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);\n        }\n        50% {\n          border-color: rgba(255, 255, 255, 0.6);\n          box-shadow: 0 30px 60px rgba(0, 0, 0, 0.3), 0 0 30px rgba(255, 255, 255, 0.1);\n        }\n      }\n      \n      @keyframes inputFocus {\n        0% { transform: translateY(0); box-shadow: none; }\n        100% { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2), 0 0 20px rgba(232, 244, 253, 0.3); }\n      }\n      \n      @keyframes buttonPulse {\n        0%, 100% { box-shadow: 0 8px 25px rgba(74, 144, 226, 0.4); }\n        50% { box-shadow: 0 12px 35px rgba(74, 144, 226, 0.6), 0 0 40px rgba(74, 144, 226, 0.2); }\n      }\n      \n      @keyframes logoBreath {\n        0%, 100% { transform: scale(1); }\n        50% { transform: scale(1.03); }\n      }\n    ",document.head.appendChild(e);const t=localStorage.getItem("loginAttempts"),n=localStorage.getItem("blockUntil");if(t&&g(parseInt(t)),n){const e=new Date(n);if(e>new Date){x(!0);const t=Math.ceil((e-new Date)/1e3);y(t);const n=setInterval(()=>{const t=Math.ceil((e-new Date)/1e3);t<=0?(x(!1),y(0),localStorage.removeItem("blockUntil"),localStorage.removeItem("loginAttempts"),g(0),clearInterval(n)):y(t)},1e3);return()=>clearInterval(n)}localStorage.removeItem("blockUntil"),localStorage.removeItem("loginAttempts")}return()=>{e.parentNode&&document.head.removeChild(e)}},[]);const w=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),_=e=>/^[A-Z]{2,3}\d{3,4}$/.test(e),N=(e,n)=>{"userId"===e?t(n):"password"===e&&s(n),p[e]&&f(t=>{const n={...t};return delete n[e],n}),r&&l("")};return(0,_e.jsxs)("div",{style:{position:"relative",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",fontFamily:"'Poppins', 'Arial', sans-serif",background:d?"transparent":"\n          linear-gradient(45deg, #667eea 0%, #764ba2 25%, #4568dc 50%, #b06ab3 75%, #667eea 100%),\n          radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),\n          radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),\n          radial-gradient(circle at 40% 80%, rgba(120, 219, 226, 0.3) 0%, transparent 50%)\n        ",backgroundSize:d?"auto":"400% 400%, 100% 100%, 100% 100%, 100% 100%",animation:d?"none":"gradientShift 15s ease infinite",padding:"20px"},children:[(0,_e.jsxs)("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",objectFit:"cover",zIndex:d?-2:-4,opacity:d?.7:0,transition:"opacity 1s ease-in-out"},onLoadedData:()=>{console.log("Video loaded successfully"),c(!0)},onError:e=>{console.log("Video failed to load, using animated background"),c(!1)},onCanPlay:()=>{console.log("Video can play"),c(!0)},children:[(0,_e.jsx)("source",{src:"/assets/background-video.mp4",type:"video/mp4"}),(0,_e.jsx)("source",{src:"./assets/background-video.mp4",type:"video/mp4"}),(0,_e.jsx)("source",{src:"/public/assets/background-video.mp4",type:"video/mp4"}),(0,_e.jsx)("source",{src:"/assets/background-video.webm",type:"video/webm"}),(0,_e.jsx)("source",{src:"./assets/background-video.webm",type:"video/webm"}),"Your browser does not support the video tag."]}),(0,_e.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"linear-gradient(135deg, rgba(102, 126, 234, 0.4), rgba(118, 75, 162, 0.4))",zIndex:-1,backdropFilter:"blur(2px)"}}),(0,_e.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.12)",padding:"45px",borderRadius:"24px",boxShadow:"\n          0 30px 60px rgba(0, 0, 0, 0.25),\n          inset 0 1px 0 rgba(255, 255, 255, 0.4),\n          inset 0 -1px 0 rgba(0, 0, 0, 0.1),\n          0 0 0 1px rgba(255, 255, 255, 0.1)\n        ",width:"100%",maxWidth:"920px",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.25)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden",opacity:1,transform:"translateY(0)",animation:"slideInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards, float 8s ease-in-out 1.5s infinite, borderGlow 4s ease-in-out infinite"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-5px)",e.currentTarget.style.boxShadow="\n          0 35px 60px rgba(0, 0, 0, 0.3),\n          inset 0 1px 0 rgba(255, 255, 255, 0.5),\n          inset 0 -1px 0 rgba(0, 0, 0, 0.1)\n        "},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="\n          0 25px 45px rgba(0, 0, 0, 0.2),\n          inset 0 1px 0 rgba(255, 255, 255, 0.4),\n          inset 0 -1px 0 rgba(0, 0, 0, 0.1)\n        "},children:[(0,_e.jsx)("div",{style:{content:"",position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent)",transition:"left 0.5s"}}),(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"40px"},children:[(0,_e.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,_e.jsx)("div",{style:{textAlign:"center",marginBottom:"30px",position:"relative"},children:(0,_e.jsx)("img",{src:Ce,alt:"Logo",style:{maxWidth:"160px",height:"auto",borderRadius:"50%",boxShadow:"\n                    0 20px 50px rgba(0, 0, 0, 0.4),\n                    0 0 40px rgba(255, 255, 255, 0.25)\n                  ",transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)",border:"4px solid rgba(255, 255, 255, 0.35)",animation:"logoBreath 4s ease-in-out infinite"},onMouseEnter:e=>{e.target.style.transform="scale(1.18) rotate(5deg)",e.target.style.boxShadow="\n                    0 25px 60px rgba(0, 0, 0, 0.5),\n                    0 0 60px rgba(255, 255, 255, 0.5)\n                  ",e.target.style.borderColor="rgba(255, 255, 255, 0.6)"},onMouseLeave:e=>{e.target.style.transform="scale(1) rotate(0deg)",e.target.style.boxShadow="\n                    0 20px 50px rgba(0, 0, 0, 0.4),\n                    0 0 40px rgba(255, 255, 255, 0.25)\n                  ",e.target.style.borderColor="rgba(255, 255, 255, 0.35)"}})}),(0,_e.jsxs)("h1",{style:{textAlign:"center",fontSize:"48px",fontWeight:"900",marginBottom:"40px",textShadow:"\n                0 0 30px rgba(255, 255, 255, 0.8),\n                0 4px 15px rgba(0, 0, 0, 0.6),\n                0 0 10px rgba(255, 255, 255, 0.5)\n              ",letterSpacing:"8px",textTransform:"uppercase",position:"relative",animation:"colorChange 4s ease-in-out infinite",fontFamily:"'Roboto Slab', serif",fontStyle:"normal",lineHeight:"1"},children:["LOGIN",(0,_e.jsx)("div",{style:{content:"",position:"absolute",bottom:"-18px",left:"50%",transform:"translateX(-50%)",width:"140px",height:"6px",background:"linear-gradient(90deg, transparent, #ffffff 15%, #cccccc 30%, #000000 50%, #cccccc 70%, #ffffff 85%, transparent)",borderRadius:"3px",boxShadow:"\n                  0 0 25px rgba(255, 255, 255, 0.7),\n                  0 3px 10px rgba(0, 0, 0, 0.3)\n                ",animation:"underlineColorChange 4s ease-in-out infinite"}})]})]}),(0,_e.jsx)("div",{style:{flex:1},children:(0,_e.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),v)return void l(`Account temporarily locked. Try again in ${Math.ceil(b/60)} minutes.`);a(!0),l(""),f({});const i={userId:e.trim(),password:n},s=(e=>{const t={};return e.userId?w(e.userId)||_(e.userId)||(t.userId="Please enter a valid email address or employee ID (e.g., SP001)"):t.userId="User ID or Email is required",e.password?e.password.length<6&&(t.password="Password must be at least 6 characters long"):t.password="Password is required",t})(i);if(Object.keys(s).length>0)return f(s),void a(!1);try{const e={};w(i.userId)?e.email=i.userId:_(i.userId)?e.employeeId=i.userId:e.email=i.userId,e.password=i.password;const t=await S(e);localStorage.removeItem("loginAttempts"),localStorage.removeItem("blockUntil"),g(0),console.log("Login successful, navigating to dashboard...",t),j("/dashboard")}catch(o){console.error("Login error:",o);const e=m+1;if(g(e),localStorage.setItem("loginAttempts",e.toString()),e>=5){const e=new Date(Date.now()+9e5);localStorage.setItem("blockUntil",e.toISOString()),x(!0),y(900);const t=setInterval(()=>{const n=Math.ceil((e-new Date)/1e3);n<=0?(x(!1),y(0),localStorage.removeItem("blockUntil"),localStorage.removeItem("loginAttempts"),g(0),clearInterval(t)):y(n)},1e3);l("Too many failed attempts. Account locked for 15 minutes.")}else l(o.message||"Invalid credentials. Please try again.")}finally{a(!1)}},style:{display:"flex",flexDirection:"column",gap:"20px"},children:[r&&(0,_e.jsxs)("div",{style:{background:"rgba(255, 99, 132, 0.15)",color:"#ff6384",padding:"14px",borderRadius:"10px",textAlign:"center",fontWeight:"600",fontSize:"14px",border:"1px solid rgba(255, 99, 132, 0.3)",backdropFilter:"blur(10px)",textShadow:"0 1px 3px rgba(0, 0, 0, 0.3)",animation:"slideInUp 0.3s ease-out"},children:[(0,_e.jsx)("i",{className:"bi bi-exclamation-triangle",style:{marginRight:"8px"}}),r]}),m>0&&m<5&&(0,_e.jsxs)("div",{style:{background:"rgba(255, 193, 7, 0.15)",color:"#ffc107",padding:"12px",borderRadius:"10px",textAlign:"center",fontWeight:"600",fontSize:"13px",border:"1px solid rgba(255, 193, 7, 0.3)",backdropFilter:"blur(10px)"},children:[(0,_e.jsx)("i",{className:"bi bi-shield-exclamation",style:{marginRight:"8px"}}),5-m," attempts remaining before account lock"]}),v&&(0,_e.jsxs)("div",{style:{background:"rgba(220, 53, 69, 0.15)",color:"#dc3545",padding:"14px",borderRadius:"10px",textAlign:"center",fontWeight:"600",fontSize:"14px",border:"1px solid rgba(220, 53, 69, 0.3)",backdropFilter:"blur(10px)"},children:[(0,_e.jsx)("i",{className:"bi bi-lock-fill",style:{marginRight:"8px"}}),"Account temporarily locked. Try again in ",Math.ceil(b/60)," minutes."]}),(0,_e.jsxs)("div",{style:{position:"relative",marginBottom:"10px"},children:[(0,_e.jsxs)("label",{style:{display:"block",color:"#e8f4fd",fontWeight:"700",marginBottom:"10px",fontSize:"15px",textShadow:"0 2px 8px rgba(0, 0, 0, 0.4)",textTransform:"uppercase",letterSpacing:"1px"},children:[(0,_e.jsx)("i",{className:"bi bi-person-circle",style:{marginRight:"10px",opacity:"0.9",color:"#c3e9ff",filter:"drop-shadow(0 1px 3px rgba(0, 0, 0, 0.3))"}}),"USER ID / EMAIL"]}),(0,_e.jsx)("input",{type:"text",placeholder:"Enter your Employee ID or Email",value:e,onChange:e=>N("userId",e.target.value),required:!0,autoFocus:!0,disabled:v,style:{width:"100%",padding:"16px 22px",border:"2px solid "+(p.userId?"rgba(255, 99, 132, 0.5)":"rgba(232, 244, 253, 0.3)"),borderRadius:"12px",outline:"none",background:v?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.08)",color:v?"#999":"#ffffff",fontSize:"16px",fontWeight:"500",transition:"all 0.3s ease",backdropFilter:"blur(10px)",opacity:v?.6:1},onFocus:e=>{v||(e.target.style.borderColor="rgba(232, 244, 253, 0.8)",e.target.style.background="rgba(255, 255, 255, 0.15)",e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="\n                        0 10px 25px rgba(0, 0, 0, 0.2),\n                        0 0 20px rgba(232, 244, 253, 0.3)\n                      ")},onBlur:e=>{v||(e.target.style.borderColor=p.userId?"rgba(255, 99, 132, 0.5)":"rgba(232, 244, 253, 0.3)",e.target.style.background="rgba(255, 255, 255, 0.08)",e.target.style.transform="translateY(0)",e.target.style.boxShadow="none")}}),p.userId&&(0,_e.jsxs)("div",{style:{color:"#ff6384",fontSize:"12px",marginTop:"5px",fontWeight:"500",animation:"slideInUp 0.2s ease-out"},children:[(0,_e.jsx)("i",{className:"bi bi-exclamation-circle",style:{marginRight:"5px"}}),p.userId]})]}),(0,_e.jsxs)("div",{style:{position:"relative",marginBottom:"10px"},children:[(0,_e.jsxs)("label",{style:{display:"block",color:"#e8f4fd",fontWeight:"700",marginBottom:"10px",fontSize:"15px",textShadow:"0 2px 8px rgba(0, 0, 0, 0.4)",textTransform:"uppercase",letterSpacing:"1px"},children:[(0,_e.jsx)("i",{className:"bi bi-shield-lock",style:{marginRight:"10px",opacity:"0.9",color:"#c3e9ff",filter:"drop-shadow(0 1px 3px rgba(0, 0, 0, 0.3))"}}),"PASSWORD"]}),(0,_e.jsxs)("div",{style:{position:"relative"},children:[(0,_e.jsx)("input",{type:u?"text":"password",placeholder:"Enter your password",value:n,onChange:e=>N("password",e.target.value),required:!0,disabled:v,minLength:6,style:{width:"100%",padding:"16px 55px 16px 22px",border:"2px solid "+(p.password?"rgba(255, 99, 132, 0.5)":"rgba(232, 244, 253, 0.3)"),borderRadius:"12px",outline:"none",background:v?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.08)",color:v?"#999":"#ffffff",fontSize:"16px",fontWeight:"500",transition:"all 0.3s ease",backdropFilter:"blur(10px)",opacity:v?.6:1},onFocus:e=>{v||(e.target.style.borderColor="rgba(232, 244, 253, 0.8)",e.target.style.background="rgba(255, 255, 255, 0.15)",e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="\n                          0 10px 25px rgba(0, 0, 0, 0.2),\n                          0 0 20px rgba(232, 244, 253, 0.3)\n                        ")},onBlur:e=>{v||(e.target.style.borderColor=p.password?"rgba(255, 99, 132, 0.5)":"rgba(232, 244, 253, 0.3)",e.target.style.background="rgba(255, 255, 255, 0.08)",e.target.style.transform="translateY(0)",e.target.style.boxShadow="none")}}),(0,_e.jsx)("button",{type:"button",onClick:()=>h(!u),disabled:v,style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",color:v?"#666":"#c3e9ff",fontSize:"18px",cursor:v?"not-allowed":"pointer",opacity:v?.5:.8,transition:"opacity 0.3s ease"},onMouseEnter:e=>{v||(e.target.style.opacity="1")},onMouseLeave:e=>{v||(e.target.style.opacity="0.8")},children:(0,_e.jsx)("i",{className:"bi "+(u?"bi-eye-slash":"bi-eye")})})]}),p.password&&(0,_e.jsxs)("div",{style:{color:"#ff6384",fontSize:"12px",marginTop:"5px",fontWeight:"500",animation:"slideInUp 0.2s ease-out"},children:[(0,_e.jsx)("i",{className:"bi bi-exclamation-circle",style:{marginRight:"5px"}}),p.password]}),n&&(0,_e.jsxs)("div",{style:{marginTop:"8px"},children:[(0,_e.jsx)("div",{style:{fontSize:"11px",color:"#c3e9ff",marginBottom:"4px",opacity:.8},children:"Password Strength:"}),(0,_e.jsx)("div",{style:{width:"100%",height:"3px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:(0,_e.jsx)("div",{style:{height:"100%",width:`${Math.min(n.length/12*100,100)}%`,background:n.length<6?"#ff6384":n.length<8?"#ffc107":"#28a745",transition:"all 0.3s ease",borderRadius:"2px"}})})]})]}),(0,_e.jsx)("div",{style:{textAlign:"right",margin:"10px 0"},children:(0,_e.jsxs)("button",{type:"button",onClick:()=>j("/forgot-password"),style:{background:"none",border:"none",color:"#c3e9ff",textDecoration:"none",fontSize:"14px",fontWeight:"600",transition:"all 0.3s ease",textShadow:"0 2px 6px rgba(0, 0, 0, 0.4)",textTransform:"capitalize",cursor:"pointer"},onMouseEnter:e=>{e.target.style.color="#ffffff",e.target.style.textShadow="0 0 15px rgba(195, 233, 255, 0.8)",e.target.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.target.style.color="#c3e9ff",e.target.style.textShadow="0 2px 6px rgba(0, 0, 0, 0.4)",e.target.style.transform="translateY(0)"},children:[(0,_e.jsx)("i",{className:"bi bi-key",style:{marginRight:"6px"}}),"Lost your password and advanced recovery?"]})}),(0,_e.jsx)("div",{style:{marginTop:"25px"},children:(0,_e.jsx)("button",{type:"submit",disabled:o||v,style:{width:"100%",padding:"18px",fontSize:"18px",fontWeight:"800",color:v?"#999":"#ffffff",border:"none",borderRadius:"14px",background:v?"linear-gradient(135deg, #666 0%, #555 50%, #444 100%)":o?"linear-gradient(135deg, #888 0%, #666 50%, #555 100%)":"linear-gradient(135deg, #3b82f6 0%, #2563eb 50%, #1e40af 100%)",cursor:o||v?"not-allowed":"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",textTransform:"uppercase",letterSpacing:"2px",boxShadow:o||v?"none":"\n                        0 8px 30px rgba(59, 130, 246, 0.45),\n                        inset 0 1px 0 rgba(255, 255, 255, 0.25)\n                      ",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)",opacity:v?.6:1,animation:o||v?"none":"buttonPulse 3s ease-in-out infinite"},onMouseEnter:e=>{o||v||(e.target.style.background="linear-gradient(135deg, #60a5fa 0%, #3b82f6 50%, #2563eb 100%)",e.target.style.transform="translateY(-5px) scale(1.02)",e.target.style.boxShadow="\n                        0 18px 45px rgba(59, 130, 246, 0.55),\n                        inset 0 1px 0 rgba(255, 255, 255, 0.35)\n                      ")},onMouseLeave:e=>{o||v||(e.target.style.background="linear-gradient(135deg, #3b82f6 0%, #2563eb 50%, #1e40af 100%)",e.target.style.transform="translateY(0) scale(1)",e.target.style.boxShadow="\n                        0 8px 30px rgba(59, 130, 246, 0.45),\n                        inset 0 1px 0 rgba(255, 255, 255, 0.25)\n                      ")},children:o?(0,_e.jsxs)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[(0,_e.jsx)("i",{className:"bi bi-arrow-clockwise",style:{animation:"spin 1s linear infinite",fontSize:"16px"}}),"Authenticating..."]}):v?(0,_e.jsxs)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[(0,_e.jsx)("i",{className:"bi bi-lock-fill"}),"Account Locked"]}):(0,_e.jsxs)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[(0,_e.jsx)("i",{className:"bi bi-box-arrow-in-right"}),"Secure Login"]})})}),(0,_e.jsxs)("div",{style:{marginTop:"20px",padding:"14px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.12) 0%, rgba(5, 150, 105, 0.08) 100%)",border:"1px solid rgba(16, 185, 129, 0.35)",borderRadius:"12px",textAlign:"center",fontSize:"12px",color:"#10b981",fontWeight:"600",backdropFilter:"blur(8px)",transition:"all 0.3s ease",animation:"slideInUp 0.5s ease-out 0.6s backwards"},children:[(0,_e.jsx)("i",{className:"bi bi-shield-check",style:{marginRight:"8px",fontSize:"14px"}}),"Your login is secured with advanced encryption"]})]})})]})]})]})},Ie={en:{systemSettings:"System Settings",dashboard:"Dashboard",systemTitle:"Time Attendance System",welcome:"Welcome",welcomeAdmin:"Welcome Admin",greetingMorning:"Good morning",greetingAfternoon:"Good afternoon",greetingEvening:"Good evening",refresh:"Refresh",logout:"Logout",admin:"Admin",saveChanges:"Save Changes",quickActions:"Quick Actions",addUser:"Add User",reportGeneration:"Report Generation",reportGenerationTitle:"Report Generation Center",reportGenerationSubtitle:"Generate comprehensive attendance and meal reports with advanced filtering options",reportTypeLabel:"Report Type",reportScopeLabel:"Report Scope",attendanceReport:"Attendance Report",mealReport:"Meal Report",auditReport:"Audit Report",individualReport:"Individual Report",groupReport:"Group Report",startDateLabel:"Start Date",endDateLabel:"End Date",enterEmployeeId:"Enter employee ID",generateReport:"Generate Report",generating:"Generating...",noDataFoundTitle:"No Data Found",noDataFoundText:"No records found for the selected criteria. Try adjusting your filters.",readyToGenerateTitle:"Ready to Generate Reports",readyToGenerateText:'Configure your report parameters above and click "Generate Report" to start.',mealManagementTitle:"Meal Management",bookNewMeal:"Book New Meal",divisionLabel:"Division",sectionLabel:"Section",mealDateLabel:"Meal Date",mealTypeLabel:"Meal Type",selectMealType:"Select Meal Type",mealTypeBreakfast:"\ud83c\udf05 Breakfast",mealTypeLunch:"\u2600\ufe0f Lunch",mealTypeDinner:"\ud83c\udf19 Dinner",mealTypeSnack:"\ud83c\udf6a Snack",expectedQuantityLabel:"Expected Quantity",specialRequirementsLabel:"Special Requirements",specialRequirementsPlaceholder:"Any dietary restrictions, allergies, or special instructions...",bookMeal:"Book Meal",bookingInProgress:"Booking...",todaysBookingsLabel:"Today's Bookings",bookingInfoTitle:"Booking Information",bookingInfo_line1:"Bookings must be made in advance",bookingInfo_line2:"Booking deadline: 09:00 AM daily",bookingInfo_line3:"Standard meals available in cafeteria",bookingInfo_line4:"Special dietary requirements noted",bookingInfo_line5:"Reports available in Report Generation",errorFetchingDivisions:"Error fetching divisions. Please try again.",errorFetchingSections:"Error fetching sections. Please try again.",mealBookingCreated:"Meal booking created successfully!",mealBookingCreateError:"Error creating meal booking",mealBookingNetworkError:"Network error occurred while creating meal booking",mealManagement:"Meal Management",divisionManagementTitle:"Division Management",noPermissionViewDivisions:"You do not have permission to view divisions. Contact a Super Admin for access.",divisionSearchLabel:"Search:",divisionSearchPlaceholder:"Search by Division Code or Name",divisionCodeHeader:"Division Code",divisionNameHeader:"Division Name",divisionStatusHeader:"Status",divisionCreatedDateHeader:"Created Date",actionsHeader:"Actions",viewDivisionDetails:"View Division Details",viewLabel:"View",activeLabel:"Active",inactiveLabel:"Inactive",naLabel:"N/A",noDivisionsFoundMsg:'No divisions found. Click "Add Division" to create the first division.',addDivision:"Add Division",divisionDetailsTitle:"Division Details",confirmDeleteDivision:'Are you sure you want to delete "{name}" division? This action cannot be undone.',divisionDeletedSuccess:"Division deleted successfully!",divisionCreatedSuccess:"Division created successfully!",divisionUpdatedSuccess:"Division updated successfully!",divisionManagement:"Division Management",sectionManagement:"Section Management",rolesPermissions:"Roles & Permissions",employeeManagement:"Employee Management",attendanceSystem:"ATTENDANCE SYSTEM",poweredBy:"@Powered By IS Division",slpaTitle:"SLPA TIME ATTENDANCE SYSTEM",createdBy:"Created By: IS Division",closeSidebar:"Close Sidebar",toggleSidebar:"Toggle Sidebar",profile:"Profile",settings:"Settings",general:"General",appearance:"Appearance",security:"Security",notifications:"Notifications",dataExport:"Data Export",language:"Language",theme:"Theme",workingHours:"Working Hours",startTime:"Start Time",endTime:"End Time",enableNotificationSound:"Enable Notification Sound",notificationEmails:"Notification Emails",addMail:"Add Mail",noEmails:"No notification emails added yet.",changePasswordTitle:"Change Password",enterCurrentPasswordPlaceholder:"Enter current password",verifyingPassword:"Verifying...",verifyPasswordFailed:"Current password is incorrect",enterNewPasswordLabel:"New Password",confirmNewPasswordLabel:"Confirm New Password",changePasswordButton:"Change Password",forgotPasswordText:"Forgot password?",passwordVerifiedSuccess:"Current password verified",forgotPasswordInstructions:"Enter your account email to receive a reset link.",resetEmailSentMsg:"If the email exists, a password reset link has been sent.",passwordMismatch:"Passwords do not match",passwordChangedSuccess:"Password changed successfully!",passwordChangeError:"Error changing password. Please try again.",systemName:"System Name",timezone:"Timezone",totalEmployees:"Total Employees",allSubsections:"All sub-sections",presentToday:"Present Today",activeAttendance:"Active attendance",attendanceRateLabel:"attendance rate",activeDivisions:"Active Divisions",allDivisions:"All divisions",totalSections:"Total Sections",totalSubSections:"Total Sub-Sections",todaysAttendance:"Today's Attendance",presentLabel:"Present",absentLabel:"Absent",monthlyAttendance:"Monthly Attendance",export:"Export",quickInsights:"Quick Insights",highAttendance:"High Attendance",lateArrivals:"Late Arrivals",earlyDepartures:"Early Departures",recentActivity:"Recent Activity",noRecentActivities:"No recent activities found.",showAll:"Show All",close:"Close",divisionManagementTitle:"Division Management",noPermissionViewDivisions:"You do not have permission to view divisions. Contact a Super Admin for access.",divisionSearchLabel:"Search:",divisionSearchPlaceholder:"Search by Division Code or Name",divisionCodeHeader:"Division Code",divisionNameHeader:"Division Name",divisionStatusHeader:"Status",divisionCreatedDateHeader:"Created Date",actionsHeader:"Actions",viewDivisionDetails:"View Division Details",viewLabel:"View",activeLabel:"Active",inactiveLabel:"Inactive",naLabel:"N/A",noDivisionsFoundMsg:'No divisions found. Click "Add Division" to create the first division.',addDivision:"Add Division",divisionDetailsTitle:"Division Details",confirmDeleteDivision:'Are you sure you want to delete "{name}" division? This action cannot be undone.',divisionDeletedSuccess:"Division deleted successfully!",divisionCreatedSuccess:"Division created successfully!",divisionUpdatedSuccess:"Division updated successfully!",userManagement:"User Management",noPermissionViewUsers:"You do not have permission to view users. Contact a Super Admin for access.",editUser:"Edit User",addNewUser:"Add New User",firstName:"First Name",lastName:"Last Name",emailLabel:"Email",employeeIdLabel:"Employee ID",divisionLabel:"Division",selectDivision:"Select Division",roleLabel:"Role",sectionLabel:"Section",selectSection:"Select Section",passwordLabel:"Password",confirmPasswordLabel:"Confirm Password",cancel:"Cancel",updateUser:"Update User",noPermissionAddUser:"You do not have permission to add users",noUsersFound:'No users found. Click "Add User" to create the first user.',confirmDeleteUser:"Are you sure you want to delete this user?",userDeletedSuccess:"User deleted successfully!",userCreateSuccess:"User created successfully!",userUpdateSuccess:"User updated successfully!",passwordsDoNotMatch:"Passwords do not match!",pleaseFillRequired:"Please fill in all required fields!",passwordRequired:"Password is required for new users!",failedToSaveUser:"Failed to save user",loading:"Loading...",nameLabel:"Name",statusLabel:"Status",actionsLabel:"Actions",employeeManagement:"Employee Management",employeeHeaderSubtitle:"View all employee records from HRIS API with division and section filtering",activeFiltersLabel:"Active Filters:",allDivisionsLabel:"All Divisions",allSectionsLabel:"All Sections",allSubSectionsLabel:"All Sub-Sections",selectDivisionFirst:"Select division first",selectSectionFirst:"Select section first",noSections:"No sections",noSubsections:"No sub-sections",searchLabel:"Search",searchPlaceholder:"Search by ID, Name, Designation, NIC...",clearSearchTitle:"Clear search",fetchingHris:"Fetching employee data from HRIS API...",noEmployeesFoundMsg:"No employees found",fullNameLabel:"Full Name",designationLabel:"Designation",genderLabel:"Gender",nicLabel:"NIC",subSectionLabel:"Sub-Section"},si:{systemSettings:"\u0db4\u0daf\u0dca\u0db0\u0dad\u0dd2 \u0dc3\u0dd0\u0d9a\u0dc3\u0dd4\u0db8\u0dca",quickActions:"\u0dc4\u0dcf\u0da9\u0dca \u0d9a\u0dca\u200d\u0dbb\u0dd2\u0dba\u0dcf",addUser:"\u0db4\u0dbb\u0dd2\u0dc1\u0dd3\u0dbd\u0d9a \u0d91\u0d9a\u0dca \u0d9a\u0dbb\u0db1\u0dca\u0db1",reportGeneration:"\u0dc0\u0dcf\u0dbb\u0dca\u0dad\u0dcf \u0da2\u0db1\u0db1\u0dba",mealManagement:"\u0d86\u0dc4\u0dcf\u0dbb \u0d9a\u0dc5\u0db8\u0db1\u0dcf\u0d9a\u0dbb\u0dab\u0dba",divisionManagement:"\u0dc0\u0d9a\u0dc0\u0dcf\u0db1\u0dd4 \u0d9a\u0dc5\u0db8\u0db1\u0dcf\u0d9a\u0dbb\u0dab\u0dba",sectionManagement:"\u0d9a\u0dbd\u0dcf\u0db4 \u0d9a\u0dc5\u0db8\u0db1\u0dcf\u0d9a\u0dbb\u0dab\u0dba",rolesPermissions:"\u0db7\u0dd6\u0db8\u0dd2\u0d9a\u0dcf \u0dc3\u0dc4 \u0d85\u0dc0\u0dc3\u0dbb",employeeManagement:"\u0dc3\u0dda\u0dc0\u0d9a \u0d9a\u0dc5\u0db8\u0db1\u0dcf\u0d9a\u0dbb\u0dab\u0dba",attendanceSystem:"ATTENDANCE SYSTEM",poweredBy:"@Powered By IS Division",slpaTitle:"SLPA TIME ATTENDANCE SYSTEM",createdBy:"Created By: IS Division",closeSidebar:"\u0dba\u0dd2\u0dad\u0dd4\u0dbb\u0dd4 \u0dad\u0dd2\u0dbb\u0dba \u0dc0\u0dc3\u0dcf \u0daf\u0dd0\u0db8\u0dd3\u0db8",toggleSidebar:"\u0db4\u0dc3\u0dd4\u0dbb\u0dd4\u0dc0 \u0dad\u0dd2\u0dbb\u0dba",profile:"\u0db4\u0dca\u0dbb\u0ddc\u0dc6\u0dba\u0dd2\u0dbd\u0dca",settings:"\u0dc3\u0dd0\u0d9a\u0dc3\u0dd4\u0db8\u0dca",dashboard:"Dashboard",systemTitle:"Time Attendance System",welcome:"\u0d86\u0dba\u0dd4\u0db6\u0ddd\u0dc0\u0db1\u0dca",welcomeAdmin:"\u0d86\u0dba\u0dd4\u0db6\u0ddd\u0dc0\u0db1\u0dca \u0db4\u0dca\u200d\u0dbb\u0db0\u0dcf\u0db1\u0dd2\u0dba\u0dcf",greetingMorning:"\u0dc3\u0dd4\u0db7 \u0d8b\u0daf\u0dd1\u0dc3\u0db1\u0d9a\u0dca",greetingAfternoon:"\u0dc3\u0dd4\u0db7 \u0daf\u0dc0\u0dbd\u0dca\u0dc0\u0dbd\u0d9a\u0dca",greetingEvening:"\u0dc3\u0dd4\u0db7 \u0dc3\u0dc0\u0dc3\u0d9a\u0dca",refresh:"\u0db1\u0dc0\u0dd3\u0d9a\u0dbb\u0dab\u0dba",logout:"\u0db4\u0dd2\u0da7\u0dc0\u0dd3\u0db8",admin:"\u0db4\u0dbb\u0dd2\u0db4\u0dcf\u0dbd\u0d9a",saveChanges:"\u0dc0\u0dd9\u0db1\u0dc3\u0dca\u0d9a\u0db8\u0dca \u0dc3\u0dd4\u0dbb\u0d9a\u0dd2\u0db1\u0dca\u0db1",general:"\u0dc3\u0dcf\u0db8\u0dcf\u0db1\u0dca\u200d\u0dba",appearance:"\u0db4\u0dd9\u0db1\u0dd4\u0db8",security:"\u0db4\u0dd6\u0dbb\u0dca\u0dc0 \u0d86\u0dbb\u0d9a\u0dca\u0dc2\u0dcf\u0dc0",notifications:"\u0dbd\u0d9a\u0dd4\u0dab\u0dd4",dataExport:"\u0daf\u0dad\u0dca\u0dad \u0d85\u0db4\u0db1\u0dba\u0db1",language:"\u0db7\u0dcf\u0dc2\u0dcf\u0dc0",theme:"\u0dad\u0dda\u0db8\u0dcf\u0dc0",workingHours:"\u0dc0\u0dd0\u0da9 \u0d9a\u0dbb\u0db1 \u0dc0\u0dda\u0dbd\u0dcf\u0dc0",startTime:"\u0d86\u0dbb\u0db8\u0dca\u0db7\u0d9a \u0dc0\u0dda\u0dbd\u0dcf\u0dc0",endTime:"\u0d85\u0dc0\u0dc3\u0db1\u0dca \u0dc0\u0dda\u0dbd\u0dcf\u0dc0",enableNotificationSound:"\u0dba\u0dc4\u0dc5\u0dd4\u0dc0\u0dcf\u0d9c\u0dd0\u0db1\u0dd4\u0db8\u0dca \u0dc1\u0db6\u0dca\u0daf \u0dc3\u0d9a\u0dca\u200d\u0dbb\u0dd2\u0dba \u0d9a\u0dbb\u0db1\u0dca\u0db1",notificationEmails:"\u0daf\u0dd0\u0db1\u0dd4\u0db8\u0dca\u0daf\u0dd3\u0db8\u0dca \u0dc0\u0dd2\u0daf\u0dca\u200d\u0dba\u0dd4\u0dad\u0dca \u0dbd\u0dd2\u0db4\u0dd2\u0db1",addMail:"\u0dbd\u0dd2\u0db4\u0dd2\u0db1\u0dba \u0d91\u0d9a\u0dad\u0dd4 \u0d9a\u0dbb\u0db1\u0dca\u0db1",noEmails:"\u0dad\u0dc0\u0db8 \u0dc0\u0dd2\u0daf\u0dca\u200d\u0dba\u0dd4\u0dad\u0dca \u0dbd\u0dd2\u0db4\u0dd2\u0db1 \u0d91\u0d9a\u0dca \u0d9a\u0dbb \u0db1\u0dd0\u0dad.",systemName:"\u0db4\u0daf\u0dca\u0db0\u0dad\u0dd2 \u0db1\u0db8",timezone:"\u0dc0\u0dda\u0dbd\u0dcf \u0d9a\u0dbd\u0dcf\u0db4\u0dba",userManagement:"\u0db4\u0dbb\u0dd2\u0dc1\u0dd3\u0dbd\u0d9a \u0d9a\u0dc5\u0db8\u0db1\u0dcf\u0d9a\u0dbb\u0dab\u0dba",noPermissionViewUsers:"\u0d94\u0db6\u0da7 \u0db4\u0dbb\u0dd2\u0dc1\u0dd3\u0dbd\u0d9a\u0dba\u0db1\u0dca \u0db1\u0dbb\u0db9\u0dcf \u0db6\u0dbd\u0db1\u0dca\u0db1 \u0d85\u0dc0\u0dc3\u0dbb \u0db1\u0dd0\u0dad. \u0db4\u0dca\u200d\u0dbb\u0dc0\u0dd3\u0dab \u0db4\u0dbb\u0dd2\u0db4\u0dcf\u0dbd\u0d9a\u0dba\u0dd9\u0d9a\u0dd4 \u0dc3\u0db8\u0dca\u0db6\u0db1\u0dca\u0db0 \u0dc0\u0db1\u0dca\u0db1.",editUser:"\u0db4\u0dbb\u0dd2\u0dc1\u0dd3\u0dbd\u0d9a\u0dba\u0dd2\u0db1\u0dca \u0dc3\u0d82\u0dc3\u0dca\u0d9a\u0dbb\u0dab\u0dba \u0d9a\u0dbb\u0db1\u0dca\u0db1",addNewUser:"\u0db1\u0dc0 \u0db4\u0dbb\u0dd2\u0dc1\u0dd3\u0dbd\u0d9a\u0dba\u0dd9\u0d9a\u0dd4 \u0d91\u0d9a\u0dad\u0dd4 \u0d9a\u0dbb\u0db1\u0dca\u0db1",firstName:"\u0db8\u0dd4\u0dbd\u0dca \u0db1\u0db8",lastName:"\u0dc4\u0dc3\u0dca\u0dad \u0db1\u0db8",emailLabel:"\u0d8a\u0db8\u0dda\u0dbd\u0dca",employeeIdLabel:"\u0dc3\u0dda\u0dc0\u0d9a ID",divisionLabel:"\u0dc0\u0dbb\u0dca\u0d9c\u0dba",selectDivision:"\u0dc0\u0dbb\u0dca\u0d9c\u0dba \u0dad\u0ddd\u0dbb\u0db1\u0dca\u0db1",roleLabel:"\u0db7\u0dd6\u0db8\u0dd2\u0d9a\u0dcf\u0dc0",sectionLabel:"\u0d85\u0d82\u0dc1\u0dba",selectSection:"\u0d85\u0d82\u0dc1\u0dba \u0dad\u0ddd\u0dbb\u0db1\u0dca\u0db1",passwordLabel:"\u0db8\u0dd4\u0dbb\u0db4\u0daf\u0dba",confirmPasswordLabel:"\u0db8\u0dd4\u0dbb\u0db4\u0daf\u0dba \u0dad\u0dc4\u0dc0\u0dd4\u0dbb\u0dd4 \u0d9a\u0dbb\u0db1\u0dca\u0db1",cancel:"\u0dc0\u0dbd\u0dca\u0d9c\u0db1\u0dca\u0db1",updateUser:"\u0db4\u0dbb\u0dd2\u0dc1\u0dd3\u0dbd\u0d9a \u0dba\u0dcf\u0dc0\u0dad\u0dca\u0d9a\u0dcf\u0dbd\u0dd3\u0db1 \u0d9a\u0dbb\u0db1\u0dca\u0db1",noPermissionAddUser:"\u0db4\u0dbb\u0dd2\u0dc1\u0dd3\u0dbd\u0d9a\u0dba\u0db1\u0dca \u0d91\u0d9a\u0dca \u0d9a\u0dd2\u0dbb\u0dd3\u0db8\u0da7 \u0d94\u0db6\u0da7 \u0d85\u0dc0\u0dc3\u0dbb \u0db1\u0ddc\u0db8\u0dd0\u0dad",noUsersFound:'\u0db4\u0dbb\u0dd2\u0dc1\u0dd3\u0dbd\u0d9a\u0dba\u0db1\u0dca \u0db1\u0ddc\u0db8\u0dd0\u0dad. \u0db4\u0dca\u200d\u0dbb\u0dae\u0db8 \u0db4\u0dbb\u0dd2\u0dc1\u0dd3\u0dbd\u0d9a\u0dba\u0dcf \u0db1\u0dd2\u0dbb\u0dca\u0db8\u0dcf\u0dab\u0dba \u0d9a\u0dd2\u0dbb\u0dd3\u0db8\u0da7 "\u0db4\u0dbb\u0dd2\u0dc1\u0dd3\u0dbd\u0d9a \u0d91\u0d9a\u0dad\u0dd4 \u0d9a\u0dbb\u0db1\u0dca\u0db1" \u0d9a\u0dca\u0dbd\u0dd2\u0d9a\u0dca \u0d9a\u0dbb\u0db1\u0dca\u0db1.',confirmDeleteUser:"\u0d87\u0dad\u0dca\u0dad\u0da7\u0db8 \u0d94\u0db6\u0da7 \u0db8\u0dd9\u0db8 \u0db4\u0dbb\u0dd2\u0dc1\u0dd3\u0dbd\u0d9a\u0dba\u0dcf \u0db8\u0d9a\u0dcf \u0daf\u0dd0\u0db8\u0dd3\u0db8\u0da7 \u0d85\u0dc0\u0dc1\u0dca\u200d\u0dba\u0daf?",userDeletedSuccess:"\u0db4\u0dbb\u0dd2\u0dc1\u0dd3\u0dbd\u0d9a\u0dba\u0dcf \u0dc3\u0dcf\u0dbb\u0dca\u0dae\u0d9a\u0dc0 \u0db8\u0d9a\u0db1 \u0dbd\u0daf\u0dd2!",userCreateSuccess:"\u0db4\u0dbb\u0dd2\u0dc1\u0dd3\u0dbd\u0d9a\u0dba\u0dcf \u0dc3\u0dcf\u0dbb\u0dca\u0dae\u0d9a\u0dc0 \u0db1\u0dd2\u0dbb\u0dca\u0db8\u0dcf\u0dab\u0dba \u0d9a\u0dbb\u0db1 \u0dbd\u0daf\u0dd2!",userUpdateSuccess:"\u0db4\u0dbb\u0dd2\u0dc1\u0dd3\u0dbd\u0d9a\u0dba\u0dcf \u0dc3\u0dcf\u0dbb\u0dca\u0dae\u0d9a\u0dc0 \u0dba\u0dcf\u0dc0\u0dad\u0dca\u0d9a\u0dcf\u0dbd\u0dd3\u0db1 \u0d9a\u0dbb\u0db1 \u0dbd\u0daf\u0dd2!",passwordsDoNotMatch:"\u0db8\u0dd4\u0dbb\u0db4\u0daf \u0dc0\u0dbd \u0d9c\u0dd0\u0da7\u0dc5\u0dd4\u0dc0\u0d9a\u0dca \u0d87\u0dad!",pleaseFillRequired:"\u0d85\u0dc0\u0dc1\u0dca\u200d\u0dba \u0d9a\u0dca\u0dc2\u0dda\u0dad\u0dca\u200d\u0dbb\u0dba \u0db4\u0dd2\u0dbb\u0dc0\u0dd3\u0db8\u0da7 \u0d9a\u0dbb\u0dd4\u0dab\u0dcf\u0d9a\u0dbb!",passwordRequired:"\u0db1\u0dc0 \u0db4\u0dbb\u0dd2\u0dc1\u0dd3\u0dbd\u0d9a\u0dba\u0db1\u0dca \u0dc3\u0db3\u0dc4\u0dcf \u0db8\u0dd4\u0dbb\u0db4\u0daf\u0dba\u0d9a\u0dca \u0d85\u0dc0\u0dc1\u0dca\u200d\u0dba\u0dba\u0dd2!",failedToSaveUser:"\u0db4\u0dbb\u0dd2\u0dc1\u0dd3\u0dbd\u0d9a\u0dba\u0dcf \u0dc3\u0dd4\u0dbb\u0dd0\u0d9a\u0dd2\u0db8 \u0d85\u0dc3\u0dcf\u0dbb\u0dca\u0dae\u0d9a\u0dba\u0dd2",loading:"\u0db4\u0dd2\u0dbb\u0dc0\u0dd3\u0db8...",nameLabel:"\u0db1\u0dcf\u0db8\u0dba",statusLabel:"\u0dad\u0dad\u0dca\u0dad\u0dca\u0dc0\u0dba",actionsLabel:"\u0d9a\u0dca\u200d\u0dbb\u0dd2\u0dba\u0dcf",fullNameLabel:"\u0dc3\u0db8\u0dca\u0db4\u0dd6\u0dbb\u0dca\u0dab \u0db1\u0db8",designationLabel:"\u0dad\u0db1\u0dad\u0dd4\u0dbb",genderLabel:"\u0dbd\u0dd2\u0d82\u0d9c\u0dba",nicLabel:"NIC",subSectionLabel:"\u0d8b\u0db4-\u0d85\u0d82\u0dc1",mealManagementTitle:"\u0d86\u0dc4\u0dcf\u0dbb \u0d9a\u0dc5\u0db8\u0db1\u0dcf\u0d9a\u0dbb\u0dab\u0dba",bookNewMeal:"\u0d8b\u0db4\u0dc4\u0dcf\u0dbb\u0dba\u0d9a\u0dca \u0dc0\u0dd9\u0db1\u0dca\u0d9a\u0dbb\u0db1\u0dca\u0db1",mealDateLabel:"\u0d86\u0dc4\u0dcf\u0dbb \u0daf\u0dd2\u0db1\u0dba",mealTypeLabel:"\u0d86\u0dc4\u0dcf\u0dbb \u0dc0\u0dbb\u0dca\u0d9c\u0dba",selectMealType:"\u0d86\u0dc4\u0dcf\u0dbb \u0dc0\u0dbb\u0dca\u0d9c\u0dba \u0dad\u0ddd\u0dbb\u0db1\u0dca\u0db1",mealTypeBreakfast:"\ud83c\udf05 Breakfast",mealTypeLunch:"\u2600\ufe0f Lunch",mealTypeDinner:"\ud83c\udf19 Dinner",mealTypeSnack:"\ud83c\udf6a Snack",expectedQuantityLabel:"\u0d94\u0d9a\u0dca\u0d9a\u0db8 \u0d91\u0dbd\u0dca\u0dbd\u0dc0\u0dd3\u0db8",specialRequirementsLabel:"\u0dc0\u0dd2\u0dc1\u0dda\u0dc2 \u0d85\u0dc0\u0dc1\u0dca\u200d\u0dba\u0dad\u0dcf",specialRequirementsPlaceholder:"\u0d86\u0dc4\u0dcf\u0dbb \u0dbb\u0dd2\u0dc3\u0dd2\u0dbd\u0dca, \u0d87\u0dbd\u0dbb\u0dca\u0da2\u0dd2 \u0dc4\u0ddd \u0dc0\u0dd2\u0dc1\u0dda\u0dc2 \u0d8b\u0db4\u0daf\u0dd9\u0dc3\u0dca \u0db8\u0dd9\u0dc4\u0dd2 \u0dbd\u0dd2\u0dba\u0db1\u0dca\u0db1...",bookMeal:"\u0d86\u0dc4\u0dcf\u0dbb\u0dba \u0dc0\u0dd9\u0db1\u0dca\u0d9a\u0dbb\u0db1\u0dca\u0db1",bookingInProgress:"\u0dc0\u0dd0\u0da9\u0dd2\u0daf\u0dd2\u0dba\u0dd4\u0dab\u0dd4 \u0d9a\u0dd2\u0dbb\u0dd3\u0db8...",todaysBookingsLabel:"\u0d85\u0daf\u0d9c\u0dda \u0dc0\u0dd9\u0db1\u0dca\u0d9a\u0dd2\u0dbb\u0dd3\u0db8\u0dca",bookingInfoTitle:"\u0dc0\u0dd9\u0db1\u0dca\u0d9a\u0dd2\u0dbb\u0dd3\u0db8\u0dca \u0dad\u0ddc\u0dbb\u0dad\u0dd4\u0dbb\u0dd4",bookingInfo_line1:"\u0db4\u0dd9\u0db1\u0dca\u0dc0\u0dd3\u0db8\u0dca \u0db4\u0dd9\u0dbb \u0dc3\u0dd0\u0d9a\u0dc3\u0dd2\u0dba \u0dba\u0dd4\u0dad\u0dd4\u0dba",bookingInfo_line2:"\u0dc0\u0dd9\u0db1\u0dca\u0d9a\u0dd2\u0dbb\u0dd3\u0db8\u0dda \u0d9a\u0dcf\u0dbd\u0dc3\u0dd3\u0db8\u0dcf\u0dc0: \u0daf\u0dd2\u0db1\u0d9a\u0da7 \u0db4\u0dd9\u0dbb 09:00",bookingInfo_line3:"\u0d9a\u0dd0\u0dc6\u0dda\u0da7\u0dda\u0dbb\u0dd2\u0dba\u0dcf\u0dc0\u0dda \u0dc3\u0dcf\u0db8\u0dcf\u0db1\u0dca\u200d\u0dba \u0d86\u0dc4\u0dcf\u0dbb \u0dbd\u0db6\u0dcf\u0d9c\u0dad \u0dc4\u0dd0\u0d9a",bookingInfo_line4:"\u0dc0\u0dd2\u0dc1\u0dda\u0dc2 \u0d86\u0dc4\u0dcf\u0dbb \u0d85\u0dc0\u0dc1\u0dca\u200d\u0dba\u0dad\u0dcf \u0dc3\u0dbd\u0d9a\u0dcf \u0db6\u0dbd\u0db1\u0dca\u0db1",bookingInfo_line5:"\u0dc0\u0dcf\u0dbb\u0dca\u0dad\u0dcf \u0dc0\u0dcf\u0dbb\u0dca\u0dad\u0dcf \u0da2\u0db1\u0db1\u0dba \u0dc0\u0dd9\u0dad \u0dbd\u0db6\u0dcf \u0d9c\u0dad \u0dc4\u0dd0\u0d9a",errorFetchingDivisions:"\u0dc0\u0d9a\u0db8\u0dca \u0dbd\u0db6\u0dcf \u0d9c\u0dd0\u0db1\u0dd3\u0db8\u0da7 \u0daf\u0ddd\u0dc2\u0dba\u0d9a\u0dca. \u0d9a\u0dbb\u0dd4\u0dab\u0dcf\u0d9a\u0dbb \u0db1\u0dd0\u0dc0\u0dad \u0d8b\u0dad\u0dca\u0dc3\u0dcf\u0dc4 \u0d9a\u0dbb\u0db1\u0dca\u0db1.",errorFetchingSections:"\u0d85\u0d82\u0dc1 \u0dbd\u0db6\u0dcf \u0d9c\u0dd0\u0db1\u0dd3\u0db8\u0da7 \u0daf\u0ddd\u0dc2\u0dba\u0d9a\u0dca. \u0d9a\u0dbb\u0dd4\u0dab\u0dcf\u0d9a\u0dbb \u0db1\u0dd0\u0dc0\u0dad \u0d8b\u0dad\u0dca\u0dc3\u0dcf\u0dc4 \u0d9a\u0dbb\u0db1\u0dca\u0db1.",mealBookingCreated:"\u0d86\u0dc4\u0dcf\u0dbb \u0dc0\u0dd9\u0db1\u0dca\u0d9a\u0dd2\u0dbb\u0dd3\u0db8 \u0dc3\u0dcf\u0dbb\u0dca\u0dae\u0d9a\u0dba\u0dd2!",mealBookingCreateError:"\u0d86\u0dc4\u0dcf\u0dbb \u0dc0\u0dd9\u0db1\u0dca\u0d9a\u0dd2\u0dbb\u0dd3\u0db8\u0dda \u0daf\u0ddd\u0dc2\u0dba\u0d9a\u0dca",mealBookingNetworkError:"\u0d86\u0dc4\u0dcf\u0dbb \u0dc0\u0dd9\u0db1\u0dca\u0d9a\u0dd2\u0dbb\u0dd3\u0db8\u0dda\u0daf\u0dd3 \u0da2\u0dcf\u0dbd \u0daf\u0ddd\u0dc2\u0dba\u0d9a\u0dca \u0dc3\u0dd2\u0daf\u0dd4 \u0dc0\u0dd2\u0dba",successLabel:"\u0dc3\u0dcf\u0dbb\u0dca\u0dae\u0d9a\u0dba\u0dd2!",errorLabel:"\u0daf\u0ddd\u0dc2\u0dba\u0d9a\u0dca!",totalEmployees:"\u0db8\u0dd4\u0dc5\u0dd4 \u0dc3\u0dda\u0dc0\u0d9a\u0dba\u0dd2\u0db1\u0dca",allSubsections:"\u0d8b\u0db4-\u0d85\u0d82\u0dc1 \u0dc3\u0dd2\u0dba\u0dbd\u0dd4",presentToday:"\u0d85\u0daf \u0db4\u0dc0\u0dad\u0dd2\u0db1",activeAttendance:"\u0dc3\u0d9a\u0dca\u200d\u0dbb\u0dd3\u0dba \u0d85\u0da7\u0dd9\u0db1\u0dca\u0da9\u0db1\u0dca\u0dc3\u0dca",attendanceRateLabel:"\u0db4\u0dd0\u0db8\u0dd2\u0dab\u0dd3\u0db8\u0dda \u0d85\u0db1\u0dd4\u0db4\u0dcf\u0dad\u0dba",activeDivisions:"\u0dc3\u0d9a\u0dca\u200d\u0dbb\u0dd3\u0dba \u0dc0\u0d9a\u0dc0\u0dcf\u0db1\u0dd4",allDivisions:"\u0dc3\u0dd2\u0dba\u0dbd\u0dd4 \u0dc0\u0d9a\u0dc0\u0dcf\u0db1\u0dd4",totalSections:"\u0db8\u0dcf\u0dca\u0dc2\u0dd2\u0d9a \u0d85\u0d82\u0dc1",totalSubSections:"\u0dc3\u0db6\u0dca-\u0d85\u0d82\u0dc1",todaysAttendance:"\u0d85\u0daf\u0d9c\u0dda \u0db4\u0dd0\u0db8\u0dd2\u0dab\u0dd2\u0dbd\u0dca\u0dbd",presentLabel:"\u0db4\u0dc0\u0dad\u0dd2\u0db1",absentLabel:"\u0db1\u0dd0\u0dad\u0dca\u0db1\u0db8\u0dca",monthlyAttendance:"\u0db8\u0dcf\u0dc3\u0dd2\u0d9a \u0db4\u0dd0\u0db8\u0dd2\u0dab\u0dd2\u0dbd\u0dca\u0dbd",export:"\u0d85\u0db4\u0db1\u0dba\u0db1\u0dba",quickInsights:"\u0dc0\u0dda\u0d9c\u0dc0\u0dad\u0dca \u0d85\u0dc0\u0db6\u0ddd\u0db0",highAttendance:"\u0d89\u0dc4\u0dc5 \u0db4\u0dd0\u0db8\u0dd2\u0dab\u0dd3\u0db8",lateArrivals:"\u0db4\u0dc3\u0dd4 \u0db4\u0dd0\u0db8\u0dd2\u0dab\u0dd3\u0db8\u0dca",earlyDepartures:"\u0db4\u0dd6\u0dbb\u0dca\u0dc0 \u0dc0\u0dd2\u0dc1\u0dca\u200d\u0dbb\u0dcf\u0db8",recentActivity:"\u0db8\u0dd1\u0dad \u0d9a\u0dca\u200d\u0dbb\u0dd2\u0dba\u0dcf\u0d9a\u0dcf\u0dbb\u0d9a\u0db8\u0dca",noRecentActivities:"\u0db8\u0dd1\u0dad \u0d9a\u0dca\u200d\u0dbb\u0dd2\u0dba\u0dcf \u0db8\u0ddc\u0db1\u0dc0\u0daf\u0dd0\u0dba\u0dd2 \u0dc3\u0ddc\u0dba\u0dcf \u0db1\u0ddc\u0d9c\u0db1\u0dca\u0db1\u0dcf \u0dbd\u0daf\u0dd2.",showAll:"\u0dc3\u0dd2\u0dba\u0dbd\u0dca\u0dbd \u0db4\u0dd9\u0db1\u0dca\u0db1\u0db1\u0dca\u0db1",close:"\u0d89\u0dbb\u0dd2\u0db1\u0dca\u0db1"},ta:{systemSettings:"\u0b95\u0ba3\u0bbf\u0ba9\u0bbf \u0b85\u0bae\u0bc8\u0baa\u0bcd\u0baa\u0bc1\u0b95\u0bb3\u0bcd",quickActions:"\u0bb5\u0bbf\u0bb0\u0bc8\u0bb5\u0bbe\u0ba9 \u0ba8\u0b9f\u0bb5\u0b9f\u0bbf\u0b95\u0bcd\u0b95\u0bc8\u0b95\u0bb3\u0bcd",addUser:"\u0baa\u0baf\u0ba9\u0bb0\u0bc8 \u0b9a\u0bc7\u0bb0\u0bcd\u0b95\u0bcd\u0b95\u0bb5\u0bc1\u0bae\u0bcd",reportGeneration:"\u0b85\u0bb1\u0bbf\u0b95\u0bcd\u0b95\u0bc8 \u0b89\u0bb0\u0bc1\u0bb5\u0bbe\u0b95\u0bcd\u0b95\u0bae\u0bcd",mealManagement:"\u0b89\u0ba3\u0bb5\u0bc1 \u0ba8\u0bbf\u0bb0\u0bcd\u0bb5\u0bbe\u0b95\u0bae\u0bcd",divisionManagement:"\u0bb5\u0b95\u0bc1\u0baa\u0bcd\u0baa\u0bc1 \u0ba8\u0bbf\u0bb0\u0bcd\u0bb5\u0bbe\u0b95\u0bae\u0bcd",sectionManagement:"\u0bb5\u0b95\u0bc1\u0ba4\u0bbf \u0ba8\u0bbf\u0bb0\u0bcd\u0bb5\u0bbe\u0b95\u0bae\u0bcd",rolesPermissions:"\u0baa\u0bbe\u0ba4\u0bcd\u0ba4\u0bbf\u0bb0\u0b99\u0bcd\u0b95\u0bb3\u0bcd \u0bae\u0bb1\u0bcd\u0bb1\u0bc1\u0bae\u0bcd \u0b85\u0ba9\u0bc1\u0bae\u0ba4\u0bbf\u0b95\u0bb3\u0bcd",employeeManagement:"\u0baa\u0ba3\u0bbf\u0baf\u0bbe\u0bb3\u0bb0\u0bcd \u0ba8\u0bbf\u0bb0\u0bcd\u0bb5\u0bbe\u0b95\u0bae\u0bcd",attendanceSystem:"ATTENDANCE SYSTEM",poweredBy:"@Powered By IS Division",slpaTitle:"SLPA TIME ATTENDANCE SYSTEM",createdBy:"Created By: IS Division",closeSidebar:"\u0baa\u0bbe\u0bb0\u0bcd\u0bb5\u0bc8\u0baf\u0bc8 \u0bae\u0bc2\u0b9f\u0bc1",toggleSidebar:"\u0baa\u0bbe\u0bb0\u0bcd\u0bb5\u0bc8\u0baf\u0bc8 \u0bae\u0bbe\u0bb1\u0bc1\u0ba4\u0bb2\u0bcd",profile:"\u0b9a\u0bc1\u0baf\u0bb5\u0bbf\u0bb5\u0bb0\u0bae\u0bcd",settings:"\u0b85\u0bae\u0bc8\u0baa\u0bcd\u0baa\u0bc1\u0b95\u0bb3\u0bcd",dashboard:"Dashboard",systemTitle:"Time Attendance System",welcome:"\u0bb5\u0bb0\u0bb5\u0bc7\u0bb1\u0bcd\u0baa\u0bc1",welcomeAdmin:"\u0bb5\u0bb0\u0bb5\u0bc7\u0bb1\u0bcd\u0baa\u0bc1 \u0ba8\u0bbf\u0bb0\u0bcd\u0bb5\u0bbe\u0b95\u0bbf",greetingMorning:"\u0b95\u0bbe\u0bb2\u0bc8 \u0bb5\u0ba3\u0b95\u0bcd\u0b95\u0bae\u0bcd",greetingAfternoon:"\u0bae\u0ba4\u0bbf\u0baf \u0bb5\u0ba3\u0b95\u0bcd\u0b95\u0bae\u0bcd",greetingEvening:"\u0bae\u0bbe\u0bb2\u0bc8 \u0bb5\u0ba3\u0b95\u0bcd\u0b95\u0bae\u0bcd",refresh:"\u0baa\u0bc1\u0ba4\u0bc1\u0baa\u0bcd\u0baa\u0bbf",logout:"\u0bb5\u0bc6\u0bb3\u0bbf\u0baf\u0bc7\u0bb1\u0bc1",admin:"\u0ba8\u0bbf\u0bb0\u0bcd\u0bb5\u0bbe\u0b95\u0bbf",saveChanges:"\u0bae\u0bbe\u0bb1\u0bcd\u0bb1\u0b99\u0bcd\u0b95\u0bb3\u0bc8 \u0b9a\u0bc7\u0bae\u0bbf",general:"\u0baa\u0bca\u0ba4\u0bc1\u0bb5\u0bbe\u0ba9",appearance:"\u0bae\u0bc1\u0b95\u0bb5\u0bc8",security:"\u0baa\u0bbe\u0ba4\u0bc1\u0b95\u0bbe\u0baa\u0bcd\u0baa\u0bc1",notifications:"\u0b85\u0bb1\u0bbf\u0bb5\u0bbf\u0baa\u0bcd\u0baa\u0bc1\u0b95\u0bb3\u0bcd",dataExport:"\u0ba4\u0bb0\u0bb5\u0bc1 \u0b8f\u0bb1\u0bcd\u0bb1\u0bc1\u0bae\u0ba4\u0bbf",language:"\u0bae\u0bca\u0bb4\u0bbf",theme:"\u0ba4\u0bc0\u0bae\u0bcd",workingHours:"\u0baa\u0ba3\u0bbf\u0ba8\u0bc7\u0bb0\u0bae\u0bcd",startTime:"\u0ba4\u0bca\u0b9f\u0b95\u0bcd\u0b95 \u0ba8\u0bc7\u0bb0\u0bae\u0bcd",endTime:"\u0bae\u0bc1\u0b9f\u0bbf\u0bb5\u0bc1 \u0ba8\u0bc7\u0bb0\u0bae\u0bcd",enableNotificationSound:"\u0b85\u0bb1\u0bbf\u0bb5\u0bbf\u0baa\u0bcd\u0baa\u0bc1 \u0b92\u0bb2\u0bbf \u0b87\u0baf\u0b95\u0bcd\u0b95\u0bc1",notificationEmails:"\u0b85\u0bb1\u0bbf\u0bb5\u0bbf\u0baa\u0bcd\u0baa\u0bc1 \u0bae\u0bbf\u0ba9\u0bcd\u0ba9\u0b9e\u0bcd\u0b9a\u0bb2\u0bcd\u0b95\u0bb3\u0bcd",addMail:"\u0bae\u0bbf\u0ba9\u0bcd\u0ba9\u0b9e\u0bcd\u0b9a\u0bb2\u0bc8\u0b9a\u0bcd \u0b9a\u0bc7\u0bb0\u0bcd\u0b95\u0bcd\u0b95\u0bb5\u0bc1\u0bae\u0bcd",noEmails:"\u0b87\u0ba9\u0bbf\u0bae\u0bc7\u0bb2\u0bcd \u0b8e\u0ba8\u0bcd\u0ba4 \u0bae\u0bbf\u0ba9\u0bcd\u0ba9\u0b9e\u0bcd\u0b9a\u0bb2\u0bc8\u0baf\u0bc1\u0bae\u0bcd \u0b87\u0ba3\u0bc8\u0b95\u0bcd\u0b95\u0bb5\u0bbf\u0bb2\u0bcd\u0bb2\u0bc8.",systemName:"\u0b95\u0ba3\u0bbf\u0ba9\u0bbf \u0baa\u0bc6\u0baf\u0bb0\u0bcd",timezone:"\u0ba8\u0bc7\u0bb0 \u0bae\u0ba3\u0bcd\u0b9f\u0bb2\u0bae\u0bcd",userManagement:"\u0baa\u0baf\u0ba9\u0bb0\u0bcd \u0ba8\u0bbf\u0bb0\u0bcd\u0bb5\u0bbe\u0b95\u0bae\u0bcd",noPermissionViewUsers:"\u0baa\u0baf\u0ba9\u0bb0\u0bcd\u0b95\u0bb3\u0bc8\u0baa\u0bcd \u0baa\u0bbe\u0bb0\u0bcd\u0b95\u0bcd\u0b95 \u0b89\u0b99\u0bcd\u0b95\u0bb3\u0bcd \u0b85\u0ba9\u0bc1\u0bae\u0ba4\u0bbf \u0b87\u0bb2\u0bcd\u0bb2\u0bc8. \u0b85\u0ba3\u0bc1\u0b95\u0bb2\u0bc1\u0b95\u0bcd\u0b95\u0bc1 \u0b92\u0bb0\u0bc1 \u0b9a\u0bc2\u0baa\u0bcd\u0baa\u0bb0\u0bcd \u0b85\u0b9f\u0bcd\u0bae\u0bbf\u0ba9\u0bcd \u0ba4\u0bca\u0b9f\u0bb0\u0bcd\u0baa\u0bc1 \u0b95\u0bca\u0bb3\u0bcd\u0bb3\u0bb5\u0bc1\u0bae\u0bcd.",editUser:"\u0baa\u0baf\u0ba9\u0bb0\u0bcd \u0ba4\u0bbf\u0bb0\u0bc1\u0ba4\u0bcd\u0ba4\u0bae\u0bcd",addNewUser:"\u0baa\u0bc1\u0ba4\u0bbf\u0baf \u0baa\u0baf\u0ba9\u0bb0\u0bc8\u0b9a\u0bcd \u0b9a\u0bc7\u0bb0\u0bcd\u0b95\u0bcd\u0b95\u0bb5\u0bc1\u0bae\u0bcd",firstName:"\u0bae\u0bc1\u0ba4\u0bb2\u0bcd \u0baa\u0bc6\u0baf\u0bb0\u0bcd",lastName:"\u0b95\u0b9f\u0bc8\u0b9a\u0bbf \u0baa\u0bc6\u0baf\u0bb0\u0bcd",emailLabel:"\u0bae\u0bbf\u0ba9\u0bcd\u0ba9\u0b9e\u0bcd\u0b9a\u0bb2\u0bcd",employeeIdLabel:"\u0baa\u0ba3\u0bbf\u0baf\u0bbe\u0bb3\u0bb0\u0bcd ID",divisionLabel:"\u0bb5\u0b95\u0bc1\u0baa\u0bcd\u0baa\u0bc1",selectDivision:"\u0bb5\u0b95\u0bc1\u0baa\u0bcd\u0baa\u0bc8 \u0ba4\u0bc7\u0bb0\u0bcd\u0bb5\u0bc1 \u0b9a\u0bc6\u0baf\u0bcd\u0b95",roleLabel:"\u0baa\u0bbe\u0ba4\u0bcd\u0ba4\u0bbf\u0bb0\u0bae\u0bcd",sectionLabel:"\u0baa\u0bbf\u0bb0\u0bbf\u0bb5\u0bc1",selectSection:"\u0baa\u0bbf\u0bb0\u0bbf\u0bb5\u0bc8 \u0ba4\u0bc7\u0bb0\u0bcd\u0ba8\u0bcd\u0ba4\u0bc6\u0b9f\u0bc1\u0b95\u0bcd\u0b95\u0bb5\u0bc1\u0bae\u0bcd",passwordLabel:"\u0b95\u0b9f\u0bb5\u0bc1\u0b9a\u0bcd\u0b9a\u0bc6\u0bbe\u0bb2\u0bcd",confirmPasswordLabel:"\u0b95\u0b9f\u0bb5\u0bc1\u0b9a\u0bcd\u0b9a\u0bca\u0bb2\u0bcd\u0bb2\u0bc8 \u0b89\u0bb1\u0bc1\u0ba4\u0bbf\u0b9a\u0bc6\u0baf\u0bcd\u0b95",cancel:"\u0bb0\u0ba4\u0bcd\u0ba4\u0bc1 \u0b9a\u0bc6\u0baf\u0bcd",updateUser:"\u0baa\u0baf\u0ba9\u0bb0\u0bc8 \u0baa\u0bc1\u0ba4\u0bc1\u0baa\u0bcd\u0baa\u0bbf\u0b95\u0bcd\u0b95\u0bb5\u0bc1\u0bae\u0bcd",noPermissionAddUser:"\u0baa\u0baf\u0ba9\u0bb0\u0bcd\u0b95\u0bb3\u0bc8\u0b9a\u0bcd \u0b9a\u0bc7\u0bb0\u0bcd\u0b95\u0bcd\u0b95 \u0b85\u0b99\u0bcd\u0b95\u0bc0\u0b95\u0bbe\u0bb0\u0bae\u0bcd \u0b87\u0bb2\u0bcd\u0bb2\u0bc8",noUsersFound:'\u0baa\u0baf\u0ba9\u0bb0\u0bcd\u0b95\u0bb3\u0bcd \u0b8e\u0ba4\u0bc1\u0bb5\u0bc1\u0bae\u0bcd \u0b87\u0bb2\u0bcd\u0bb2\u0bc8. \u0bae\u0bc1\u0ba4\u0bb2\u0bcd \u0baa\u0baf\u0ba9\u0bb0\u0bc8 \u0b89\u0bb0\u0bc1\u0bb5\u0bbe\u0b95\u0bcd\u0b95 "\u0baa\u0baf\u0ba9\u0bb0\u0bc8\u0b9a\u0bcd \u0b9a\u0bc7\u0bb0\u0bcd\u0b95\u0bcd\u0b95" \u0b95\u0bbf\u0bb3\u0bbf\u0b95\u0bcd \u0b9a\u0bc6\u0baf\u0bcd\u0b95.',confirmDeleteUser:"\u0b87\u0ba8\u0bcd\u0ba4 \u0baa\u0baf\u0ba9\u0bb0\u0bc8 \u0ba8\u0bc0\u0b95\u0bcd\u0b95 \u0bb5\u0bc7\u0ba3\u0bcd\u0b9f\u0bc1\u0bae\u0bbe?",userDeletedSuccess:"\u0baa\u0baf\u0ba9\u0bb0\u0bcd \u0bb5\u0bc6\u0bb1\u0bcd\u0bb1\u0bbf\u0b95\u0bb0\u0bae\u0bbe\u0b95 \u0ba8\u0bc0\u0b95\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0b9f\u0bcd\u0b9f\u0ba4\u0bc1!",userCreateSuccess:"\u0baa\u0baf\u0ba9\u0bb0\u0bcd \u0bb5\u0bc6\u0bb1\u0bcd\u0bb1\u0bbf\u0b95\u0bb0\u0bae\u0bbe\u0b95 \u0b89\u0bb0\u0bc1\u0bb5\u0bbe\u0b95\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0b9f\u0bcd\u0b9f\u0ba4\u0bc1!",userUpdateSuccess:"\u0baa\u0baf\u0ba9\u0bb0\u0bcd \u0bb5\u0bc6\u0bb1\u0bcd\u0bb1\u0bbf\u0b95\u0bb0\u0bae\u0bbe\u0b95 \u0baa\u0bc1\u0ba4\u0bc1\u0baa\u0bcd\u0baa\u0bbf\u0b95\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0b9f\u0bcd\u0b9f\u0ba4\u0bc1!",fullNameLabel:"\u0bae\u0bc1\u0bb4\u0bc1 \u0baa\u0bc6\u0baf\u0bb0\u0bcd",designationLabel:"\u0baa\u0ba4\u0bb5\u0bbf",genderLabel:"\u0baa\u0bbe\u0bb2\u0bbf\u0ba9\u0bae\u0bcd",nicLabel:"NIC",subSectionLabel:"\u0b89\u0baa \u0baa\u0bbf\u0bb0\u0bbf\u0bb5\u0bc1",mealManagementTitle:"\u0b89\u0ba3\u0bb5\u0bc1 \u0ba8\u0bbf\u0bb0\u0bcd\u0bb5\u0bbe\u0b95\u0bae\u0bcd",bookNewMeal:"\u0baa\u0bc1\u0ba4\u0bc1 \u0b89\u0ba3\u0bb5\u0bc8 \u0baa\u0ba4\u0bbf\u0bb5\u0bc1 \u0b9a\u0bc6\u0baf\u0bcd\u0b95",mealDateLabel:"\u0b89\u0ba3\u0bb5\u0bc1 \u0ba4\u0bc7\u0ba4\u0bbf",mealTypeLabel:"\u0b89\u0ba3\u0bb5\u0bc1 \u0bb5\u0b95\u0bc8",selectMealType:"\u0b89\u0ba3\u0bb5\u0bc1 \u0bb5\u0b95\u0bc8\u0baf\u0bc8 \u0ba4\u0bc7\u0bb0\u0bcd\u0ba8\u0bcd\u0ba4\u0bc6\u0b9f\u0bc1\u0b95\u0bcd\u0b95\u0bb5\u0bc1\u0bae\u0bcd",mealTypeBreakfast:"\ud83c\udf05 Breakfast",mealTypeLunch:"\u2600\ufe0f Lunch",mealTypeDinner:"\ud83c\udf19 Dinner",mealTypeSnack:"\ud83c\udf6a Snack",expectedQuantityLabel:"\u0b8e\u0ba4\u0bbf\u0bb0\u0bcd\u0baa\u0bbe\u0bb0\u0bcd\u0baa\u0bcd\u0baa\u0bc1 \u0b8e\u0ba3\u0bcd\u0ba3\u0bbf\u0b95\u0bcd\u0b95\u0bc8",specialRequirementsLabel:"\u0b9a\u0bbf\u0bb1\u0baa\u0bcd\u0baa\u0bc1 \u0ba4\u0bc7\u0bb5\u0bc8\u0b95\u0bb3\u0bcd",specialRequirementsPlaceholder:"\u0b89\u0ba3\u0bb5\u0bc1\u0baa\u0bcd \u0baa\u0bb1\u0bcd\u0bb1\u0bbf\u0baf \u0b95\u0bc1\u0bb1\u0bc8\u0b95\u0bb3\u0bcd, \u0b85\u0b9a\u0bbe\u0ba4\u0bbe\u0bb0\u0ba3\u0b99\u0bcd\u0b95\u0bb3\u0bcd \u0b85\u0bb2\u0bcd\u0bb2\u0ba4\u0bc1 \u0b95\u0bc1\u0bb1\u0bbf\u0baa\u0bcd\u0baa\u0bc1\u0b95\u0bb3\u0bcd \u0b87\u0b99\u0bcd\u0b95\u0bc1...",bookMeal:"\u0b89\u0ba3\u0bb5\u0bc8 \u0baa\u0ba4\u0bbf\u0bb5\u0bc1 \u0b9a\u0bc6\u0baf\u0bcd\u0b95",bookingInProgress:"\u0baa\u0ba4\u0bbf\u0bb5\u0bc7\u0bb1\u0bcd\u0baa\u0b9f\u0bc1\u0ba4\u0bcd\u0ba4\u0baa\u0bcd\u0baa\u0b9f\u0bc1\u0b95\u0bbf\u0bb1\u0ba4\u0bc1...",todaysBookingsLabel:"\u0b87\u0ba9\u0bcd\u0bb1\u0bc8\u0baf \u0baa\u0ba4\u0bbf\u0bb5\u0bc1",bookingInfoTitle:"\u0baa\u0ba4\u0bbf\u0bb5\u0bc1 \u0ba4\u0b95\u0bb5\u0bb2\u0bcd\u0b95\u0bb3\u0bcd",bookingInfo_line1:"\u0baa\u0ba4\u0bbf\u0bb5\u0bc1\u0b95\u0bb3\u0bcd \u0bae\u0bc1\u0ba9\u0bcd\u0ba9\u0ba4\u0bbe\u0b95\u0bb5\u0bc7 \u0b9a\u0bc6\u0baf\u0bcd\u0baf \u0bb5\u0bc7\u0ba3\u0bcd\u0b9f\u0bc1\u0bae\u0bcd",bookingInfo_line2:"\u0baa\u0ba4\u0bbf\u0bb5\u0bc1 \u0b95\u0b9f\u0bc8\u0b9a\u0bbf\u0ba4\u0bcd \u0ba4\u0bc7\u0ba4\u0bbf: \u0ba4\u0bbf\u0ba9\u0bae\u0bc1\u0bae\u0bcd \u0b95\u0bbe\u0bb2\u0bc8 09:00",bookingInfo_line3:"\u0baa\u0bbe\u0ba4\u0bc1\u0b95\u0bbe\u0baa\u0bcd\u0baa\u0bc1 \u0b89\u0ba3\u0bb5\u0bc1\u0b95\u0bb3\u0bcd \u0b95\u0bc7\u0b83\u0baa\u0bc6\u0b9f\u0bcd\u0b9f\u0bc0\u0bb0\u0bbf\u0baf\u0bbe\u0bb5\u0bbf\u0bb2\u0bcd \u0b95\u0bbf\u0b9f\u0bc8\u0b95\u0bcd\u0b95\u0bbf\u0ba9\u0bcd\u0bb1\u0ba9",bookingInfo_line4:"\u0b9a\u0bbf\u0bb1\u0baa\u0bcd\u0baa\u0bc1 \u0b89\u0ba3\u0bb5\u0bc1\u0baa\u0bcd \u0baa\u0bca\u0bb1\u0bc1\u0baa\u0bcd\u0baa\u0bc1\u0b95\u0bb3\u0bcd \u0b95\u0bc1\u0bb1\u0bbf\u0baa\u0bcd\u0baa\u0bbf\u0b9f\u0baa\u0bcd\u0baa\u0b9f\u0bcd\u0b9f\u0bc1\u0bb3\u0bcd\u0bb3\u0ba9",bookingInfo_line5:"\u0bb5\u0b95\u0bc8\u0b95\u0bb3\u0bcd Report Generation \u0b87\u0bb2\u0bcd \u0b95\u0bbf\u0b9f\u0bc8\u0b95\u0bcd\u0b95\u0bc1\u0bae\u0bcd",errorFetchingDivisions:"\u0bb5\u0b95\u0bc8\u0b95\u0bb3\u0bcd \u0b8e\u0b9f\u0bc1\u0b95\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0b9f \u0bb5\u0bb0\u0bc1\u0bb5\u0ba4\u0bbf\u0bb2\u0bcd \u0baa\u0bbf\u0bb4\u0bc8. \u0ba4\u0baf\u0bb5\u0bc1 \u0b9a\u0bc6\u0baf\u0bcd\u0ba4\u0bc1 \u0bae\u0bc0\u0ba3\u0bcd\u0b9f\u0bc1\u0bae\u0bcd \u0bae\u0bc1\u0baf\u0bb1\u0bcd\u0b9a\u0bbf\u0b95\u0bcd\u0b95\u0bb5\u0bc1\u0bae\u0bcd.",errorFetchingSections:"\u0baa\u0bbf\u0bb0\u0bbf\u0bb5\u0bc1\u0b95\u0bb3\u0bc8 \u0baa\u0bc6\u0bb1\u0bc1\u0bb5\u0ba4\u0bbf\u0bb2\u0bcd \u0baa\u0bbf\u0bb4\u0bc8. \u0ba4\u0baf\u0bb5\u0bc1 \u0b9a\u0bc6\u0baf\u0bcd\u0ba4\u0bc1 \u0bae\u0bc0\u0ba3\u0bcd\u0b9f\u0bc1\u0bae\u0bcd \u0bae\u0bc1\u0baf\u0bb1\u0bcd\u0b9a\u0bbf\u0b95\u0bcd\u0b95\u0bb5\u0bc1\u0bae\u0bcd.",mealBookingCreated:"\u0b89\u0ba3\u0bb5\u0bc1 \u0baa\u0ba4\u0bbf\u0bb5\u0bc1 \u0bb5\u0bc6\u0bb1\u0bcd\u0bb1\u0bbf\u0b95\u0bb0\u0bae\u0bbe\u0b95 \u0b89\u0bb0\u0bc1\u0bb5\u0bbe\u0b95\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0b9f\u0bcd\u0b9f\u0ba4\u0bc1!",mealBookingCreateError:"\u0b89\u0ba3\u0bb5\u0bc1 \u0baa\u0ba4\u0bbf\u0bb5\u0bc1 \u0b9a\u0bc6\u0baf\u0bcd\u0baf\u0bc1\u0bae\u0bcd \u0baa\u0bcb\u0ba4\u0bc1 \u0baa\u0bbf\u0bb4\u0bc8 \u0b8f\u0bb1\u0bcd\u0baa\u0b9f\u0bcd\u0b9f\u0ba4\u0bc1",mealBookingNetworkError:"\u0b89\u0ba3\u0bb5\u0bc1 \u0baa\u0ba4\u0bbf\u0bb5\u0bc1 \u0b9a\u0bc6\u0baf\u0bcd\u0baf\u0bbe\u0ba4 \u0baa\u0bcb\u0ba4\u0bc1 \u0ba8\u0bc6\u0b9f\u0bcd\u0bb5\u0bca\u0bb0\u0bcd\u0b95\u0bcd \u0baa\u0bbf\u0bb4\u0bc8 \u0b8f\u0bb1\u0bcd\u0baa\u0b9f\u0bcd\u0b9f\u0ba4\u0bc1",successLabel:"\u0bb5\u0bc6\u0bb1\u0bcd\u0bb1\u0bbf!",errorLabel:"\u0baa\u0bbf\u0bb4\u0bc8!",totalEmployees:"\u0bae\u0bca\u0ba4\u0bcd\u0ba4 \u0b8a\u0bb4\u0bbf\u0baf\u0bb0\u0bcd\u0b95\u0bb3\u0bcd",allSubsections:"\u0b8e\u0bb2\u0bcd\u0bb2\u0bbe \u0b89\u0baa\u0baa\u0bcd \u0baa\u0bbf\u0bb0\u0bbf\u0bb5\u0bc1\u0b95\u0bb3\u0bcd",presentToday:"\u0b87\u0ba9\u0bcd\u0bb1\u0bc1 \u0b95\u0bc1\u0bb1\u0bbf\u0baa\u0bcd\u0baa\u0bbf\u0b9f\u0baa\u0bcd\u0baa\u0b9f\u0bcd\u0b9f\u0bb5\u0bb0\u0bcd\u0b95\u0bb3\u0bcd",activeAttendance:"\u0b9a\u0bc6\u0baf\u0bb2\u0bbf\u0bb2\u0bcd_attendance",attendanceRateLabel:"\u0b89\u0bb1\u0bc1\u0baa\u0bcd\u0baa\u0bbf\u0ba9\u0bb0\u0bcd \u0bb5\u0bc0\u0ba4\u0bae\u0bcd",activeDivisions:"\u0b9a\u0bc6\u0baf\u0bb2\u0bbf\u0bb2\u0bcd \u0baa\u0bbf\u0bb0\u0bbf\u0bb5\u0bc1\u0b95\u0bb3\u0bcd",allDivisions:"\u0b85\u0ba9\u0bc8\u0ba4\u0bcd\u0ba4\u0bc1 \u0baa\u0bbf\u0bb0\u0bbf\u0bb5\u0bc1\u0b95\u0bb3\u0bcd",totalSections:"\u0bae\u0bca\u0ba4\u0bcd\u0ba4 \u0baa\u0bbf\u0bb0\u0bbf\u0bb5\u0bc1\u0b95\u0bb3\u0bcd",totalSubSections:"\u0bae\u0bca\u0ba4\u0bcd\u0ba4 \u0b89\u0baa \u0baa\u0bbf\u0bb0\u0bbf\u0bb5\u0bc1\u0b95\u0bb3\u0bcd",todaysAttendance:"\u0b87Today's Attendance",presentLabel:"\u0b87\u0b99\u0bcd\u0b95\u0bc1",absentLabel:"\u0b95\u0bbf\u0b9f\u0bc8\u0baf\u0bbe\u0ba4\u0bc1",monthlyAttendance:"\u0bae\u0bbe\u0ba4\u0bbe\u0ba8\u0bcd\u0ba4\u0bbf\u0bb0 \u0bb5\u0bb0\u0bc1\u0b95\u0bc8",export:"\u0b8e\u0b95\u0bcd\u0bb8\u0bcd\u0baa\u0bcb\u0bb0\u0bcd\u0b9f\u0bcd",quickInsights:"\u0bb5\u0bbf\u0bb0\u0bc8\u0bb5\u0bc1 \u0ba4\u0bc6\u0bb3\u0bbf\u0bb5\u0bc1",highAttendance:"\u0b89\u0baf\u0bb0\u0bcd \u0bb5\u0bb0\u0bc1\u0b95\u0bc8",lateArrivals:"\u0ba4\u0bbe\u0bae\u0ba4\u0bae\u0bbe\u0b95 \u0bb5\u0ba8\u0bcd\u0ba4\u0bb5\u0bb0\u0bcd\u0b95\u0bb3\u0bcd",earlyDepartures:"\u0bae\u0bc1\u0ba9\u0bcd\u0b95\u0bbe\u0bb2 \u0bb5\u0bbf\u0b9f\u0bc1\u0baa\u0bcd\u0baa\u0bc1",recentActivity:"\u0b9a\u0bae\u0bc0\u0baa\u0ba4\u0bcd\u0ba4\u0bbf\u0baf \u0b9a\u0bc6\u0baf\u0bb2\u0bcd\u0baa\u0bbe\u0b9f\u0bc1",noRecentActivities:"\u0b9a\u0bae\u0bc0\u0baa\u0ba4\u0bcd\u0ba4\u0bbf\u0baf \u0b9a\u0bc6\u0baf\u0bb2\u0bcd\u0baa\u0bbe\u0b9f\u0bc1\u0b95\u0bb3\u0bcd \u0b8e\u0ba4\u0bc1\u0bb5\u0bc1\u0bae\u0bbf\u0bb2\u0bcd\u0bb2\u0bc8.",showAll:"\u0b85\u0ba9\u0bc8\u0ba4\u0bcd\u0ba4\u0bc8\u0baf\u0bc1\u0bae\u0bcd \u0b95\u0bbe\u0b9f\u0bcd\u0b9f\u0bc1",close:" Close"}},De=(0,i.createContext)(),Ae=e=>{let{children:t}=e;const[n,s]=(0,i.useState)(()=>{try{return localStorage.getItem("appLang")||"en"}catch(cu){return"en"}});(0,i.useEffect)(()=>{try{localStorage.setItem("appLang",n)}catch(cu){}},[n]);return(0,_e.jsx)(De.Provider,{value:{lang:n,setLang:s,t:e=>(Ie[n]||Ie.en)[e]||Ie.en[e]||e},children:t})},Te=()=>(0,i.useContext)(De);function Me(e,t){const{user:n,hasPermission:s}=(0,i.useContext)(Ne)||{};return!!n&&("super_admin"===n.role||"admin"===n.role||s(`${e}.${t}`))}function Re(e){return e+.5|0}const Oe=(e,t,n)=>Math.max(Math.min(e,n),t);function Pe(e){return Oe(Re(2.55*e),0,255)}function Le(e){return Oe(Re(255*e),0,255)}function ze(e){return Oe(Re(e/2.55)/100,0,1)}function Fe(e){return Oe(Re(100*e),0,100)}const Be={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$e=[..."0123456789ABCDEF"],Ue=e=>$e[15&e],We=e=>$e[(240&e)>>4]+$e[15&e],He=e=>(240&e)>>4===(15&e);function Ve(e){var t=(e=>He(e.r)&&He(e.g)&&He(e.b)&&He(e.a))(e)?Ue:We;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const qe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Ye(e,t,n){const i=t*Math.min(n,1-n),s=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-i*Math.max(Math.min(s-3,9-s,1),-1)};return[s(0),s(8),s(4)]}function Ge(e,t,n){const i=function(i){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+e/60)%6;return n-n*t*Math.max(Math.min(s,4-s,1),0)};return[i(5),i(3),i(1)]}function Je(e,t,n){const i=Ye(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)i[s]*=1-t-n,i[s]+=t;return i}function Ke(e){const t=e.r/255,n=e.g/255,i=e.b/255,s=Math.max(t,n,i),o=Math.min(t,n,i),a=(s+o)/2;let r,l,d;return s!==o&&(d=s-o,l=a>.5?d/(2-s-o):d/(s+o),r=function(e,t,n,i,s){return e===s?(t-n)/i+(t<n?6:0):t===s?(n-e)/i+2:(e-t)/i+4}(t,n,i,d,s),r=60*r+.5),[0|r,l||0,a]}function Qe(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(Le)}function Xe(e,t,n){return Qe(Ye,e,t,n)}function Ze(e){return(e%360+360)%360}function et(e){const t=qe.exec(e);let n,i=255;if(!t)return;t[5]!==n&&(i=t[6]?Pe(+t[5]):Le(+t[5]));const s=Ze(+t[2]),o=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return Qe(Je,e,t,n)}(s,o,a):"hsv"===t[1]?function(e,t,n){return Qe(Ge,e,t,n)}(s,o,a):Xe(s,o,a),{r:n[0],g:n[1],b:n[2],a:i}}const tt={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},nt={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let it;function st(e){it||(it=function(){const e={},t=Object.keys(nt),n=Object.keys(tt);let i,s,o,a,r;for(i=0;i<t.length;i++){for(a=r=t[i],s=0;s<n.length;s++)o=n[s],r=r.replace(o,tt[o]);o=parseInt(nt[a],16),e[r]=[o>>16&255,o>>8&255,255&o]}return e}(),it.transparent=[0,0,0,0]);const t=it[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const ot=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const at=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,rt=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function lt(e,t,n){if(e){let i=Ke(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,0===t?360:1)),i=Xe(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function dt(e,t){return e?Object.assign(t||{},e):e}function ct(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Le(e[3]))):(t=dt(e,{r:0,g:0,b:0,a:1})).a=Le(t.a),t}function ut(e){return"r"===e.charAt(0)?function(e){const t=ot.exec(e);let n,i,s,o=255;if(t){if(t[7]!==n){const e=+t[7];o=t[8]?Pe(e):Oe(255*e,0,255)}return n=+t[1],i=+t[3],s=+t[5],n=255&(t[2]?Pe(n):Oe(n,0,255)),i=255&(t[4]?Pe(i):Oe(i,0,255)),s=255&(t[6]?Pe(s):Oe(s,0,255)),{r:n,g:i,b:s,a:o}}}(e):et(e)}class ht{constructor(e){if(e instanceof ht)return e;const t=typeof e;let n;"object"===t?n=ct(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*Be[e[1]],g:255&17*Be[e[2]],b:255&17*Be[e[3]],a:5===n?17*Be[e[4]]:255}:7!==n&&9!==n||(t={r:Be[e[1]]<<4|Be[e[2]],g:Be[e[3]]<<4|Be[e[4]],b:Be[e[5]]<<4|Be[e[6]],a:9===n?Be[e[7]]<<4|Be[e[8]]:255})),t}(e)||st(e)||ut(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=dt(this._rgb);return e&&(e.a=ze(e.a)),e}set rgb(e){this._rgb=ct(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${ze(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`):void 0;var e}hexString(){return this._valid?Ve(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Ke(e),n=t[0],i=Fe(t[1]),s=Fe(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${s}%, ${ze(e.a)})`:`hsl(${n}, ${i}%, ${s}%)`}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let s;const o=t===s?.5:t,a=2*o-1,r=n.a-i.a,l=((a*r===-1?a:(a+r)/(1+a*r))+1)/2;s=1-l,n.r=255&l*n.r+s*i.r+.5,n.g=255&l*n.g+s*i.g+.5,n.b=255&l*n.b+s*i.b+.5,n.a=o*n.a+(1-o)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const i=rt(ze(e.r)),s=rt(ze(e.g)),o=rt(ze(e.b));return{r:Le(at(i+n*(rt(ze(t.r))-i))),g:Le(at(s+n*(rt(ze(t.g))-s))),b:Le(at(o+n*(rt(ze(t.b))-o))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new ht(this.rgb)}alpha(e){return this._rgb.a=Le(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Re(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return lt(this._rgb,2,e),this}darken(e){return lt(this._rgb,2,-e),this}saturate(e){return lt(this._rgb,1,e),this}desaturate(e){return lt(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=Ke(e);n[0]=Ze(n[0]+t),n=Xe(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function pt(){}const ft=(()=>{let e=0;return()=>e++})();function mt(e){return null===e||void 0===e}function gt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function vt(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function xt(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function bt(e,t){return xt(e)?e:t}function yt(e,t){return"undefined"===typeof e?t:e}const St=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function jt(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function wt(e,t,n,i){let s,o,a;if(gt(e))if(o=e.length,i)for(s=o-1;s>=0;s--)t.call(n,e[s],s);else for(s=0;s<o;s++)t.call(n,e[s],s);else if(vt(e))for(a=Object.keys(e),o=a.length,s=0;s<o;s++)t.call(n,e[a[s]],a[s])}function _t(e,t){let n,i,s,o;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(s=e[n],o=t[n],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function Nt(e){if(gt(e))return e.map(Nt);if(vt(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let s=0;for(;s<i;++s)t[n[s]]=Nt(e[n[s]]);return t}return e}function kt(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Ct(e,t,n,i){if(!kt(e))return;const s=t[e],o=n[e];vt(s)&&vt(o)?Et(s,o,i):t[e]=Nt(o)}function Et(e,t,n){const i=gt(t)?t:[t],s=i.length;if(!vt(e))return e;const o=(n=n||{}).merger||Ct;let a;for(let r=0;r<s;++r){if(a=i[r],!vt(a))continue;const t=Object.keys(a);for(let i=0,s=t.length;i<s;++i)o(t[i],e,a,n)}return e}function It(e,t){return Et(e,t,{merger:Dt})}function Dt(e,t,n){if(!kt(e))return;const i=t[e],s=n[e];vt(i)&&vt(s)?It(i,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Nt(s))}const At={"":e=>e,x:e=>e.x,y:e=>e.y};function Tt(e,t){const n=At[t]||(At[t]=function(e){const t=function(e){const t=e.split("."),n=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function Mt(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Rt=e=>"undefined"!==typeof e,Ot=e=>"function"===typeof e,Pt=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const Lt=Math.PI,zt=2*Lt,Ft=zt+Lt,Bt=Number.POSITIVE_INFINITY,$t=Lt/180,Ut=Lt/2,Wt=Lt/4,Ht=2*Lt/3,Vt=Math.log10,qt=Math.sign;function Yt(e,t,n){return Math.abs(e-t)<n}function Gt(e){const t=Math.round(e);e=Yt(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Vt(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Jt(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Kt(e,t,n){let i,s,o;for(i=0,s=e.length;i<s;i++)o=e[i][n],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Qt(e){return e*(Lt/180)}function Xt(e){return e*(180/Lt)}function Zt(e){if(!xt(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function en(e,t){const n=t.x-e.x,i=t.y-e.y,s=Math.sqrt(n*n+i*i);let o=Math.atan2(i,n);return o<-.5*Lt&&(o+=zt),{angle:o,distance:s}}function tn(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function nn(e,t){return(e-t+Ft)%zt-Lt}function sn(e){return(e%zt+zt)%zt}function on(e,t,n,i){const s=sn(e),o=sn(t),a=sn(n),r=sn(o-s),l=sn(a-s),d=sn(s-o),c=sn(s-a);return s===o||s===a||i&&o===a||r>l&&d<c}function an(e,t,n){return Math.max(t,Math.min(n,e))}function rn(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function ln(e,t,n){n=n||(n=>e[n]<t);let i,s=e.length-1,o=0;for(;s-o>1;)i=o+s>>1,n(i)?o=i:s=i;return{lo:o,hi:s}}const dn=(e,t,n,i)=>ln(e,n,i?i=>{const s=e[i][t];return s<n||s===n&&e[i+1][t]===n}:i=>e[i][t]<n),cn=(e,t,n)=>ln(e,n,i=>e[i][t]>=n);const un=["push","pop","shift","splice","unshift"];function hn(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(t);-1!==s&&i.splice(s,1),i.length>0||(un.forEach(t=>{delete e[t]}),delete e._chartjs)}function pn(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const fn="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function mn(e,t){let n=[],i=!1;return function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];n=o,i||(i=!0,fn.call(window,()=>{i=!1,e.apply(t,n)}))}}const gn=e=>"start"===e?"left":"end"===e?"right":"center",vn=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function xn(e,t,n){const i=t.length;let s=0,o=i;if(e._sorted){const{iScale:a,vScale:r,_parsed:l}=e,d=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,c=a.axis,{min:u,max:h,minDefined:p,maxDefined:f}=a.getUserBounds();if(p){if(s=Math.min(dn(l,c,u).lo,n?i:dn(t,c,a.getPixelForValue(u)).lo),d){const e=l.slice(0,s+1).reverse().findIndex(e=>!mt(e[r.axis]));s-=Math.max(0,e)}s=an(s,0,i-1)}if(f){let e=Math.max(dn(l,a.axis,h,!0).hi+1,n?0:dn(t,c,a.getPixelForValue(h),!0).hi+1);if(d){const t=l.slice(e-1).findIndex(e=>!mt(e[r.axis]));e+=Math.max(0,t)}o=an(e,s,i)-s}else o=i-s}return{start:s,count:o}}function bn(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=s,!0;const o=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),o}const yn=e=>0===e||1===e,Sn=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*zt/n),jn=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*zt/n)+1,wn={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Ut),easeOutSine:e=>Math.sin(e*Ut),easeInOutSine:e=>-.5*(Math.cos(Lt*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>yn(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>yn(e)?e:Sn(e,.075,.3),easeOutElastic:e=>yn(e)?e:jn(e,.075,.3),easeInOutElastic(e){const t=.1125;return yn(e)?e:e<.5?.5*Sn(2*e,t,.45):.5+.5*jn(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-wn.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*wn.easeInBounce(2*e):.5*wn.easeOutBounce(2*e-1)+.5};function _n(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Nn(e){return _n(e)?e:new ht(e)}function kn(e){return _n(e)?e:new ht(e).saturate(.5).darken(.1).hexString()}const Cn=["x","y","borderWidth","radius","tension"],En=["color","borderColor","backgroundColor"];const In=new Map;function Dn(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let i=In.get(n);return i||(i=new Intl.NumberFormat(e,t),In.set(n,i)),i}(t,n).format(e)}const An={values:e=>gt(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const i=this.chart.options.locale;let s,o=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(s="scientific"),o=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=Vt(Math.abs(o)),r=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:s,minimumFractionDigits:r,maximumFractionDigits:r};return Object.assign(l,this.options.ticks.format),Dn(e,i,l)},logarithmic(e,t,n){if(0===e)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(Vt(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?An.numeric.call(this,e,t,n):""}};var Tn={formatters:An};const Mn=Object.create(null),Rn=Object.create(null);function On(e,t){if(!t)return e;const n=t.split(".");for(let i=0,s=n.length;i<s;++i){const t=n[i];e=e[t]||(e[t]=Object.create(null))}return e}function Pn(e,t,n){return"string"===typeof t?Et(On(e,t),n):Et(On(e,""),t)}class Ln{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>kn(t.backgroundColor),this.hoverBorderColor=(e,t)=>kn(t.borderColor),this.hoverColor=(e,t)=>kn(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Pn(this,e,t)}get(e){return On(this,e)}describe(e,t){return Pn(Rn,e,t)}override(e,t){return Pn(Mn,e,t)}route(e,t,n,i){const s=On(this,e),o=On(this,n),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=o[i];return vt(e)?Object.assign({},t,e):yt(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach(e=>e(this))}}var zn=new Ln({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:En},numbers:{type:"number",properties:Cn}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Tn.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function Fn(e,t,n,i,s){let o=t[s];return o||(o=t[s]=e.measureText(s).width,n.push(s)),o>i&&(i=o),i}function Bn(e,t,n){const i=e.currentDevicePixelRatio,s=0!==n?Math.max(n/2,.5):0;return Math.round((t-s)*i)/i+s}function $n(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Un(e,t,n,i){Wn(e,t,n,i,null)}function Wn(e,t,n,i,s){let o,a,r,l,d,c,u,h;const p=t.pointStyle,f=t.rotation,m=t.radius;let g=(f||0)*$t;if(p&&"object"===typeof p&&(o=p.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return e.save(),e.translate(n,i),e.rotate(g),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),p){default:s?e.ellipse(n,i,s/2,m,0,0,zt):e.arc(n,i,m,0,zt),e.closePath();break;case"triangle":c=s?s/2:m,e.moveTo(n+Math.sin(g)*c,i-Math.cos(g)*m),g+=Ht,e.lineTo(n+Math.sin(g)*c,i-Math.cos(g)*m),g+=Ht,e.lineTo(n+Math.sin(g)*c,i-Math.cos(g)*m),e.closePath();break;case"rectRounded":d=.516*m,l=m-d,a=Math.cos(g+Wt)*l,u=Math.cos(g+Wt)*(s?s/2-d:l),r=Math.sin(g+Wt)*l,h=Math.sin(g+Wt)*(s?s/2-d:l),e.arc(n-u,i-r,d,g-Lt,g-Ut),e.arc(n+h,i-a,d,g-Ut,g),e.arc(n+u,i+r,d,g,g+Ut),e.arc(n-h,i+a,d,g+Ut,g+Lt),e.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*m,c=s?s/2:l,e.rect(n-c,i-l,2*c,2*l);break}g+=Wt;case"rectRot":u=Math.cos(g)*(s?s/2:m),a=Math.cos(g)*m,r=Math.sin(g)*m,h=Math.sin(g)*(s?s/2:m),e.moveTo(n-u,i-r),e.lineTo(n+h,i-a),e.lineTo(n+u,i+r),e.lineTo(n-h,i+a),e.closePath();break;case"crossRot":g+=Wt;case"cross":u=Math.cos(g)*(s?s/2:m),a=Math.cos(g)*m,r=Math.sin(g)*m,h=Math.sin(g)*(s?s/2:m),e.moveTo(n-u,i-r),e.lineTo(n+u,i+r),e.moveTo(n+h,i-a),e.lineTo(n-h,i+a);break;case"star":u=Math.cos(g)*(s?s/2:m),a=Math.cos(g)*m,r=Math.sin(g)*m,h=Math.sin(g)*(s?s/2:m),e.moveTo(n-u,i-r),e.lineTo(n+u,i+r),e.moveTo(n+h,i-a),e.lineTo(n-h,i+a),g+=Wt,u=Math.cos(g)*(s?s/2:m),a=Math.cos(g)*m,r=Math.sin(g)*m,h=Math.sin(g)*(s?s/2:m),e.moveTo(n-u,i-r),e.lineTo(n+u,i+r),e.moveTo(n+h,i-a),e.lineTo(n-h,i+a);break;case"line":a=s?s/2:Math.cos(g)*m,r=Math.sin(g)*m,e.moveTo(n-a,i-r),e.lineTo(n+a,i+r);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(g)*(s?s/2:m),i+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function Hn(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Vn(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function qn(e){e.restore()}function Yn(e,t,n,i,s){if(!t)return e.lineTo(n.x,n.y);if("middle"===s){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else"after"===s!==!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Gn(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Jn(e,t,n,i,s){if(s.strikethrough||s.underline){const o=e.measureText(i),a=t-o.actualBoundingBoxLeft,r=t+o.actualBoundingBoxRight,l=n-o.actualBoundingBoxAscent,d=n+o.actualBoundingBoxDescent,c=s.strikethrough?(l+d)/2:d;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(a,c),e.lineTo(r,c),e.stroke()}}function Kn(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Qn(e,t,n,i,s){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=gt(t)?t:[t],r=o.strokeWidth>0&&""!==o.strokeColor;let l,d;for(e.save(),e.font=s.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),mt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,o),l=0;l<a.length;++l)d=a[l],o.backdrop&&Kn(e,o.backdrop),r&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),mt(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(d,n,i,o.maxWidth)),e.fillText(d,n,i,o.maxWidth),Jn(e,n,i,d,o),i+=Number(s.lineHeight);e.restore()}function Xn(e,t){const{x:n,y:i,w:s,h:o,radius:a}=t;e.arc(n+a.topLeft,i+a.topLeft,a.topLeft,1.5*Lt,Lt,!0),e.lineTo(n,i+o-a.bottomLeft),e.arc(n+a.bottomLeft,i+o-a.bottomLeft,a.bottomLeft,Lt,Ut,!0),e.lineTo(n+s-a.bottomRight,i+o),e.arc(n+s-a.bottomRight,i+o-a.bottomRight,a.bottomRight,Ut,0,!0),e.lineTo(n+s,i+a.topRight),e.arc(n+s-a.topRight,i+a.topRight,a.topRight,0,-Ut,!0),e.lineTo(n+a.topLeft,i)}const Zn=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ei=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ti(e,t){const n=(""+e).match(Zn);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const ni=e=>+e||0;function ii(e,t){const n={},i=vt(t),s=i?Object.keys(t):t,o=vt(e)?i?n=>yt(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of s)n[a]=ni(o(a));return n}function si(e){return ii(e,{top:"y",right:"x",bottom:"y",left:"x"})}function oi(e){return ii(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ai(e){const t=si(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ri(e,t){e=e||{},t=t||zn.font;let n=yt(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let i=yt(e.style,t.style);i&&!(""+i).match(ei)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:yt(e.family,t.family),lineHeight:ti(yt(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:yt(e.weight,t.weight),string:""};return s.string=function(e){return!e||mt(e.size)||mt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(s),s}function li(e,t,n,i){let s,o,a,r=!0;for(s=0,o=e.length;s<o;++s)if(a=e[s],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),r=!1),void 0!==n&&gt(a)&&(a=a[n%a.length],r=!1),void 0!==a))return i&&!r&&(i.cacheable=!1),a}function di(e,t){return Object.assign(Object.create(e),t)}function ci(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const s=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=Si("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:n,_getTarget:i,override:i=>ci([i,...e],t,s,n)};return new Proxy(o,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,i)=>mi(n,i,()=>function(e,t,n,i){let s;for(const o of t)if(s=Si(pi(o,e),n),"undefined"!==typeof s)return fi(e,s)?bi(n,i,e,s):s}(i,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>ji(e).includes(t),ownKeys:e=>ji(e),set(e,t,n){const s=e._storage||(e._storage=i());return e[t]=s[t]=n,delete e._keys,!0}})}function ui(e,t,n,i){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:hi(e,i),setContext:t=>ui(e,t,n,i),override:s=>ui(e.override(s),t,n,i)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>mi(e,t,()=>function(e,t,n){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=e;let r=i[t];Ot(r)&&a.isScriptable(t)&&(r=function(e,t,n,i){const{_proxy:s,_context:o,_subProxy:a,_stack:r}=n;if(r.has(e))throw new Error("Recursion detected: "+Array.from(r).join("->")+"->"+e);r.add(e);let l=t(o,a||i);r.delete(e),fi(e,l)&&(l=bi(s._scopes,s,e,l));return l}(t,r,e,n));gt(r)&&r.length&&(r=function(e,t,n,i){const{_proxy:s,_context:o,_subProxy:a,_descriptors:r}=n;if("undefined"!==typeof o.index&&i(e))return t[o.index%t.length];if(vt(t[0])){const n=t,i=s._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=bi(i,s,e,l);t.push(ui(n,o,a&&a[e],r))}}return t}(t,r,e,a.isIndexable));fi(t,r)&&(r=ui(r,s,o&&o[t],a));return r}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,i)=>(e[n]=i,delete t[n],!0)})}function hi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:i,isScriptable:Ot(n)?n:()=>n,isIndexable:Ot(i)?i:()=>i}}const pi=(e,t)=>e?e+Mt(t):t,fi=(e,t)=>vt(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function mi(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const i=n();return e[t]=i,i}function gi(e,t,n){return Ot(e)?e(t,n):e}const vi=(e,t)=>!0===e?t:"string"===typeof e?Tt(t,e):void 0;function xi(e,t,n,i,s){for(const o of t){const t=vi(n,o);if(t){e.add(t);const o=gi(t._fallback,n,s);if("undefined"!==typeof o&&o!==n&&o!==i)return o}else if(!1===t&&"undefined"!==typeof i&&n!==i)return null}return!1}function bi(e,t,n,i){const s=t._rootScopes,o=gi(t._fallback,n,i),a=[...e,...s],r=new Set;r.add(i);let l=yi(r,a,n,o||n,i);return null!==l&&(("undefined"===typeof o||o===n||(l=yi(r,a,o,l,i),null!==l))&&ci(Array.from(r),[""],s,o,()=>function(e,t,n){const i=e._getTarget();t in i||(i[t]={});const s=i[t];if(gt(s)&&vt(n))return n;return s||{}}(t,n,i)))}function yi(e,t,n,i,s){for(;n;)n=xi(e,t,n,i,s);return n}function Si(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function ji(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}const wi=Number.EPSILON||1e-14,_i=(e,t)=>t<e.length&&!e[t].skip&&e[t],Ni=e=>"x"===e?"y":"x";function ki(e,t,n,i){const s=e.skip?t:e,o=t,a=n.skip?t:n,r=tn(o,s),l=tn(a,o);let d=r/(r+l),c=l/(r+l);d=isNaN(d)?0:d,c=isNaN(c)?0:c;const u=i*d,h=i*c;return{previous:{x:o.x-u*(a.x-s.x),y:o.y-u*(a.y-s.y)},next:{x:o.x+h*(a.x-s.x),y:o.y+h*(a.y-s.y)}}}function Ci(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=Ni(t),i=e.length,s=Array(i).fill(0),o=Array(i);let a,r,l,d=_i(e,0);for(a=0;a<i;++a)if(r=l,l=d,d=_i(e,a+1),l){if(d){const e=d[t]-l[t];s[a]=0!==e?(d[n]-l[n])/e:0}o[a]=r?d?qt(s[a-1])!==qt(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}!function(e,t,n){const i=e.length;let s,o,a,r,l,d=_i(e,0);for(let c=0;c<i-1;++c)l=d,d=_i(e,c+1),l&&d&&(Yt(t[c],0,wi)?n[c]=n[c+1]=0:(s=n[c]/t[c],o=n[c+1]/t[c],r=Math.pow(s,2)+Math.pow(o,2),r<=9||(a=3/Math.sqrt(r),n[c]=s*a*t[c],n[c+1]=o*a*t[c])))}(e,s,o),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=Ni(n),s=e.length;let o,a,r,l=_i(e,0);for(let d=0;d<s;++d){if(a=r,r=l,l=_i(e,d+1),!r)continue;const s=r[n],c=r[i];a&&(o=(s-a[n])/3,r[`cp1${n}`]=s-o,r[`cp1${i}`]=c-o*t[d]),l&&(o=(l[n]-s)/3,r[`cp2${n}`]=s+o,r[`cp2${i}`]=c+o*t[d])}}(e,o,t)}function Ei(e,t,n){return Math.max(Math.min(e,n),t)}function Ii(e,t,n,i,s){let o,a,r,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)Ci(e,s);else{let n=i?e[e.length-1]:e[0];for(o=0,a=e.length;o<a;++o)r=e[o],l=ki(n,r,e[Math.min(o+1,a-(i?0:1))%a],t.tension),r.cp1x=l.previous.x,r.cp1y=l.previous.y,r.cp2x=l.next.x,r.cp2y=l.next.y,n=r}t.capBezierPoints&&function(e,t){let n,i,s,o,a,r=Hn(e[0],t);for(n=0,i=e.length;n<i;++n)a=o,o=r,r=n<i-1&&Hn(e[n+1],t),o&&(s=e[n],a&&(s.cp1x=Ei(s.cp1x,t.left,t.right),s.cp1y=Ei(s.cp1y,t.top,t.bottom)),r&&(s.cp2x=Ei(s.cp2x,t.left,t.right),s.cp2y=Ei(s.cp2y,t.top,t.bottom)))}(e,n)}function Di(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Ai(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Ti(e,t,n){let i;return"string"===typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}const Mi=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Ri=["top","right","bottom","left"];function Oi(e,t,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const o=Ri[s];i[o]=parseFloat(e[t+"-"+o+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function Pi(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,s=Mi(n),o="border-box"===s.boxSizing,a=Oi(s,"padding"),r=Oi(s,"border","width"),{x:l,y:d,box:c}=function(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:s,offsetY:o}=i;let a,r,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(s,o,e.target))a=s,r=o;else{const e=t.getBoundingClientRect();a=i.clientX-e.left,r=i.clientY-e.top,l=!0}return{x:a,y:r,box:l}}(e,n),u=a.left+(c&&r.left),h=a.top+(c&&r.top);let{width:p,height:f}=t;return o&&(p-=a.width+r.width,f-=a.height+r.height),{x:Math.round((l-u)/p*n.width/i),y:Math.round((d-h)/f*n.height/i)}}const Li=e=>Math.round(10*e)/10;function zi(e,t,n,i){const s=Mi(e),o=Oi(s,"margin"),a=Ti(s.maxWidth,e,"clientWidth")||Bt,r=Ti(s.maxHeight,e,"clientHeight")||Bt,l=function(e,t,n){let i,s;if(void 0===t||void 0===n){const o=e&&Ai(e);if(o){const e=o.getBoundingClientRect(),a=Mi(o),r=Oi(a,"border","width"),l=Oi(a,"padding");t=e.width-l.width-r.width,n=e.height-l.height-r.height,i=Ti(a.maxWidth,o,"clientWidth"),s=Ti(a.maxHeight,o,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:i||Bt,maxHeight:s||Bt}}(e,t,n);let{width:d,height:c}=l;if("content-box"===s.boxSizing){const e=Oi(s,"border","width"),t=Oi(s,"padding");d-=t.width+e.width,c-=t.height+e.height}d=Math.max(0,d-o.width),c=Math.max(0,i?d/i:c-o.height),d=Li(Math.min(d,a,l.maxWidth)),c=Li(Math.min(c,r,l.maxHeight)),d&&!c&&(c=Li(d/2));return(void 0!==t||void 0!==n)&&i&&l.height&&c>l.height&&(c=l.height,d=Li(Math.floor(c*i))),{width:d,height:c}}function Fi(e,t,n){const i=t||1,s=Math.floor(e.height*i),o=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==i||a.height!==s||a.width!==o)&&(e.currentDevicePixelRatio=i,a.height=s,a.width=o,e.ctx.setTransform(i,0,0,i,0,0),!0)}const Bi=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Di()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(cu){}return e}();function $i(e,t){const n=function(e,t){return Mi(e).getPropertyValue(t)}(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Ui(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Wi(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:"middle"===i?n<.5?e.y:t.y:"after"===i?n<1?e.y:t.y:n>0?t.y:e.y}}function Hi(e,t,n,i){const s={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},a=Ui(e,s,n),r=Ui(s,o,n),l=Ui(o,t,n),d=Ui(a,r,n),c=Ui(r,l,n);return Ui(d,c,n)}function Vi(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function qi(e,t){let n,i;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function Yi(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Gi(e){return"angle"===e?{between:on,compare:nn,normalize:sn}:{between:rn,compare:(e,t)=>e-t,normalize:e=>e}}function Ji(e){let{start:t,end:n,count:i,loop:s,style:o}=e;return{start:t%i,end:n%i,loop:s&&(n-t+1)%i===0,style:o}}function Ki(e,t,n){if(!n)return[e];const{property:i,start:s,end:o}=n,a=t.length,{compare:r,between:l,normalize:d}=Gi(i),{start:c,end:u,loop:h,style:p}=function(e,t,n){const{property:i,start:s,end:o}=n,{between:a,normalize:r}=Gi(i),l=t.length;let d,c,{start:u,end:h,loop:p}=e;if(p){for(u+=l,h+=l,d=0,c=l;d<c&&a(r(t[u%l][i]),s,o);++d)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:p,style:e.style}}(e,t,n),f=[];let m,g,v,x=!1,b=null;const y=()=>x||l(s,v,m)&&0!==r(s,v),S=()=>!x||0===r(o,m)||l(o,v,m);for(let j=c,w=c;j<=u;++j)g=t[j%a],g.skip||(m=d(g[i]),m!==v&&(x=l(m,s,o),null===b&&y()&&(b=0===r(m,s)?j:w),null!==b&&S()&&(f.push(Ji({start:b,end:j,loop:h,count:a,style:p})),b=null),w=j,v=m));return null!==b&&f.push(Ji({start:b,end:u,loop:h,count:a,style:p})),f}function Qi(e,t){const n=[],i=e.segments;for(let s=0;s<i.length;s++){const o=Ki(i[s],e.points,t);o.length&&n.push(...o)}return n}function Xi(e,t,n,i){return i&&i.setContext&&n?function(e,t,n,i){const s=e._chart.getContext(),o=Zi(e.options),{_datasetIndex:a,options:{spanGaps:r}}=e,l=n.length,d=[];let c=o,u=t[0].start,h=u;function p(e,t,i,s){const o=r?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=o;for(;n[t%l].skip;)t+=o;e%l!==t%l&&(d.push({start:e%l,end:t%l,loop:i,style:s}),c=s,u=t%l)}}for(const f of t){u=r?u:f.start;let e,t=n[u%l];for(h=u+1;h<=f.end;h++){const o=n[h%l];e=Zi(i.setContext(di(s,{type:"segment",p0:t,p1:o,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),es(e,c)&&p(u,h-1,f.loop,c),t=o,c=e}u<h-1&&p(u,h-1,f.loop,c)}return d}(e,t,n,i):t}function Zi(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function es(e,t){if(!t)return!1;const n=[],i=function(e,t){return _n(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function ts(e,t,n){return e.options.clip?e[n]:t[n]}function ns(e,t){const n=t._clip;if(n.disabled)return!1;const i=function(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:ts(n,t,"left"),right:ts(n,t,"right"),top:ts(i,t,"top"),bottom:ts(i,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:i.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:i.right+(!0===n.right?0:n.right),top:!1===n.top?0:i.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:i.bottom+(!0===n.bottom?0:n.bottom)}}class is{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const s=t.listeners[i],o=t.duration;s.forEach(i=>i({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(n-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=fn.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const s=n.items;let o,a=s.length-1,r=!1;for(;a>=0;--a)o=s[a],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(e),r=!0):(s[a]=s[s.length-1],s.pop());r&&(i.draw(),this._notify(i,n,e,"progress")),s.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=s.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ss=new is;const os="transparent",as={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const i=Nn(e||os),s=i.valid&&Nn(t||os);return s&&s.valid?s.mix(i,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class rs{constructor(e,t,n,i){const s=t[n];i=li([e.to,i,s,e.from]);const o=li([e.from,s,i]);this._active=!0,this._fn=e.fn||as[e.type||typeof o],this._easing=wn[e.easing]||wn.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],s=n-this._start,o=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=li([e.to,t,i,e.from]),this._from=li([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let r;if(this._active=s!==a&&(o||t<n),!this._active)return this._target[i]=a,void this._notify(!0);t<0?this._target[i]=s:(r=t/n%2,r=o&&r>1?2-r:r,r=this._easing(Math.min(1,Math.max(0,r))),this._target[i]=this._fn(s,a,r))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}class ls{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!vt(e))return;const t=Object.keys(zn.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!vt(s))return;const o={};for(const e of t)o[e]=s[e];(gt(s.properties)&&s.properties||[i]).forEach(e=>{e!==i&&n.has(e)||n.set(e,o)})})}_animateOptions(e,t){const n=t.options,i=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!i)return[];const s=this._createAnimations(i,n);return n.$shared&&function(e,t){const n=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const t=e[i[s]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),s}_createAnimations(e,t){const n=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let r;for(r=o.length-1;r>=0;--r){const l=o[r];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(e,t));continue}const d=t[l];let c=s[l];const u=n.get(l);if(c){if(u&&c.active()){c.update(u,d,a);continue}c.cancel()}u&&u.duration?(s[l]=c=new rs(u,e,l,d),i.push(c)):e[l]=d}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(ss.add(this._chart,n),!0):void 0}}function ds(e,t){const n=e&&e.options||{},i=n.reverse,s=void 0===n.min?t:0,o=void 0===n.max?t:0;return{start:i?o:s,end:i?s:o}}function cs(e,t){const n=[],i=e._getSortedDatasetMetas(t);let s,o;for(s=0,o=i.length;s<o;++s)n.push(i[s].index);return n}function us(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=e.keys,o="single"===i.mode;let a,r,l,d;if(null===t)return;let c=!1;for(a=0,r=s.length;a<r;++a){if(l=+s[a],l===n){if(c=!0,i.all)continue;break}d=e.values[l],xt(d)&&(o||0===t||qt(t)===qt(d))&&(t+=d)}return c||i.all?t:0}function hs(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function ps(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function fs(e,t,n,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const t=e[s.index];if(n&&t>0||!n&&t<0)return s.index}return null}function ms(e,t){const{chart:n,_cachedMeta:i}=e,s=n._stacks||(n._stacks={}),{iScale:o,vScale:a,index:r}=i,l=o.axis,d=a.axis,c=function(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}(o,a,i),u=t.length;let h;for(let p=0;p<u;++p){const e=t[p],{[l]:n,[d]:o}=e;h=(e._stacks||(e._stacks={}))[d]=ps(s,c,n),h[r]=o,h._top=fs(h,a,!0,i.type),h._bottom=fs(h,a,!1,i.type);(h._visualValues||(h._visualValues={}))[r]=o}}function gs(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function vs(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[i]||void 0===t[i][n])return;delete t[i][n],void 0!==t[i]._visualValues&&void 0!==t[i]._visualValues[n]&&delete t[i]._visualValues[n]}}}const xs=e=>"reset"===e||"none"===e,bs=(e,t)=>t?e:Object.assign({},e);class ys{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=hs(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&vs(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(e,t,n,i)=>"x"===e?t:"r"===e?i:n,s=t.xAxisID=yt(n.xAxisID,gs(e,"x")),o=t.yAxisID=yt(n.yAxisID,gs(e,"y")),a=t.rAxisID=yt(n.rAxisID,gs(e,"r")),r=t.indexAxis,l=t.iAxisID=i(r,s,o,a),d=t.vAxisID=i(r,o,s,a);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&hn(this._data,this),e._stacked&&vs(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(vt(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:i}=t,s="x"===n.axis?"x":"y",o="x"===i.axis?"x":"y",a=Object.keys(e),r=new Array(a.length);let l,d,c;for(l=0,d=a.length;l<d;++l)c=a[l],r[l]={[s]:c,[o]:e[c]};return r}(t,e)}else if(n!==t){if(n){hn(n,this);const e=this._cachedMeta;vs(e),e._parsed=[]}t&&Object.isExtensible(t)&&(s=this,(i=t)._chartjs?i._chartjs.listeners.push(s):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),un.forEach(e=>{const t="_onData"+Mt(e),n=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];const a=n.apply(this,s);return i._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...s)}),a}})}))),this._syncList=[],this._data=t}var i,s}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const s=t._stacked;t._stacked=hs(t.vScale,t),t.stack!==n.stack&&(i=!0,vs(t),t.stack=n.stack),this._resyncElements(e),(i||s!==t._stacked)&&(ms(this,t._parsed),t._stacked=hs(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:s,_stacked:o}=n,a=s.axis;let r,l,d,c=0===e&&t===i.length||n._sorted,u=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,d=i;else{d=gt(i[e])?this.parseArrayData(n,i,e,t):vt(i[e])?this.parseObjectData(n,i,e,t):this.parsePrimitiveData(n,i,e,t);const s=()=>null===l[a]||u&&l[a]<u[a];for(r=0;r<t;++r)n._parsed[r+e]=l=d[r],c&&(s()&&(c=!1),u=l);n._sorted=c}o&&ms(this,d)}parsePrimitiveData(e,t,n,i){const{iScale:s,vScale:o}=e,a=s.axis,r=o.axis,l=s.getLabels(),d=s===o,c=new Array(i);let u,h,p;for(u=0,h=i;u<h;++u)p=u+n,c[u]={[a]:d||s.parse(l[p],p),[r]:o.parse(t[p],p)};return c}parseArrayData(e,t,n,i){const{xScale:s,yScale:o}=e,a=new Array(i);let r,l,d,c;for(r=0,l=i;r<l;++r)d=r+n,c=t[d],a[r]={x:s.parse(c[0],d),y:o.parse(c[1],d)};return a}parseObjectData(e,t,n,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:r="y"}=this._parsing,l=new Array(i);let d,c,u,h;for(d=0,c=i;d<c;++d)u=d+n,h=t[u],l[d]={x:s.parse(Tt(h,a),u),y:o.parse(Tt(h,r),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,s=this._cachedMeta,o=t[e.axis];return us({keys:cs(i,!0),values:t._stacks[e.axis]._visualValues},o,s.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const s=n[t.axis];let o=null===s?NaN:s;const a=i&&n._stacks[t.axis];i&&a&&(i.values=a,o=us(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,s=n._sorted&&e===n.iScale,o=i.length,a=this._getOtherScale(e),r=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:cs(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:c}=function(e){const{min:t,max:n,minDefined:i,maxDefined:s}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}(a);let u,h;function p(){h=i[u];const t=h[a.axis];return!xt(h[e.axis])||d>t||c<t}for(u=0;u<o&&(p()||(this.updateRangeFromParsed(l,e,h,r),!s));++u);if(s)for(u=o-1;u>=0;--u)if(!p()){this.updateRangeFromParsed(l,e,h,r);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,s,o;for(i=0,s=t.length;i<s;++i)o=t[i][e.axis],xt(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,s=this.getParsed(e);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,i,s;return vt(e)?(t=e.top,n=e.right,i=e.bottom,s=e.left):t=n=i=s=e,{top:t,right:n,bottom:i,left:s,disabled:!1===e}}(yt(this.options.clip,function(e,t,n){if(!1===n)return!1;const i=ds(e,n),s=ds(t,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],s=t.chartArea,o=[],a=this._drawStart||0,r=this._drawCount||i.length-a,l=this.options.drawActiveElementsOnTop;let d;for(n.dataset&&n.dataset.draw(e,s,a,r),d=a;d<a+r;++d){const t=i[d];t.hidden||(t.active&&l?o.push(t):t.draw(e,s))}for(d=0;d<o.length;++d)o[d].draw(e,s)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];s=t.$context||(t.$context=function(e,t,n){return di(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=function(e,t){return di(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=n,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===t,s=this._cachedDataOpts,o=e+"-"+t,a=s[o],r=this.enableOptionSharing&&Rt(n);if(a)return bs(a,r);const l=this.chart.config,d=l.datasetElementScopeKeys(this._type,e),c=i?[`${e}Hover`,"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),d),h=Object.keys(zn.elements[e]),p=l.resolveNamedOptions(u,h,()=>this.getContext(n,i,t),c);return p.$shared&&(p.$shared=r,s[o]=Object.freeze(bs(p,r))),p}_resolveAnimations(e,t,n){const i=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,a=s[o];if(a)return a;let r;if(!1!==i.options.animation){const i=this.chart.config,s=i.datasetAnimationScopeKeys(this._type,t),o=i.getOptionScopes(this.getDataset(),s);r=i.createResolver(o,this.getContext(e,n,t))}const l=new ls(i,r&&r.animations);return r&&r._cacheable&&(s[o]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||xs(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,s=this.getSharedOptions(n),o=this.includeOptions(t,s)||s!==i;return this.updateSharedOptions(s,t,n),{sharedOptions:s,includeOptions:o}}updateElement(e,t,n,i){xs(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!xs(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const s=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,r,l]of this._syncList)this[a](r,l);this._syncList=[];const i=n.length,s=t.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,s=i.data,o=e+t;let a;const r=e=>{for(e.length+=t,a=e.length-1;a>=o;a--)e[a]=e[a-t]};for(r(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&r(i._parsed),this.parse(e,t),n&&this.updateElements(s,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&vs(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class Ss extends ys{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map((t,s)=>{const o=e.getDatasetMeta(0).controller.getStyle(s);return{text:t,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:i,lineWidth:o.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let s,o,a=e=>+n[e];if(vt(n[e])){const{key:e="value"}=this._parsing;a=t=>+Tt(n[t],e)}for(s=e,o=e+t;s<o;++s)i._parsed[s]=a(s)}}_getRotation(){return Qt(this.options.rotation-90)}_getCircumference(){return Qt(this.options.circumference)}_getRotationExtents(){let e=zt,t=-zt;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),t=Math.max(t,s+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-o)/2,0),r=Math.min((l=this.options.cutout,d=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/d),1);var l,d;const c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:f,offsetX:m,offsetY:g}=function(e,t,n){let i=1,s=1,o=0,a=0;if(t<zt){const r=e,l=r+t,d=Math.cos(r),c=Math.sin(r),u=Math.cos(l),h=Math.sin(l),p=(e,t,i)=>on(e,r,l,!0)?1:Math.max(t,t*n,i,i*n),f=(e,t,i)=>on(e,r,l,!0)?-1:Math.min(t,t*n,i,i*n),m=p(0,d,u),g=p(Ut,c,h),v=f(Lt,d,u),x=f(Lt+Ut,c,h);i=(m-v)/2,s=(g-x)/2,o=-(m+v)/2,a=-(g+x)/2}return{ratioX:i,ratioY:s,offsetX:o,offsetY:a}}(h,u,r),v=(n.width-o)/p,x=(n.height-o)/f,b=Math.max(Math.min(v,x)/2,0),y=St(this.options.radius,b),S=(y-Math.max(y*r,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*y,this.offsetY=g*y,i.total=this.calculateTotal(),this.outerRadius=y-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const n=this.options,i=this._cachedMeta,s=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/zt)}updateElements(e,t,n,i){const s="reset"===i,o=this.chart,a=o.chartArea,r=o.options.animation,l=(a.left+a.right)/2,d=(a.top+a.bottom)/2,c=s&&r.animateScale,u=c?0:this.innerRadius,h=c?0:this.outerRadius,{sharedOptions:p,includeOptions:f}=this._getSharedOptions(t,i);let m,g=this._getRotation();for(m=0;m<t;++m)g+=this._circumference(m,s);for(m=t;m<t+n;++m){const t=this._circumference(m,s),n=e[m],o={x:l+this.offsetX,y:d+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:u};f&&(o.options=p||this.resolveDataElementOptions(m,n.active?"active":i)),g+=t,this.updateElement(n,m,o,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,i=0;for(n=0;n<t.length;n++){const s=e._parsed[n];null===s||isNaN(s)||!this.chart.getDataVisibility(n)||t[n].hidden||(i+=Math.abs(s))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?zt*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],s=Dn(t._parsed[e],n.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const n=this.chart;let i,s,o,a,r;if(!e)for(i=0,s=n.data.datasets.length;i<s;++i)if(n.isDatasetVisible(i)){o=n.getDatasetMeta(i),e=o.data,a=o.controller;break}if(!e)return 0;for(i=0,s=e.length;i<s;++i)r=a.resolveDataElementOptions(i),"inner"!==r.borderAlign&&(t=Math.max(t,r.borderWidth||0,r.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,i=e.length;n<i;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(yt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class js extends ys{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:i=[],_dataset:s}=t,o=this.chart._animationsDisabled;let{start:a,count:r}=xn(t,i,o);this._drawStart=a,this._drawCount=r,bn(t)&&(a=0,r=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=i;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:l},e),this.updateElements(i,a,r,e)}updateElements(e,t,n,i){const s="reset"===i,{iScale:o,vScale:a,_stacked:r,_dataset:l}=this._cachedMeta,{sharedOptions:d,includeOptions:c}=this._getSharedOptions(t,i),u=o.axis,h=a.axis,{spanGaps:p,segment:f}=this.options,m=Jt(p)?p:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||s||"none"===i,v=t+n,x=e.length;let b=t>0&&this.getParsed(t-1);for(let y=0;y<x;++y){const n=e[y],p=g?n:{};if(y<t||y>=v){p.skip=!0;continue}const x=this.getParsed(y),S=mt(x[h]),j=p[u]=o.getPixelForValue(x[u],y),w=p[h]=s||S?a.getBasePixel():a.getPixelForValue(r?this.applyStack(a,x,r):x[h],y);p.skip=isNaN(j)||isNaN(w)||S,p.stop=y>0&&Math.abs(x[u]-b[u])>m,f&&(p.parsed=x,p.raw=l.data[y]),c&&(p.options=d||this.resolveDataElementOptions(y,n.active?"active":i)),g||this.updateElement(n,y,p,i),b=x}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function ws(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class _s{static override(e){Object.assign(_s.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return ws()}parse(){return ws()}format(){return ws()}add(){return ws()}diff(){return ws()}startOf(){return ws()}endOf(){return ws()}}var Ns=_s;function ks(e,t,n,i){const{controller:s,data:o,_sorted:a}=e,r=s._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(r&&t===r.axis&&"r"!==t&&a&&o.length){const a=r._reversePixels?cn:dn;if(!i){const i=a(o,t,n);if(l){const{vScale:t}=s._cachedMeta,{_parsed:n}=e,o=n.slice(0,i.lo+1).reverse().findIndex(e=>!mt(e[t.axis]));i.lo-=Math.max(0,o);const a=n.slice(i.hi).findIndex(e=>!mt(e[t.axis]));i.hi+=Math.max(0,a)}return i}if(s._sharedOptions){const e=o[0],i="function"===typeof e.getRange&&e.getRange(t);if(i){const e=a(o,t,n-i),s=a(o,t,n+i);return{lo:e.lo,hi:s.hi}}}}return{lo:0,hi:o.length-1}}function Cs(e,t,n,i,s){const o=e.getSortedVisibleDatasetMetas(),a=n[t];for(let r=0,l=o.length;r<l;++r){const{index:e,data:n}=o[r],{lo:l,hi:d}=ks(o[r],t,a,s);for(let t=l;t<=d;++t){const s=n[t];s.skip||i(s,e,t)}}}function Es(e,t,n,i,s){const o=[];if(!s&&!e.isPointInArea(t))return o;return Cs(e,n,t,function(n,a,r){(s||Hn(n,e.chartArea,0))&&n.inRange(t.x,t.y,i)&&o.push({element:n,datasetIndex:a,index:r})},!0),o}function Is(e,t,n,i,s,o){let a=[];const r=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){const s=t?Math.abs(e.x-i.x):0,o=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}(n);let l=Number.POSITIVE_INFINITY;return Cs(e,n,t,function(n,d,c){const u=n.inRange(t.x,t.y,s);if(i&&!u)return;const h=n.getCenterPoint(s);if(!(!!o||e.isPointInArea(h))&&!u)return;const p=r(t,h);p<l?(a=[{element:n,datasetIndex:d,index:c}],l=p):p===l&&a.push({element:n,datasetIndex:d,index:c})}),a}function Ds(e,t,n,i,s,o){return o||e.isPointInArea(t)?"r"!==n||i?Is(e,t,n,i,s,o):function(e,t,n,i){let s=[];return Cs(e,n,t,function(e,n,o){const{startAngle:a,endAngle:r}=e.getProps(["startAngle","endAngle"],i),{angle:l}=en(e,{x:t.x,y:t.y});on(l,a,r)&&s.push({element:e,datasetIndex:n,index:o})}),s}(e,t,n,s):[]}function As(e,t,n,i,s){const o=[],a="x"===n?"inXRange":"inYRange";let r=!1;return Cs(e,n,t,(e,i,l)=>{e[a]&&e[a](t[n],s)&&(o.push({element:e,datasetIndex:i,index:l}),r=r||e.inRange(t.x,t.y,s))}),i&&!r?[]:o}var Ts={evaluateInteractionItems:Cs,modes:{index(e,t,n,i){const s=Pi(t,e),o=n.axis||"x",a=n.includeInvisible||!1,r=n.intersect?Es(e,s,o,i,a):Ds(e,s,o,!1,i,a),l=[];return r.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=r[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,i){const s=Pi(t,e),o=n.axis||"xy",a=n.includeInvisible||!1;let r=n.intersect?Es(e,s,o,i,a):Ds(e,s,o,!1,i,a);if(r.length>0){const t=r[0].datasetIndex,n=e.getDatasetMeta(t).data;r=[];for(let e=0;e<n.length;++e)r.push({element:n[e],datasetIndex:t,index:e})}return r},point:(e,t,n,i)=>Es(e,Pi(t,e),n.axis||"xy",i,n.includeInvisible||!1),nearest(e,t,n,i){const s=Pi(t,e),o=n.axis||"xy",a=n.includeInvisible||!1;return Ds(e,s,o,n.intersect,i,a)},x:(e,t,n,i)=>As(e,Pi(t,e),"x",n.intersect,i),y:(e,t,n,i)=>As(e,Pi(t,e),"y",n.intersect,i)}};const Ms=["left","top","right","bottom"];function Rs(e,t){return e.filter(e=>e.pos===t)}function Os(e,t){return e.filter(e=>-1===Ms.indexOf(e.pos)&&e.box.axis===t)}function Ps(e,t){return e.sort((e,n)=>{const i=t?n:e,s=t?e:n;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function Ls(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:i,stackWeight:s}=n;if(!e||!Ms.includes(i))continue;const o=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}(e),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let o,a,r;for(o=0,a=e.length;o<a;++o){r=e[o];const{fullSize:a}=r.box,l=n[r.stack],d=l&&r.stackWeight/l.weight;r.horizontal?(r.width=d?d*i:a&&t.availableWidth,r.height=s):(r.width=i,r.height=d?d*s:a&&t.availableHeight)}return n}function zs(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function Fs(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Bs(e,t,n,i){const{pos:s,box:o}=n,a=e.maxPadding;if(!vt(s)){n.size&&(e[s]-=n.size);const t=i[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?o.height:o.width),n.size=t.size/t.count,e[s]+=n.size}o.getPadding&&Fs(a,o.getPadding());const r=Math.max(0,t.outerWidth-zs(a,e,"left","right")),l=Math.max(0,t.outerHeight-zs(a,e,"top","bottom")),d=r!==e.w,c=l!==e.h;return e.w=r,e.h=l,n.horizontal?{same:d,other:c}:{same:c,other:d}}function $s(e,t){const n=t.maxPadding;function i(e){const i={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{i[e]=Math.max(t[e],n[e])}),i}return i(e?["left","right"]:["top","bottom"])}function Us(e,t,n,i){const s=[];let o,a,r,l,d,c;for(o=0,a=e.length,d=0;o<a;++o){r=e[o],l=r.box,l.update(r.width||t.w,r.height||t.h,$s(r.horizontal,t));const{same:a,other:u}=Bs(t,n,r,i);d|=a&&s.length,c=c||u,l.fullSize||s.push(r)}return d&&Us(s,t,n,i)||c}function Ws(e,t,n,i,s){e.top=n,e.left=t,e.right=t+i,e.bottom=n+s,e.width=i,e.height=s}function Hs(e,t,n,i){const s=n.padding;let{x:o,y:a}=t;for(const r of e){const e=r.box,l=i[r.stack]||{count:1,placed:0,weight:1},d=r.stackWeight/l.weight||1;if(r.horizontal){const i=t.w*d,o=l.size||e.height;Rt(l.start)&&(a=l.start),e.fullSize?Ws(e,s.left,a,n.outerWidth-s.right-s.left,o):Ws(e,t.left+l.placed,a,i,o),l.start=a,l.placed+=i,a=e.bottom}else{const i=t.h*d,a=l.size||e.width;Rt(l.start)&&(o=l.start),e.fullSize?Ws(e,o,s.top,a,n.outerHeight-s.bottom-s.top):Ws(e,o,t.top+l.placed,a,i),l.start=o,l.placed+=i,o=e.right}}t.x=o,t.y=a}var Vs={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const s=ai(e.options.layout.padding),o=Math.max(t-s.width,0),a=Math.max(n-s.height,0),r=function(e){const t=function(e){const t=[];let n,i,s,o,a,r;for(n=0,i=(e||[]).length;n<i;++n)s=e[n],({position:o,options:{stack:a,stackWeight:r=1}}=s),t.push({index:n,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&o+a,stackWeight:r});return t}(e),n=Ps(t.filter(e=>e.box.fullSize),!0),i=Ps(Rs(t,"left"),!0),s=Ps(Rs(t,"right")),o=Ps(Rs(t,"top"),!0),a=Ps(Rs(t,"bottom")),r=Os(t,"x"),l=Os(t,"y");return{fullSize:n,leftAndTop:i.concat(o),rightAndBottom:s.concat(l).concat(a).concat(r),chartArea:Rs(t,"chartArea"),vertical:i.concat(s).concat(l),horizontal:o.concat(a).concat(r)}}(e.boxes),l=r.vertical,d=r.horizontal;wt(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const c=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/c,hBoxMaxHeight:a/2}),h=Object.assign({},s);Fs(h,ai(i));const p=Object.assign({maxPadding:h,w:o,h:a,x:s.left,y:s.top},s),f=Ls(l.concat(d),u);Us(r.fullSize,p,u,f),Us(l,p,u,f),Us(d,p,u,f)&&Us(l,p,u,f),function(e){const t=e.maxPadding;function n(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(p),Hs(r.leftAndTop,p,u,f),p.x+=p.w,p.y+=p.h,Hs(r.rightAndBottom,p,u,f),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},wt(r.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class qs{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class Ys extends qs{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Gs="$chartjs",Js={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ks=e=>null===e||""===e;const Qs=!!Bi&&{passive:!0};function Xs(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,Qs)}function Zs(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function eo(e,t,n){const i=e.canvas,s=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||Zs(n.addedNodes,i),t=t&&!Zs(n.removedNodes,i);t&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function to(e,t,n){const i=e.canvas,s=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||Zs(n.removedNodes,i),t=t&&!Zs(n.addedNodes,i);t&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const no=new Map;let io=0;function so(){const e=window.devicePixelRatio;e!==io&&(io=e,no.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function oo(e,t,n){const i=e.canvas,s=i&&Ai(i);if(!s)return;const o=mn((e,t)=>{const i=s.clientWidth;n(e,t),i<s.clientWidth&&n()},window),a=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,i=t.contentRect.height;0===n&&0===i||o(n,i)});return a.observe(s),function(e,t){no.size||window.addEventListener("resize",so),no.set(e,t)}(e,o),a}function ao(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){no.delete(e),no.size||window.removeEventListener("resize",so)}(e)}function ro(e,t,n){const i=e.canvas,s=mn(t=>{null!==e.ctx&&n(function(e,t){const n=Js[e.type]||e.type,{x:i,y:s}=Pi(e,t);return{type:n,chart:t,native:e,x:void 0!==i?i:null,y:void 0!==s?s:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,Qs)}(i,t,s),s}class lo extends qs{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,i=e.getAttribute("height"),s=e.getAttribute("width");if(e[Gs]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Ks(s)){const t=$i(e,"width");void 0!==t&&(e.width=t)}if(Ks(i))if(""===e.style.height)e.height=e.width/(t||2);else{const t=$i(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[Gs])return!1;const n=t[Gs].initial;["height","width"].forEach(e=>{const i=n[e];mt(i)?t.removeAttribute(e):t.setAttribute(e,i)});const i=n.style||{};return Object.keys(i).forEach(e=>{t.style[e]=i[e]}),t.width=t.width,delete t[Gs],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),s={attach:eo,detach:to,resize:oo}[t]||ro;i[t]=s(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:ao,detach:ao,resize:ao}[t]||Xs)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return zi(e,t,n,i)}isAttached(e){const t=e&&Ai(e);return!(!t||!t.isConnected)}}class co{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return Jt(this.x)&&Jt(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach(e=>{i[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),i}}function uo(e,t){const n=e.options.ticks,i=function(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(i,s))}(e),s=Math.min(n.maxTicksLimit||i,i),o=n.major.enabled?function(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}(t):[],a=o.length,r=o[0],l=o[a-1],d=[];if(a>s)return function(e,t,n,i){let s,o=0,a=n[0];for(i=Math.ceil(i),s=0;s<e.length;s++)s===a&&(t.push(e[s]),o++,a=n[o*i])}(t,d,o,a/s),d;const c=function(e,t,n){const i=function(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}(e),s=t.length/n;if(!i)return Math.max(s,1);const o=function(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(i);for(let a=0,r=o.length-1;a<r;a++){const e=o[a];if(e>s)return e}return Math.max(s,1)}(o,t,s);if(a>0){let e,n;const i=a>1?Math.round((l-r)/(a-1)):null;for(ho(t,d,c,mt(i)?0:r-i,r),e=0,n=a-1;e<n;e++)ho(t,d,c,o[e],o[e+1]);return ho(t,d,c,l,mt(i)?t.length:l+i),d}return ho(t,d,c),d}function ho(e,t,n,i,s){const o=yt(i,0),a=Math.min(yt(s,e.length),e.length);let r,l,d,c=0;for(n=Math.ceil(n),s&&(r=s-i,n=r/Math.floor(r/n)),d=o;d<0;)c++,d=Math.round(o+c*n);for(l=Math.max(o,0);l<a;l++)l===d&&(t.push(e[l]),c++,d=Math.round(o+c*n))}const po=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,fo=(e,t)=>Math.min(t||e,e);function mo(e,t){const n=[],i=e.length/t,s=e.length;let o=0;for(;o<s;o+=i)n.push(e[Math.floor(o)]);return n}function go(e,t,n){const i=e.ticks.length,s=Math.min(t,i-1),o=e._startPixel,a=e._endPixel,r=1e-6;let l,d=e.getPixelForTick(s);if(!(n&&(l=1===i?Math.max(d-o,a-d):0===t?(e.getPixelForTick(1)-d)/2:(d-e.getPixelForTick(s-1))/2,d+=s<t?l:-l,d<o-r||d>a+r)))return d}function vo(e){return e.drawTicks?e.tickLength:0}function xo(e,t){if(!e.display)return 0;const n=ri(e.font,t),i=ai(e.padding);return(gt(e.text)?e.text.length:1)*n.lineHeight+i.height}function bo(e,t,n){let i=gn(e);return(n&&"right"!==t||!n&&"right"===t)&&(i=(e=>"left"===e?"right":"right"===e?"left":e)(i)),i}class yo extends co{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=bt(e,Number.POSITIVE_INFINITY),t=bt(t,Number.NEGATIVE_INFINITY),n=bt(n,Number.POSITIVE_INFINITY),i=bt(i,Number.NEGATIVE_INFINITY),{min:bt(e,n),max:bt(t,i),minDefined:xt(e),maxDefined:xt(t)}}getMinMax(e){let t,{min:n,max:i,minDefined:s,maxDefined:o}=this.getUserBounds();if(s&&o)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let r=0,l=a.length;r<l;++r)t=a[r].controller.getMinMax(this,e),s||(n=Math.min(n,t.min)),o||(i=Math.max(i,t.max));return n=o&&n>i?i:n,i=s&&n>i?n:i,{min:bt(n,bt(i,n)),max:bt(i,bt(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){jt(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:i,max:s}=e,o=St(t,(s-i)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(i,-Math.abs(o)),max:a(s,o)}}(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const r=a<this.ticks.length;this._convertTicksToLabels(r?mo(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=uo(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),r&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){jt(this.options.afterUpdate,[this])}beforeSetDimensions(){jt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){jt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),jt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){jt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,s;for(n=0,i=e.length;n<i;n++)s=e[n],s.label=jt(t.callback,[s.value,n,e],this)}afterTickToLabelConversion(){jt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){jt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=fo(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,s=t.maxRotation;let o,a,r,l=i;if(!this._isVisible()||!t.display||i>=s||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const d=this._getLabelSizes(),c=d.widest.width,u=d.highest.height,h=an(this.chart.width-c,0,this.maxWidth);o=e.offset?this.maxWidth/n:h/(n-1),c+6>o&&(o=h/(n-(e.offset?.5:1)),a=this.maxHeight-vo(e.grid)-t.padding-xo(e.title,this.chart.options.font),r=Math.sqrt(c*c+u*u),l=Xt(Math.min(Math.asin(an((d.highest.height+6)/o,-1,1)),Math.asin(an(a/r,-1,1))-Math.asin(an(u/r,-1,1)))),l=Math.max(i,Math.min(s,l))),this.labelRotation=l}afterCalculateLabelRotation(){jt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){jt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const o=xo(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=vo(s)+o):(e.height=this.maxHeight,e.width=vo(s)+o),n.display&&this.ticks.length){const{first:t,last:i,widest:s,highest:o}=this._getLabelSizes(),r=2*n.padding,l=Qt(this.labelRotation),d=Math.cos(l),c=Math.sin(l);if(a){const t=n.mirror?0:c*s.width+d*o.height;e.height=Math.min(this.maxHeight,e.height+t+r)}else{const t=n.mirror?0:d*s.width+c*o.height;e.width=Math.min(this.maxWidth,e.width+t+r)}this._calculatePadding(t,i,c,d)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:s,padding:o},position:a}=this.options,r=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let c=0,u=0;r?l?(c=i*e.width,u=n*t.height):(c=n*e.height,u=i*t.width):"start"===s?u=t.width:"end"===s?c=e.width:"inner"!==s&&(c=e.width/2,u=t.width/2),this.paddingLeft=Math.max((c-a+o)*this.width/(this.width-a),0),this.paddingRight=Math.max((u-d+o)*this.width/(this.width-d),0)}else{let n=t.height/2,i=e.height/2;"start"===s?(n=0,i=e.height):"end"===s&&(n=t.height,i=0),this.paddingTop=n+o,this.paddingBottom=i+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){jt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)mt(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=mo(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],r=Math.floor(t/fo(t,n));let l,d,c,u,h,p,f,m,g,v,x,b=0,y=0;for(l=0;l<t;l+=r){if(u=e[l].label,h=this._resolveTickFontOptions(l),i.font=p=h.string,f=s[p]=s[p]||{data:{},gc:[]},m=h.lineHeight,g=v=0,mt(u)||gt(u)){if(gt(u))for(d=0,c=u.length;d<c;++d)x=u[d],mt(x)||gt(x)||(g=Fn(i,f.data,f.gc,g,x),v+=m)}else g=Fn(i,f.data,f.gc,g,u),v=m;o.push(g),a.push(v),b=Math.max(g,b),y=Math.max(v,y)}!function(e,t){wt(e,e=>{const n=e.gc,i=n.length/2;let s;if(i>t){for(s=0;s<i;++s)delete e.data[n[s]];n.splice(0,i)}})}(s,t);const S=o.indexOf(b),j=a.indexOf(y),w=e=>({width:o[e]||0,height:a[e]||0});return{first:w(0),last:w(t-1),widest:w(S),highest:w(j),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return an(this._alignToPixels?Bn(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return di(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=di(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=Qt(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,r=s?s.highest.height+o:0;return this.isHorizontal()?r*n>a*i?a/n:r/i:r*i<a*n?r/n:a/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:s,position:o,border:a}=i,r=s.offset,l=this.isHorizontal(),d=this.ticks.length+(r?1:0),c=vo(s),u=[],h=a.setContext(this.getContext()),p=h.display?h.width:0,f=p/2,m=function(e){return Bn(n,e,p)};let g,v,x,b,y,S,j,w,_,N,k,C;if("top"===o)g=m(this.bottom),S=this.bottom-c,w=g-f,N=m(e.top)+f,C=e.bottom;else if("bottom"===o)g=m(this.top),N=e.top,C=m(e.bottom)-f,S=g+f,w=this.top+c;else if("left"===o)g=m(this.right),y=this.right-c,j=g-f,_=m(e.left)+f,k=e.right;else if("right"===o)g=m(this.left),_=e.left,k=m(e.right)-f,y=g+f,j=this.left+c;else if("x"===t){if("center"===o)g=m((e.top+e.bottom)/2+.5);else if(vt(o)){const e=Object.keys(o)[0],t=o[e];g=m(this.chart.scales[e].getPixelForValue(t))}N=e.top,C=e.bottom,S=g+f,w=S+c}else if("y"===t){if("center"===o)g=m((e.left+e.right)/2);else if(vt(o)){const e=Object.keys(o)[0],t=o[e];g=m(this.chart.scales[e].getPixelForValue(t))}y=g-f,j=y-c,_=e.left,k=e.right}const E=yt(i.ticks.maxTicksLimit,d),I=Math.max(1,Math.ceil(d/E));for(v=0;v<d;v+=I){const e=this.getContext(v),t=s.setContext(e),i=a.setContext(e),o=t.lineWidth,d=t.color,c=i.dash||[],h=i.dashOffset,p=t.tickWidth,f=t.tickColor,m=t.tickBorderDash||[],g=t.tickBorderDashOffset;x=go(this,v,r),void 0!==x&&(b=Bn(n,x,o),l?y=j=_=k=b:S=w=N=C=b,u.push({tx1:y,ty1:S,tx2:j,ty2:w,x1:_,y1:N,x2:k,y2:C,width:o,color:d,borderDash:c,borderDashOffset:h,tickWidth:p,tickColor:f,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=d,this._borderValue=g,u}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:s}=n,o=this.isHorizontal(),a=this.ticks,{align:r,crossAlign:l,padding:d,mirror:c}=s,u=vo(n.grid),h=u+d,p=c?-d:h,f=-Qt(this.labelRotation),m=[];let g,v,x,b,y,S,j,w,_,N,k,C,E="middle";if("top"===i)S=this.bottom-p,j=this._getXAxisLabelAlignment();else if("bottom"===i)S=this.top+p,j=this._getXAxisLabelAlignment();else if("left"===i){const e=this._getYAxisLabelAlignment(u);j=e.textAlign,y=e.x}else if("right"===i){const e=this._getYAxisLabelAlignment(u);j=e.textAlign,y=e.x}else if("x"===t){if("center"===i)S=(e.top+e.bottom)/2+h;else if(vt(i)){const e=Object.keys(i)[0],t=i[e];S=this.chart.scales[e].getPixelForValue(t)+h}j=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)y=(e.left+e.right)/2-h;else if(vt(i)){const e=Object.keys(i)[0],t=i[e];y=this.chart.scales[e].getPixelForValue(t)}j=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===r?E="top":"end"===r&&(E="bottom"));const I=this._getLabelSizes();for(g=0,v=a.length;g<v;++g){x=a[g],b=x.label;const e=s.setContext(this.getContext(g));w=this.getPixelForTick(g)+s.labelOffset,_=this._resolveTickFontOptions(g),N=_.lineHeight,k=gt(b)?b.length:1;const t=k/2,n=e.color,r=e.textStrokeColor,d=e.textStrokeWidth;let u,h=j;if(o?(y=w,"inner"===j&&(h=g===v-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),C="top"===i?"near"===l||0!==f?-k*N+N/2:"center"===l?-I.highest.height/2-t*N+N:-I.highest.height+N/2:"near"===l||0!==f?N/2:"center"===l?I.highest.height/2-t*N:I.highest.height-k*N,c&&(C*=-1),0===f||e.showLabelBackdrop||(y+=N/2*Math.sin(f))):(S=w,C=(1-k)*N/2),e.showLabelBackdrop){const t=ai(e.backdropPadding),n=I.heights[g],i=I.widths[g];let s=C-t.top,o=0-t.left;switch(E){case"middle":s-=n/2;break;case"bottom":s-=n}switch(j){case"center":o-=i/2;break;case"right":o-=i;break;case"inner":g===v-1?o-=i:g>0&&(o-=i/2)}u={left:o,top:s,width:i+t.width,height:n+t.height,color:e.backdropColor}}m.push({label:b,font:_,textOffset:C,options:{rotation:f,color:n,strokeColor:r,strokeWidth:d,textAlign:h,textBaseline:E,translation:[y,S],backdrop:u}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Qt(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:s}}=this.options,o=e+s,a=this._getLabelSizes().widest.width;let r,l;return"left"===t?i?(l=this.right+s,"near"===n?r="left":"center"===n?(r="center",l+=a/2):(r="right",l+=a)):(l=this.right-o,"near"===n?r="right":"center"===n?(r="center",l-=a/2):(r="left",l=this.left)):"right"===t?i?(l=this.left+s,"near"===n?r="right":"center"===n?(r="center",l-=a/2):(r="left",l-=a)):(l=this.left+o,"near"===n?r="left":"center"===n?(r="center",l+=a/2):(r="right",l=this.right)):r="right",{textAlign:r,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(e,t,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(s=0,o=i.length;s<o;++s){const e=i[s];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:i}}=this,s=n.setContext(this.getContext()),o=n.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,r=this._borderValue;let l,d,c,u;this.isHorizontal()?(l=Bn(e,this.left,o)-o/2,d=Bn(e,this.right,a)+a/2,c=u=r):(c=Bn(e,this.top,o)-o/2,u=Bn(e,this.bottom,a)+a/2,l=d=r),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,c),t.lineTo(d,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&Vn(t,n);const i=this.getLabelItems(e);for(const s of i){const e=s.options,n=s.font;Qn(t,s.label,0,s.textOffset,n,e)}n&&qn(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const s=ri(n.font),o=ai(n.padding),a=n.align;let r=s.lineHeight/2;"bottom"===t||"center"===t||vt(t)?(r+=o.bottom,gt(n.text)&&(r+=s.lineHeight*(n.text.length-1))):r+=o.top;const{titleX:l,titleY:d,maxWidth:c,rotation:u}=function(e,t,n,i){const{top:s,left:o,bottom:a,right:r,chart:l}=e,{chartArea:d,scales:c}=l;let u,h,p,f=0;const m=a-s,g=r-o;if(e.isHorizontal()){if(h=vn(i,o,r),vt(n)){const e=Object.keys(n)[0],i=n[e];p=c[e].getPixelForValue(i)+m-t}else p="center"===n?(d.bottom+d.top)/2+m-t:po(e,n,t);u=r-o}else{if(vt(n)){const e=Object.keys(n)[0],i=n[e];h=c[e].getPixelForValue(i)-g+t}else h="center"===n?(d.left+d.right)/2-g+t:po(e,n,t);p=vn(i,a,s),f="left"===n?-Ut:Ut}return{titleX:h,titleY:p,maxWidth:u,rotation:f}}(this,r,t,a);Qn(e,n.text,0,0,s,{color:n.color,maxWidth:c,rotation:u,textAlign:bo(a,t,i),textBaseline:"middle",translation:[l,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=yt(e.grid&&e.grid.z,-1),i=yt(e.border&&e.border.z,0);return this._isVisible()&&this.draw===yo.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let s,o;for(s=0,o=t.length;s<o;++s){const o=t[s];o[n]!==this.id||e&&o.type!==e||i.push(o)}return i}_resolveTickFontOptions(e){return ri(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class So{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,function(e,t,n){const i=Et(Object.create(null),[n?zn.get(n):{},zn.get(t),e.defaults]);zn.set(t,i),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),s=i.pop(),o=[e].concat(i).join("."),a=t[n].split("."),r=a.pop(),l=a.join(".");zn.route(o,s,l,r)})}(t,e.defaultRoutes);e.descriptors&&zn.describe(t,e.descriptors)}(e,o,n),this.override&&zn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in zn[i]&&(delete zn[i][n],this.override&&delete Mn[n])}}class jo{constructor(){this.controllers=new So(ys,"datasets",!0),this.elements=new So(co,"elements"),this.plugins=new So(Object,"plugins"),this.scales=new So(yo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const i=n||this._getRegistryForType(t);n||i.isForType(t)||i===this.plugins&&t.id?this._exec(e,i,t):wt(t,t=>{const i=n||this._getRegistryForType(t);this._exec(e,i,t)})})}_exec(e,t,n){const i=Mt(e);jt(n["before"+i],[],n),t[e](n),jt(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var wo=new jo;class _o{constructor(){this._init=[]}notify(e,t,n,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,t,n);return"afterDestroy"===t&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,n,i){i=i||{};for(const s of e){const e=s.plugin;if(!1===jt(e[n],[t,i,s.options],e)&&i.cancelable)return!1}return!0}invalidate(){mt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=yt(n.options&&n.options.plugins,{}),s=function(e){const t={},n=[],i=Object.keys(wo.plugins.items);for(let o=0;o<i.length;o++)n.push(wo.getPlugin(i[o]));const s=e.plugins||[];for(let o=0;o<s.length;o++){const e=s[o];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==i||t?function(e,t,n,i){let{plugins:s,localIds:o}=t;const a=[],r=e.getContext();for(const l of s){const t=l.id,s=No(n[t],i);null!==s&&a.push({plugin:l,options:ko(e.config,{plugin:l,local:o[t]},s,r)})}return a}(e,s,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function No(e,t){return t||!1!==e?!0===e?{}:e:null}function ko(e,t,n,i){let{plugin:s,local:o}=t;const a=e.pluginScopeKeys(s),r=e.getOptionScopes(n,a);return o&&s.defaults&&r.push(s.defaults),e.createResolver(r,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Co(e,t){const n=zn.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Eo(e){if("x"===e||"y"===e||"r"===e)return e}function Io(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function Do(e){if(Eo(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const s of n){const t=s.axis||Io(s.position)||e.length>1&&Eo(e[0].toLowerCase());if(t)return t}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Ao(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function To(e,t){const n=Mn[e.type]||{scales:{}},i=t.scales||{},s=Co(e.type,t),o=Object.create(null);return Object.keys(i).forEach(t=>{const a=i[t];if(!vt(a))return console.error(`Invalid scale configuration for scale: ${t}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const r=Do(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return Ao(e,"x",n[0])||Ao(e,"y",n[0])}return{}}(t,e),zn.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(r,s),d=n.scales||{};o[t]=It(Object.create(null),[{axis:r},a,d[r],d[l]])}),e.data.datasets.forEach(n=>{const s=n.type||e.type,a=n.indexAxis||Co(s,t),r=(Mn[s]||{}).scales||{};Object.keys(r).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),s=n[t+"AxisID"]||t;o[s]=o[s]||Object.create(null),It(o[s],[{axis:t},i[s],r[e]])})}),Object.keys(o).forEach(e=>{const t=o[e];It(t,[zn.scales[t.type],zn.scale])}),o}function Mo(e){const t=e.options||(e.options={});t.plugins=yt(t.plugins,{}),t.scales=To(e,t)}function Ro(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const Oo=new Map,Po=new Set;function Lo(e,t){let n=Oo.get(e);return n||(n=t(),Oo.set(e,n),Po.add(n)),n}const zo=(e,t,n)=>{const i=Tt(t,n);void 0!==i&&e.add(i)};class Fo{constructor(e){this._config=function(e){return(e=e||{}).data=Ro(e.data),Mo(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Ro(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Mo(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Lo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Lo(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Lo(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return Lo(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return i&&!t||(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:s}=this,o=this._cachedScopes(e,n),a=o.get(t);if(a)return a;const r=new Set;t.forEach(t=>{e&&(r.add(e),t.forEach(t=>zo(r,e,t))),t.forEach(e=>zo(r,i,e)),t.forEach(e=>zo(r,Mn[s]||{},e)),t.forEach(e=>zo(r,zn,e)),t.forEach(e=>zo(r,Rn,e))});const l=Array.from(r);return 0===l.length&&l.push(Object.create(null)),Po.has(t)&&o.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Mn[t]||{},zn.datasets[t]||{},{type:t},zn,Rn]}resolveNamedOptions(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const s={$shared:!0},{resolver:o,subPrefixes:a}=Bo(this._resolverCache,e,i);let r=o;if(function(e,t){const{isScriptable:n,isIndexable:i}=hi(e);for(const s of t){const t=n(s),o=i(s),a=(o||t)&&e[s];if(t&&(Ot(a)||$o(a))||o&&gt(a))return!0}return!1}(o,t)){s.$shared=!1;r=ui(o,n=Ot(n)?n():n,this.createResolver(e,n,a))}for(const l of t)s[l]=r[l];return s}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:s}=Bo(this._resolverCache,e,n);return vt(t)?ui(s,t,void 0,i):s}}function Bo(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const s=n.join();let o=i.get(s);if(!o){o={resolver:ci(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},i.set(s,o)}return o}const $o=e=>vt(e)&&Object.getOwnPropertyNames(e).some(t=>Ot(e[t]));const Uo=["top","bottom","left","right","chartArea"];function Wo(e,t){return"top"===e||"bottom"===e||-1===Uo.indexOf(e)&&"x"===t}function Ho(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function Vo(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),jt(n&&n.onComplete,[e],t)}function qo(e){const t=e.chart,n=t.options.animation;jt(n&&n.onProgress,[e],t)}function Yo(e){return Di()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Go={},Jo=e=>{const t=Yo(e);return Object.values(Go).filter(e=>e.canvas===t).pop()};function Ko(e,t,n){const i=Object.keys(e);for(const s of i){const i=+s;if(i>=t){const o=e[s];delete e[s],(n>0||i>t)&&(e[i+n]=o)}}}class Qo{static defaults=(()=>zn)();static instances=(()=>Go)();static overrides=(()=>Mn)();static registry=(()=>wo)();static version="4.5.0";static getChart=(()=>Jo)();static register(){wo.add(...arguments),Xo()}static unregister(){wo.remove(...arguments),Xo()}constructor(e,t){const n=this.config=new Fo(t),i=Yo(e),s=Jo(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!Di()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?Ys:lo}(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,o.aspectRatio),r=a&&a.canvas,l=r&&r.height,d=r&&r.width;this.id=ft(),this.ctx=a,this.canvas=r,this.width=d,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new _o,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}(e=>this.update(e),o.resizeDelay||0),this._dataChanges=[],Go[this.id]=this,a&&r?(ss.listen(this,"complete",Vo),ss.listen(this,"progress",qo),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:s}=this;return mt(e)?t&&s?s:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return wo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Fi(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return $n(this.canvas,this.ctx),this}stop(){return ss.stop(this),this}resize(e,t){ss.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,t,s),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),r=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Fi(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),jt(n.onResize,[this,o],this),this.attached&&this._doResize(r)&&this.render())}ensureScalesHaveIDs(){wt(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let s=[];t&&(s=s.concat(Object.keys(t).map(e=>{const n=t[e],i=Do(e,n),s="r"===i,o="x"===i;return{options:n,dposition:s?"chartArea":o?"bottom":"left",dtype:s?"radialLinear":o?"category":"linear"}}))),wt(s,t=>{const s=t.options,o=s.id,a=Do(o,s),r=yt(s.type,t.dtype);void 0!==s.position&&Wo(s.position,a)===Wo(t.dposition)||(s.position=t.dposition),i[o]=!0;let l=null;if(o in n&&n[o].type===r)l=n[o];else{l=new(wo.getScale(r))({id:o,type:r,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(s,e)}),wt(i,(e,t)=>{e||delete n[t]}),wt(n,e=>{Vs.configure(this,e,e.options),Vs.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(Ho("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const i=t[n];let s=this.getDatasetMeta(n);const o=i.type||this.config.type;if(s.type&&s.type!==o&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=o,s.indexAxis=i.indexAxis||Co(o,this.options),s.order=i.order||0,s.index=n,s.label=""+i.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const t=wo.getController(o),{datasetElementType:i,dataElementType:a}=zn.datasets[o];Object.assign(t,{dataElementType:wo.getElement(a),datasetElementType:i&&wo.getElement(i)}),s.controller=new t(this,n),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){wt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let l=0,d=this.data.datasets.length;l<d;l++){const{controller:e}=this.getDatasetMeta(l),t=!i&&-1===s.indexOf(e);e.buildOrUpdateElements(t),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),i||wt(s,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Ho("z","_idx"));const{_active:a,_lastEvent:r}=this;r?this._eventHandler(r,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){wt(this.scales,e=>{Vs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Pt(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:s}of t){Ko(e,i,"_removeElements"===n?-s:s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),i=n(0);for(let s=1;s<t;s++)if(!Pt(i,n(s)))return;return Array.from(i).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Vs.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],wt(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Ot(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(ss.has(this)?this.attached&&!ss.running(this)&&ss.start(this):(this.draw(),Vo({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,s;for(i=0,s=t.length;i<s;++i){const s=t[i];e&&!s.visible||n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=ns(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(i&&Vn(t,i),e.controller.draw(),i&&qn(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Hn(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const s=Ts.modes[t];return"function"===typeof s?s(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter(e=>e&&e._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=di(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Rt(t)?(s.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(s,{visible:n}),this.update(t=>t.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),ss.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),$n(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Go[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};wt(this.options.events,e=>n(e,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(n,i)=>{e[n]&&(t.removeEventListener(this,n,i),delete e[n])},s=(e,t)=>{this.canvas&&this.resize(e,t)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",s),n("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){wt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},wt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let s,o,a,r;for("dataset"===t&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,r=e.length;a<r;++a){o=e[a];const t=o&&this.getDatasetMeta(o.datasetIndex).controller;t&&t[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[n],index:n}});!_t(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const i=this.options.hover,s=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),o=s(t,e),a=n?e:s(e,t);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const s=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(s||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:s}=this,o=t,a=this._getActiveElements(e,i,n,o),r=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,i){return n&&"mouseout"!==e.type?i?t:e:null}(e,this._lastEvent,n,r);n&&(this._lastEvent=null,jt(s.onHover,[e,a,this],this),r&&jt(s.onClick,[e,a,this],this));const d=!_t(a,i);return(d||t)&&(this._active=a,this._updateHoverStyles(a,i,t)),this._lastEvent=l,d}_getActiveElements(e,t,n,i){if("mouseout"===e.type)return[];if(!n)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}function Xo(){return wt(Qo.instances,e=>e._plugins.invalidate())}function Zo(e,t,n,i){const s=ii(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const o=(n-t)/2,a=Math.min(o,i*t/2),r=e=>{const t=(n-Math.min(o,e))*i/2;return an(e,0,Math.min(o,t))};return{outerStart:r(s.outerStart),outerEnd:r(s.outerEnd),innerStart:an(s.innerStart,0,a),innerEnd:an(s.innerEnd,0,a)}}function ea(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function ta(e,t,n,i,s,o){const{x:a,y:r,startAngle:l,pixelMargin:d,innerRadius:c}=t,u=Math.max(t.outerRadius+i+n-d,0),h=c>0?c+i+n+d:0;let p=0;const f=s-l;if(i){const e=((c>0?c-i:0)+(u>0?u-i:0))/2;p=(f-(0!==e?f*e/(e+i):f))/2}const m=(f-Math.max(.001,f*u-n/Lt)/u)/2,g=l+m+p,v=s-m-p,{outerStart:x,outerEnd:b,innerStart:y,innerEnd:S}=Zo(t,h,u,v-g),j=u-x,w=u-b,_=g+x/j,N=v-b/w,k=h+y,C=h+S,E=g+y/k,I=v-S/C;if(e.beginPath(),o){const t=(_+N)/2;if(e.arc(a,r,u,_,t),e.arc(a,r,u,t,N),b>0){const t=ea(w,N,a,r);e.arc(t.x,t.y,b,N,v+Ut)}const n=ea(C,v,a,r);if(e.lineTo(n.x,n.y),S>0){const t=ea(C,I,a,r);e.arc(t.x,t.y,S,v+Ut,I+Math.PI)}const i=(v-S/h+(g+y/h))/2;if(e.arc(a,r,h,v-S/h,i,!0),e.arc(a,r,h,i,g+y/h,!0),y>0){const t=ea(k,E,a,r);e.arc(t.x,t.y,y,E+Math.PI,g-Ut)}const s=ea(j,g,a,r);if(e.lineTo(s.x,s.y),x>0){const t=ea(j,_,a,r);e.arc(t.x,t.y,x,g-Ut,_)}}else{e.moveTo(a,r);const t=Math.cos(_)*u+a,n=Math.sin(_)*u+r;e.lineTo(t,n);const i=Math.cos(N)*u+a,s=Math.sin(N)*u+r;e.lineTo(i,s)}e.closePath()}function na(e,t,n,i,s){const{fullCircles:o,startAngle:a,circumference:r,options:l}=t,{borderWidth:d,borderJoinStyle:c,borderDash:u,borderDashOffset:h,borderRadius:p}=l,f="inner"===l.borderAlign;if(!d)return;e.setLineDash(u||[]),e.lineDashOffset=h,f?(e.lineWidth=2*d,e.lineJoin=c||"round"):(e.lineWidth=d,e.lineJoin=c||"bevel");let m=t.endAngle;if(o){ta(e,t,n,i,m,s);for(let t=0;t<o;++t)e.stroke();isNaN(r)||(m=a+(r%zt||zt))}f&&function(e,t,n){const{startAngle:i,pixelMargin:s,x:o,y:a,outerRadius:r,innerRadius:l}=t;let d=s/r;e.beginPath(),e.arc(o,a,r,i-d,n+d),l>s?(d=s/l,e.arc(o,a,l,n+d,i-d,!0)):e.arc(o,a,s,n+Ut,i-Ut),e.closePath(),e.clip()}(e,t,m),l.selfJoin&&m-a>=Lt&&0===p&&"miter"!==c&&function(e,t,n){const{startAngle:i,x:s,y:o,outerRadius:a,innerRadius:r,options:l}=t,{borderWidth:d,borderJoinStyle:c}=l,u=Math.min(d/a,sn(i-n));if(e.beginPath(),e.arc(s,o,a-d/2,i+u/2,n-u/2),r>0){const t=Math.min(d/r,sn(i-n));e.arc(s,o,r+d/2,n-t/2,i+t/2,!0)}else{const t=Math.min(d/2,a*sn(i-n));if("round"===c)e.arc(s,o,t,n-Lt/2,i+Lt/2,!0);else if("bevel"===c){const a=2*t*t,r=-a*Math.cos(n+Lt/2)+s,l=-a*Math.sin(n+Lt/2)+o,d=a*Math.cos(i+Lt/2)+s,c=a*Math.sin(i+Lt/2)+o;e.lineTo(r,l),e.lineTo(d,c)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,m),o||(ta(e,t,n,i,m,s),e.stroke())}class ia extends co{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.getProps(["x","y"],n),{angle:s,distance:o}=en(i,{x:e,y:t}),{startAngle:a,endAngle:r,innerRadius:l,outerRadius:d,circumference:c}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),u=(this.options.spacing+this.options.borderWidth)/2,h=yt(c,r-a),p=on(s,a,r)&&a!==r,f=h>=zt||p,m=rn(o,l+u,d+u);return f&&m}getCenterPoint(e){const{x:t,y:n,startAngle:i,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:r,spacing:l}=this.options,d=(i+s)/2,c=(o+a+l+r)/2;return{x:t+Math.cos(d)*c,y:n+Math.sin(d)*c}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,i=(t.offset||0)/4,s=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>zt?Math.floor(n/zt):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);const r=i*(1-Math.sin(Math.min(Lt,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,i,s){const{fullCircles:o,startAngle:a,circumference:r}=t;let l=t.endAngle;if(o){ta(e,t,n,i,l,s);for(let t=0;t<o;++t)e.fill();isNaN(r)||(l=a+(r%zt||zt))}ta(e,t,n,i,l,s),e.fill()}(e,this,r,s,o),na(e,this,r,s,o),e.restore()}}function sa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=yt(n.borderCapStyle,t.borderCapStyle),e.setLineDash(yt(n.borderDash,t.borderDash)),e.lineDashOffset=yt(n.borderDashOffset,t.borderDashOffset),e.lineJoin=yt(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=yt(n.borderWidth,t.borderWidth),e.strokeStyle=yt(n.borderColor,t.borderColor)}function oa(e,t,n){e.lineTo(n.x,n.y)}function aa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length,{start:s=0,end:o=i-1}=n,{start:a,end:r}=t,l=Math.max(s,a),d=Math.min(o,r),c=s<a&&o<a||s>r&&o>r;return{count:i,start:l,loop:t.loop,ilen:d<l&&!c?i+d-l:d-l}}function ra(e,t,n,i){const{points:s,options:o}=t,{count:a,start:r,loop:l,ilen:d}=aa(s,n,i),c=function(e){return e.stepped?Yn:e.tension||"monotone"===e.cubicInterpolationMode?Gn:oa}(o);let u,h,p,{move:f=!0,reverse:m}=i||{};for(u=0;u<=d;++u)h=s[(r+(m?d-u:u))%a],h.skip||(f?(e.moveTo(h.x,h.y),f=!1):c(e,p,h,m,o.stepped),p=h);return l&&(h=s[(r+(m?d:0))%a],c(e,p,h,m,o.stepped)),!!l}function la(e,t,n,i){const s=t.points,{count:o,start:a,ilen:r}=aa(s,n,i),{move:l=!0,reverse:d}=i||{};let c,u,h,p,f,m,g=0,v=0;const x=e=>(a+(d?r-e:e))%o,b=()=>{p!==f&&(e.lineTo(g,f),e.lineTo(g,p),e.lineTo(g,m))};for(l&&(u=s[x(0)],e.moveTo(u.x,u.y)),c=0;c<=r;++c){if(u=s[x(c)],u.skip)continue;const t=u.x,n=u.y,i=0|t;i===h?(n<p?p=n:n>f&&(f=n),g=(v*g+t)/++v):(b(),e.lineTo(t,n),h=i,v=0,p=f=n),m=n}b()}function da(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?la:ra}const ca="function"===typeof Path2D;function ua(e,t,n,i){ca&&!t.options.segment?function(e,t,n,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,i)&&s.closePath()),sa(e,t.options),e.stroke(s)}(e,t,n,i):function(e,t,n,i){const{segments:s,options:o}=t,a=da(t);for(const r of s)sa(e,o,r.style),e.beginPath(),a(e,t,r,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}(e,t,n,i)}class ha extends co{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;Ii(this._points,n,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,i=e.options.spanGaps,s=n.length;if(!s)return[];const o=!!e._loop,{start:a,end:r}=function(e,t,n,i){let s=0,o=t-1;if(n&&!i)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(o+=s);o>s&&e[o%t].skip;)o--;return o%=t,{start:s,end:o}}(n,s,o,i);return Xi(e,!0===i?[{start:a,end:r,loop:o}]:function(e,t,n,i){const s=e.length,o=[];let a,r=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%s];n.skip||n.stop?l.skip||(i=!1,o.push({start:t%s,end:(a-1)%s,loop:i}),t=r=n.stop?a:null):(r=a,l.skip&&(t=a)),l=n}return null!==r&&o.push({start:t%s,end:r%s,loop:i}),o}(n,a,r<a?r+s:r,!!e._fullLoop&&0===a&&r===s-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,i=e[t],s=this.points,o=Qi(this,{property:t,start:i,end:i});if(!o.length)return;const a=[],r=function(e){return e.stepped?Wi:e.tension||"monotone"===e.cubicInterpolationMode?Hi:Ui}(n);let l,d;for(l=0,d=o.length;l<d;++l){const{start:d,end:c}=o[l],u=s[d],h=s[c];if(u===h){a.push(u);continue}const p=r(u,h,Math.abs((i-u[t])/(h[t]-u[t])),n.stepped);p[t]=e[t],a.push(p)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return da(this)(e,this,t,n)}path(e,t,n){const i=this.segments,s=da(this);let o=this._loop;t=t||0,n=n||this.points.length-t;for(const a of i)o&=s(e,this,a,{start:t,end:t+n-1});return!!o}draw(e,t,n,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),ua(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function pa(e,t,n,i){const s=e.options,{[n]:o}=e.getProps([n],i);return Math.abs(t-o)<s.radius+s.hitRadius}class fa extends co{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.options,{x:s,y:o}=this.getProps(["x","y"],n);return Math.pow(e-s,2)+Math.pow(t-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return pa(this,e,"x",t)}inYRange(e,t){return pa(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!Hn(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Un(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function ma(e,t){const{x:n,y:i,base:s,width:o,height:a}=e.getProps(["x","y","base","width","height"],t);let r,l,d,c,u;return e.horizontal?(u=a/2,r=Math.min(n,s),l=Math.max(n,s),d=i-u,c=i+u):(u=o/2,r=n-u,l=n+u,d=Math.min(i,s),c=Math.max(i,s)),{left:r,top:d,right:l,bottom:c}}function ga(e,t,n,i){return e?0:an(t,n,i)}function va(e){const t=ma(e),n=t.right-t.left,i=t.bottom-t.top,s=function(e,t,n){const i=e.options.borderWidth,s=e.borderSkipped,o=si(i);return{t:ga(s.top,o.top,0,n),r:ga(s.right,o.right,0,t),b:ga(s.bottom,o.bottom,0,n),l:ga(s.left,o.left,0,t)}}(e,n/2,i/2),o=function(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,o=oi(s),a=Math.min(t,n),r=e.borderSkipped,l=i||vt(s);return{topLeft:ga(!l||r.top||r.left,o.topLeft,0,a),topRight:ga(!l||r.top||r.right,o.topRight,0,a),bottomLeft:ga(!l||r.bottom||r.left,o.bottomLeft,0,a),bottomRight:ga(!l||r.bottom||r.right,o.bottomRight,0,a)}}(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:o},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function xa(e,t,n,i){const s=null===t,o=null===n,a=e&&!(s&&o)&&ma(e,i);return a&&(s||rn(t,a.left,a.right))&&(o||rn(n,a.top,a.bottom))}function ba(e,t){e.rect(t.x,t.y,t.w,t.h)}function ya(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,o=(e.x+e.w!==n.x+n.w?t:0)-i,a=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+i,y:e.y+s,w:e.w+o,h:e.h+a,radius:e.radius}}class Sa extends co{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:i}}=this,{inner:s,outer:o}=va(this),a=(r=o.radius).topLeft||r.topRight||r.bottomLeft||r.bottomRight?Xn:ba;var r;e.save(),o.w===s.w&&o.h===s.h||(e.beginPath(),a(e,ya(o,t,s)),e.clip(),a(e,ya(s,-t,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,ya(s,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,n){return xa(this,e,t,n)}inXRange(e,t){return xa(this,e,null,t)}inYRange(e,t){return xa(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+i)/2:t,y:s?n:(n+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}function ja(e,t,n,i){if(i)return;let s=t[e],o=n[e];return"angle"===e&&(s=sn(s),o=sn(o)),{property:e,start:s,end:o}}function wa(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function _a(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function Na(e,t){let n=[],i=!1;return gt(e)?(i=!0,n=e):n=function(e,t){const{x:n=null,y:i=null}=e||{},s=t.points,o=[];return t.segments.forEach(e=>{let{start:t,end:a}=e;a=wa(t,a,s);const r=s[t],l=s[a];null!==i?(o.push({x:r.x,y:i}),o.push({x:l.x,y:i})):null!==n&&(o.push({x:n,y:r.y}),o.push({x:n,y:l.y}))}),o}(e,t),n.length?new ha({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function ka(e){return e&&!1!==e.fill}function Ca(e,t,n){let i=e[t].fill;const s=[t];let o;if(!n)return i;for(;!1!==i&&-1===s.indexOf(i);){if(!xt(i))return i;if(o=e[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function Ea(e,t,n){const i=function(e){const t=e.options,n=t.fill;let i=yt(n&&n.target,n);void 0===i&&(i=!!t.backgroundColor);if(!1===i||null===i)return!1;if(!0===i)return"origin";return i}(e);if(vt(i))return!isNaN(i.value)&&i;let s=parseFloat(i);return xt(s)&&Math.floor(s)===s?function(e,t,n,i){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=i)return!1;return n}(i[0],t,s,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Ia(e,t,n){const i=[];for(let s=0;s<n.length;s++){const o=n[s],{first:a,last:r,point:l}=Da(o,t,"x");if(!(!l||a&&r))if(a)i.unshift(l);else if(e.push(l),!r)break}e.push(...i)}function Da(e,t,n){const i=e.interpolate(t,n);if(!i)return{};const s=i[n],o=e.segments,a=e.points;let r=!1,l=!1;for(let d=0;d<o.length;d++){const e=o[d],t=a[e.start][n],i=a[e.end][n];if(rn(s,t,i)){r=s===t,l=s===i;break}}return{first:r,last:l,point:i}}class Aa{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:i,y:s,radius:o}=this;return t=t||{start:0,end:zt},e.arc(i,s,o,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:i}=this,s=e.angle;return{x:t+Math.cos(s)*i,y:n+Math.sin(s)*i,angle:s}}}function Ta(e){const{chart:t,fill:n,line:i}=e;if(xt(n))return function(e,t){const n=e.getDatasetMeta(t),i=n&&e.isDatasetVisible(t);return i?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:i}=e,s=[],o=i.segments,a=i.points,r=function(e,t){const n=[],i=e.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const e=i[s];if(e.index===t)break;e.hidden||n.unshift(e.dataset)}return n}(t,n);r.push(Na({x:null,y:t.bottom},i));for(let l=0;l<o.length;l++){const e=o[l];for(let t=e.start;t<=e.end;t++)Ia(s,a[t],r)}return new ha({points:s,options:{}})}(e);if("shape"===n)return!0;const s=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:n}=e,i=t.options,s=t.getLabels().length,o=i.reverse?t.max:t.min,a=function(e,t,n){let i;return i="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:vt(e)?e.value:t.getBaseValue(),i}(n,t,o),r=[];if(i.grid.circular){const e=t.getPointPositionForValue(0,o);return new Aa({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(a)})}for(let l=0;l<s;++l)r.push(t.getPointPositionForValue(l,a));return r}(e);return function(e){const{scale:t={},fill:n}=e,i=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:vt(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(xt(i)){const e=t.isHorizontal();return{x:e?i:null,y:e?null:i}}return null}(e)}(e);return s instanceof Aa?s:Na(s,i)}function Ma(e,t,n){const i=Ta(t),{chart:s,index:o,line:a,scale:r,axis:l}=t,d=a.options,c=d.fill,u=d.backgroundColor,{above:h=u,below:p=u}=c||{},f=s.getDatasetMeta(o),m=ns(s,f);i&&a.points.length&&(Vn(e,n),function(e,t){const{line:n,target:i,above:s,below:o,area:a,scale:r,clip:l}=t,d=n._loop?"angle":t.axis;e.save();let c=o;o!==s&&("x"===d?(Ra(e,i,a.top),Pa(e,{line:n,target:i,color:s,scale:r,property:d,clip:l}),e.restore(),e.save(),Ra(e,i,a.bottom)):"y"===d&&(Oa(e,i,a.left),Pa(e,{line:n,target:i,color:o,scale:r,property:d,clip:l}),e.restore(),e.save(),Oa(e,i,a.right),c=s));Pa(e,{line:n,target:i,color:c,scale:r,property:d,clip:l}),e.restore()}(e,{line:a,target:i,above:h,below:p,area:n,scale:r,axis:l,clip:m}),qn(e))}function Ra(e,t,n){const{segments:i,points:s}=t;let o=!0,a=!1;e.beginPath();for(const r of i){const{start:i,end:l}=r,d=s[i],c=s[wa(i,l,s)];o?(e.moveTo(d.x,d.y),o=!1):(e.lineTo(d.x,n),e.lineTo(d.x,d.y)),a=!!t.pathSegment(e,r,{move:a}),a?e.closePath():e.lineTo(c.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function Oa(e,t,n){const{segments:i,points:s}=t;let o=!0,a=!1;e.beginPath();for(const r of i){const{start:i,end:l}=r,d=s[i],c=s[wa(i,l,s)];o?(e.moveTo(d.x,d.y),o=!1):(e.lineTo(n,d.y),e.lineTo(d.x,d.y)),a=!!t.pathSegment(e,r,{move:a}),a?e.closePath():e.lineTo(n,c.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function Pa(e,t){const{line:n,target:i,property:s,color:o,scale:a,clip:r}=t,l=function(e,t,n){const i=e.segments,s=e.points,o=t.points,a=[];for(const r of i){let{start:e,end:i}=r;i=wa(e,i,s);const l=ja(n,s[e],s[i],r.loop);if(!t.segments){a.push({source:r,target:l,start:s[e],end:s[i]});continue}const d=Qi(t,l);for(const t of d){const e=ja(n,o[t.start],o[t.end],t.loop),i=Ki(r,s,e);for(const s of i)a.push({source:s,target:t,start:{[n]:_a(l,e,"start",Math.max)},end:{[n]:_a(l,e,"end",Math.min)}})}}return a}(n,i,s);for(const{source:d,target:c,start:u,end:h}of l){const{style:{backgroundColor:t=o}={}}=d,l=!0!==i;e.save(),e.fillStyle=t,La(e,a,r,l&&ja(s,u,h)),e.beginPath();const p=!!n.pathSegment(e,d);let f;if(l){p?e.closePath():za(e,i,h,s);const t=!!i.pathSegment(e,c,{move:p,reverse:!0});f=p&&t,f||za(e,i,u,s)}e.closePath(),e.fill(f?"evenodd":"nonzero"),e.restore()}}function La(e,t,n,i){const s=t.chart.chartArea,{property:o,start:a,end:r}=i||{};if("x"===o||"y"===o){let t,i,l,d;"x"===o?(t=a,i=s.top,l=r,d=s.bottom):(t=s.left,i=a,l=s.right,d=r),e.beginPath(),n&&(t=Math.max(t,n.left),l=Math.min(l,n.right),i=Math.max(i,n.top),d=Math.min(d,n.bottom)),e.rect(t,i,l-t,d-i),e.clip()}}function za(e,t,n,i){const s=t.interpolate(n,i);s&&e.lineTo(s.x,s.y)}var Fa={id:"filler",afterDatasetsUpdate(e,t,n){const i=(e.data.datasets||[]).length,s=[];let o,a,r,l;for(a=0;a<i;++a)o=e.getDatasetMeta(a),r=o.dataset,l=null,r&&r.options&&r instanceof ha&&(l={visible:e.isDatasetVisible(a),index:a,fill:Ea(r,a,i),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:r}),o.$filler=l,s.push(l);for(a=0;a<i;++a)l=s[a],l&&!1!==l.fill&&(l.fill=Ca(s,a,n.propagate))},beforeDraw(e,t,n){const i="beforeDraw"===n.drawTime,s=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let a=s.length-1;a>=0;--a){const t=s[a].$filler;t&&(t.line.updateControlPoints(o,t.axis),i&&t.fill&&Ma(e.ctx,t,o))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=e.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const t=i[s].$filler;ka(t)&&Ma(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,n){const i=t.meta.$filler;ka(i)&&"beforeDatasetDraw"===n.drawTime&&Ma(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Ba=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}};class $a extends co{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=jt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,i=ri(n.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:r}=Ba(n,s);let l,d;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,d=this._fitRows(o,s,a,r)+10):(d=this.maxHeight,l=this._fitCols(o,i,a,r)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,r=this.legendHitBoxes=[],l=this.lineWidths=[0],d=i+a;let c=e;s.textAlign="left",s.textBaseline="middle";let u=-1,h=-d;return this.legendItems.forEach((e,p)=>{const f=n+t/2+s.measureText(e.text).width;(0===p||l[l.length-1]+f+2*a>o)&&(c+=d,l[l.length-(p>0?0:1)]=0,h+=d,u++),r[p]={left:0,top:h,row:u,width:f,height:i},l[l.length-1]+=f+a}),c}_fitCols(e,t,n,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,r=this.legendHitBoxes=[],l=this.columnSizes=[],d=o-e;let c=a,u=0,h=0,p=0,f=0;return this.legendItems.forEach((e,o)=>{const{itemWidth:m,itemHeight:g}=function(e,t,n,i,s){const o=function(e,t,n,i){let s=e.text;s&&"string"!==typeof s&&(s=s.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+i.measureText(s).width}(i,e,t,n),a=function(e,t,n){let i=e;"string"!==typeof t.text&&(i=Ua(t,n));return i}(s,i,t.lineHeight);return{itemWidth:o,itemHeight:a}}(n,t,s,e,i);o>0&&h+g+2*a>d&&(c+=u+a,l.push({width:u,height:h}),p+=u+a,f++,u=h=0),r[o]={left:p,top:h,col:f,width:m,height:g},u=Math.max(u,m),h+=g+a}),c+=u,l.push({width:u,height:h}),c}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:i},rtl:s}}=this,o=Vi(s,this.left,this.width);if(this.isHorizontal()){let s=0,a=vn(n,this.left+i,this.right-this.lineWidths[s]);for(const r of t)s!==r.row&&(s=r.row,a=vn(n,this.left+i,this.right-this.lineWidths[s])),r.top+=this.top+e+i,r.left=o.leftForLtr(o.x(a),r.width),a+=r.width+i}else{let s=0,a=vn(n,this.top+e+i,this.bottom-this.columnSizes[s].height);for(const r of t)r.col!==s&&(s=r.col,a=vn(n,this.top+e+i,this.bottom-this.columnSizes[s].height)),r.top=a,r.left+=this.left+i,r.left=o.leftForLtr(o.x(r.left),r.width),a+=r.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Vn(e,this),this._draw(),qn(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:i}=this,{align:s,labels:o}=e,a=zn.color,r=Vi(e.rtl,this.left,this.width),l=ri(o.font),{padding:d}=o,c=l.size,u=c/2;let h;this.drawTitle(),i.textAlign=r.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:p,boxHeight:f,itemHeight:m}=Ba(o,c),g=this.isHorizontal(),v=this._computeTitleHeight();h=g?{x:vn(s,this.left+d,this.right-n[0]),y:this.top+d+v,line:0}:{x:this.left+d,y:vn(s,this.top+v+d,this.bottom-t[0].height),line:0},qi(this.ctx,e.textDirection);const x=m+d;this.legendItems.forEach((b,y)=>{i.strokeStyle=b.fontColor,i.fillStyle=b.fontColor;const S=i.measureText(b.text).width,j=r.textAlign(b.textAlign||(b.textAlign=o.textAlign)),w=p+u+S;let _=h.x,N=h.y;r.setWidth(this.width),g?y>0&&_+w+d>this.right&&(N=h.y+=x,h.line++,_=h.x=vn(s,this.left+d,this.right-n[h.line])):y>0&&N+x>this.bottom&&(_=h.x=_+t[h.line].width+d,h.line++,N=h.y=vn(s,this.top+v+d,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(p)||p<=0||isNaN(f)||f<0)return;i.save();const s=yt(n.lineWidth,1);if(i.fillStyle=yt(n.fillStyle,a),i.lineCap=yt(n.lineCap,"butt"),i.lineDashOffset=yt(n.lineDashOffset,0),i.lineJoin=yt(n.lineJoin,"miter"),i.lineWidth=s,i.strokeStyle=yt(n.strokeStyle,a),i.setLineDash(yt(n.lineDash,[])),o.usePointStyle){const a={radius:f*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:s},l=r.xPlus(e,p/2);Wn(i,a,l,t+u,o.pointStyleWidth&&p)}else{const o=t+Math.max((c-f)/2,0),a=r.leftForLtr(e,p),l=oi(n.borderRadius);i.beginPath(),Object.values(l).some(e=>0!==e)?Xn(i,{x:a,y:o,w:p,h:f,radius:l}):i.rect(a,o,p,f),i.fill(),0!==s&&i.stroke()}i.restore()}(r.x(_),N,b),_=((e,t,n,i)=>e===(i?"left":"right")?n:"center"===e?(t+n)/2:t)(j,_+p+u,g?_+w:this.right,e.rtl),function(e,t,n){Qn(i,n.text,e,t+m/2,l,{strikethrough:n.hidden,textAlign:r.textAlign(n.textAlign)})}(r.x(_),N,b),g)h.x+=w+d;else if("string"!==typeof b.text){const e=l.lineHeight;h.y+=Ua(b,e)+d}else h.y+=x}),Yi(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=ri(t.font),i=ai(t.padding);if(!t.display)return;const s=Vi(e.rtl,this.left,this.width),o=this.ctx,a=t.position,r=n.size/2,l=i.top+r;let d,c=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),d=this.top+l,c=vn(e.align,c,this.right-u);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);d=l+vn(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=vn(a,c,c+u);o.textAlign=s.textAlign(gn(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=n.string,Qn(o,t.text,h,d,n)}_computeTitleHeight(){const e=this.options.title,t=ri(e.font),n=ai(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,i,s;if(rn(e,this.left,this.right)&&rn(t,this.top,this.bottom))for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(i=s[n],rn(e,i.left,i.left+i.width)&&rn(t,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const o=this._hoveredItem,a=(s=n,null!==(i=o)&&null!==s&&i.datasetIndex===s.datasetIndex&&i.index===s.index);o&&!a&&jt(t.onLeave,[e,o,this],this),this._hoveredItem=n,n&&!a&&jt(t.onHover,[e,n,this],this)}else n&&jt(t.onClick,[e,n,this],this);var i,s}}function Ua(e,t){return t*(e.text?e.text.length:0)}var Wa={id:"legend",_element:$a,start(e,t,n){const i=e.legend=new $a({ctx:e.ctx,options:n,chart:e});Vs.configure(e,i,n),Vs.addBox(e,i)},stop(e){Vs.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;Vs.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:o,useBorderRadius:a,borderRadius:r}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),d=ai(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:s||l.textAlign,borderRadius:a&&(r||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Ha extends co{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const i=gt(n.text)?n.text.length:1;this._padding=ai(n.padding);const s=i*ri(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:i,right:s,options:o}=this,a=o.align;let r,l,d,c=0;return this.isHorizontal()?(l=vn(a,n,s),d=t+e,r=s-n):("left"===o.position?(l=n+e,d=vn(a,i,t),c=-.5*Lt):(l=s-e,d=vn(a,t,i),c=.5*Lt),r=i-t),{titleX:l,titleY:d,maxWidth:r,rotation:c}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=ri(t.font),i=n.lineHeight/2+this._padding.top,{titleX:s,titleY:o,maxWidth:a,rotation:r}=this._drawArgs(i);Qn(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:r,textAlign:gn(t.align),textBaseline:"middle",translation:[s,o]})}}var Va={id:"title",_element:Ha,start(e,t,n){!function(e,t){const n=new Ha({ctx:e.ctx,options:t,chart:e});Vs.configure(e,n,t),Vs.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;Vs.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;Vs.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const qa={average(e){if(!e.length)return!1;let t,n,i=new Set,s=0,o=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();i.add(e.x),s+=e.y,++o}}if(0===o||0===i.size)return!1;return{x:[...i].reduce((e,t)=>e+t)/i.size,y:s/o}},nearest(e,t){if(!e.length)return!1;let n,i,s,o=t.x,a=t.y,r=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){const i=e[n].element;if(i&&i.hasValue()){const e=tn(t,i.getCenterPoint());e<r&&(r=e,s=i)}}if(s){const e=s.tooltipPosition();o=e.x,a=e.y}return{x:o,y:a}}};function Ya(e,t){return t&&(gt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Ga(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Ja(e,t){const{element:n,datasetIndex:i,index:s}=t,o=e.getDatasetMeta(i).controller,{label:a,value:r}=o.getLabelAndValue(s);return{chart:e,label:a,parsed:o.getParsed(s),raw:e.data.datasets[i].data[s],formattedValue:r,dataset:o.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function Ka(e,t){const n=e.chart.ctx,{body:i,footer:s,title:o}=e,{boxWidth:a,boxHeight:r}=t,l=ri(t.bodyFont),d=ri(t.titleFont),c=ri(t.footerFont),u=o.length,h=s.length,p=i.length,f=ai(t.padding);let m=f.height,g=0,v=i.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,u&&(m+=u*d.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),v){m+=p*(t.displayColors?Math.max(r,l.lineHeight):l.lineHeight)+(v-p)*l.lineHeight+(v-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*c.lineHeight+(h-1)*t.footerSpacing);let x=0;const b=function(e){g=Math.max(g,n.measureText(e).width+x)};return n.save(),n.font=d.string,wt(e.title,b),n.font=l.string,wt(e.beforeBody.concat(e.afterBody),b),x=t.displayColors?a+2+t.boxPadding:0,wt(i,e=>{wt(e.before,b),wt(e.lines,b),wt(e.after,b)}),x=0,n.font=c.string,wt(e.footer,b),n.restore(),g+=f.width,{width:g,height:m}}function Qa(e,t,n,i){const{x:s,width:o}=n,{width:a,chartArea:{left:r,right:l}}=e;let d="center";return"center"===i?d=s<=(r+l)/2?"left":"right":s<=o/2?d="left":s>=a-o/2&&(d="right"),function(e,t,n,i){const{x:s,width:o}=i,a=n.caretSize+n.caretPadding;return"left"===e&&s+o+a>t.width||"right"===e&&s-o-a<0||void 0}(d,e,t,n)&&(d="center"),d}function Xa(e,t,n){const i=n.yAlign||t.yAlign||function(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||Qa(e,t,n,i),yAlign:i}}function Za(e,t,n,i){const{caretSize:s,caretPadding:o,cornerRadius:a}=e,{xAlign:r,yAlign:l}=n,d=s+o,{topLeft:c,topRight:u,bottomLeft:h,bottomRight:p}=oi(a);let f=function(e,t){let{x:n,width:i}=e;return"right"===t?n-=i:"center"===t&&(n-=i/2),n}(t,r);const m=function(e,t,n){let{y:i,height:s}=e;return"top"===t?i+=n:i-="bottom"===t?s+n:s/2,i}(t,l,d);return"center"===l?"left"===r?f+=d:"right"===r&&(f-=d):"left"===r?f-=Math.max(c,h)+s:"right"===r&&(f+=Math.max(u,p)+s),{x:an(f,0,i.width-t.width),y:an(m,0,i.height-t.height)}}function er(e,t,n){const i=ai(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-i.right:e.x+i.left}function tr(e){return Ya([],Ga(e))}function nr(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const ir={beforeTitle:pt,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:pt,beforeBody:pt,beforeLabel:pt,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return mt(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:pt,afterBody:pt,beforeFooter:pt,footer:pt,afterFooter:pt};function sr(e,t,n,i){const s=e[t].call(n,i);return"undefined"===typeof s?ir[t].call(n,i):s}class or extends co{static positioners=(()=>qa)();constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,s=new ls(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,di(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,i=sr(n,"beforeTitle",this,e),s=sr(n,"title",this,e),o=sr(n,"afterTitle",this,e);let a=[];return a=Ya(a,Ga(i)),a=Ya(a,Ga(s)),a=Ya(a,Ga(o)),a}getBeforeBody(e,t){return tr(sr(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,i=[];return wt(e,e=>{const t={before:[],lines:[],after:[]},s=nr(n,e);Ya(t.before,Ga(sr(s,"beforeLabel",this,e))),Ya(t.lines,sr(s,"label",this,e)),Ya(t.after,Ga(sr(s,"afterLabel",this,e))),i.push(t)}),i}getAfterBody(e,t){return tr(sr(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,i=sr(n,"beforeFooter",this,e),s=sr(n,"footer",this,e),o=sr(n,"afterFooter",this,e);let a=[];return a=Ya(a,Ga(i)),a=Ya(a,Ga(s)),a=Ya(a,Ga(o)),a}_createItems(e){const t=this._active,n=this.chart.data,i=[],s=[],o=[];let a,r,l=[];for(a=0,r=t.length;a<r;++a)l.push(Ja(this.chart,t[a]));return e.filter&&(l=l.filter((t,i,s)=>e.filter(t,i,s,n))),e.itemSort&&(l=l.sort((t,i)=>e.itemSort(t,i,n))),wt(l,t=>{const n=nr(e.callbacks,t);i.push(sr(n,"labelColor",this,t)),s.push(sr(n,"labelPointStyle",this,t)),o.push(sr(n,"labelTextColor",this,t))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(i.length){const e=qa[n.position].call(this,i,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const t=this._size=Ka(this,n),a=Object.assign({},e,t),r=Xa(this.chart,n,a),l=Za(n,a,r,this.chart);this.xAlign=r.xAlign,this.yAlign=r.yAlign,s={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){const s=this.getCaretPosition(e,n,i);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,n){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:r,topRight:l,bottomLeft:d,bottomRight:c}=oi(a),{x:u,y:h}=e,{width:p,height:f}=t;let m,g,v,x,b,y;return"center"===s?(b=h+f/2,"left"===i?(m=u,g=m-o,x=b+o,y=b-o):(m=u+p,g=m+o,x=b-o,y=b+o),v=m):(g="left"===i?u+Math.max(r,d)+o:"right"===i?u+p-Math.max(l,c)-o:this.caretX,"top"===s?(x=h,b=x-o,m=g-o,v=g+o):(x=h+f,b=x+o,m=g+o,v=g-o),y=x),{x1:m,x2:g,x3:v,y1:x,y2:b,y3:y}}drawTitle(e,t,n){const i=this.title,s=i.length;let o,a,r;if(s){const l=Vi(n.rtl,this.x,this.width);for(e.x=er(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",o=ri(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=o.string,r=0;r<s;++r)t.fillText(i[r],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,r+1===s&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,i,s){const o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:r,boxWidth:l}=s,d=ri(s.bodyFont),c=er(this,"left",s),u=i.x(c),h=r<d.lineHeight?(d.lineHeight-r)/2:0,p=t.y+h;if(s.usePointStyle){const t={radius:Math.min(l,r)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=i.leftForLtr(u,l)+l/2,d=p+r/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Un(e,t,n,d),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Un(e,t,n,d)}else{e.lineWidth=vt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const t=i.leftForLtr(u,l),n=i.leftForLtr(i.xPlus(u,1),l-2),a=oi(o.borderRadius);Object.values(a).some(e=>0!==e)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Xn(e,{x:t,y:p,w:l,h:r,radius:a}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Xn(e,{x:n,y:p+1,w:l-2,h:r-2,radius:a}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(t,p,l,r),e.strokeRect(t,p,l,r),e.fillStyle=o.backgroundColor,e.fillRect(n,p+1,l-2,r-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:r,boxWidth:l,boxPadding:d}=n,c=ri(n.bodyFont);let u=c.lineHeight,h=0;const p=Vi(n.rtl,this.x,this.width),f=function(n){t.fillText(n,p.x(e.x+h),e.y+u/2),e.y+=u+s},m=p.textAlign(o);let g,v,x,b,y,S,j;for(t.textAlign=o,t.textBaseline="middle",t.font=c.string,e.x=er(this,m,n),t.fillStyle=n.bodyColor,wt(this.beforeBody,f),h=a&&"right"!==m?"center"===o?l/2+d:l+2+d:0,b=0,S=i.length;b<S;++b){for(g=i[b],v=this.labelTextColors[b],t.fillStyle=v,wt(g.before,f),x=g.lines,a&&x.length&&(this._drawColorBox(t,e,b,p,n),u=Math.max(c.lineHeight,r)),y=0,j=x.length;y<j;++y)f(x[y]),u=c.lineHeight;wt(g.after,f)}h=0,u=c.lineHeight,wt(this.afterBody,f),e.y-=s}drawFooter(e,t,n){const i=this.footer,s=i.length;let o,a;if(s){const r=Vi(n.rtl,this.x,this.width);for(e.x=er(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=r.textAlign(n.footerAlign),t.textBaseline="middle",o=ri(n.footerFont),t.fillStyle=n.footerColor,t.font=o.string,a=0;a<s;++a)t.fillText(i[a],r.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){const{xAlign:s,yAlign:o}=this,{x:a,y:r}=e,{width:l,height:d}=n,{topLeft:c,topRight:u,bottomLeft:h,bottomRight:p}=oi(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(a+c,r),"top"===o&&this.drawCaret(e,t,n,i),t.lineTo(a+l-u,r),t.quadraticCurveTo(a+l,r,a+l,r+u),"center"===o&&"right"===s&&this.drawCaret(e,t,n,i),t.lineTo(a+l,r+d-p),t.quadraticCurveTo(a+l,r+d,a+l-p,r+d),"bottom"===o&&this.drawCaret(e,t,n,i),t.lineTo(a+h,r+d),t.quadraticCurveTo(a,r+d,a,r+d-h),"center"===o&&"left"===s&&this.drawCaret(e,t,n,i),t.lineTo(a,r+c),t.quadraticCurveTo(a,r,a+c,r),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,i=n&&n.x,s=n&&n.y;if(i||s){const n=qa[e.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=Ka(this,e),a=Object.assign({},n,this._size),r=Xa(t,e,a),l=Za(e,a,r,t);i._to===l.x&&s._to===l.y||(this.xAlign=r.xAlign,this.yAlign=r.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=ai(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(s,e,i,t),qi(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),Yi(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,i=e.map(e=>{let{datasetIndex:t,index:n}=e;const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[n],index:n}}),s=!_t(n,i),o=this._positionChanged(i,t);(s||o)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,n),a=this._positionChanged(o,e),r=t||!_t(o,s)||a;return r&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),r}_getActiveElements(e,t,n,i){const s=this.options;if("mouseout"===e.type)return[];if(!i)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const o=this.chart.getElementsAtEventForMode(e,s.mode,s,n);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:n,caretY:i,options:s}=this,o=qa[s.position].call(this,e,t);return!1!==o&&(n!==o.x||i!==o.y)}}var ar={id:"tooltip",_element:or,positioners:qa,afterInit(e,t,n){n&&(e.tooltip=new or({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ir},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function rr(e,t,n,i){const s=e.indexOf(t);if(-1===s)return((e,t,n,i)=>("string"===typeof t?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,i);return s!==e.lastIndexOf(t)?n:s}function lr(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class dr extends yo{static id="category";static defaults=(()=>({ticks:{callback:lr}}))();constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:i}of t)e[n]===i&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(mt(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:an(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:rr(n,e,yt(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,i=[];let s=this.getLabels();s=0===e&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=e;o<=t;o++)i.push({value:o});return i}getLabelForValue(e){return lr.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function cr(e,t){const n=[],{bounds:i,step:s,min:o,max:a,precision:r,count:l,maxTicks:d,maxDigits:c,includeBounds:u}=e,h=s||1,p=d-1,{min:f,max:m}=t,g=!mt(o),v=!mt(a),x=!mt(l),b=(m-f)/(c+1);let y,S,j,w,_=Gt((m-f)/p/h)*h;if(_<1e-14&&!g&&!v)return[{value:f},{value:m}];w=Math.ceil(m/_)-Math.floor(f/_),w>p&&(_=Gt(w*_/p/h)*h),mt(r)||(y=Math.pow(10,r),_=Math.ceil(_*y)/y),"ticks"===i?(S=Math.floor(f/_)*_,j=Math.ceil(m/_)*_):(S=f,j=m),g&&v&&s&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-o)/s,_/1e3)?(w=Math.round(Math.min((a-o)/_,d)),_=(a-o)/w,S=o,j=a):x?(S=g?o:S,j=v?a:j,w=l-1,_=(j-S)/w):(w=(j-S)/_,w=Yt(w,Math.round(w),_/1e3)?Math.round(w):Math.ceil(w));const N=Math.max(Zt(_),Zt(S));y=Math.pow(10,mt(r)?N:r),S=Math.round(S*y)/y,j=Math.round(j*y)/y;let k=0;for(g&&(u&&S!==o?(n.push({value:o}),S<o&&k++,Yt(Math.round((S+k*_)*y)/y,o,ur(o,b,e))&&k++):S<o&&k++);k<w;++k){const e=Math.round((S+k*_)*y)/y;if(v&&e>a)break;n.push({value:e})}return v&&u&&j!==a?n.length&&Yt(n[n.length-1].value,a,ur(a,b,e))?n[n.length-1].value=a:n.push({value:a}):v&&j!==a||n.push({value:j}),n}function ur(e,t,n){let{horizontal:i,minRotation:s}=n;const o=Qt(s),a=(i?Math.sin(o):Math.cos(o))||.001,r=.75*t*(""+e).length;return Math.min(t/a,r)}class hr extends yo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return mt(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this;const o=e=>i=t?i:e,a=e=>s=n?s:e;if(e){const e=qt(i),t=qt(s);e<0&&t<0?a(0):e>0&&t>0&&o(0)}if(i===s){let t=0===s?1:Math.abs(.05*s);a(s+t),e||o(i-t)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:i}=e;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=cr({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Kt(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Dn(e,this.chart.options.locale,this.options.ticks.format)}}class pr extends hr{static id="linear";static defaults=(()=>({ticks:{callback:Tn.formatters.numeric}}))();determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=xt(e)?e:0,this.max=xt(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=Qt(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Tn.formatters.logarithmic;Tn.formatters.numeric;const fr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},mr=Object.keys(fr);function gr(e,t){return e-t}function vr(e,t){if(mt(t))return null;const n=e._adapter,{parser:i,round:s,isoWeekday:o}=e._parseOpts;let a=t;return"function"===typeof i&&i(a),xt(a)||("string"===typeof i?n.parse(a,i):n.parse(a)),null===a?null:(s&&("week"!==s||!Jt(o)&&!0!==o?n.startOf(a,s):n.startOf(a,"isoWeek",o)),+a)}function xr(e,t,n,i){const s=mr.length;for(let o=mr.indexOf(e);o<s-1;++o){const e=fr[mr[o]],s=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(s*e.size))<=i)return mr[o]}return mr[s-1]}function br(e,t,n){if(n){if(n.length){const{lo:i,hi:s}=ln(n,t);e[n[i]>=t?n[i]:n[s]]=!0}}else e[t]=!0}function yr(e,t,n){const i=[],s={},o=t.length;let a,r;for(0;a<o;++a)t[a],s[r]=a,i.push({value:r,major:!1});return 0!==o&&n?function(e,t,n,i){const s=e._adapter,o=+s.startOf(t[0].value,i),a=t[t.length-1].value;let r,l;for(o;r<=a;+s.add(r,1,i))n[r],l>=0&&(t[l].major=!0);return t}(e,i,s,n):i}class Sr extends yo{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),i=this._adapter=new Ns(e.adapters.date);i.init(t),It(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:vr(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function r(e){o||isNaN(e.min)||Math.min(i,e.min),a||isNaN(e.max)||Math.max(s,e.max)}o&&a||(r(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||r(this.getMinMax(!1))),xt(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),xt(s)&&!isNaN(s)?s:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(e[0],e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=function(e,t,n){let i=0,s=e.length;for(;i<s&&e[i]<t;)0;for(;s>i&&e[s-1]>n;)0;return i>0||s<e.length?e.slice(i,s):e}(i,s,this.max);return this._unit=t.unit||(n.autoSkip?xr(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):function(e,t,n,i,s){for(let o=mr.length-1;o>=mr.indexOf(n);o--){const n=mr[o];if(fr[n].common&&e._adapter.diff(s,i,n)>=t-1)return n}return mr[n?mr.indexOf(n):0]}(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=mr.indexOf(e)+1,n=mr.length;t<n;++t)if(fr[mr[t]].common)return mr[t]}(this._unit):void 0,this.initOffsets(i),e.reverse&&o.reverse(),yr(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,s=0;this.options.offset&&n.length&&(this.getDecimalForValue(n[0]),1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,this.getDecimalForValue(n[n.length-1]),1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const o=n.length<3?.5:.25;an(i,0,o),an(s,0,o),this._offsets={start:i,end:s,factor:1/(i+1+s)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,s=i.time,o=s.unit||xr(s.minUnit,t,n,this._getLabelCapacity(t)),a=yt(i.ticks.stepSize,1),r="week"===o&&s.isoWeekday,l=Jt(r)||!0===r,d={};let c,u,h=t;if(l&&+e.startOf(h,"isoWeek",r),+e.startOf(h,l?"day":o),e.diff(n,t,o)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+o);const p="data"===i.ticks.source&&this.getDataTimestamps();for(0;c<n;+e.add(c,a,o),u++)br(d,c,p);return c!==n&&"ticks"!==i.bounds&&1!==u||br(d,c,p),Object.keys(d).sort(gr).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,i=this._unit,s=t||n[i];return this._adapter.format(e,s)}_tickFormatFunction(e,t,n,i){const s=this.options,o=s.ticks.callback;if(o)return jt(o,[e,t,n],this);const a=s.time.displayFormats,r=this._unit,l=this._majorUnit,d=r&&a[r],c=l&&a[l],u=n[t],h=l&&c&&u&&u.major;return this._adapter.format(e,i||(h?c:d))}generateTickLabels(e){let t,n,i;for(e.length;t<n;++t)e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=Qt(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*s+a*o,h:n*o+a*s}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,s=this._tickFormatFunction(e,0,yr(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(i.length;e<t;++e)n.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(i.length;t<n;++t)e.push(vr(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return pn(e.sort(gr))}}const jr="label";function wr(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function _r(e,t){e.labels=t}function Nr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jr;const i=[];e.datasets=t.map(t=>{const s=e.datasets.find(e=>e[n]===t[n]);return s&&t.data&&!i.includes(s)?(i.push(s),Object.assign(s,t),s):{...t}})}function kr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jr;const n={labels:[],datasets:[]};return _r(n,e.labels),Nr(n,e.datasets,t),n}function Cr(e,t){const{height:n=150,width:s=300,redraw:o=!1,datasetIdKey:a,type:r,data:l,options:d,plugins:c=[],fallbackContent:u,updateMode:h,...p}=e,f=(0,i.useRef)(null),m=(0,i.useRef)(null),g=()=>{f.current&&(m.current=new Qo(f.current,{type:r,data:kr(l,a),options:d&&{...d},plugins:c}),wr(t,m.current))},v=()=>{wr(t,null),m.current&&(m.current.destroy(),m.current=null)};return(0,i.useEffect)(()=>{!o&&m.current&&d&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(m.current,d)},[o,d]),(0,i.useEffect)(()=>{!o&&m.current&&_r(m.current.config.data,l.labels)},[o,l.labels]),(0,i.useEffect)(()=>{!o&&m.current&&l.datasets&&Nr(m.current.config.data,l.datasets,a)},[o,l.datasets]),(0,i.useEffect)(()=>{m.current&&(o?(v(),setTimeout(g)):m.current.update(h))},[o,d,l.labels,l.datasets,h]),(0,i.useEffect)(()=>{m.current&&(v(),setTimeout(g))},[r]),(0,i.useEffect)(()=>(g(),()=>v()),[]),i.createElement("canvas",{ref:f,role:"img",height:n,width:s,...p},u)}const Er=(0,i.forwardRef)(Cr);function Ir(e,t){return Qo.register(t),(0,i.forwardRef)((t,n)=>i.createElement(Er,{...t,ref:n,type:e}))}const Dr=Ir("line",js),Ar=Ir("doughnut",Ss);Qo.register(dr,pr,fa,ha,Sa,ia,Va,ar,Wa,Fa);const Tr=e=>{var t,n,s,o,a;let{onQuickAction:r}=e;const[l,d]=(0,i.useState)(null),[c,u]=(0,i.useState)([]),[h,p]=(0,i.useState)(!0),[f,m]=(0,i.useState)(null),[g,v]=(0,i.useState)("daily"),[x,b]=(0,i.useState)({}),[y,S]=(0,i.useState)(new Date),[j,w]=(0,i.useState)(0),[_,N]=(0,i.useState)(0),k=e=>1===(null===e||void 0===e?void 0:e.ACTIVE_HRM_FLG)||"ACTIVE"===(null===e||void 0===e?void 0:e.STATUS)||"ACTIVE"===(null===e||void 0===e?void 0:e.status)||!0===(null===e||void 0===e?void 0:e.isActive),C=(0,i.useCallback)(async()=>{try{var e;p(!0);const t={Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},[n,i,s]=await Promise.all([fetch("/api/dashboard/stats",{headers:t}),fetch("/api/dashboard/activities/recent?limit=10",{headers:t}),fetch("/api/hris-cache/employees",{headers:t})]);if(!n.ok)throw new Error("Failed to fetch dashboard stats");const o=await n.json(),a=i.ok?await i.json():{data:[]};if(s&&s.ok)try{const e=await s.json(),t=Array.isArray(null===e||void 0===e?void 0:e.data)?e.data:Array.isArray(e)?e:[],n=t.length,i=t.filter(k).length;w(i),N(Math.max(0,n-i))}catch(cu){console.warn("Failed parsing cached employees response:",cu),w(0),N(0)}else w(0),N(0);d(o.data),u(a.data||(null===(e=o.data)||void 0===e?void 0:e.recentActivities)||[]),m(null)}catch(t){console.error("Dashboard stats error:",t),m(t.message)}finally{p(!1)}},[]);(0,i.useEffect)(()=>{C();const e=setInterval(C,6e4);return()=>clearInterval(e)},[C]),(0,i.useEffect)(()=>{const e=setInterval(()=>S(new Date),1e3);return()=>clearInterval(e)},[]),(0,i.useEffect)(()=>{if(!l)return;const e=j+_,t=j,n=_,i=l.totalDivisions||0,s=l.totalSections||0,o=l.totalSubSections||0;let a=0;const r=setInterval(()=>{a++;const l=a/60,d=1-Math.pow(1-l,3);b({totalEmployees:Math.round(e*d),activeEmployees:Math.round(t*d),inactiveEmployees:Math.round(n*d),totalDivisions:Math.round(i*d),totalSections:Math.round(s*d),totalSubSections:Math.round(o*d)}),a>=60&&clearInterval(r)},25);return()=>clearInterval(r)},[l,j,_]);const E=(0,i.useMemo)(()=>{if(null===l||void 0===l||!l.weeklyTrend)return null;const e={daily:l.weeklyTrend.map(e=>new Date(e.date).toLocaleDateString("en-US",{weekday:"short",day:"numeric"})),monthly:["Week 1","Week 2","Week 3","Week 4"],annually:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},t={daily:l.weeklyTrend.map(e=>e.employees),monthly:[85,92,88,95],annually:[78,82,85,88,91,89,92,95,93,90,87,94]};return{labels:e[g],datasets:[{label:"Attendance",data:t[g],fill:!0,backgroundColor:e=>{const t=e.chart.ctx.createLinearGradient(0,0,0,300);return t.addColorStop(0,"rgba(59, 130, 246, 0.3)"),t.addColorStop(1,"rgba(59, 130, 246, 0.02)"),t},borderColor:"#3b82f6",borderWidth:3,tension:.4,pointBackgroundColor:"#3b82f6",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:5,pointHoverRadius:8,pointHoverBackgroundColor:"#3b82f6",pointHoverBorderColor:"#fff",pointHoverBorderWidth:3}]}},[l,g]),I=(0,i.useMemo)(()=>{var e;if(!l)return null;const t=(null===(e=l.todayAttendance)||void 0===e?void 0:e.employeesPresent)||0,n=j||1;return{labels:["Present","Absent"],datasets:[{data:[t,Math.max(0,n-t)],backgroundColor:["#10b981","#94a3b8"],borderColor:["#fff","#fff"],borderWidth:4,hoverOffset:12,cutout:"75%"}]}},[l,j]),D=(0,i.useMemo)(()=>{var e;if(!l||!j)return 0;const t=(null===(e=l.todayAttendance)||void 0===e?void 0:e.employeesPresent)||0,n=j||1;return Math.round(t/n*100)},[l,j]),A=(e,t)=>{const n=new Date(`${e}T${t}`),i=new Date,s=Math.floor((i-n)/1e3);return s<60?"Just now":s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:`${Math.floor(s/86400)}d ago`};return h?(0,_e.jsx)("div",{className:"dashboard-stats-container",children:(0,_e.jsxs)("div",{className:"stats-loading",children:[(0,_e.jsxs)("div",{className:"loading-spinner",children:[(0,_e.jsx)("div",{className:"spinner-ring"}),(0,_e.jsx)("div",{className:"spinner-ring"}),(0,_e.jsx)("div",{className:"spinner-ring"})]}),(0,_e.jsx)("p",{children:"Loading dashboard..."})]})}):f?(0,_e.jsx)("div",{className:"dashboard-stats-container",children:(0,_e.jsxs)("div",{className:"stats-error",children:[(0,_e.jsx)("i",{className:"bi bi-exclamation-triangle"}),(0,_e.jsx)("h3",{children:"Failed to load dashboard"}),(0,_e.jsx)("p",{children:f}),(0,_e.jsxs)("button",{onClick:C,className:"retry-btn",children:[(0,_e.jsx)("i",{className:"bi bi-arrow-clockwise"})," Retry"]})]})}):(0,_e.jsxs)("div",{className:"dashboard-stats-container",children:[(0,_e.jsx)("div",{className:"stats-header",children:(0,_e.jsxs)("div",{className:"stats-header-content",children:[(0,_e.jsxs)("div",{className:"header-title-section",children:[(0,_e.jsxs)("h1",{className:"stats-title",children:[(0,_e.jsx)("span",{className:"title-icon",children:(0,_e.jsx)("i",{className:"bi bi-speedometer2"})}),"Dashboard Overview"]}),(0,_e.jsx)("p",{className:"stats-subtitle",children:"Real-time insights and analytics for your attendance system"})]}),(0,_e.jsxs)("div",{className:"header-time-section",children:[(0,_e.jsxs)("div",{className:"live-clock",children:[(0,_e.jsx)("span",{className:"clock-time",children:y.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}),(0,_e.jsx)("span",{className:"clock-date",children:y.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,_e.jsx)("button",{className:"refresh-btn",onClick:C,title:"Refresh Data",children:(0,_e.jsx)("i",{className:"bi bi-arrow-clockwise"})})]})]})}),(0,_e.jsxs)("div",{className:"stats-cards-grid",children:[(0,_e.jsxs)("div",{className:"stat-card stat-card-success",style:{"--delay":"0.2s"},children:[(0,_e.jsx)("div",{className:"stat-card-bg",children:(0,_e.jsx)("div",{className:"stat-card-pattern"})}),(0,_e.jsxs)("div",{className:"stat-card-content",children:[(0,_e.jsx)("div",{className:"stat-icon",children:(0,_e.jsx)("i",{className:"bi bi-person-check-fill"})}),(0,_e.jsxs)("div",{className:"stat-info",children:[(0,_e.jsx)("h3",{className:"stat-value",children:x.activeEmployees||0}),(0,_e.jsx)("p",{className:"stat-label",children:"Active Employees"})]})]}),(0,_e.jsx)("div",{className:"stat-card-footer",children:(0,_e.jsxs)("span",{className:"stat-trend trend-up",children:[(0,_e.jsx)("i",{className:"bi bi-check-circle"})," ",j+_>0?Math.round(j/(j+_)*100):0,"% of total"]})}),(0,_e.jsx)("div",{className:"stat-card-glow"})]}),(0,_e.jsxs)("div",{className:"stat-card stat-card-warning",style:{"--delay":"0.3s"},children:[(0,_e.jsx)("div",{className:"stat-card-bg",children:(0,_e.jsx)("div",{className:"stat-card-pattern"})}),(0,_e.jsxs)("div",{className:"stat-card-content",children:[(0,_e.jsx)("div",{className:"stat-icon",children:(0,_e.jsx)("i",{className:"bi bi-building-fill"})}),(0,_e.jsxs)("div",{className:"stat-info",children:[(0,_e.jsx)("h3",{className:"stat-value",children:x.totalDivisions||0}),(0,_e.jsx)("p",{className:"stat-label",children:"Total Divisions"})]})]}),(0,_e.jsx)("div",{className:"stat-card-footer",children:(0,_e.jsxs)("span",{className:"stat-trend trend-neutral",children:[(0,_e.jsx)("i",{className:"bi bi-layers"})," Organizational units"]})}),(0,_e.jsx)("div",{className:"stat-card-glow"})]}),(0,_e.jsxs)("div",{className:"stat-card stat-card-info",style:{"--delay":"0.5s"},children:[(0,_e.jsx)("div",{className:"stat-card-bg",children:(0,_e.jsx)("div",{className:"stat-card-pattern"})}),(0,_e.jsxs)("div",{className:"stat-card-content",children:[(0,_e.jsx)("div",{className:"stat-icon",children:(0,_e.jsx)("i",{className:"bi bi-diagram-3-fill"})}),(0,_e.jsxs)("div",{className:"stat-info",children:[(0,_e.jsx)("h3",{className:"stat-value",children:x.totalSections||0}),(0,_e.jsx)("p",{className:"stat-label",children:"Total Sections"})]})]}),(0,_e.jsx)("div",{className:"stat-card-footer",children:(0,_e.jsxs)("span",{className:"stat-trend trend-neutral",children:[(0,_e.jsx)("i",{className:"bi bi-grid-3x3"})," Department sections"]})}),(0,_e.jsx)("div",{className:"stat-card-glow"})]}),(0,_e.jsxs)("div",{className:"stat-card stat-card-purple",style:{"--delay":"0.6s"},children:[(0,_e.jsx)("div",{className:"stat-card-bg",children:(0,_e.jsx)("div",{className:"stat-card-pattern"})}),(0,_e.jsxs)("div",{className:"stat-card-content",children:[(0,_e.jsx)("div",{className:"stat-icon",children:(0,_e.jsx)("i",{className:"bi bi-diagram-2-fill"})}),(0,_e.jsxs)("div",{className:"stat-info",children:[(0,_e.jsx)("h3",{className:"stat-value",children:x.totalSubSections||0}),(0,_e.jsx)("p",{className:"stat-label",children:"Sub Sections"})]})]}),(0,_e.jsx)("div",{className:"stat-card-footer",children:(0,_e.jsxs)("span",{className:"stat-trend trend-neutral",children:[(0,_e.jsx)("i",{className:"bi bi-collection"})," Work units"]})}),(0,_e.jsx)("div",{className:"stat-card-glow"})]})]}),(0,_e.jsxs)("div",{className:"charts-section",children:[(0,_e.jsxs)("div",{className:"chart-card attendance-overview-card",children:[(0,_e.jsxs)("div",{className:"chart-card-header",children:[(0,_e.jsxs)("div",{className:"chart-title",children:[(0,_e.jsx)("i",{className:"bi bi-pie-chart-fill"}),(0,_e.jsx)("h3",{children:"Attendance Overview"})]}),(0,_e.jsx)("span",{className:"chart-badge",children:"Today"})]}),(0,_e.jsxs)("div",{className:"chart-card-body",children:[(0,_e.jsxs)("div",{className:"doughnut-chart-container",children:[I&&(0,_e.jsx)(Ar,{data:I,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.9)",titleColor:"#fff",bodyColor:"#cbd5e1",borderColor:"rgba(59, 130, 246, 0.5)",borderWidth:1,padding:12,cornerRadius:8}},cutout:"70%"}}),(0,_e.jsxs)("div",{className:"doughnut-center",children:[(0,_e.jsxs)("span",{className:"doughnut-percentage",children:[D,"%"]}),(0,_e.jsx)("span",{className:"doughnut-label",children:"Present"})]})]}),(0,_e.jsxs)("div",{className:"chart-legend",children:[(0,_e.jsxs)("div",{className:"legend-item",children:[(0,_e.jsx)("span",{className:"legend-color present"}),(0,_e.jsx)("span",{className:"legend-text",children:"Present"}),(0,_e.jsx)("span",{className:"legend-value",children:(null===l||void 0===l||null===(t=l.todayAttendance)||void 0===t?void 0:t.employeesPresent)||0})]}),(0,_e.jsxs)("div",{className:"legend-item",children:[(0,_e.jsx)("span",{className:"legend-color absent"}),(0,_e.jsx)("span",{className:"legend-text",children:"Absent"}),(0,_e.jsx)("span",{className:"legend-value",children:Math.max(0,j-((null===l||void 0===l||null===(n=l.todayAttendance)||void 0===n?void 0:n.employeesPresent)||0))})]})]})]})]}),(0,_e.jsxs)("div",{className:"chart-card trend-chart-card",children:[(0,_e.jsxs)("div",{className:"chart-card-header",children:[(0,_e.jsxs)("div",{className:"chart-title",children:[(0,_e.jsx)("i",{className:"bi bi-graph-up-arrow"}),(0,_e.jsx)("h3",{children:"Attendance Trend"})]}),(0,_e.jsxs)("div",{className:"trend-period-selector",children:[(0,_e.jsx)("button",{className:"period-btn "+("daily"===g?"active":""),onClick:()=>v("daily"),children:"Daily"}),(0,_e.jsx)("button",{className:"period-btn "+("monthly"===g?"active":""),onClick:()=>v("monthly"),children:"Monthly"}),(0,_e.jsx)("button",{className:"period-btn "+("annually"===g?"active":""),onClick:()=>v("annually"),children:"Annually"})]})]}),(0,_e.jsx)("div",{className:"chart-card-body",children:(0,_e.jsx)("div",{className:"line-chart-container",children:E&&(0,_e.jsx)(Dr,{data:E,options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.9)",titleColor:"#fff",bodyColor:"#cbd5e1",borderColor:"rgba(59, 130, 246, 0.5)",borderWidth:1,padding:12,cornerRadius:8,displayColors:!1}},scales:{x:{grid:{display:!1},ticks:{color:"#64748b",font:{size:11}}},y:{grid:{color:"rgba(148, 163, 184, 0.1)"},ticks:{color:"#64748b",font:{size:11}},beginAtZero:!0}}}})})})]})]}),(0,_e.jsxs)("div",{className:"bottom-section",children:[(0,_e.jsxs)("div",{className:"progress-card",children:[(0,_e.jsxs)("div",{className:"progress-card-header",children:[(0,_e.jsxs)("div",{className:"progress-title",children:[(0,_e.jsx)("i",{className:"bi bi-clock-history"}),(0,_e.jsx)("h3",{children:"Today's Progress"})]}),(0,_e.jsxs)("span",{className:"progress-time",children:[(0,_e.jsx)("i",{className:"bi bi-calendar-check"}),(new Date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),(0,_e.jsxs)("div",{className:"progress-card-body",children:[(0,_e.jsxs)("div",{className:"progress-circle-container",children:[(0,_e.jsxs)("svg",{className:"progress-circle",viewBox:"0 0 120 120",children:[(0,_e.jsx)("circle",{className:"progress-circle-bg",cx:"60",cy:"60",r:"54"}),(0,_e.jsx)("circle",{className:"progress-circle-fill",cx:"60",cy:"60",r:"54",style:{strokeDasharray:D/100*339.292+" 339.292"}})]}),(0,_e.jsxs)("div",{className:"progress-circle-content",children:[(0,_e.jsxs)("span",{className:"progress-value",children:[D,"%"]}),(0,_e.jsx)("span",{className:"progress-label",children:"Complete"})]})]}),(0,_e.jsxs)("div",{className:"progress-stats",children:[(0,_e.jsxs)("div",{className:"progress-stat-item",children:[(0,_e.jsx)("div",{className:"progress-stat-icon check-in",children:(0,_e.jsx)("i",{className:"bi bi-box-arrow-in-right"})}),(0,_e.jsxs)("div",{className:"progress-stat-info",children:[(0,_e.jsx)("span",{className:"progress-stat-value",children:(null===l||void 0===l||null===(s=l.todayAttendance)||void 0===s?void 0:s.inScans)||0}),(0,_e.jsx)("span",{className:"progress-stat-label",children:"Check-ins"})]})]}),(0,_e.jsxs)("div",{className:"progress-stat-item",children:[(0,_e.jsx)("div",{className:"progress-stat-icon check-out",children:(0,_e.jsx)("i",{className:"bi bi-box-arrow-right"})}),(0,_e.jsxs)("div",{className:"progress-stat-info",children:[(0,_e.jsx)("span",{className:"progress-stat-value",children:(null===l||void 0===l||null===(o=l.todayAttendance)||void 0===o?void 0:o.outScans)||0}),(0,_e.jsx)("span",{className:"progress-stat-label",children:"Check-outs"})]})]}),(0,_e.jsxs)("div",{className:"progress-stat-item",children:[(0,_e.jsx)("div",{className:"progress-stat-icon total-scans",children:(0,_e.jsx)("i",{className:"bi bi-upc-scan"})}),(0,_e.jsxs)("div",{className:"progress-stat-info",children:[(0,_e.jsx)("span",{className:"progress-stat-value",children:(null===l||void 0===l||null===(a=l.todayAttendance)||void 0===a?void 0:a.totalScans)||0}),(0,_e.jsx)("span",{className:"progress-stat-label",children:"Total Scans"})]})]}),(0,_e.jsxs)("div",{className:"progress-stat-item",children:[(0,_e.jsx)("div",{className:"progress-stat-icon attendance-rate",children:(0,_e.jsx)("i",{className:"bi bi-percent"})}),(0,_e.jsxs)("div",{className:"progress-stat-info",children:[(0,_e.jsxs)("span",{className:"progress-stat-value",children:[(null===l||void 0===l?void 0:l.attendanceRate)||0,"%"]}),(0,_e.jsx)("span",{className:"progress-stat-label",children:"Rate"})]})]})]})]})]}),(0,_e.jsxs)("div",{className:"activities-card",children:[(0,_e.jsxs)("div",{className:"activities-card-header",children:[(0,_e.jsxs)("div",{className:"activities-title",children:[(0,_e.jsx)("i",{className:"bi bi-activity"}),(0,_e.jsx)("h3",{children:"Recent Activities"})]}),(0,_e.jsxs)("span",{className:"activities-badge",children:[c.length," activities"]})]}),(0,_e.jsx)("div",{className:"activities-card-body",children:0===c.length?(0,_e.jsxs)("div",{className:"no-activities",children:[(0,_e.jsx)("i",{className:"bi bi-inbox"}),(0,_e.jsx)("p",{children:"No recent activities"})]}):(0,_e.jsx)("div",{className:"activities-list",children:c.slice(0,6).map((e,t)=>(0,_e.jsxs)("div",{className:"activity-item",style:{"--delay":.1*t+"s"},children:[(0,_e.jsx)("div",{className:`activity-icon ${e.severity||"low"}`,children:(0,_e.jsx)("i",{className:e.icon||"bi bi-activity"})}),(0,_e.jsxs)("div",{className:"activity-content",children:[(0,_e.jsx)("h4",{className:"activity-title",children:e.title}),(0,_e.jsx)("p",{className:"activity-description",children:e.description}),(0,_e.jsxs)("div",{className:"activity-meta",children:[e.user&&(0,_e.jsxs)("span",{className:"activity-user",children:[(0,_e.jsx)("i",{className:"bi bi-person"})," ",e.user]}),(0,_e.jsxs)("span",{className:"activity-time",children:[(0,_e.jsx)("i",{className:"bi bi-clock"}),A(e.date,e.time)]})]})]})]},e.id||t))})})]})]})]})},Mr=()=>{const[e,t]=(0,i.useState)([]),[n,s]=(0,i.useState)(!0),[o,a]=(0,i.useState)(!1),[r,l]=(0,i.useState)(null),[d,c]=(0,i.useState)({firstName:"",lastName:"",email:"",employeeId:"",role:"employee",password:"",confirmPassword:"",division:"",section:"",subsection:""}),[u,h]=(0,i.useState)([]),[p,f]=(0,i.useState)([]),[m,g]=(0,i.useState)([]),[v,x]=(0,i.useState)([]),[b,y]=(0,i.useState)([]),S=Me("users","read"),j=Me("users","create"),w=Me("users","update"),_=Me("users","delete"),{t:N}=Te(),k=e=>{if(!e)return"N/A";const t=u.find(t=>(t._id||t.id)===e||t._id===e||t.id===e);return t?t.name||"Unknown Division":"N/A"},C=e=>{if(!e)return"N/A";const t=p.find(t=>(t._id||t.id)===e||t._id===e||t.id===e);return t?t.name||"Unknown Section":"N/A"},E=e=>{if(!e)return"";let t=String(e).replace(/\s*\([^)]*\)/g,"").trim();return t=t.replace(/\s*-\s*$/,"").trim(),t};(0,i.useEffect)(()=>{(async()=>{try{const a=localStorage.getItem("token"),r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000/api";try{const e=await fetch(`${r}/users`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(e.ok){const n=await e.json();console.log("Users API Response:",n);const i=(n.data||n||[]).map(e=>{var t,n,i,s,o,a;return console.log("Mapping user:",e),{id:e._id||e.id,firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",role:e.role||"employee",employeeId:e.employeeId||"",status:!1!==e.isActive?"active":"inactive",division:(null===(t=e.division)||void 0===t?void 0:t._id)||e.division||"",section:(null===(n=e.section)||void 0===n?void 0:n._id)||e.section||"",divisionName:(null===(i=e.division)||void 0===i?void 0:i.name)||"",sectionName:(null===(s=e.section)||void 0===s?void 0:s.name)||"",divisionDisplay:(null===(o=e.division)||void 0===o?void 0:o.name)||"N/A",sectionDisplay:(null===(a=e.section)||void 0===a?void 0:a.name)||"N/A"}});console.log("Mapped users:",i),t(i)}else{console.error("Failed to fetch users, status:",e.status);const n=await e.text();console.error("Error response:",n),t([])}}catch(e){console.error("Error fetching users:",e),t([])}try{const e=await fetch(`${r}/mysql-data/divisions`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(e.ok){const t=await e.json();console.log("Divisions HRIS API Response:",t);const n=t.data||t||[];console.log("Raw divisions:",n.length);const i=n.map(e=>({_id:e._id||e.id||e.DIVISION_ID||e.code,id:e._id||e.id||e.DIVISION_ID||e.code,code:e.code||e.DIVISION_CODE||e.hie_code||e._id||e.id,name:e.name||e.DIVISION_NAME||e.hie_name||e.hie_relationship||"Unknown Division",hie_relationship:e.hie_relationship,isActive:!1!==e.isActive})).sort((e,t)=>e.name.localeCompare(t.name));console.log("Normalized divisions:",i),h(i)}else{console.error("Failed to fetch divisions, status:",e.status);const t=await e.text();console.error("Divisions error response:",t),h([])}}catch(n){console.error("Error fetching divisions:",n),h([])}try{const e=await fetch(`${r}/mysql-data/sections`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(e.ok){const t=await e.json();console.log("Sections HRIS API Response:",t);const n=t.data||t||[];console.log("Raw sections:",n.length);const i=n.map(e=>({_id:e._id||e.id||e.SECTION_ID||e.code,id:e._id||e.id||e.SECTION_ID||e.code,code:e.code||e.SECTION_CODE||e.hie_code||e.section_code||e._id||e.id,name:e.name||e.hie_name||e.section_name||e.SECTION_NAME||e.HIE_NAME_4||`Section ${e.code}`,divisionId:e.division_id||e.DIVISION_ID||e.division_code||e.DIVISION_CODE||"",divisionCode:e.division_code||e.DIVISION_CODE||"",divisionName:e.division_name||e.hie_relationship||e.DIVISION_NAME||"",hie_relationship:e.hie_relationship||e.division_name||"",isActive:!1!==e.isActive})).sort((e,t)=>e.name.localeCompare(t.name));console.log("Normalized sections:",i),f(i)}else{console.error("Failed to fetch sections, status:",e.status);const t=await e.text();console.error("Sections error response:",t),f([])}}catch(i){console.error("Error fetching sections:",i),f([])}try{const e=await fetch(`${r}/mysql-data/subsections`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(e.ok){const t=await e.json();console.log("Subsections API Response:",t);const n=t.data||t||[];console.log("Raw subsections:",n.length);const i=n.map(e=>{var t,n,i,s,o,a,r,l;return{_id:e._id||e.id||e.sub_code,id:e._id||e.id||e.sub_code,code:(null===(t=e.subSection)||void 0===t?void 0:t.sub_hie_code)||e.sub_code||e.code||e._id,name:(null===(n=e.subSection)||void 0===n?void 0:n.sub_hie_name)||e.sub_name||e.name||`Subsection ${e.code}`,sectionId:(null===(i=e.parentSection)||void 0===i?void 0:i.id)||e.section_id||e.section_code||"",sectionCode:(null===(s=e.parentSection)||void 0===s?void 0:s.hie_code)||e.section_code||"",sectionName:(null===(o=e.parentSection)||void 0===o?void 0:o.hie_name)||e.section_name||"",divisionId:(null===(a=e.parentDivision)||void 0===a?void 0:a.id)||e.division_id||e.division_code||"",divisionCode:(null===(r=e.parentDivision)||void 0===r?void 0:r.division_code)||e.division_code||"",divisionName:(null===(l=e.parentDivision)||void 0===l?void 0:l.division_name)||e.division_name||"",isActive:!1!==e.isActive}}).sort((e,t)=>e.name.localeCompare(t.name));console.log("Normalized subsections:",i),x(i)}else{console.error("Failed to fetch subsections, status:",e.status);const t=await e.text();console.error("Subsections error response:",t),x([])}}catch(o){console.error("Error fetching subsections:",o),x([])}s(!1)}catch(a){console.error("Error fetching data:",a),s(!1)}})()},[]),(0,i.useEffect)(()=>{if(!d.division)return void g([]);const e=p.filter(e=>{const t=String(d.division||""),n=String(e.divisionName||e.hie_relationship||""),i=String(e.divisionId||e.divisionCode||"");return n===t||i===t||String(e.divisionCode)===t});console.log("Selected Division:",d.division),console.log("Filtered Sections:",e),g(e)},[d.division,p]),(0,i.useEffect)(()=>{if(!d.section)return void y([]);const e=v.filter(e=>{const t=String(d.section||""),n=String(e.sectionId||e.sectionCode||""),i=String(e.sectionCode||"");return n===t||i===t});console.log("Selected Section:",d.section),console.log("Filtered Subsections:",e),y(e)},[d.section,v]),(0,i.useEffect)(()=>{if(o&&r&&d.division){const e=p.filter(e=>{const t=String(d.division||""),n=String(e.divisionName||e.hie_relationship||""),i=String(e.divisionId||e.divisionCode||"");return n===t||i===t||String(e.divisionCode)===t});g(e)}},[o,r,d.division,p]);const I=e=>{const{name:t,value:n}=e.target;c(e=>"division"===t?{...e,[t]:n,section:""}:{...e,[t]:n})};return n?(0,_e.jsx)("div",{className:"loading-container",children:(0,_e.jsx)("div",{className:"spinner-border",role:"status",children:(0,_e.jsx)("span",{className:"visually-hidden",children:N("loading")||"Loading..."})})}):S?(0,_e.jsxs)("div",{className:"user-management",children:[(0,_e.jsxs)("div",{className:"section-header",children:[(0,_e.jsxs)("h2",{children:[(0,_e.jsx)("i",{className:"bi bi-people"})," ",N("userManagement")]}),(0,_e.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:(0,_e.jsxs)("button",{className:"btn-professional btn-primary",onClick:j?()=>{c({firstName:"",lastName:"",email:"",employeeId:"",role:"employee",password:"",confirmPassword:"",division:"",section:"",subsection:""}),l(null),a(!0)}:void 0,title:N(j?"addUser":"noPermissionAddUser"),disabled:!j,style:{cursor:j?"pointer":"not-allowed"},children:[(0,_e.jsx)("i",{className:"bi bi-plus-circle"})," Add User"]})})]}),(0,_e.jsxs)("div",{className:"professional-card",children:[(0,_e.jsx)("div",{className:"table-responsive",children:(0,_e.jsxs)("table",{className:"professional-table",children:[(0,_e.jsx)("thead",{children:(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("th",{children:N("employeeIdLabel")}),(0,_e.jsx)("th",{children:N("nameLabel")||"Name"}),(0,_e.jsx)("th",{children:N("emailLabel")}),(0,_e.jsx)("th",{children:N("roleLabel")}),(0,_e.jsx)("th",{children:N("divisionLabel")}),(0,_e.jsx)("th",{children:N("sectionLabel")}),(0,_e.jsx)("th",{children:N("statusLabel")||"Status"}),(0,_e.jsx)("th",{children:N("actionsLabel")||"Actions"})]})}),(0,_e.jsx)("tbody",{children:e.map(n=>{var i,s;return(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("td",{children:(0,_e.jsx)("strong",{children:n.employeeId})}),(0,_e.jsx)("td",{children:`${n.firstName} ${n.lastName}`}),(0,_e.jsx)("td",{children:n.email}),(0,_e.jsx)("td",{children:(0,_e.jsx)("span",{className:`role-badge role-${n.role.replace("_","-")}`,children:n.role.replace("_"," ").toUpperCase()})}),(0,_e.jsx)("td",{children:n.divisionDisplay||n.divisionName||(null===(i=n.division)||void 0===i?void 0:i.name)||k(n.division)||"N/A"}),(0,_e.jsx)("td",{children:n.sectionDisplay||n.sectionName||(null===(s=n.section)||void 0===s?void 0:s.name)||C(n.section)||"N/A"}),(0,_e.jsx)("td",{children:(0,_e.jsx)("span",{className:`status-badge status-${n.status}`,children:n.status.toUpperCase()})}),(0,_e.jsx)("td",{children:(0,_e.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,_e.jsx)("button",{className:"btn-professional btn-primary",onClick:w?()=>(e=>{const t=e.divisionName&&"N/A"!==e.divisionName?e.divisionName:"",n=e.sectionName&&"N/A"!==e.sectionName?e.sectionName:"";console.log("Editing user:",e),console.log("Division value for form:",t),console.log("Section value for form:",n),c({firstName:e.firstName,lastName:e.lastName,email:e.email,employeeId:e.employeeId,role:e.role,password:"",confirmPassword:"",division:t,section:n}),l(e),a(!0)})(n):void 0,title:w?"Edit User":"No permission to edit users",disabled:!w,style:{padding:"8px 12px",fontSize:"12px",cursor:w?"pointer":"not-allowed"},children:(0,_e.jsx)("i",{className:"bi bi-pencil"})}),(0,_e.jsx)("button",{className:"btn-professional btn-danger",onClick:_?()=>(async n=>{if(window.confirm(N("confirmDeleteUser")))try{const i=localStorage.getItem("token"),s=await fetch(`http://localhost:5000/api/users/${n}`,{method:"DELETE",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});if(s.ok)t(e.filter(e=>e.id!==n)),alert(N("userDeletedSuccess"));else{const e=await s.json();alert(e.message||N("noUsersFound"))}}catch(i){console.error("Error deleting user:",i),alert(N("userDeletedSuccess"))}})(n.id):void 0,title:_?"Delete User":"No permission to delete users",disabled:!_,style:{padding:"8px 12px",fontSize:"12px",cursor:_?"pointer":"not-allowed"},children:(0,_e.jsx)("i",{className:"bi bi-trash"})})]})})]},n.id)})})]})}),0===e.length&&(0,_e.jsx)("div",{className:"no-data",children:(0,_e.jsx)("p",{children:N("noUsersFound")})})]}),o&&(0,_e.jsx)("div",{className:"user-modal-overlay",onClick:()=>a(!1),children:(0,_e.jsxs)("div",{className:"user-modal-content",onClick:e=>e.stopPropagation(),children:[(0,_e.jsx)("div",{className:"user-modal-decoration top-right"}),(0,_e.jsxs)("div",{className:"user-modal-header",children:[(0,_e.jsxs)("div",{className:"user-modal-header-content",children:[(0,_e.jsx)("div",{className:"user-modal-icon-wrapper",children:(0,_e.jsx)("i",{className:"bi "+(r?"bi-person-gear":"bi-person-plus-fill")})}),(0,_e.jsxs)("div",{className:"user-modal-title-group",children:[(0,_e.jsx)("h3",{className:"user-modal-title",children:N(r?"editUser":"addNewUser")}),(0,_e.jsx)("span",{className:"user-modal-subtitle",children:r?"Update user information and permissions":"Create a new user account"})]})]}),(0,_e.jsx)("button",{className:"user-modal-close-btn",onClick:()=>a(!1),type:"button",children:(0,_e.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,_e.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),j||r)if(r||d.password===d.confirmPassword)if(d.firstName&&d.lastName&&d.email&&d.employeeId&&d.role)if(r||d.password)try{const n=localStorage.getItem("token"),i={firstName:d.firstName,lastName:d.lastName,email:d.email,employeeId:d.employeeId,role:d.role,division:d.division||void 0,section:d.section||void 0};let s;if(r?d.password&&(i.password=d.password):i.password=d.password,s=r?await fetch(`http://localhost:5000/api/users/${r.id}`,{method:"PUT",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(i)}):await fetch("http://localhost:5000/api/users",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(i)}),s.ok){const n=await s.json();if(r)t(e.map(e=>e.id===r.id?{...e,firstName:d.firstName,lastName:d.lastName,email:d.email,employeeId:d.employeeId,role:d.role,division:d.division,section:d.section}:e));else{const i={id:n.data._id,firstName:d.firstName,lastName:d.lastName,email:d.email,employeeId:d.employeeId,role:d.role,status:"active",division:d.division,section:d.section};t([...e,i])}a(!1),l(null),alert(N(r?"userUpdateSuccess":"userCreateSuccess"))}else{const e=await s.json();alert(e.message||N("failedToSaveUser")||"Failed to save user")}}catch(i){console.error("Error saving user:",i),alert(N("failedToSaveUser")||"Error saving user. Please try again.")}else alert(N("passwordRequired")||"Password is required for new users!");else alert(N("pleaseFillRequired")||"Please fill in all required fields!");else alert(N("passwordsDoNotMatch")||"Passwords do not match!");else alert("You do not have permission to create users.")},children:[(0,_e.jsxs)("div",{className:"user-modal-body",children:[(0,_e.jsxs)("div",{className:"user-form-section",children:[(0,_e.jsxs)("div",{className:"user-form-section-header",children:[(0,_e.jsx)("div",{className:"user-form-section-icon",children:(0,_e.jsx)("i",{className:"bi bi-person"})}),(0,_e.jsx)("span",{className:"user-form-section-title",children:"Personal Information"})]}),(0,_e.jsxs)("div",{className:"user-form-grid",children:[(0,_e.jsxs)("div",{className:"user-form-group",children:[(0,_e.jsxs)("label",{className:"user-form-label",children:[(0,_e.jsx)("i",{className:"bi bi-person-badge"}),N("firstName")," ",(0,_e.jsx)("span",{className:"required",children:"*"})]}),(0,_e.jsxs)("div",{className:"user-input-wrapper",children:[(0,_e.jsx)("i",{className:"bi bi-person user-input-icon"}),(0,_e.jsx)("input",{type:"text",name:"firstName",className:"user-form-input",value:d.firstName,onChange:I,placeholder:"Enter first name",required:!0})]})]}),(0,_e.jsxs)("div",{className:"user-form-group",children:[(0,_e.jsxs)("label",{className:"user-form-label",children:[(0,_e.jsx)("i",{className:"bi bi-person-badge"}),N("lastName")," ",(0,_e.jsx)("span",{className:"required",children:"*"})]}),(0,_e.jsxs)("div",{className:"user-input-wrapper",children:[(0,_e.jsx)("i",{className:"bi bi-person user-input-icon"}),(0,_e.jsx)("input",{type:"text",name:"lastName",className:"user-form-input",value:d.lastName,onChange:I,placeholder:"Enter last name",required:!0})]})]})]}),(0,_e.jsxs)("div",{className:"user-form-grid",style:{marginTop:"20px"},children:[(0,_e.jsxs)("div",{className:"user-form-group",children:[(0,_e.jsxs)("label",{className:"user-form-label",children:[(0,_e.jsx)("i",{className:"bi bi-envelope"}),N("emailLabel")," ",(0,_e.jsx)("span",{className:"required",children:"*"})]}),(0,_e.jsxs)("div",{className:"user-input-wrapper",children:[(0,_e.jsx)("i",{className:"bi bi-envelope user-input-icon"}),(0,_e.jsx)("input",{type:"email",name:"email",className:"user-form-input",value:d.email,onChange:I,placeholder:"user@slpa.lk",required:!0})]})]}),(0,_e.jsxs)("div",{className:"user-form-group",children:[(0,_e.jsxs)("label",{className:"user-form-label",children:[(0,_e.jsx)("i",{className:"bi bi-hash"}),N("employeeIdLabel")," ",(0,_e.jsx)("span",{className:"required",children:"*"})]}),(0,_e.jsxs)("div",{className:"user-input-wrapper",children:[(0,_e.jsx)("i",{className:"bi bi-hash user-input-icon"}),(0,_e.jsx)("input",{type:"text",name:"employeeId",className:"user-form-input",value:d.employeeId,onChange:I,placeholder:"e.g., EMP001",required:!0})]})]})]})]}),(0,_e.jsxs)("div",{className:"user-form-section",children:[(0,_e.jsxs)("div",{className:"user-form-section-header",children:[(0,_e.jsx)("div",{className:"user-form-section-icon",children:(0,_e.jsx)("i",{className:"bi bi-building"})}),(0,_e.jsx)("span",{className:"user-form-section-title",children:"Organization & Role"})]}),(0,_e.jsxs)("div",{className:"user-form-grid",children:[(0,_e.jsxs)("div",{className:"user-form-group",children:[(0,_e.jsxs)("label",{className:"user-form-label",children:[(0,_e.jsx)("i",{className:"bi bi-diagram-3"}),N("divisionLabel")," ",(0,_e.jsx)("span",{className:"required",children:"*"})]}),(0,_e.jsxs)("div",{className:"user-input-wrapper",children:[(0,_e.jsx)("i",{className:"bi bi-diagram-3 user-input-icon"}),(0,_e.jsxs)("select",{name:"division",className:"user-form-select",value:d.division,onChange:I,required:!0,children:[(0,_e.jsx)("option",{value:"",children:N("selectDivision")}),u.map(e=>(0,_e.jsx)("option",{value:e.name,children:e.name},e._id||e.id||e.name))]})]})]}),(0,_e.jsxs)("div",{className:"user-form-group",children:[(0,_e.jsxs)("label",{className:"user-form-label",children:[(0,_e.jsx)("i",{className:"bi bi-shield-check"}),N("roleLabel")," ",(0,_e.jsx)("span",{className:"required",children:"*"})]}),(0,_e.jsxs)("div",{className:"user-input-wrapper",children:[(0,_e.jsx)("i",{className:"bi bi-shield-check user-input-icon"}),(0,_e.jsxs)("select",{name:"role",className:"user-form-select",value:d.role,onChange:I,required:!0,children:[(0,_e.jsx)("option",{value:"employee",children:"\ud83d\udc64 Employee"}),(0,_e.jsx)("option",{value:"administrative_clerk",children:"\ud83d\udccb Administrative Clerk"}),(0,_e.jsx)("option",{value:"clerk",children:"\ud83d\udcdd Clerk"}),(0,_e.jsx)("option",{value:"admin",children:"\u2699\ufe0f Administrator"}),(0,_e.jsx)("option",{value:"super_admin",children:"\ud83d\udc51 Super Admin"})]})]})]})]}),(0,_e.jsx)("div",{className:"user-form-grid single",style:{marginTop:"20px"},children:(0,_e.jsxs)("div",{className:"user-form-group",children:[(0,_e.jsxs)("label",{className:"user-form-label",children:[(0,_e.jsx)("i",{className:"bi bi-collection"}),N("sectionLabel")]}),(0,_e.jsxs)("div",{className:"user-input-wrapper",children:[(0,_e.jsx)("i",{className:"bi bi-collection user-input-icon"}),(0,_e.jsxs)("select",{name:"section",className:"user-form-select",value:d.section,onChange:I,disabled:!d.division,children:[(0,_e.jsx)("option",{value:"",children:d.division?0===m.length?"No sections available":N("selectSection"):"Select a division first"}),m.map(e=>(0,_e.jsx)("option",{value:e.name,children:E(e.name)},e._id||e.id||e.name))]})]})]})}),d.section&&b.length>0&&(0,_e.jsx)("div",{className:"user-form-grid single",style:{marginTop:"20px"},children:(0,_e.jsxs)("div",{className:"user-form-group",children:[(0,_e.jsxs)("label",{className:"user-form-label",children:[(0,_e.jsx)("i",{className:"bi bi-diagram-3"}),"Sub-Section"]}),(0,_e.jsxs)("div",{className:"user-input-wrapper",children:[(0,_e.jsx)("i",{className:"bi bi-diagram-3 user-input-icon"}),(0,_e.jsxs)("select",{name:"subsection",className:"user-form-select",value:d.subsection,onChange:I,children:[(0,_e.jsx)("option",{value:"",children:"Select Sub-Section (Optional)"}),b.map(e=>(0,_e.jsx)("option",{value:e.code,children:e.name},e._id||e.id))]})]})]})})]}),(0,_e.jsxs)("div",{className:"user-form-section",children:[(0,_e.jsxs)("div",{className:"user-form-section-header",children:[(0,_e.jsx)("div",{className:"user-form-section-icon",children:(0,_e.jsx)("i",{className:"bi bi-shield-lock"})}),(0,_e.jsx)("span",{className:"user-form-section-title",children:"Security"})]}),(0,_e.jsxs)("div",{className:"user-form-grid",children:[(0,_e.jsxs)("div",{className:"user-form-group",children:[(0,_e.jsxs)("label",{className:"user-form-label",children:[(0,_e.jsx)("i",{className:"bi bi-key"}),N("passwordLabel")," ",!r&&(0,_e.jsx)("span",{className:"required",children:"*"})]}),(0,_e.jsxs)("div",{className:"user-input-wrapper",children:[(0,_e.jsx)("i",{className:"bi bi-lock user-input-icon"}),(0,_e.jsx)("input",{type:"password",name:"password",className:"user-form-input",value:d.password,onChange:I,placeholder:r?"Leave blank to keep current":"Enter password",required:!r,minLength:"1"})]})]}),(0,_e.jsxs)("div",{className:"user-form-group",children:[(0,_e.jsxs)("label",{className:"user-form-label",children:[(0,_e.jsx)("i",{className:"bi bi-key-fill"}),N("confirmPasswordLabel")," ",!r&&(0,_e.jsx)("span",{className:"required",children:"*"})]}),(0,_e.jsxs)("div",{className:"user-input-wrapper",children:[(0,_e.jsx)("i",{className:"bi bi-lock-fill user-input-icon"}),(0,_e.jsx)("input",{type:"password",name:"confirmPassword",className:"user-form-input",value:d.confirmPassword,onChange:I,placeholder:r?"Leave blank to keep current":"Confirm password",required:!r,minLength:"1"})]})]})]})]})]}),(0,_e.jsxs)("div",{className:"user-modal-footer",children:[(0,_e.jsxs)("button",{type:"button",className:"user-btn user-btn-cancel",onClick:()=>a(!1),children:[(0,_e.jsx)("i",{className:"bi bi-x-circle"}),N("cancel")]}),(0,_e.jsxs)("button",{type:"submit",className:"user-btn user-btn-submit",disabled:!j&&!r,title:j||r?"":"You do not have permission to add users",children:[(0,_e.jsx)("i",{className:"bi "+(r?"bi-check-circle-fill":"bi-plus-circle-fill")}),N(r?"updateUser":j?"addUser":"noPermissionAddUser")]})]})]})]})})]}):(0,_e.jsxs)("div",{className:"user-management",children:[(0,_e.jsx)("div",{className:"section-header",children:(0,_e.jsxs)("h2",{children:[(0,_e.jsx)("i",{className:"bi bi-people"})," ",N("userManagement")]})}),(0,_e.jsx)("div",{className:"professional-card",children:(0,_e.jsx)("div",{className:"no-data",children:(0,_e.jsx)("p",{children:N("noPermissionViewUsers")})})})]})};function Rr(e,t){return function(){return e.apply(t,arguments)}}const{toString:Or}=Object.prototype,{getPrototypeOf:Pr}=Object,{iterator:Lr,toStringTag:zr}=Symbol,Fr=(Br=Object.create(null),e=>{const t=Or.call(e);return Br[t]||(Br[t]=t.slice(8,-1).toLowerCase())});var Br;const $r=e=>(e=e.toLowerCase(),t=>Fr(t)===e),Ur=e=>t=>typeof t===e,{isArray:Wr}=Array,Hr=Ur("undefined");function Vr(e){return null!==e&&!Hr(e)&&null!==e.constructor&&!Hr(e.constructor)&&Gr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const qr=$r("ArrayBuffer");const Yr=Ur("string"),Gr=Ur("function"),Jr=Ur("number"),Kr=e=>null!==e&&"object"===typeof e,Qr=e=>{if("object"!==Fr(e))return!1;const t=Pr(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(zr in e)&&!(Lr in e)},Xr=$r("Date"),Zr=$r("File"),el=$r("Blob"),tl=$r("FileList"),nl=$r("URLSearchParams"),[il,sl,ol,al]=["ReadableStream","Request","Response","Headers"].map($r);function rl(e,t){let n,i,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Wr(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{if(Vr(e))return;const i=s?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let a;for(n=0;n<o;n++)a=i[n],t.call(null,e[a],a,e)}}function ll(e,t){if(Vr(e))return null;t=t.toLowerCase();const n=Object.keys(e);let i,s=n.length;for(;s-- >0;)if(i=n[s],t===i.toLowerCase())return i;return null}const dl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,cl=e=>!Hr(e)&&e!==dl;const ul=(hl="undefined"!==typeof Uint8Array&&Pr(Uint8Array),e=>hl&&e instanceof hl);var hl;const pl=$r("HTMLFormElement"),fl=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),ml=$r("RegExp"),gl=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};rl(n,(n,s)=>{let o;!1!==(o=t(n,s,e))&&(i[s]=o||n)}),Object.defineProperties(e,i)};const vl=$r("AsyncFunction"),xl=((e,t)=>{return e?setImmediate:t?(n=`axios@${Math.random()}`,i=[],dl.addEventListener("message",e=>{let{source:t,data:s}=e;t===dl&&s===n&&i.length&&i.shift()()},!1),e=>{i.push(e),dl.postMessage(n,"*")}):e=>setTimeout(e);var n,i})("function"===typeof setImmediate,Gr(dl.postMessage)),bl="undefined"!==typeof queueMicrotask?queueMicrotask.bind(dl):"undefined"!==typeof process&&process.nextTick||xl,yl={isArray:Wr,isArrayBuffer:qr,isBuffer:Vr,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Gr(e.append)&&("formdata"===(t=Fr(e))||"object"===t&&Gr(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&qr(e.buffer),t},isString:Yr,isNumber:Jr,isBoolean:e=>!0===e||!1===e,isObject:Kr,isPlainObject:Qr,isEmptyObject:e=>{if(!Kr(e)||Vr(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(cu){return!1}},isReadableStream:il,isRequest:sl,isResponse:ol,isHeaders:al,isUndefined:Hr,isDate:Xr,isFile:Zr,isBlob:el,isRegExp:ml,isFunction:Gr,isStream:e=>Kr(e)&&Gr(e.pipe),isURLSearchParams:nl,isTypedArray:ul,isFileList:tl,forEach:rl,merge:function e(){const{caseless:t}=cl(this)&&this||{},n={},i=(i,s)=>{const o=t&&ll(n,s)||s;Qr(n[o])&&Qr(i)?n[o]=e(n[o],i):Qr(i)?n[o]=e({},i):Wr(i)?n[o]=i.slice():n[o]=i};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&rl(arguments[s],i);return n},extend:function(e,t,n){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return rl(t,(t,i)=>{n&&Gr(t)?e[i]=Rr(t,n):e[i]=t},{allOwnKeys:i}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,i)=>{let s,o,a;const r={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)a=s[o],i&&!i(a,e,t)||r[a]||(t[a]=e[a],r[a]=!0);e=!1!==n&&Pr(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Fr,kindOfTest:$r,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},toArray:e=>{if(!e)return null;if(Wr(e))return e;let t=e.length;if(!Jr(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Lr]).call(e);let i;for(;(i=n.next())&&!i.done;){const n=i.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const i=[];for(;null!==(n=e.exec(t));)i.push(n);return i},isHTMLForm:pl,hasOwnProperty:fl,hasOwnProp:fl,reduceDescriptors:gl,freezeMethods:e=>{gl(e,(t,n)=>{if(Gr(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];Gr(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},i=e=>{e.forEach(e=>{n[e]=!0})};return Wr(e)?i(e):i(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ll,global:dl,isContextDefined:cl,isSpecCompliantForm:function(e){return!!(e&&Gr(e.append)&&"FormData"===e[zr]&&e[Lr])},toJSONObject:e=>{const t=new Array(10),n=(e,i)=>{if(Kr(e)){if(t.indexOf(e)>=0)return;if(Vr(e))return e;if(!("toJSON"in e)){t[i]=e;const s=Wr(e)?[]:{};return rl(e,(e,t)=>{const o=n(e,i+1);!Hr(o)&&(s[t]=o)}),t[i]=void 0,s}}return e};return n(e,0)},isAsyncFn:vl,isThenable:e=>e&&(Kr(e)||Gr(e))&&Gr(e.then)&&Gr(e.catch),setImmediate:xl,asap:bl,isIterable:e=>null!=e&&Gr(e[Lr])};function Sl(e,t,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}yl.inherits(Sl,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:yl.toJSONObject(this.config),code:this.code,status:this.status}}});const jl=Sl.prototype,wl={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{wl[e]={value:e}}),Object.defineProperties(Sl,wl),Object.defineProperty(jl,"isAxiosError",{value:!0}),Sl.from=(e,t,n,i,s,o)=>{const a=Object.create(jl);return yl.toFlatObject(e,a,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),Sl.call(a,e.message,t,n,i,s),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const _l=Sl;function Nl(e){return yl.isPlainObject(e)||yl.isArray(e)}function kl(e){return yl.endsWith(e,"[]")?e.slice(0,-2):e}function Cl(e,t,n){return e?e.concat(t).map(function(e,t){return e=kl(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const El=yl.toFlatObject(yl,{},null,function(e){return/^is[A-Z]/.test(e)});const Il=function(e,t,n){if(!yl.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const i=(n=yl.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!yl.isUndefined(t[e])})).metaTokens,s=n.visitor||d,o=n.dots,a=n.indexes,r=(n.Blob||"undefined"!==typeof Blob&&Blob)&&yl.isSpecCompliantForm(t);if(!yl.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(yl.isDate(e))return e.toISOString();if(yl.isBoolean(e))return e.toString();if(!r&&yl.isBlob(e))throw new _l("Blob is not supported. Use a Buffer instead.");return yl.isArrayBuffer(e)||yl.isTypedArray(e)?r&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function d(e,n,s){let r=e;if(e&&!s&&"object"===typeof e)if(yl.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(yl.isArray(e)&&function(e){return yl.isArray(e)&&!e.some(Nl)}(e)||(yl.isFileList(e)||yl.endsWith(n,"[]"))&&(r=yl.toArray(e)))return n=kl(n),r.forEach(function(e,i){!yl.isUndefined(e)&&null!==e&&t.append(!0===a?Cl([n],i,o):null===a?n:n+"[]",l(e))}),!1;return!!Nl(e)||(t.append(Cl(s,n,o),l(e)),!1)}const c=[],u=Object.assign(El,{defaultVisitor:d,convertValue:l,isVisitable:Nl});if(!yl.isObject(e))throw new TypeError("data must be an object");return function e(n,i){if(!yl.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+i.join("."));c.push(n),yl.forEach(n,function(n,o){!0===(!(yl.isUndefined(n)||null===n)&&s.call(t,n,yl.isString(o)?o.trim():o,i,u))&&e(n,i?i.concat(o):[o])}),c.pop()}}(e),t};function Dl(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Al(e,t){this._pairs=[],e&&Il(e,this,t)}const Tl=Al.prototype;Tl.append=function(e,t){this._pairs.push([e,t])},Tl.toString=function(e){const t=e?function(t){return e.call(this,t,Dl)}:Dl;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Ml=Al;function Rl(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ol(e,t,n){if(!t)return e;const i=n&&n.encode||Rl;yl.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let o;if(o=s?s(t,n):yl.isURLSearchParams(t)?t.toString():new Ml(t,n).toString(i),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const Pl=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){yl.forEach(this.handlers,function(t){null!==t&&e(t)})}},Ll={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zl={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Ml,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Fl="undefined"!==typeof window&&"undefined"!==typeof document,Bl="object"===typeof navigator&&navigator||void 0,$l=Fl&&(!Bl||["ReactNative","NativeScript","NS"].indexOf(Bl.product)<0),Ul="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Wl=Fl&&window.location.href||"http://localhost",Hl={...e,...zl};const Vl=function(e){function t(e,n,i,s){let o=e[s++];if("__proto__"===o)return!0;const a=Number.isFinite(+o),r=s>=e.length;if(o=!o&&yl.isArray(i)?i.length:o,r)return yl.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a;i[o]&&yl.isObject(i[o])||(i[o]=[]);return t(e,n,i[o],s)&&yl.isArray(i[o])&&(i[o]=function(e){const t={},n=Object.keys(e);let i;const s=n.length;let o;for(i=0;i<s;i++)o=n[i],t[o]=e[o];return t}(i[o])),!a}if(yl.isFormData(e)&&yl.isFunction(e.entries)){const n={};return yl.forEachEntry(e,(e,i)=>{t(function(e){return yl.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),i,n,0)}),n}return null};const ql={transitional:Ll,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,s=yl.isObject(e);s&&yl.isHTMLForm(e)&&(e=new FormData(e));if(yl.isFormData(e))return i?JSON.stringify(Vl(e)):e;if(yl.isArrayBuffer(e)||yl.isBuffer(e)||yl.isStream(e)||yl.isFile(e)||yl.isBlob(e)||yl.isReadableStream(e))return e;if(yl.isArrayBufferView(e))return e.buffer;if(yl.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Il(e,new Hl.classes.URLSearchParams,{visitor:function(e,t,n,i){return Hl.isNode&&yl.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((o=yl.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Il(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),function(e,t,n){if(yl.isString(e))try{return(t||JSON.parse)(e),yl.trim(e)}catch(cu){if("SyntaxError"!==cu.name)throw cu}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ql.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(yl.isResponse(e)||yl.isReadableStream(e))return e;if(e&&yl.isString(e)&&(n&&!this.responseType||i)){const n=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(cu){if(n){if("SyntaxError"===cu.name)throw _l.from(cu,_l.ERR_BAD_RESPONSE,this,null,this.response);throw cu}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Hl.classes.FormData,Blob:Hl.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};yl.forEach(["delete","get","head","post","put","patch"],e=>{ql.headers[e]={}});const Yl=ql,Gl=yl.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Jl=Symbol("internals");function Kl(e){return e&&String(e).trim().toLowerCase()}function Ql(e){return!1===e||null==e?e:yl.isArray(e)?e.map(Ql):String(e)}function Xl(e,t,n,i,s){return yl.isFunction(i)?i.call(this,t,n):(s&&(t=n),yl.isString(t)?yl.isString(i)?-1!==t.indexOf(i):yl.isRegExp(i)?i.test(t):void 0:void 0)}class Zl{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function s(e,t,n){const s=Kl(t);if(!s)throw new Error("header name must be a non-empty string");const o=yl.findKey(i,s);(!o||void 0===i[o]||!0===n||void 0===n&&!1!==i[o])&&(i[o||t]=Ql(e))}const o=(e,t)=>yl.forEach(e,(e,n)=>s(e,n,t));if(yl.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(yl.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,i,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),i=e.substring(s+1).trim(),!n||t[n]&&Gl[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t})(e),t);else if(yl.isObject(e)&&yl.isIterable(e)){let n,i,s={};for(const t of e){if(!yl.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[i=t[0]]=(n=s[i])?yl.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}o(s,t)}else null!=e&&s(t,e,n);return this}get(e,t){if(e=Kl(e)){const n=yl.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}(e);if(yl.isFunction(t))return t.call(this,e,n);if(yl.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Kl(e)){const n=yl.findKey(this,e);return!(!n||void 0===this[n]||t&&!Xl(0,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function s(e){if(e=Kl(e)){const s=yl.findKey(n,e);!s||t&&!Xl(0,n[s],s,t)||(delete n[s],i=!0)}}return yl.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const s=t[n];e&&!Xl(0,this[s],s,e,!0)||(delete this[s],i=!0)}return i}normalize(e){const t=this,n={};return yl.forEach(this,(i,s)=>{const o=yl.findKey(n,s);if(o)return t[o]=Ql(i),void delete t[s];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(s):String(s).trim();a!==s&&delete t[s],t[a]=Ql(i),n[a]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return yl.forEach(this,(n,i)=>{null!=n&&!1!==n&&(t[i]=e&&yl.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return i.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[Jl]=this[Jl]={accessors:{}}).accessors,n=this.prototype;function i(e){const i=Kl(e);t[i]||(!function(e,t){const n=yl.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(e,n,s){return this[i].call(this,t,e,n,s)},configurable:!0})})}(n,e),t[i]=!0)}return yl.isArray(e)?e.forEach(i):i(e),this}}Zl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),yl.reduceDescriptors(Zl.prototype,(e,t)=>{let{value:n}=e,i=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[i]=e}}}),yl.freezeMethods(Zl);const ed=Zl;function td(e,t){const n=this||Yl,i=t||n,s=ed.from(i.headers);let o=i.data;return yl.forEach(e,function(e){o=e.call(n,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function nd(e){return!(!e||!e.__CANCEL__)}function id(e,t,n){_l.call(this,null==e?"canceled":e,_l.ERR_CANCELED,t,n),this.name="CanceledError"}yl.inherits(id,_l,{__CANCEL__:!0});const sd=id;function od(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new _l("Request failed with status code "+n.status,[_l.ERR_BAD_REQUEST,_l.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const ad=function(e,t){e=e||10;const n=new Array(e),i=new Array(e);let s,o=0,a=0;return t=void 0!==t?t:1e3,function(r){const l=Date.now(),d=i[a];s||(s=l),n[o]=r,i[o]=l;let c=a,u=0;for(;c!==o;)u+=n[c++],c%=e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),l-s<t)return;const h=d&&l-d;return h?Math.round(1e3*u/h):void 0}};const rd=function(e,t){let n,i,s=0,o=1e3/t;const a=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=o,n=null,i&&(clearTimeout(i),i=null),e(...t)};return[function(){const e=Date.now(),t=e-s;for(var r=arguments.length,l=new Array(r),d=0;d<r;d++)l[d]=arguments[d];t>=o?a(l,e):(n=l,i||(i=setTimeout(()=>{i=null,a(n)},o-t)))},()=>n&&a(n)]},ld=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=0;const s=ad(50,250);return rd(n=>{const o=n.loaded,a=n.lengthComputable?n.total:void 0,r=o-i,l=s(r);i=o;e({loaded:o,total:a,progress:a?o/a:void 0,bytes:r,rate:l||void 0,estimated:l&&a&&o<=a?(a-o)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})},n)},dd=(e,t)=>{const n=null!=e;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},cd=e=>function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return yl.asap(()=>e(...n))},ud=Hl.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Hl.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Hl.origin),Hl.navigator&&/(msie|trident)/i.test(Hl.navigator.userAgent)):()=>!0,hd=Hl.hasStandardBrowserEnv?{write(e,t,n,i,s,o){const a=[e+"="+encodeURIComponent(t)];yl.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),yl.isString(i)&&a.push("path="+i),yl.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function pd(e,t,n){let i=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(i||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const fd=e=>e instanceof ed?{...e}:e;function md(e,t){t=t||{};const n={};function i(e,t,n,i){return yl.isPlainObject(e)&&yl.isPlainObject(t)?yl.merge.call({caseless:i},e,t):yl.isPlainObject(t)?yl.merge({},t):yl.isArray(t)?t.slice():t}function s(e,t,n,s){return yl.isUndefined(t)?yl.isUndefined(e)?void 0:i(void 0,e,0,s):i(e,t,0,s)}function o(e,t){if(!yl.isUndefined(t))return i(void 0,t)}function a(e,t){return yl.isUndefined(t)?yl.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function r(n,s,o){return o in t?i(n,s):o in e?i(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:r,headers:(e,t,n)=>s(fd(e),fd(t),0,!0)};return yl.forEach(Object.keys({...e,...t}),function(i){const o=l[i]||s,a=o(e[i],t[i],i);yl.isUndefined(a)&&o!==r||(n[i]=a)}),n}const gd=e=>{const t=md({},e);let n,{data:i,withXSRFToken:s,xsrfHeaderName:o,xsrfCookieName:a,headers:r,auth:l}=t;if(t.headers=r=ed.from(r),t.url=Ol(pd(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&r.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),yl.isFormData(i))if(Hl.hasStandardBrowserEnv||Hl.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if(!1!==(n=r.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];r.setContentType([e||"multipart/form-data",...t].join("; "))}if(Hl.hasStandardBrowserEnv&&(s&&yl.isFunction(s)&&(s=s(t)),s||!1!==s&&ud(t.url))){const e=o&&a&&hd.read(a);e&&r.set(o,e)}return t},vd="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const i=gd(e);let s=i.data;const o=ed.from(i.headers).normalize();let a,r,l,d,c,{responseType:u,onUploadProgress:h,onDownloadProgress:p}=i;function f(){d&&d(),c&&c(),i.cancelToken&&i.cancelToken.unsubscribe(a),i.signal&&i.signal.removeEventListener("abort",a)}let m=new XMLHttpRequest;function g(){if(!m)return;const i=ed.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());od(function(e){t(e),f()},function(e){n(e),f()},{data:u&&"text"!==u&&"json"!==u?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:i,config:e,request:m}),m=null}m.open(i.method.toUpperCase(),i.url,!0),m.timeout=i.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new _l("Request aborted",_l.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new _l("Network Error",_l.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const s=i.transitional||Ll;i.timeoutErrorMessage&&(t=i.timeoutErrorMessage),n(new _l(t,s.clarifyTimeoutError?_l.ETIMEDOUT:_l.ECONNABORTED,e,m)),m=null},void 0===s&&o.setContentType(null),"setRequestHeader"in m&&yl.forEach(o.toJSON(),function(e,t){m.setRequestHeader(t,e)}),yl.isUndefined(i.withCredentials)||(m.withCredentials=!!i.withCredentials),u&&"json"!==u&&(m.responseType=i.responseType),p&&([l,c]=ld(p,!0),m.addEventListener("progress",l)),h&&m.upload&&([r,d]=ld(h),m.upload.addEventListener("progress",r),m.upload.addEventListener("loadend",d)),(i.cancelToken||i.signal)&&(a=t=>{m&&(n(!t||t.type?new sd(null,e,m):t),m.abort(),m=null)},i.cancelToken&&i.cancelToken.subscribe(a),i.signal&&(i.signal.aborted?a():i.signal.addEventListener("abort",a)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(i.url);v&&-1===Hl.protocols.indexOf(v)?n(new _l("Unsupported protocol "+v+":",_l.ERR_BAD_REQUEST,e)):m.send(s||null)})},xd=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,i=new AbortController;const s=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;i.abort(t instanceof _l?t:new sd(t instanceof Error?t.message:t))}};let o=t&&setTimeout(()=>{o=null,s(new _l(`timeout ${t} of ms exceeded`,_l.ETIMEDOUT))},t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:r}=i;return r.unsubscribe=()=>yl.asap(a),r}},bd=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let i,s=0;for(;s<n;)i=s+t,yield e.slice(s,i),s=i},yd=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Sd=(e,t,n,i)=>{const s=async function*(e,t){for await(const n of yd(e))yield*bd(n,t)}(e,t);let o,a=0,r=e=>{o||(o=!0,i&&i(e))};return new ReadableStream({async pull(e){try{const{done:t,value:i}=await s.next();if(t)return r(),void e.close();let o=i.byteLength;if(n){let e=a+=o;n(e)}e.enqueue(new Uint8Array(i))}catch(t){throw r(t),t}},cancel:e=>(r(e),s.return())},{highWaterMark:2})},jd="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,wd=jd&&"function"===typeof ReadableStream,_d=jd&&("function"===typeof TextEncoder?(Nd=new TextEncoder,e=>Nd.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Nd;const kd=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return!!e(...n)}catch(cu){return!1}},Cd=wd&&kd(()=>{let e=!1;const t=new Request(Hl.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Ed=wd&&kd(()=>yl.isReadableStream(new Response("").body)),Id={stream:Ed&&(e=>e.body)};var Dd;jd&&(Dd=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Id[e]&&(Id[e]=yl.isFunction(Dd[e])?t=>t[e]():(t,n)=>{throw new _l(`Response type '${e}' is not supported`,_l.ERR_NOT_SUPPORT,n)})}));const Ad=async(e,t)=>{const n=yl.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(yl.isBlob(e))return e.size;if(yl.isSpecCompliantForm(e)){const t=new Request(Hl.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return yl.isArrayBufferView(e)||yl.isArrayBuffer(e)?e.byteLength:(yl.isURLSearchParams(e)&&(e+=""),yl.isString(e)?(await _d(e)).byteLength:void 0)})(t):n},Td=jd&&(async e=>{let{url:t,method:n,data:i,signal:s,cancelToken:o,timeout:a,onDownloadProgress:r,onUploadProgress:l,responseType:d,headers:c,withCredentials:u="same-origin",fetchOptions:h}=gd(e);d=d?(d+"").toLowerCase():"text";let p,f=xd([s,o&&o.toAbortSignal()],a);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&Cd&&"get"!==n&&"head"!==n&&0!==(g=await Ad(c,i))){let e,n=new Request(t,{method:"POST",body:i,duplex:"half"});if(yl.isFormData(i)&&(e=n.headers.get("content-type"))&&c.setContentType(e),n.body){const[e,t]=dd(g,ld(cd(l)));i=Sd(n.body,65536,e,t)}}yl.isString(u)||(u=u?"include":"omit");const s="credentials"in Request.prototype;p=new Request(t,{...h,signal:f,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:i,duplex:"half",credentials:s?u:void 0});let o=await fetch(p,h);const a=Ed&&("stream"===d||"response"===d);if(Ed&&(r||a&&m)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=o[t]});const t=yl.toFiniteNumber(o.headers.get("content-length")),[n,i]=r&&dd(t,ld(cd(r),!0))||[];o=new Response(Sd(o.body,65536,n,()=>{i&&i(),m&&m()}),e)}d=d||"text";let v=await Id[yl.findKey(Id,d)||"text"](o,e);return!a&&m&&m(),await new Promise((t,n)=>{od(t,n,{data:v,headers:ed.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:p})})}catch(v){if(m&&m(),v&&"TypeError"===v.name&&/Load failed|fetch/i.test(v.message))throw Object.assign(new _l("Network Error",_l.ERR_NETWORK,e,p),{cause:v.cause||v});throw _l.from(v,v&&v.code,e,p)}}),Md={http:null,xhr:vd,fetch:Td};yl.forEach(Md,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(cu){}Object.defineProperty(e,"adapterName",{value:t})}});const Rd=e=>`- ${e}`,Od=e=>yl.isFunction(e)||null===e||!1===e,Pd=e=>{e=yl.isArray(e)?e:[e];const{length:t}=e;let n,i;const s={};for(let o=0;o<t;o++){let t;if(n=e[o],i=n,!Od(n)&&(i=Md[(t=String(n)).toLowerCase()],void 0===i))throw new _l(`Unknown adapter '${t}'`);if(i)break;s[t||"#"+o]=i}if(!i){const e=Object.entries(s).map(e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")});let n=t?e.length>1?"since :\n"+e.map(Rd).join("\n"):" "+Rd(e[0]):"as no adapter specified";throw new _l("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return i};function Ld(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new sd(null,e)}function zd(e){Ld(e),e.headers=ed.from(e.headers),e.data=td.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Pd(e.adapter||Yl.adapter)(e).then(function(t){return Ld(e),t.data=td.call(e,e.transformResponse,t),t.headers=ed.from(t.headers),t},function(t){return nd(t)||(Ld(e),t&&t.response&&(t.response.data=td.call(e,e.transformResponse,t.response),t.response.headers=ed.from(t.response.headers))),Promise.reject(t)})}const Fd="1.11.0",Bd={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Bd[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const $d={};Bd.transitional=function(e,t,n){function i(e,t){return"[Axios v"+Fd+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,s,o)=>{if(!1===e)throw new _l(i(s," has been removed"+(t?" in "+t:"")),_l.ERR_DEPRECATED);return t&&!$d[s]&&($d[s]=!0,console.warn(i(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,o)}},Bd.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const Ud={assertOptions:function(e,t,n){if("object"!==typeof e)throw new _l("options must be an object",_l.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let s=i.length;for(;s-- >0;){const o=i[s],a=t[o];if(a){const t=e[o],n=void 0===t||a(t,o,e);if(!0!==n)throw new _l("option "+o+" must be "+n,_l.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new _l("Unknown option "+o,_l.ERR_BAD_OPTION)}},validators:Bd},Wd=Ud.validators;class Hd{constructor(e){this.defaults=e||{},this.interceptors={request:new Pl,response:new Pl}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(cu){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=md(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:s}=t;void 0!==n&&Ud.assertOptions(n,{silentJSONParsing:Wd.transitional(Wd.boolean),forcedJSONParsing:Wd.transitional(Wd.boolean),clarifyTimeoutError:Wd.transitional(Wd.boolean)},!1),null!=i&&(yl.isFunction(i)?t.paramsSerializer={serialize:i}:Ud.assertOptions(i,{encode:Wd.function,serialize:Wd.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Ud.assertOptions(t,{baseUrl:Wd.spelling("baseURL"),withXsrfToken:Wd.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&yl.merge(s.common,s[t.method]);s&&yl.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=ed.concat(o,s);const a=[];let r=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,a.unshift(e.fulfilled,e.rejected))});const l=[];let d;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let c,u=0;if(!r){const e=[zd.bind(this),void 0];for(e.unshift(...a),e.push(...l),c=e.length,d=Promise.resolve(t);u<c;)d=d.then(e[u++],e[u++]);return d}c=a.length;let h=t;for(u=0;u<c;){const e=a[u++],t=a[u++];try{h=e(h)}catch(p){t.call(this,p);break}}try{d=zd.call(this,h)}catch(p){return Promise.reject(p)}for(u=0,c=l.length;u<c;)d=d.then(l[u++],l[u++]);return d}getUri(e){return Ol(pd((e=md(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}yl.forEach(["delete","get","head","options"],function(e){Hd.prototype[e]=function(t,n){return this.request(md(n||{},{method:e,url:t,data:(n||{}).data}))}}),yl.forEach(["post","put","patch"],function(e){function t(t){return function(n,i,s){return this.request(md(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}Hd.prototype[e]=t(),Hd.prototype[e+"Form"]=t(!0)});const Vd=Hd;class qd{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const i=new Promise(e=>{n.subscribe(e),t=e}).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e(function(e,i,s){n.reason||(n.reason=new sd(e,i,s),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new qd(function(t){e=t}),cancel:e}}}const Yd=qd;const Gd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Gd).forEach(e=>{let[t,n]=e;Gd[n]=t});const Jd=Gd;const Kd=function e(t){const n=new Vd(t),i=Rr(Vd.prototype.request,n);return yl.extend(i,Vd.prototype,n,{allOwnKeys:!0}),yl.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return e(md(t,n))},i}(Yl);Kd.Axios=Vd,Kd.CanceledError=sd,Kd.CancelToken=Yd,Kd.isCancel=nd,Kd.VERSION=Fd,Kd.toFormData=Il,Kd.AxiosError=_l,Kd.Cancel=Kd.CanceledError,Kd.all=function(e){return Promise.all(e)},Kd.spread=function(e){return function(t){return e.apply(null,t)}},Kd.isAxiosError=function(e){return yl.isObject(e)&&!0===e.isAxiosError},Kd.mergeConfig=md,Kd.AxiosHeaders=ed,Kd.formToJSON=e=>Vl(yl.isHTMLForm(e)?new FormData(e):e),Kd.getAdapter=Pd,Kd.HttpStatusCode=Jd,Kd.default=Kd;const Qd=Kd,Xd=()=>{var e,t,n,s,o,a;const[r,l]=(0,i.useState)([]),[d,c]=(0,i.useState)([]),[u,h]=(0,i.useState)([]),[p,f]=(0,i.useState)([]),[m,g]=(0,i.useState)([]),[v,x]=(0,i.useState)([]),[b,y]=(0,i.useState)(0),[S,j]=(0,i.useState)(!1),[w,_]=(0,i.useState)(""),[N,k]=(0,i.useState)("all"),[C,E]=(0,i.useState)("all"),[I,D]=(0,i.useState)("all"),[A,T]=(0,i.useState)("all"),[M,R]=(0,i.useState)([]),[O,P]=(0,i.useState)([]),[L,z]=(0,i.useState)([]),[F,B]=(0,i.useState)([]),[$,U]=(0,i.useState)(""),W={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000/api",{t:H}=Te(),V=e=>{if(!e)return"";let t=String(e).replace(/\s*\([^)]*\)/g,"").trim();return t=t.replace(/\s*-\s*$/,"").trim(),t},q=()=>{const e=new Map,t=new Map,n=new Map;return r.forEach(i=>{i.code&&e.set(String(i.code),String(i.id)),i.name&&t.set(String(i.name),String(i.id)),n.set(String(i.id),i.name)}),{codeToId:e,nameToId:t,idToName:n}},Y=e=>e.divisionHierarchyName||e.divisionName||String(e.divisionId||e.divisionCode||"Unknown Division"),G=(e,t)=>{var n,i,s;const o=String(e.divisionId||"");if(o&&null!==t&&void 0!==t&&null!==(n=t.idToName)&&void 0!==n&&n.has(o))return`id:${o}`;const a=String(e.divisionCode||"");if(a&&null!==t&&void 0!==t&&null!==(i=t.codeToId)&&void 0!==i&&i.has(a))return`id:${t.codeToId.get(a)}`;const r=Y(e);return r&&null!==t&&void 0!==t&&null!==(s=t.nameToId)&&void 0!==s&&s.has(r)?`id:${t.nameToId.get(r)}`:`name:${r}`},J=()=>{const e=q();if(console.log("getEmployeeDivisions - divisions:",r.length,"allEmployees:",m.length),m&&m.length&&console.log("getEmployeeDivisions - sample employees:",m.slice(0,5)),r&&r.length){const t=new Map;m.forEach(n=>{const i=G(n,e);t.set(i,(t.get(i)||0)+1)}),console.log("Division counts (derived):",Array.from(t.entries()));const n=r.map(e=>{var n,i;const s=`id:${String(e.id)}`,o=Number(null!==(n=null!==(i=e.employeeCount)&&void 0!==i?i:t.get(s))&&void 0!==n?n:0);return{key:s,name:e.name,count:o}}),i=[],s=new Set(n.map(e=>e.key));m.forEach(t=>{const n=G(t,e);if(s.has(n)){const e=i.find(e=>e.key===n);e&&(e.count+=1)}else s.add(n),i.push({key:n,name:Y(t),count:1})});const o=[...n,...i].sort((e,t)=>e.name.localeCompare(t.name));return console.log("Final divisions:",o),o}console.log("Using fallback - deriving divisions from employees");const t=new Map;m.forEach(n=>{const i=G(n,e),s=Y(n),o=t.get(i);o?o.count+=1:t.set(i,{key:i,name:s,count:1})});const n=Array.from(t.values()).sort((e,t)=>e.name.localeCompare(t.name));return console.log("Fallback divisions:",n),n},K=async()=>{try{var e,t,n,i;j(!0),_(null);const s=localStorage.getItem("token"),o={Authorization:`Bearer ${s}`,"Content-Type":"application/json"};console.log("\ud83d\udd04 Fetching HRIS data...",{API_BASE_URL:W,tokenPresent:!!s}),console.log("\ud83d\udccd Current timestamp:",(new Date).toLocaleTimeString());const a=[{key:"sections",url:`${W}/mysql-data/sections`},{key:"divisions",url:`${W}/mysql-data/divisions?includeEmployeeCount=true`},{key:"subsections",url:`${W}/mysql-subsections`}],r=async e=>{try{var t,n,i,s;const d=await Qd.get(e.url,{headers:o});if(null!==(t=d.data)&&void 0!==t&&t.success&&(null===(n=d.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.length)>0)return d;if(e.fallbackUrl&&(null===(s=d.data)||void 0===s||!s.data||0===d.data.data.length)){var a,r,l;console.log(`${e.key} primary returned empty data, trying cache fallback...`);const t=await Qd.get(e.fallbackUrl,{headers:o});if(null!==(a=t.data)&&void 0!==a&&a.success&&(null===(r=t.data)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.length)>0)return console.log(`${e.key} fallback cache successful with ${t.data.data.length} items`),t.data.fromCache=!0,t}return d}catch(w){if(e.fallbackUrl){console.log(`${e.key} primary failed, trying cache fallback...`);try{var d;const t=await Qd.get(e.fallbackUrl,{headers:o});var c;if(null!==(d=t.data)&&void 0!==d&&d.success)return console.log(`${e.key} fallback cache successful with ${(null===(c=t.data.data)||void 0===c?void 0:c.length)||0} items`),t.data.fromCache=!0,t}catch(h){var u;console.warn(`${e.key} fallback also failed:`,(null===h||void 0===h||null===(u=h.response)||void 0===u?void 0:u.status)||(null===h||void 0===h?void 0:h.message))}}throw w}},d=await Promise.allSettled(a.map(e=>r(e))),u={},p=[];d.forEach((e,t)=>{const n=a[t];if("fulfilled"===e.status){var i,s,o,r,l;u[n.key]=e.value;const t=null!==(i=e.value)&&void 0!==i&&null!==(s=i.data)&&void 0!==s&&s.fromCache?" (from cache)":"",a=(null===(o=e.value)||void 0===o||null===(r=o.data)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.length)||0;console.log(`${n.key} OK${t}:`,n.url,`(${a} items)`)}else{var d,c,h;p.push({key:n.key,url:n.url,reason:e.reason}),console.warn(`${n.key} failed:`,n.url,(null===(d=e.reason)||void 0===d||null===(c=d.response)||void 0===c?void 0:c.status)||(null===(h=e.reason)||void 0===h?void 0:h.message)),u[n.key]=null}});const f=u.sections,m=u.divisions,g=u.subsections;if(p.length){const e=p.map(e=>{var t,n;const i=(null===(t=e.reason)||void 0===t||null===(n=t.response)||void 0===n?void 0:n.status)||"network_error";return`${e.key} (${i})`}).join(", "),t=Object.values(u).some(e=>!!e)?`\u26a0\ufe0f Some endpoints failed: ${e}`:`Failed to fetch: ${e}`;_(e=>null!==e&&void 0!==e?e:t)}if(console.log("Division Response:",null===m||void 0===m?void 0:m.data),console.log("Section Response:",null===f||void 0===f?void 0:f.data),null!==m&&void 0!==m&&null!==(e=m.data)&&void 0!==e&&e.success){const e=m.data.data||[];console.log("Raw divisions:",e.length);const t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[],n=new Set;return e.forEach(e=>{var i,s,o,a,r,l,d,c,u,h,p;const f=null!==(i=null!==(s=null!==(o=null!==(a=e.HIE_CODE)&&void 0!==a?a:e.code)&&void 0!==o?o:e.DIVISION_CODE)&&void 0!==s?s:e.hie_code)&&void 0!==i?i:"",m=String(f||e._id||e.id||e.DIVISION_ID||"");m&&(n.has(m)||(n.add(m),t.push({id:m,code:String(f||m),name:null!==(r=null!==(l=null!==(d=null!==(c=e.name)&&void 0!==c?c:e.DIVISION_NAME)&&void 0!==d?d:e.hie_name)&&void 0!==l?l:e.hie_relationship)&&void 0!==r?r:"Unknown Division",def_level:null!==(u=e.def_level)&&void 0!==u?u:e.DEF_LEVEL,hie_relationship:e.hie_relationship,employeeCount:Number(e.employeeCount||e.count||0),isActive:null===(h=null!==(p=e.isActive)&&void 0!==p?p:e.active)||void 0===h||h})))}),t.sort((e,t)=>e.name.localeCompare(t.name))}(e);console.log("Normalized divisions:",t.length),l(t),m.data.fallback&&_(`\u26a0\ufe0f ${m.data.message}`)}else _(m?e=>null!==e&&void 0!==e?e:"Failed to fetch divisions from HRIS API":e=>null!==e&&void 0!==e?e:"Failed to fetch divisions: endpoint not reachable (404/Network)");if(null!==f&&void 0!==f&&null!==(t=f.data)&&void 0!==t&&t.success){const e=f.data.data||[];console.log("Raw sections:",e.length);const t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[],n=new Set;return e.forEach(e=>{var i,s,o,a,r,l,d,c,u,h,p,f,m,g,v,x,b,y,S,j;const w=null!==(i=null!==(s=null!==(o=null!==(a=e.HIE_CODE)&&void 0!==a?a:e.code)&&void 0!==o?o:e.SECTION_CODE)&&void 0!==s?s:e.hie_code)&&void 0!==i?i:"",_=String(w||e._id||e.id||e.SECTION_ID||e.section_code||"");if(!_)return;if(n.has(_))return;n.add(_);const N=String(null!==(r=null!==(l=null!==(d=null!==(c=null!==(u=e.HIE_RELATIONSHIP)&&void 0!==u?u:e.division_code)&&void 0!==c?c:e.division_id)&&void 0!==d?d:e.DIVISION_ID)&&void 0!==l?l:e.DIVISION_CODE)&&void 0!==r?r:"");t.push({id:_,code:String(w||_),name:null!==(h=null!==(p=null!==(f=null!==(m=e.name)&&void 0!==m?m:e.section_name)&&void 0!==f?f:e.SECTION_NAME)&&void 0!==p?p:e.hie_relationship)&&void 0!==h?h:`Section ${_}`,divisionId:N||"",divisionCode:N||String(null!==(g=null!==(v=e.division_code)&&void 0!==v?v:e.DIVISION_CODE)&&void 0!==g?g:""),divisionName:null!==(x=null!==(b=e.division_name)&&void 0!==b?b:e.DIVISION_NAME)&&void 0!==x?x:"",def_level:null!==(y=e.def_level)&&void 0!==y?y:e.DEF_LEVEL,isActive:null===(S=null!==(j=e.isActive)&&void 0!==j?j:e.active)||void 0===S||S})}),t.sort((e,t)=>e.name.localeCompare(t.name))}(e);console.log("Normalized sections:",t.length),c(t),f.data.fallback&&_(e=>null!==e&&void 0!==e?e:`\u26a0\ufe0f ${f.data.message}`)}else _(f?e=>null!==e&&void 0!==e?e:"Failed to fetch sections from HRIS API":e=>null!==e&&void 0!==e?e:"Failed to fetch sections: endpoint not reachable (404/Network)");if(null!==g&&void 0!==g&&null!==(n=g.data)&&void 0!==n&&n.success){const e=g.data.data||[];console.log("Raw sub-sections:",e.length),h(e)}else g?console.warn("Failed to fetch sub-sections"):console.warn("Failed to fetch sub-sections: endpoint not reachable (404/Network)");const v=await Qd.get(`${W}/mysql-subsections/transferred/all/list`,{headers:o}).catch(e=>{var t;return console.warn("transfer endpoint fetch failed:",(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)||(null===e||void 0===e?void 0:e.message)),null});if(null!==v&&void 0!==v&&null!==(i=v.data)&&void 0!==i&&i.success){const e=v.data.data||[];console.log("Transferred employees:",e.length),console.log("Transferred employees data:",e),e.length>0&&console.log("Sample transferred employee:",e[0]),x(e)}}catch(w){var s,o;console.error("Error fetching data:",w),_(`Failed to fetch data: ${(null===(s=w.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message)||w.message||"Unknown error"}`)}finally{j(!1)}};(0,i.useEffect)(()=>{K()},[]);(0,i.useEffect)(()=>{if("all"===N)return R([]),void P([]);const e=(e=>{if("all"===e)return[];const t=q();if(e.startsWith("id:")){const t=e.slice(3),n=d.filter(e=>String(e.divisionId)===String(t)).map(e=>({id:e.id,code:e.code,name:e.name}));if(n.length){const e=new Set,t=[];return n.forEach(n=>{e.has(n.id)||(e.add(n.id),t.push(n))}),t.sort((e,t)=>e.name.localeCompare(t.name))}}const n=[],i=new Set;return m.filter(n=>G(n,t)===String(e)).forEach(e=>{const t=e.sectionId||e.sectionCode,s=e.sectionHierarchyName||e.sectionName||String(t),o=String(t||"");o&&!i.has(o)&&(i.add(o),n.push({id:o,code:o,name:s}))}),n.sort((e,t)=>e.name.localeCompare(t.name))})(N);R(e)},[N,d,m]),(0,i.useEffect)(()=>{if("all"===C||!C)return void P([]);const e=d.find(e=>String(e.id)===String(C));if(console.log("Selected section object:",e),console.log("All sub-sections:",u.length),!e)return console.warn("Selected section not found:",C),void P([]);const t=u.filter(t=>{var n,i;const s=String((null===(n=t.parentSection)||void 0===n?void 0:n.id)||""),o=String((null===(i=t.parentSection)||void 0===i?void 0:i.hie_code)||""),a=String(C),r=String(e.code||""),l=s===a,d=o&&r&&o===r,c=s&&r&&s===r,u=l||d||c;var h;u&&console.log(`\u2705 SubSection match found: ${null===(h=t.subSection)||void 0===h?void 0:h.sub_hie_name}`,{parentSecId:s,parentSecCode:o,selectedSecId:a,selectedSecCode:r,matchById:l,matchByCode:d,matchByIdToCode:c});return u});console.log("Sub-sections for section",C,":",t.length),P(t)},[C,u,d]);const Q=(0,i.useRef)(!1),X=(0,i.useRef)(!1);(0,i.useEffect)(()=>{if("all"!==N)return;if(!r||!r.length)return;if(Q.current)return;const e=r.find(e=>{const t=String(e.code||"").toLowerCase(),n=String(e.name||"").toLowerCase();return"is"===t||n.includes("information systems")||n.includes("information system")});e&&(k(`id:${String(e.id)}`),Q.current=!0,X.current=!1)},[r,N]),(0,i.useEffect)(()=>{if("all"!==C)return;if(!M||!M.length)return;if(X.current)return;const e=M.find(e=>{const t=String(e.code||"").toLowerCase(),n=String(e.name||"").toLowerCase();return"is"===t||n.includes("(is)")||n.includes("information systems")||n.includes("information system")});e&&(E(String(e.id)),X.current=!0)},[M,C]);const Z=async()=>{j(!0),_(null);const e={Authorization:`Bearer ${localStorage.getItem("token")}`};try{if(I&&"all"!==I){const t=`${W}/mysql-subsections/transferred/${I}`;console.log(`Fetching sub-section employees: ${t}`);const n=await Qd.get(t,{headers:e});if(n.data.success){const e=n.data.data.map(e=>({empNumber:e.employee_id||e.employeeId,fullName:e.employee_name||e.employeeName,divisionCode:e.division_code,divisionName:e.division_name,sectionCode:e.section_code||e.hie_code,sectionName:e.section_name||e.sub_section_name,subSectionId:e.sub_section_id,designation:e.designation||"Transferred",nic:e.nic||"",isActive:!0,_raw:e}));f(e),g(e.length>0?e:[])}else f([]),g([])}else{let t={};if(N&&"all"!==N)if(N.startsWith("id:")){const e=N.replace("id:",""),n=r.find(t=>String(t.id)===String(e));n&&(t.divisionCode=n.code)}else if(N.startsWith("name:")){const e=N.replace("name:",""),n=r.find(t=>t.name===e);n&&(t.divisionCode=n.code)}if(C&&"all"!==C){const e=d.find(e=>String(e.id)===String(C));e&&(t.sectionCode=e.code)}$&&(t.search=$);const n=new URLSearchParams(t).toString(),i=`${W}/mysql-data/employees?${n}&limit=1000`;console.log(`Fetching employees: ${i}`);const s=await Qd.get(i,{headers:e});if(s.data.success){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[],n=new Set;return e.forEach(e=>{var i,s,o,a,r,l,d,c,u,h,p,f,m,g,v,x,b,y,S,j,w,_,N,k,C,E,I,D,A,T,M,R,O,P,L,z,F,B,$,U,W,H,V,q,Y,G,J,K,Q,X,Z,ee,te,ne,ie,se,oe,ae,re,le,de,ce,ue,he,pe,fe;const me=String(null!==(i=null!==(s=null!==(o=null!==(a=e.EMP_NUMBER)&&void 0!==a?a:e.empNumber)&&void 0!==o?o:e.EMP_NO)&&void 0!==s?s:e.id)&&void 0!==i?i:"");if(!me)return;if(n.has(me))return;n.add(me);const ge=null!==(r=null!==(l=null!==(d=e.HIE_NAME_3)&&void 0!==d?d:e.hie_name_3)&&void 0!==l?l:null===e||void 0===e||null===(c=e.currentwork)||void 0===c?void 0:c.HIE_NAME_3)&&void 0!==r?r:null===e||void 0===e||null===(u=e.currentwork)||void 0===u?void 0:u.hie_name_3,ve=null!==(h=null!==(p=null!==(f=e.HIE_NAME_4)&&void 0!==f?f:e.hie_name_4)&&void 0!==p?p:null===e||void 0===e||null===(m=e.currentwork)||void 0===m?void 0:m.HIE_NAME_4)&&void 0!==h?h:null===e||void 0===e||null===(g=e.currentwork)||void 0===g?void 0:g.hie_name_4;t.push({empNumber:me,fullName:null!==(v=null!==(x=null!==(b=null!==(y=e.EMP_NAME)&&void 0!==y?y:e.FULLNAME)&&void 0!==b?b:e.fullName)&&void 0!==x?x:e.name)&&void 0!==v?v:"Unknown",callingName:null!==(S=null!==(j=null!==(w=e.CALLING_NAME)&&void 0!==w?w:e.calling_name)&&void 0!==j?j:e.preferredName)&&void 0!==S?S:"",designation:null!==(_=null!==(N=null!==(k=e.EMP_DESIGNATION)&&void 0!==k?k:e.DESIGNATION)&&void 0!==N?N:e.designation)&&void 0!==_?_:"",nic:String(null!==(C=null!==(E=null!==(I=e.EMP_NIC)&&void 0!==I?I:e.NIC)&&void 0!==E?E:e.nic)&&void 0!==C?C:""),divisionId:String(null!==(D=null!==(A=null!==(T=null!==(M=null!==(R=e.DIV_CODE)&&void 0!==R?R:e.DIVISION_ID)&&void 0!==M?M:e.division_id)&&void 0!==T?T:e.DIVISION_CODE)&&void 0!==A?A:e.division_code)&&void 0!==D?D:""),divisionCode:String(null!==(O=null!==(P=null!==(L=e.DIV_CODE)&&void 0!==L?L:e.DIVISION_CODE)&&void 0!==P?P:e.division_code)&&void 0!==O?O:""),divisionName:null!==(z=null!==(F=null!==(B=null!==($=e.DIV_NAME)&&void 0!==$?$:e.DIVISION_NAME)&&void 0!==B?B:e.division_name)&&void 0!==F?F:ge)&&void 0!==z?z:"",sectionId:String(null!==(U=null!==(W=null!==(H=null!==(V=null!==(q=e.SEC_CODE)&&void 0!==q?q:e.SECTION_ID)&&void 0!==V?V:e.section_id)&&void 0!==H?H:e.SECTION_CODE)&&void 0!==W?W:e.section_code)&&void 0!==U?U:""),sectionCode:String(null!==(Y=null!==(G=null!==(J=e.SEC_CODE)&&void 0!==J?J:e.SECTION_CODE)&&void 0!==G?G:e.section_code)&&void 0!==Y?Y:""),sectionName:null!==(K=null!==(Q=null!==(X=null!==(Z=e.SEC_NAME)&&void 0!==Z?Z:e.SECTION_NAME)&&void 0!==X?X:e.section_name)&&void 0!==Q?Q:ve)&&void 0!==K?K:"",gender:null!==(ee=null!==(te=null!==(ne=e.EMP_GENDER)&&void 0!==ne?ne:e.GENDER)&&void 0!==te?te:e.gender)&&void 0!==ee?ee:"",status:null!==(ie=null!==(se=null!==(oe=e.EMP_STATUS)&&void 0!==oe?oe:e.STATUS)&&void 0!==se?se:e.status)&&void 0!==ie?ie:"ACTIVE",isActive:null!==(ae=null!==(re=e.isActive)&&void 0!==re?re:e.IS_ACTIVE)&&void 0!==ae?ae:"ACTIVE"===e.STATUS||"ACTIVE"===e.status,dateOfBirth:null!==(le=null!==(de=null!==(ce=e.DATE_OF_BIRTH)&&void 0!==ce?ce:e.date_of_birth)&&void 0!==de?de:e.dob)&&void 0!==le?le:"",dateOfJoining:null!==(ue=null!==(he=null!==(pe=null!==(fe=e.EMP_DATE_JOINED)&&void 0!==fe?fe:e.DATE_OF_JOINING)&&void 0!==pe?pe:e.date_of_joining)&&void 0!==he?he:e.doj)&&void 0!==ue?ue:"",divisionHierarchyName:null!==ge&&void 0!==ge?ge:"",sectionHierarchyName:null!==ve&&void 0!==ve?ve:""})}),t}(s.data.data);let t=e;if("all"!==A){const e="active"===A;t=t.filter(t=>t.isActive===e)}f(t),g(t)}else f([]),g([])}}catch(t){console.error("Error fetching filtered employees:",t),_("Failed to fetch filtered list"),f([])}finally{j(!1)}};(0,i.useEffect)(()=>{const e=setTimeout(()=>{Z()},400);return()=>clearTimeout(e)},[N,C,I,A,$,r,d]);return(0,_e.jsxs)("div",{className:"report-generation",children:[(0,_e.jsx)("div",{className:"report-header",children:(0,_e.jsx)("div",{className:"header-content header-no-subtitle",children:(0,_e.jsxs)("h1",{children:[(0,_e.jsx)("i",{className:"bi bi-people"}),H("employeeManagement")]})})}),("all"!==N||"all"!==C||"all"!==I)&&(0,_e.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea15 0%, #764ba215 100%)",border:"2px solid #667eea",borderRadius:"8px",padding:"16px 20px",margin:"20px 20px 0 20px",display:"flex",alignItems:"center",gap:"12px"},children:[(0,_e.jsx)("i",{className:"bi bi-funnel-fill",style:{color:"#667eea",fontSize:"20px"}}),(0,_e.jsxs)("div",{style:{flex:1},children:[(0,_e.jsx)("div",{style:{fontWeight:"600",color:"#495057",marginBottom:"4px"},children:H("activeFiltersLabel")}),(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:["all"!==N&&(0,_e.jsx)("span",{style:{background:"#667eea",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:"500"},children:(null===(e=J().find(e=>String(e.key)===String(N)))||void 0===e?void 0:e.name)||N}),"all"!==C&&(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-chevron-right",style:{color:"#667eea"}}),(0,_e.jsx)("span",{style:{background:"#764ba2",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:"500"},children:(null===(t=M.find(e=>String(e.id)===String(C)))||void 0===t?void 0:t.name)||C})]}),"all"!==I&&(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-chevron-right",style:{color:"#667eea"}}),(0,_e.jsx)("span",{style:{background:"#f093fb",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:"500"},children:(null===(n=O.find(e=>String(e._id)===String(I)))||void 0===n||null===(s=n.subSection)||void 0===s?void 0:s.sub_hie_name)||(null===(o=O.find(e=>String(e._id)===String(I)))||void 0===o||null===(a=o.subSection)||void 0===a?void 0:a.hie_name)||I})]})]})]}),(0,_e.jsx)("div",{style:{background:"white",padding:"8px 16px",borderRadius:"20px",fontWeight:"600",color:"#667eea",fontSize:"14px",border:"2px solid #667eea"},children:N&&"all"!==N?`${p.length} of ${(()=>{if(!N||"all"===N)return(null===m||void 0===m?void 0:m.length)||(null===p||void 0===p?void 0:p.length)||0;const e=N;if(e.startsWith("id:")){const t=e.slice(3),n=r.find(e=>String(e.id)===String(t));if(n)return Number(n.employeeCount||0)}if(e.startsWith("name:")){const t=e.slice(5),n=r.find(e=>e.name===t);if(n)return Number(n.employeeCount||0)}const t=e.replace(/^name:/,""),n=r.find(e=>e.name===t);return n?Number(n.employeeCount||0):(null===m||void 0===m?void 0:m.length)||(null===p||void 0===p?void 0:p.length)||0})()} employees`:`${p.length} employees`})]}),(0,_e.jsx)("div",{className:"report-config",style:{padding:"16px 20px",background:"white",borderRadius:"8px",margin:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.08)"},children:(0,_e.jsxs)("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end",flexWrap:"wrap"},children:[(0,_e.jsxs)("div",{style:{flex:"1",minWidth:"200px"},children:[(0,_e.jsx)("label",{htmlFor:"employee-division-select",style:{fontWeight:"600",color:"#495057",fontSize:"12px",display:"block",marginBottom:"4px"},children:H("divisionLabel")}),(0,_e.jsxs)("select",{id:"employee-division-select",className:"form-select",value:N,onChange:e=>{const t=e.target.value;k(t),E("all"),D("all")},style:{padding:"8px 10px",fontSize:"13px",border:"1px solid #dee2e6",borderRadius:"4px"},disabled:S,children:[(0,_e.jsx)("option",{value:"all",children:H("allDivisionsLabel")}),!S&&J().map(e=>(0,_e.jsx)("option",{value:e.key,children:e.name},e.key))]})]}),(0,_e.jsxs)("div",{style:{flex:"1",minWidth:"200px"},children:[(0,_e.jsx)("label",{htmlFor:"employee-section-select",style:{fontWeight:"600",color:"#495057",fontSize:"12px",display:"block",marginBottom:"4px"},children:H("sectionLabel")}),(0,_e.jsx)("select",{id:"employee-section-select",className:"form-select",value:C,onChange:e=>{const t=e.target.value;E(t),D("all")},style:{padding:"8px 10px",fontSize:"13px",border:"1px solid #dee2e6",borderRadius:"4px"},disabled:!N||"all"===N,children:N&&"all"!==N?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("option",{value:"all",children:H("allSectionsLabel")}),M.length?M.map(e=>(0,_e.jsx)("option",{value:e.id,children:V(e.name)},e.id)):(0,_e.jsx)("option",{value:"__no_sections",disabled:!0,children:H("noSections")})]}):(0,_e.jsx)("option",{value:"all",children:H("selectDivisionFirst")})})]}),(0,_e.jsxs)("div",{style:{flex:"1",minWidth:"200px"},children:[(0,_e.jsx)("label",{htmlFor:"employee-subsection-select",style:{fontWeight:"600",color:"#495057",fontSize:"12px",display:"block",marginBottom:"4px"},children:H("subSectionLabel")}),(0,_e.jsx)("select",{id:"employee-subsection-select",className:"form-select",value:I,onChange:e=>{const t=e.target.value;D(t)},style:{padding:"8px 10px",fontSize:"13px",border:"1px solid #dee2e6",borderRadius:"4px"},disabled:!C||"all"===C,children:C&&"all"!==C?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("option",{value:"all",children:H("allSubSectionsLabel")}),O.length?O.map(e=>{var t,n;return(0,_e.jsx)("option",{value:e._id,children:(null===(t=e.subSection)||void 0===t?void 0:t.sub_hie_name)||(null===(n=e.subSection)||void 0===n?void 0:n.hie_name)||"Unnamed"},e._id)}):(0,_e.jsx)("option",{value:"__no_subsections",disabled:!0,children:H("noSubsections")})]}):(0,_e.jsx)("option",{value:"all",children:H("selectSectionFirst")})})]}),(0,_e.jsxs)("div",{style:{flex:"1.5",minWidth:"250px"},children:[(0,_e.jsx)("label",{htmlFor:"employee-search",style:{fontWeight:"600",color:"#495057",fontSize:"12px",display:"block",marginBottom:"4px"},children:H("searchLabel")}),(0,_e.jsxs)("div",{style:{position:"relative"},children:[(0,_e.jsx)("i",{className:"bi bi-search",style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"#6c757d",fontSize:"14px"}}),(0,_e.jsx)("input",{id:"employee-search",type:"text",className:"form-control",placeholder:H("searchPlaceholder"),value:$,onChange:e=>U(e.target.value),style:{padding:"8px 10px 8px 32px",fontSize:"13px",border:"1px solid #dee2e6",borderRadius:"4px"}}),$&&(0,_e.jsx)("button",{onClick:()=>U(""),style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#6c757d",cursor:"pointer",padding:"4px",fontSize:"16px"},title:H("clearSearchTitle"),children:(0,_e.jsx)("i",{className:"bi bi-x-circle-fill"})})]})]}),(0,_e.jsx)("div",{style:{display:"flex",alignItems:"flex-end"},children:(0,_e.jsxs)("button",{onClick:()=>{K(),k("all"),E("all"),D("all"),T("all"),R([]),P([]),U("")},disabled:S,style:{padding:"8px 16px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"600",cursor:S?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s",opacity:S?.6:1,height:"34px"},onMouseOver:e=>!S&&(e.target.style.transform="translateY(-1px)"),onMouseOut:e=>e.target.style.transform="translateY(0)",children:[(0,_e.jsx)("i",{className:"bi bi-arrow-clockwise"}),H("refresh")]})})]})}),w&&(0,_e.jsxs)("div",{className:"alert "+(w.includes("\u26a0\ufe0f")?"alert-warning":"alert-danger"),style:{margin:"18px"},children:[(0,_e.jsx)("i",{className:"bi "+(w.includes("\u26a0\ufe0f")?"bi-exclamation-triangle":"bi-exclamation-circle")}),w]}),S?(0,_e.jsxs)("div",{style:{padding:"60px 20px",textAlign:"center",background:"white",margin:"20px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.08)"},children:[(0,_e.jsx)("div",{className:"spinner-border",style:{color:"#667eea",width:"3rem",height:"3rem"},role:"status",children:(0,_e.jsx)("span",{className:"visually-hidden",children:H("loading")})}),(0,_e.jsx)("p",{style:{marginTop:"20px",color:"#6c757d",fontSize:"16px"},children:H("fetchingHris")})]}):(0,_e.jsxs)("div",{style:{padding:"0 20px 20px 20px"},children:["all"!==I&&b>0&&(0,_e.jsxs)("div",{style:{margin:"12px 0 8px 12px",color:"#495057",fontSize:"14px",fontWeight:600},children:[(0,_e.jsx)("i",{className:"bi bi-arrow-repeat",style:{marginRight:8,color:"#667eea"}}),"Showing ",(0,_e.jsx)("strong",{style:{color:"#333"},children:b})," transferred employee",b>1?"s":""]}),(0,_e.jsx)("div",{style:{background:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.08)",overflow:"hidden"},children:(0,_e.jsx)("div",{className:"table-responsive",children:(0,_e.jsxs)("table",{className:"table",style:{marginBottom:0},children:[(0,_e.jsx)("thead",{children:(0,_e.jsxs)("tr",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[(0,_e.jsx)("th",{style:{color:"white !important",fontWeight:"600",padding:"14px 16px",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px",border:"none",whiteSpace:"nowrap"},children:"Employee ID"}),(0,_e.jsx)("th",{style:{color:"white !important",fontWeight:"600",padding:"14px 16px",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px",border:"none",whiteSpace:"nowrap"},children:"Full Name"}),(0,_e.jsx)("th",{style:{color:"white !important",fontWeight:"600",padding:"14px 16px",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px",border:"none",whiteSpace:"nowrap"},children:"Designation"}),(0,_e.jsx)("th",{style:{color:"white !important",fontWeight:"600",padding:"14px 16px",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px",border:"none",whiteSpace:"nowrap"},children:"Gender"}),(0,_e.jsx)("th",{style:{color:"white !important",fontWeight:"600",padding:"14px 16px",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px",border:"none",whiteSpace:"nowrap"},children:"Status"}),(0,_e.jsx)("th",{style:{color:"white !important",fontWeight:"600",padding:"14px 16px",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px",border:"none",whiteSpace:"nowrap"},children:"NIC"})]})}),(0,_e.jsxs)("tbody",{children:[p.map((e,t)=>(0,_e.jsxs)("tr",{style:{background:t%2===0?"#ffffff":"#f8f9fa",transition:"all 0.2s",cursor:"default"},onMouseOver:e=>{e.currentTarget.style.background="#667eea15",e.currentTarget.style.transform="scale(1.01)"},onMouseOut:e=>{e.currentTarget.style.background=t%2===0?"#ffffff":"#f8f9fa",e.currentTarget.style.transform="scale(1)"},children:[(0,_e.jsx)("td",{style:{padding:"12px 16px",fontSize:"13px",color:"#495057",fontWeight:"600",borderBottom:"1px solid #e9ecef"},children:e.empNumber}),(0,_e.jsx)("td",{style:{padding:"12px 16px",fontSize:"13px",color:"#212529",fontWeight:"500",borderBottom:"1px solid #e9ecef"},children:e.fullName}),(0,_e.jsx)("td",{style:{padding:"12px 16px",fontSize:"13px",color:"#6c757d",borderBottom:"1px solid #e9ecef"},children:e.designation}),(0,_e.jsx)("td",{style:{padding:"12px 16px",fontSize:"13px",color:"#6c757d",borderBottom:"1px solid #e9ecef"},children:(0,_e.jsx)("span",{style:{background:"Male"===e.gender?"#e3f2fd":"Female"===e.gender?"#fce4ec":"#f5f5f5",color:"Male"===e.gender?"#1976d2":"Female"===e.gender?"#c2185b":"#757575",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:e.gender})}),(0,_e.jsx)("td",{style:{padding:"12px 16px",fontSize:"13px",color:"#6c757d",borderBottom:"1px solid #e9ecef"},children:(0,_e.jsxs)("span",{style:{background:e.isActive?"#d4edda":"#f8d7da",color:e.isActive?"#155724":"#721c24",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"500",display:"inline-flex",alignItems:"center",gap:"4px"},children:[(0,_e.jsx)("i",{className:"bi bi-"+(e.isActive?"check-circle-fill":"x-circle-fill")}),e.isActive?"Active":"Inactive"]})}),(0,_e.jsx)("td",{style:{padding:"12px 16px",fontSize:"13px",color:"#6c757d",fontFamily:"monospace",borderBottom:"1px solid #e9ecef"},children:e.nic})]},e.empNumber)),0===p.length&&(0,_e.jsx)("tr",{children:(0,_e.jsxs)("td",{colSpan:6,style:{textAlign:"center",padding:"60px 24px",color:"#9e9e9e",fontSize:"16px"},children:[(0,_e.jsx)("i",{className:"bi bi-inbox",style:{fontSize:"48px",display:"block",marginBottom:"16px",opacity:.5}}),H("noEmployeesFoundMsg")]})})]})]})})})]})]})},Zd=(0,i.forwardRef)((e,t)=>{var n,s,o,a,r,l,d,c,u,h;let{reportData:p,getHeaders:f,formatRow:m,reportType:g,dateRange:v}=e;console.log("GroupReport - reportData:",{hasData:!!p,dataLength:null===p||void 0===p||null===(n=p.data)||void 0===n?void 0:n.length,hasDates:!(null===p||void 0===p||!p.dates),datesLength:null===p||void 0===p||null===(s=p.dates)||void 0===s?void 0:s.length,sampleEmployee:null===p||void 0===p||null===(o=p.data)||void 0===o?void 0:o[0],sampleDailyAttendance:null===p||void 0===p||null===(a=p.data)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.dailyAttendance,firstDateKey:null===p||void 0===p||null===(l=p.dates)||void 0===l?void 0:l[0],firstDateData:null===p||void 0===p||null===(d=p.data)||void 0===d||null===(c=d[0])||void 0===c||null===(u=c.dailyAttendance)||void 0===u?void 0:u[null===p||void 0===p||null===(h=p.dates)||void 0===h?void 0:h[0]]}),(0,i.useImperativeHandle)(t,()=>({print:()=>{if(!p||!Array.isArray(p.data)||0===p.data.length)return void alert("No data to print.");const e=f(),t="attendance"===g?"History Transaction Report":"Meal Consumption Report",n="attendance"===g?"All Granted(ID & FP) Records":"All Meal Records",i=[];let s=Array.isArray(p.dates)&&p.dates.length>0?p.dates:[];if(0===s.length){const e=new Set;p.data.forEach(t=>{Array.isArray(t.punches)&&t.punches.forEach(t=>e.add(t.date||t.punchDate||t.date_)),t.dailyAttendance&&Object.keys(t.dailyAttendance).forEach(t=>e.add(t))}),s=Array.from(e).sort((e,t)=>new Date(e)-new Date(t))}s.forEach(e=>{p.data.forEach(t=>{if(Array.isArray(t.punches)&&t.punches.length)t.punches.filter(t=>String(t.date||t.punchDate||t.date_)===String(e)).forEach((n,s)=>{const o=n&&(n.scan_type||n.type||n.direction)?n.scan_type||n.type||n.direction:s%2===0?"IN":"OUT";i.push({employee_ID:t.employeeId||t.employee_ID||t.emp_no||t.empNo,employee_name:t.employeeName||t.employee_name||t.name,date_:e,time_:n.time||n.punchTime||n.time_||"",scan_type:o})});else if(t.dailyAttendance&&t.dailyAttendance[e]){const n=t.dailyAttendance[e];Array.isArray(n)&&n.length?n.forEach((n,s)=>{const o=n&&(n.scan_type||n.type||n.direction)?n.scan_type||n.type||n.direction:s%2===0?"IN":"OUT";i.push({employee_ID:t.employeeId||t.employee_ID||t.emp_no||t.empNo,employee_name:t.employeeName||t.employee_name||t.name,date_:e,time_:n.time||n.time_||"",scan_type:o,eventDescription:n.eventDescription||""})}):Array.isArray(n.punches)&&n.punches.length?n.punches.forEach((n,s)=>{const o=n&&(n.scan_type||n.type||n.direction)?n.scan_type||n.type||n.direction:s%2===0?"IN":"OUT";i.push({employee_ID:t.employeeId||t.employee_ID||t.emp_no||t.empNo,employee_name:t.employeeName||t.employee_name||t.name,date_:e,time_:n.time||n.time_||"",scan_type:o})}):(n.checkIn&&i.push({employee_ID:t.employeeId||t.employee_ID||t.emp_no||t.empNo,employee_name:t.employeeName||t.employee_name||t.name,date_:e,time_:n.checkIn,scan_type:"IN"}),n.checkOut&&i.push({employee_ID:t.employeeId||t.employee_ID||t.emp_no||t.empNo,employee_name:t.employeeName||t.employee_name||t.name,date_:e,time_:n.checkOut,scan_type:"OUT"}))}})}),i.sort((e,t)=>{const n=new Date(e.date_||""),i=new Date(t.date_||"");if(isNaN(n.getTime())||isNaN(i.getTime())){if((e.date_||"")<(t.date_||""))return-1;if((e.date_||"")>(t.date_||""))return 1}else{if(n<i)return-1;if(n>i)return 1}const s=String(e.employee_ID||""),o=String(t.employee_ID||"");if(s<o)return-1;if(s>o)return 1;const a=e.time_||"",r=t.time_||"";if(a<r)return-1;if(a>r)return 1;const l="IN"===(e.scan_type||"").toUpperCase(),d="IN"===(t.scan_type||"").toUpperCase();return l&&!d?-1:!l&&d?1:0});const o=i.map(e=>{const t={...e},n=new Date(e.date_);return t._punchDateKey=isNaN(n.getTime())?e.date_:n.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"2-digit"}).replace(/\//g,"-")+" "+n.toLocaleDateString("en-US",{weekday:"short"}),t}),a=Math.max(1,29),r=[];let l=[],d=null,c=null,u=0;o.forEach(e=>{const t=e._punchDateKey||e.date_||"";c!==t&&(c=t,l.push(`<tr style="background: #dfe7ff;"><td colspan="7" style="font-weight: 700; font-size: 11px; color: #000; text-align: left; padding: 10px 14px; border: 1px solid #0a0a0aff;">Date: ${t}</td></tr>`),u++,d=null);const n=m(e),i=`${e.employee_ID||e.employeeId||e.emp_no||e.empNo||""}||${t}`;d===i?(n.length>0&&(n[0]=""),n.length>1&&(n[1]=""),n.length>2&&(n[2]=""),n.length>3&&(n[3]="")):d=i,l.push(`<tr>${n.map((e,t)=>`<td style="border: 1px solid #000; padding: 4px 6px; text-align: left; font-size: 11px; white-space: pre-line;">${0===t?"<strong>"+e+"</strong>":e}</td>`).join("")}</tr>`),u++,u>=a&&l.length>0&&(r.push(l.slice()),l=[],u=0,d=null)}),l.length>0&&r.push(l.slice());const h=r.length||1,x=`<!DOCTYPE html><html><head><meta charset="utf-8"/><title>${t}</title><style>\n        body{font-family:'Courier New',monospace;font-size:11px;margin:20px;padding:24px 24px 0 24px}\n        table{width:100%;border-collapse:collapse;margin-bottom:20px}\n  th,td{border:0.5px solid #000;padding:4px 6px;text-align:left}\n  th{background:#f5f5f5;font-weight:bold;font-size:12px}\n        td{font-size:11px;white-space:pre-line}\n        @media print{@page{margin:0.5in;size:landscape}body{margin:0}thead{display:table-header-group!important}@page{margin-top:0;margin-bottom:0;margin-left:0;margin-right:0}body::before,body::after{display:none!important}}\n      </style></head><body>${r.map((i,s)=>{return o=i,`\n        <div class="common-header" style="page-break-before: ${(a=s+1)>1?"always":"auto"}; width:100%;">\n          <div class="report-header" style="padding:8px 0; margin-bottom:6px;">\n            <div class="header-content" style="max-width:1200px; margin:0 auto; padding:0 12px; text-align:left; display:flex; justify-content:space-between; align-items:flex-start;">\n              <div style="max-width:70%;">\n                <h1 style="margin:0; display:flex; align-items:center; gap:8px; font-family: 'Courier New', monospace; font-size:14px;">${t}</h1>\n                <div class="header-subtitle" style="font-size:11px; margin-top:4px;"><strong>${n}</strong></div>\n                <div style="height:8px">&nbsp;</div>\n                <div class="date-range" style="margin-top:6px; font-size:11px;"><strong>Date From :</strong> ${v.startDate} <strong>To :</strong> ${v.endDate}</div>\n              </div>\n              <div style="text-align:left; font-size:11px;" class="print-meta">\n                <div style="font-size:11px">Printed Date : ${(new Date).toLocaleDateString()}</div>\n                <div style="font-size:11px">Printed Time : ${(new Date).toLocaleTimeString()}</div>\n                <div style="font-size:11px">Page ${a} of ${h}</div>\n              </div>\n            </div>\n          </div>\n          <div class="header-content" style="max-width:1200px; margin:0 auto; padding:0 12px;">\n            <table style="width:100%; border-collapse: collapse;">\n              <thead>\n                <tr>${e.map(e=>`<th style="font-size:12px; padding:4px 2px; border:0.5px solid #000; text-align:left;">${e}</th>`).join("")}</tr>\n              </thead>\n              <tbody>\n                ${o.join("")}\n              </tbody>\n            </table>\n          </div>\n          ${a===h?'\n            <div style="margin-top: 60px; width: 100%;">\n              <table style="width:100%; border-collapse: collapse; border: none;">\n                <tbody>\n                  <tr>\n                    <td style="width:15%; vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;">Date</td>\n                    <td style="width:35%; vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;"><span style="display:inline-block; font-family: \'Courier New\', monospace; font-size:9px; letter-spacing:1px; line-height:1;">....................</span></td>\n                    <td style="width:15%; vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;">Date</td>\n                    <td style="width:35%; vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;"><span style="display:inline-block; font-family: \'Courier New\', monospace; font-size:9px; letter-spacing:1px; line-height:1;">....................</span></td>\n                  </tr>\n                  <tr>\n                    <td style="vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;">Authorized Signature 1</td>\n                    <td style="vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;"><span style="display:inline-block; font-family: \'Courier New\', monospace; font-size:9px; letter-spacing:1px; line-height:1;">....................</span></td>\n                    <td style="vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;">Authorized Signature 2</td>\n                    <td style="vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;"><span style="display:inline-block; font-family: \'Courier New\', monospace; font-size:9px; letter-spacing:1px; line-height:1;">....................</span></td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          ':""}\n        </div>`;var o,a}).join("")}</body></html>`,b=window.open("","_blank","width=900,height=700");b?(b.document.open(),b.document.write(x),b.document.close(),setTimeout(()=>{b.focus(),b.print()},500)):alert("Pop-up blocked! Please allow pop-ups for this site to print.")}}));const x=f(),b=[];if(p&&Array.isArray(p.data)){const e=[];let t=Array.isArray(p.dates)&&p.dates.length>0?p.dates:[];if(0===t.length){const e=new Set;p.data.forEach(t=>{Array.isArray(t.punches)&&t.punches.forEach(t=>e.add(t.date||t.punchDate||t.date_)),t.dailyAttendance&&Object.keys(t.dailyAttendance).forEach(t=>e.add(t))}),t=Array.from(e).sort((e,t)=>new Date(e)-new Date(t))}t.forEach(t=>{p.data.forEach(n=>{if(Array.isArray(n.punches)&&n.punches.length)n.punches.filter(e=>String(e.date||e.punchDate||e.date_)===String(t)).forEach((i,s)=>{const o=i&&(i.scan_type||i.type||i.direction)?i.scan_type||i.type||i.direction:s%2===0?"IN":"OUT";e.push({employee_ID:n.employeeId||n.employee_ID||n.emp_no||n.empNo,employee_name:n.employeeName||n.employee_name||n.name,date_:t,time_:i.time||i.punchTime||i.time_||"",scan_type:o})});else if(n.dailyAttendance&&n.dailyAttendance[t]){const i=n.dailyAttendance[t];Array.isArray(i)&&i.length?i.forEach((i,s)=>{const o=i&&(i.scan_type||i.type||i.direction)?i.scan_type||i.type||i.direction:s%2===0?"IN":"OUT";e.push({employee_ID:n.employeeId||n.employee_ID||n.emp_no||n.empNo,employee_name:n.employeeName||n.employee_name||n.name,date_:t,time_:i.time||i.time_||"",scan_type:o,eventDescription:i.eventDescription||""})}):Array.isArray(i.punches)&&i.punches.length?i.punches.forEach((i,s)=>{const o=i&&(i.scan_type||i.type||i.direction)?i.scan_type||i.type||i.direction:s%2===0?"IN":"OUT";e.push({employee_ID:n.employeeId||n.employee_ID||n.emp_no||n.empNo,employee_name:n.employeeName||n.employee_name||n.name,date_:t,time_:i.time||i.time_||"",scan_type:o})}):(i.checkIn&&e.push({employee_ID:n.employeeId||n.employee_ID||n.emp_no||n.empNo,employee_name:n.employeeName||n.employee_name||n.name,date_:t,time_:i.checkIn,scan_type:"IN"}),i.checkOut&&e.push({employee_ID:n.employeeId||n.employee_ID||n.emp_no||n.empNo,employee_name:n.employeeName||n.employee_name||n.name,date_:t,time_:i.checkOut,scan_type:"OUT"}))}})}),e.sort((e,t)=>{const n=new Date(e.date_||""),i=new Date(t.date_||"");if(isNaN(n.getTime())||isNaN(i.getTime())){if((e.date_||"")<(t.date_||""))return-1;if((e.date_||"")>(t.date_||""))return 1}else{if(n<i)return-1;if(n>i)return 1}const s=String(e.employee_ID||""),o=String(t.employee_ID||"");if(s<o)return-1;if(s>o)return 1;const a=e.time_||"",r=t.time_||"";if(a<r)return-1;if(a>r)return 1;const l="IN"===(e.scan_type||"").toUpperCase(),d="IN"===(t.scan_type||"").toUpperCase();return l&&!d?-1:!l&&d?1:0});let n=null,i=null,s=0;const o=100;for(let a=0;a<e.length&&s<o;a++){const t=e[a],r=t.date_||"";if(i!==r&&(b.push((0,_e.jsx)("tr",{children:(0,_e.jsx)("td",{colSpan:7,style:{background:"#dfe7ff",fontWeight:700,fontSize:"11px",color:"#000",textAlign:"left",padding:"10px 14px",border:"1px solid #c7d2e8"},children:`Date: ${new Date(r).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"2-digit"}).replace(/\//g,"-")} ${new Date(r).toLocaleDateString("en-US",{weekday:"short"})}`})},`date-header-${r}`)),i=r,n=null,s++,s>=o))break;const l=m(t),d=`${t.employee_ID||t.employeeId||""}||${r}`;n===d?(l.length>0&&(l[0]=""),l.length>1&&(l[1]=""),l.length>2&&(l[2]=""),l.length>3&&(l[3]="")):n=d,b.push((0,_e.jsx)("tr",{children:l.map((e,t)=>(0,_e.jsx)("td",{style:{whiteSpace:"pre-line",textAlign:"left",fontSize:"11px",padding:"4px 6px",verticalAlign:"middle",border:"1px solid #dee2e6"},children:0===t?(0,_e.jsx)("strong",{children:e}):e},t))},`row-${a}`)),s++}}return(0,_e.jsxs)("div",{children:[(0,_e.jsxs)("table",{className:"table table-striped",style:{width:"100%",borderCollapse:"collapse"},children:[(0,_e.jsx)("thead",{children:(0,_e.jsx)("tr",{children:x.map((e,t)=>(0,_e.jsx)("th",{style:{fontSize:"12px",background:"#f5f5f5",fontWeight:"bold",padding:"4px 2px",border:"0.5px solid #dee2e6",textAlign:"left"},children:e},t))})}),(0,_e.jsx)("tbody",{children:b})]}),p&&p.data&&p.data.length>100&&(0,_e.jsx)("p",{className:"preview-note",children:"Showing first 100 records. Use print for full report."})]})}),ec=(0,i.forwardRef)((e,t)=>{let{reportData:n,getHeaders:s,formatRow:o,reportType:a,dateRange:r,employeeInfo:l}=e;(0,i.useImperativeHandle)(t,()=>({print:()=>{if(!n||!Array.isArray(n.data)||0===n.data.length)return void alert("No data to print.");const e=s(),t=new Set(["emp no","emp name","meal-pkt-mny"].map(e=>e.toLowerCase())),i=e.map((e,n)=>t.has(String(e||"").trim().toLowerCase())?-1:n).filter(e=>e>=0),d=[];let c=Array.isArray(n.dates)&&n.dates.length>0?n.dates:[];if(0===c.length){const e=new Set;n.data.forEach(t=>{(t.date_||t.punchDate||t.date)&&e.add(t.date_||t.punchDate||t.date)}),c=Array.from(e).sort((e,t)=>new Date(e)-new Date(t))}c.forEach(e=>{n.data.forEach(t=>{const n=t.date_||t.punchDate||t.date;if(String(n)===String(e)){const n=t.scan_type||t.type||t.direction||"";d.push({employee_ID:t.employee_ID||t.employeeId||"",employee_name:t.employee_name||t.employeeName||"",date_:e,time_:t.time_||t.time||t.punchTime||"",scan_type:n})}})}),d.sort((e,t)=>{const n=new Date(e.date_||""),i=new Date(t.date_||"");if(isNaN(n.getTime())||isNaN(i.getTime())){if((e.date_||"")<(t.date_||""))return-1;if((e.date_||"")>(t.date_||""))return 1}else{if(n<i)return-1;if(n>i)return 1}const s=String(e.employee_ID||""),o=String(t.employee_ID||"");if(s<o)return-1;if(s>o)return 1;const a=e.time_||"",r=t.time_||"";if(a<r)return-1;if(a>r)return 1;const l="IN"===(e.scan_type||"").toUpperCase(),d="IN"===(t.scan_type||"").toUpperCase();return l&&!d?-1:!l&&d?1:0});const u=d.map(e=>{const t={...e},n=new Date(e.date_);return t._punchDateKey=isNaN(n.getTime())?e.date_:n.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"2-digit"}).replace(/\//g,"-")+" "+n.toLocaleDateString("en-US",{weekday:"short"}),t}),h=[];let p=[],f=null,m=null,g=0;u.forEach(e=>{const t=e._punchDateKey||e.date_||"";m!==t&&(m=t,f=null);const n=o(e),s=`${e.employee_ID||e.employeeId||e.emp_no||e.empNo||""}||${t}`;f===s?(n.length>0&&(n[0]=""),n.length>1&&(n[1]=""),n.length>2&&(n[2]=""),n.length>3&&(n[3]="")):f=s,p.push(`<tr>${i.map((e,t)=>{const i=void 0!==n[e]?n[e]:"";return`<td style="border: 1px solid #000; padding: 4px 6px; text-align: left; font-size: 11px; white-space: pre-line;">${0===t?"<strong>"+i+"</strong>":i}</td>`}).join("")}</tr>`),g++,g>=28&&p.length>0&&(h.push(p.slice()),p=[],g=0,f=null)}),p.length>0&&h.push(p.slice());const v=h.length||1,x=(null===l||void 0===l?void 0:l.employee_id)||(null===l||void 0===l?void 0:l.employee_ID)||(null===l||void 0===l?void 0:l.employeeId)||(null===l||void 0===l?void 0:l.employeeNo)||(null===l||void 0===l?void 0:l.emp_no)||(null===l||void 0===l?void 0:l.empNo)||(null===n||void 0===n?void 0:n.data)&&n.data[0]&&(n.data[0].employee_id||n.data[0].employee_ID||n.data[0].employeeId||n.data[0].emp_no||n.data[0].empNo||"")||"",b=(null===l||void 0===l?void 0:l.name)||(null===l||void 0===l?void 0:l.employee_name)||(null===l||void 0===l?void 0:l.employeeName)||(null===n||void 0===n?void 0:n.data)&&n.data[0]&&(n.data[0].employee_name||n.data[0].employeeName||n.data[0].name||"")||"",y="attendance"===a?"History Transaction Report":"Meal Consumption Report",S="attendance"===a?"All Granted(ID & FP) Records":"All Meal Records";const j=`<!DOCTYPE html><html><head><meta charset="utf-8"/><title>${y}</title><style>\n        body{font-family:'Courier New',monospace;font-size:11px;margin:20px;padding:24px 24px 0 24px}\n        table{width:100%;border-collapse:collapse;margin-bottom:20px}\n  th,td{border:0.5px solid #000;padding:4px 6px;text-align:left}\n  th{background:#f5f5f5;font-weight:bold;font-size:12px}\n        td{font-size:11px;white-space:pre-line}\n        @media print{@page{margin:0.5in;size:landscape}body{margin:0}thead{display:table-header-group!important}@page{margin-top:0;margin-bottom:0;margin-left:0;margin-right:0}body::before,body::after{display:none!important}}\n      </style></head><body>${h.map((t,n)=>function(t,n){const s=n===v;return`\n          <div class="common-header" style="page-break-before: ${n>1?"always":"auto"}; width:100%;">\n            <div class="report-header" style="padding:8px 0; margin-bottom:6px;">\n              <div class="header-content" style="max-width:1200px; margin:0 auto; padding:0; text-align:left; display:flex; justify-content:space-between; align-items:flex-start;">\n                <div style="max-width:70%;">\n                  <h1 style="margin:0; display:flex; align-items:center; gap:8px; font-family: 'Courier New', monospace; font-size:14px;">${y}</h1>\n                  <div class="header-subtitle" style="font-size:11px; margin-top:4px;"><strong>${S}</strong></div>\n                  <div style="height:8px">&nbsp;</div>\n                  <table style="margin-bottom:12px; border-collapse:collapse; border: none;">\n                    <tr><td style="vertical-align: top; padding-right: 8px; font-weight: bold; width: 90px; border: none;">Emp No :</td><td style="vertical-align: top; border: none;">${x}</td></tr>\n                    <tr><td style="vertical-align: top; padding-right: 8px; font-weight: bold; border: none;">Emp Name :</td><td style="vertical-align: top; border: none;">${b}</td></tr>\n                    <tr><td style="vertical-align: top; padding-right: 8px; font-weight: bold; border: none;">Date From :</td><td style="vertical-align: top; border: none;">${r.startDate} &nbsp; To : &nbsp; ${r.endDate}</td></tr>\n                  </table>\n                </div>\n                <div style="text-align:left; font-size:11px;" class="print-meta">\n                  <div style="font-size:11px">Printed Date : ${(new Date).toLocaleDateString()}</div>\n                  <div style="font-size:11px">Printed Time : ${(new Date).toLocaleTimeString()}</div>\n                  <div style="font-size:11px">Page ${n} of ${v}</div>\n                </div>\n              </div>\n            </div>\n            <div class="header-content" style="max-width:1200px; margin:0 auto; padding:0;">\n              <table style="width:100%; border-collapse: collapse;">\n                <thead><tr>${i.map(t=>`<th style="font-size:12px; padding:4px 2px; border:0.5px solid #000; text-align:left;">${e[t]}</th>`).join("")}</tr></thead>\n                <tbody>${t.join("")}</tbody>\n              </table>\n            </div>\n            ${s?'\n              <div style="margin-top: 60px; width: 100%;">\n                <table style="width:100%; border-collapse: collapse; border: none;">\n                  <tbody>\n                    <tr>\n                      <td style="width:15%; vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;">Date</td>\n                      <td style="width:35%; vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;"><span style="display:inline-block; font-family: \'Courier New\', monospace; font-size:9px; letter-spacing:1px; line-height:1;">....................</span></td>\n                      <td style="width:15%; vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;">Date</td>\n                      <td style="width:35%; vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;"><span style="display:inline-block; font-family: \'Courier New\', monospace; font-size:9px; letter-spacing:1px; line-height:1;">....................</span></td>\n                    </tr>\n                    <tr>\n                      <td style="vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;">Authorized Signature 1</td>\n                      <td style="vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;"><span style="display:inline-block; font-family: \'Courier New\', monospace; font-size:9px; letter-spacing:1px; line-height:1;">....................</span></td>\n                      <td style="vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;">Authorized Signature 2</td>\n                      <td style="vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;"><span style="display:inline-block; font-family: \'Courier New\', monospace; font-size:9px; letter-spacing:1px; line-height:1;">....................</span></td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            ':""}\n          </div>\n        `}(t,n+1)).join("")}</body></html>`,w=window.open(" ","","width=900,height=700");w.document.open(),w.document.write(j),w.document.close(),w.focus(),w.print(),w.close()}}));const d=s(),c=new Set(["emp no","emp name","meal-pkt-mny"].map(e=>e.toLowerCase())),u=d.map((e,t)=>c.has(String(e||"").trim().toLowerCase())?-1:t).filter(e=>e>=0),h=[];if(n&&Array.isArray(n.data)){const e=[];let t=Array.isArray(n.dates)&&n.dates.length>0?n.dates:[];if(0===t.length){const e=new Set;n.data.forEach(t=>{(t.date_||t.punchDate||t.date)&&e.add(t.date_||t.punchDate||t.date)}),t=Array.from(e).sort((e,t)=>new Date(e)-new Date(t))}t.forEach(t=>{n.data.forEach(n=>{const i=n.date_||n.punchDate||n.date;if(String(i)===String(t)){const i=n.scan_type||n.type||n.direction||"";e.push({employee_ID:n.employee_ID||n.employeeId||"",employee_name:n.employee_name||n.employeeName||"",date_:t,time_:n.time_||n.time||n.punchTime||"",scan_type:i})}})}),e.sort((e,t)=>{const n=new Date(e.date_||""),i=new Date(t.date_||"");if(isNaN(n.getTime())||isNaN(i.getTime())){if((e.date_||"")<(t.date_||""))return-1;if((e.date_||"")>(t.date_||""))return 1}else{if(n<i)return-1;if(n>i)return 1}const s=String(e.employee_ID||""),o=String(t.employee_ID||"");if(s<o)return-1;if(s>o)return 1;const a=e.time_||"",r=t.time_||"";if(a<r)return-1;if(a>r)return 1;const l="IN"===(e.scan_type||"").toUpperCase(),d="IN"===(t.scan_type||"").toUpperCase();return l&&!d?-1:!l&&d?1:0});let i=null,s=null,a=0;const r=100;for(let n=0;n<e.length&&a<r;n++){const t=e[n],r=t.date_||"";s!==r&&(s=r,i=null);const l=o(t),d=`${t.employee_ID||t.employeeId||""}||${r}`;i===d?(l.length>0&&(l[0]=""),l.length>1&&(l[1]=""),l.length>2&&(l[2]=""),l.length>3&&(l[3]="")):i=d,h.push((0,_e.jsx)("tr",{children:u.map((e,t)=>{const n=void 0!==l[e]?l[e]:"";return(0,_e.jsx)("td",{style:{whiteSpace:"pre-line",fontSize:"11px",padding:"4px 6px",border:"1px solid #dee2e6"},children:0===t?(0,_e.jsx)("strong",{children:n}):n},t)})},`row-${n}`)),a++}}return(0,_e.jsxs)("div",{children:[(0,_e.jsxs)("table",{className:"table table-striped",style:{width:"100%",borderCollapse:"collapse"},children:[(0,_e.jsx)("thead",{children:(0,_e.jsx)("tr",{children:u.map((e,t)=>(0,_e.jsx)("th",{style:{fontSize:"12px",background:"#f5f5f5",fontWeight:"bold",padding:"4px 2px",border:"0.5px solid #dee2e6",textAlign:"left"},children:d[e]},t))})}),(0,_e.jsx)("tbody",{children:h})]}),n&&n.data&&n.data.length>100&&(0,_e.jsx)("p",{className:"preview-note",children:"Showing first 100 records. Use print for full report."})]})}),tc=e=>{let{reportData:t}=e;const[n,s]=(0,i.useState)({});if((0,i.useEffect)(()=>{if(t&&t.data){const e={};t.data.forEach((t,n)=>{e[n]=!0}),s(e)}},[t]),!t||!t.data||0===t.data.length)return(0,_e.jsx)("div",{className:"no-data-message",children:(0,_e.jsx)("p",{children:"No audit records found for the selected criteria."})});const{dateRange:o={},summary:a={},grouping:r="none"}=t;return(0,_e.jsxs)("div",{className:"report-container",style:{background:"#ffffff"},children:[(0,_e.jsx)("style",{children:"\n        @media print {\n          @page {\n            size: A4;\n            margin: 15mm;\n          }\n          body * { visibility: hidden; }\n          .print-content, .print-content * { visibility: visible; }\n          .print-content { \n            position: absolute; \n            left: 0; \n            top: 0; \n            width: 100%;\n          }\n          .screen-only { display: none !important; }\n          .print-only { display: block !important; }\n          .page-break { page-break-after: always; }\n          .avoid-break { page-break-inside: avoid; }\n          .print-header {\n            text-align: center;\n            margin-bottom: 15px;\n            padding-bottom: 10px;\n            border-bottom: 2px solid #000;\n          }\n          .group-section {\n            margin-bottom: 20px;\n          }\n          .group-header {\n            background-color: #e0e0e0 !important;\n            padding: 8px !important;\n            font-weight: bold;\n            border: 1px solid #000;\n            margin-top: 10px;\n          }\n          table {\n            width: 100%;\n            border-collapse: collapse;\n            font-size: 10px;\n          }\n          th, td {\n            border: 1px solid #000;\n            padding: 6px;\n            text-align: left;\n          }\n          th {\n            background-color: #f5f5f5 !important;\n            font-weight: bold;\n          }\n          /* Fit more rows per page */\n          tr {\n            line-height: 1.2;\n          }\n        }\n        @media screen {\n          .print-only { display: none !important; }\n        }\n      "}),(0,_e.jsxs)("div",{className:"print-only print-content",children:[(0,_e.jsxs)("div",{className:"print-header",children:[(0,_e.jsx)("h1",{style:{margin:0,fontSize:"18px",fontWeight:"bold",color:"#000"},children:"designation"===r?"SLPA DESIGNATION WISE AUDIT REPORT":"punch"===r?"SLPA PUNCH TYPE AUDIT REPORT":"SLPA AUDIT REPORT"}),(0,_e.jsxs)("div",{style:{fontSize:"11px",color:"#000",marginTop:"8px"},children:[(0,_e.jsx)("strong",{children:"Division:"})," ",a.divisionFilter||"All"," |",(0,_e.jsx)("strong",{children:" Section:"})," ",a.sectionFilter||"All",a.subSectionFilter&&"All"!==a.subSectionFilter&&(0,_e.jsxs)(_e.Fragment,{children:[" | ",(0,_e.jsx)("strong",{children:"Sub Section:"})," ",a.subSectionFilter]})]}),(0,_e.jsxs)("div",{style:{fontSize:"10px",color:"#666",marginTop:"5px"},children:["Total Employees: ",a.totalEmployees||0," | Total Groups: ",a.totalGroups||0," | Generated: ",(new Date).toLocaleString()]})]}),t.data.map((e,n)=>{var i;return(0,_e.jsxs)("div",{className:"group-section",children:[(0,_e.jsxs)("div",{className:"group-header",style:{backgroundColor:"#e0e0e0",padding:"8px",fontWeight:"bold",border:"1px solid #000",marginTop:"10px",fontSize:"12px"},children:[e.groupName," - ",e.count," Employee",1!==e.count?"s":""]}),(e.employees||[]).length>0&&null!==(i=e.employees[0])&&void 0!==i&&i.eventDate?(0,_e.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",marginTop:"5px"},children:[(0,_e.jsx)("thead",{children:(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("th",{style:{width:"15%",padding:"6px",border:"1px solid #000",backgroundColor:"#f5f5f5",fontWeight:"bold"},children:"Employee ID"}),(0,_e.jsx)("th",{style:{width:"30%",padding:"6px",border:"1px solid #000",backgroundColor:"#f5f5f5",fontWeight:"bold"},children:"Employee Name"}),(0,_e.jsx)("th",{style:{width:"25%",padding:"6px",border:"1px solid #000",backgroundColor:"#f5f5f5",fontWeight:"bold"},children:"Designation"}),(0,_e.jsx)("th",{style:{width:"15%",padding:"6px",border:"1px solid #000",backgroundColor:"#f5f5f5",fontWeight:"bold"},children:"Date"}),(0,_e.jsx)("th",{style:{width:"15%",padding:"6px",border:"1px solid #000",backgroundColor:"#f5f5f5",fontWeight:"bold"},children:"Time"})]})}),(0,_e.jsx)("tbody",{children:(e.employees||[]).map((e,t)=>(0,_e.jsxs)("tr",{className:t%30===29?"avoid-break":"",children:[(0,_e.jsx)("td",{style:{padding:"6px",border:"1px solid #000",fontFamily:"monospace"},children:e.employeeId}),(0,_e.jsx)("td",{style:{padding:"6px",border:"1px solid #000"},children:e.employeeName}),(0,_e.jsx)("td",{style:{padding:"6px",border:"1px solid #000"},children:e.designation}),(0,_e.jsx)("td",{style:{padding:"6px",border:"1px solid #000"},children:e.eventDate}),(0,_e.jsx)("td",{style:{padding:"6px",border:"1px solid #000",fontFamily:"monospace"},children:e.eventTime})]},t))})]}):(0,_e.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",marginTop:"5px"},children:[(0,_e.jsx)("thead",{children:(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("th",{style:{width:"12%",padding:"6px",border:"1px solid #000",backgroundColor:"#f5f5f5",fontWeight:"bold"},children:"Employee ID"}),(0,_e.jsx)("th",{style:{width:"38%",padding:"6px",border:"1px solid #000",backgroundColor:"#f5f5f5",fontWeight:"bold"},children:"Employee Name"}),(0,_e.jsx)("th",{style:{width:"35%",padding:"6px",border:"1px solid #000",backgroundColor:"#f5f5f5",fontWeight:"bold"},children:"Designation"}),(0,_e.jsx)("th",{style:{width:"15%",padding:"6px",border:"1px solid #000",backgroundColor:"#f5f5f5",fontWeight:"bold",textAlign:"center"},children:"Division"})]})}),(0,_e.jsx)("tbody",{children:(e.employees||[]).map((e,t)=>(0,_e.jsxs)("tr",{className:t%30===29?"avoid-break":"",children:[(0,_e.jsx)("td",{style:{padding:"6px",border:"1px solid #000",fontFamily:"monospace"},children:e.employeeId}),(0,_e.jsx)("td",{style:{padding:"6px",border:"1px solid #000"},children:e.employeeName}),(0,_e.jsx)("td",{style:{padding:"6px",border:"1px solid #000"},children:e.designation}),(0,_e.jsx)("td",{style:{padding:"6px",border:"1px solid #000",fontSize:"9px"},children:e.divisionName||a.divisionFilter||"-"})]},t))})]}),n>0&&(n+1)%2===0&&n<t.data.length-1&&(0,_e.jsx)("div",{className:"page-break"})]},n)}),(0,_e.jsxs)("div",{style:{marginTop:"30px",paddingTop:"10px",borderTop:"1px solid #999",fontSize:"9px",textAlign:"center",color:"#666"},children:[(0,_e.jsx)("p",{style:{margin:"5px 0"},children:"This is a computer-generated report from SLPA Time & Attendance System"}),(0,_e.jsxs)("p",{style:{margin:"5px 0"},children:["Page count optimized for cost-effective printing | Report Date: ",(new Date).toLocaleDateString()]})]})]}),(0,_e.jsxs)("div",{className:"screen-only",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"20px 24px",borderRadius:"8px 8px 0 0"},children:[(0,_e.jsx)("h2",{style:{margin:0,fontSize:"24px",fontWeight:"bold"},children:"designation"===r?"SLPA Designation Wise Audit Report":"punch"===r?"SLPA Punch Type Audit Report":"SLPA Audit Report"}),(0,_e.jsx)("p",{style:{margin:"8px 0 0 0",opacity:.9,fontSize:"14px"},children:o.from&&"N/A"!==o.from?`${o.from} to ${o.to}`:"All Employees"})]}),(0,_e.jsxs)("div",{className:"screen-only",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",padding:"24px",background:"#f8f9fa"},children:[(0,_e.jsxs)("div",{style:{background:"white",padding:"16px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,_e.jsx)("div",{style:{fontSize:"14px",color:"#6c757d",marginBottom:"4px"},children:"Total Issues"}),(0,_e.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#dc3545"},children:a.totalRecords||0})]}),(0,_e.jsxs)("div",{style:{background:"white",padding:"16px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,_e.jsx)("div",{style:{fontSize:"14px",color:"#6c757d",marginBottom:"4px"},children:"Affected Employees"}),(0,_e.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#fd7e14"},children:a.totalEmployees||0})]}),(0,_e.jsxs)("div",{style:{background:"white",padding:"16px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,_e.jsx)("div",{style:{fontSize:"14px",color:"#6c757d",marginBottom:"4px"},children:"Report Groups"}),(0,_e.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#0dcaf0"},children:a.totalGroups||0})]}),(0,_e.jsxs)("div",{style:{background:"white",padding:"16px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,_e.jsx)("div",{style:{fontSize:"14px",color:"#6c757d",marginBottom:"4px"},children:"Grouping Method"}),(0,_e.jsx)("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#6610f2",textTransform:"capitalize"},children:a.groupingMethod||"None"})]})]}),(0,_e.jsx)("div",{className:"screen-only",style:{padding:"16px 24px",background:"#e9ecef",borderTop:"1px solid #dee2e6"},children:(0,_e.jsxs)("div",{style:{display:"flex",gap:"24px",flexWrap:"wrap",fontSize:"14px"},children:[(0,_e.jsxs)("div",{children:[(0,_e.jsx)("strong",{children:"Division:"})," ",a.divisionFilter||"All"]}),(0,_e.jsxs)("div",{children:[(0,_e.jsx)("strong",{children:"Section:"})," ",a.sectionFilter||"All"]}),(0,_e.jsxs)("div",{children:[(0,_e.jsx)("strong",{children:"Sub Section:"})," ",a.subSectionFilter||"All"]}),(0,_e.jsxs)("div",{children:[(0,_e.jsx)("strong",{children:"Time Period:"})," ",a.timePeriod||"Custom"]})]})}),(0,_e.jsxs)("div",{className:"report-content",style:{padding:"24px"},children:[(0,_e.jsxs)("h3",{className:"screen-only",style:{marginBottom:"16px",color:"#495057"},children:[(0,_e.jsx)("i",{className:"bi bi-table"})," ","designation"===r?"Employees by Designation":"punch"===r?"Attendance Records by Punch Type":"Detailed Audit Records"]}),t.data.map((e,t)=>(0,_e.jsxs)("div",{style:{marginBottom:"24px",border:"1px solid #dee2e6",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[(0,_e.jsxs)("div",{onClick:()=>(e=>{s(t=>({...t,[e]:!t[e]}))})(t),style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",color:"white",padding:"16px 20px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,_e.jsxs)("div",{children:[(0,_e.jsx)("h4",{style:{margin:0,fontSize:"18px",fontWeight:"bold"},children:e.groupName}),(0,_e.jsxs)("div",{style:{fontSize:"13px",opacity:.9,marginTop:"4px"},children:[e.count," ","designation"===r?"employees":"records"," | ",e.totalIssues||e.count," total issues"]})]}),(0,_e.jsx)("div",{style:{fontSize:"20px"},children:n[t]?"\u25bc":"\u25b6"})]}),n[t]&&(0,_e.jsx)("div",{style:{background:"white"},children:"designation"===r?(0,_e.jsxs)("table",{className:"audit-table",style:{width:"100%",borderCollapse:"collapse",border:"1px solid #000"},children:[(0,_e.jsx)("thead",{children:(0,_e.jsxs)("tr",{style:{background:"#f8f9fa"},children:[(0,_e.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #000",width:"20%"},children:"Employee ID"}),(0,_e.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #000",width:"50%"},children:"Employee Name"}),(0,_e.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #000",width:"30%"},children:"Designation"})]})}),(0,_e.jsx)("tbody",{children:(e.employees||[]).map((e,t)=>(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("td",{style:{padding:"12px",fontFamily:"monospace",border:"1px solid #000"},children:e.employeeId}),(0,_e.jsx)("td",{style:{padding:"12px",fontWeight:"500",border:"1px solid #000"},children:e.employeeName}),(0,_e.jsx)("td",{style:{padding:"12px",border:"1px solid #000"},children:e.designation})]},t))})]}):"punch"===r?(0,_e.jsxs)("table",{className:"audit-table",style:{width:"100%",borderCollapse:"collapse",border:"1px solid #000"},children:[(0,_e.jsx)("thead",{children:(0,_e.jsxs)("tr",{style:{background:"#f8f9fa"},children:[(0,_e.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #000",width:"15%"},children:"Employee ID"}),(0,_e.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #000",width:"30%"},children:"Employee Name"}),(0,_e.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #000",width:"25%"},children:"Designation"}),(0,_e.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #000",width:"15%"},children:"Date"}),(0,_e.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #000",width:"15%"},children:"Time"})]})}),(0,_e.jsx)("tbody",{children:(e.employees||[]).map((e,t)=>(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("td",{style:{padding:"12px",fontFamily:"monospace",border:"1px solid #000"},children:e.employeeId}),(0,_e.jsx)("td",{style:{padding:"12px",fontWeight:"500",border:"1px solid #000"},children:e.employeeName}),(0,_e.jsx)("td",{style:{padding:"12px",border:"1px solid #000"},children:e.designation}),(0,_e.jsx)("td",{style:{padding:"12px",border:"1px solid #000"},children:e.eventDate}),(0,_e.jsx)("td",{style:{padding:"12px",fontFamily:"monospace",border:"1px solid #000"},children:e.eventTime})]},t))})]}):(0,_e.jsxs)("table",{className:"audit-table",style:{width:"100%",borderCollapse:"collapse"},children:[(0,_e.jsx)("thead",{children:(0,_e.jsxs)("tr",{style:{background:"#f8f9fa"},children:[(0,_e.jsx)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Employee ID"}),(0,_e.jsx)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Employee Name"}),(0,_e.jsx)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Designation"}),(0,_e.jsx)("th",{style:{padding:"12px",textAlign:"center",borderBottom:"2px solid #dee2e6"},children:"Issues"})]})}),(0,_e.jsx)("tbody",{children:(e.employees||[]).map((e,t)=>(0,_e.jsxs)("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[(0,_e.jsx)("td",{style:{padding:"12px",fontFamily:"monospace"},children:e.employeeId}),(0,_e.jsx)("td",{style:{padding:"12px",fontWeight:"500"},children:e.employeeName}),(0,_e.jsx)("td",{style:{padding:"12px"},children:e.designation}),(0,_e.jsx)("td",{style:{padding:"12px",textAlign:"center"},children:(0,_e.jsx)("span",{style:{backgroundColor:"#dc3545",color:"white",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},children:e.issueCount})})]},t))})]})})]},t))]}),(0,_e.jsxs)("div",{style:{padding:"16px 24px",background:"#f8f9fa",borderTop:"1px solid #dee2e6",textAlign:"center",fontSize:"13px",color:"#6c757d"},children:[(0,_e.jsxs)("p",{style:{margin:"4px 0"},children:["Generated on ",(new Date).toLocaleString()]}),(0,_e.jsx)("p",{style:{margin:"4px 0",fontStyle:"italic"},children:"Note: This report shows employees who have only one punch record per day."})]})]})},nc=()=>{var e,t,n,s,o,a;const{t:r}=Te(),l={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000/api",d=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,[c,u]=(0,i.useState)("report"),[h,p]=(0,i.useState)("attendance"),[f,m]=(0,i.useState)("individual"),[g,v]=(0,i.useState)("none"),[x,b]=(0,i.useState)("none"),[y,S]=(0,i.useState)(""),[j,w]=(0,i.useState)("all"),[_,N]=(0,i.useState)("all"),[k,C]=(0,i.useState)([]),[E,I]=(0,i.useState)([]),[D,A]=(0,i.useState)([]),[T,M]=(0,i.useState)([]),[R,O]=(0,i.useState)("all"),[P,L]=(0,i.useState)(new Date),[z,F]=(0,i.useState)(new Date),[B,$]=(0,i.useState)(!1),[U,W]=(0,i.useState)("start"),[H,V]=(0,i.useState)(0),[q,Y]=(0,i.useState)(null);(0,i.useEffect)(()=>{if("all"===j)I(D),N("all"),M([]),O("all");else{const e=D.filter(e=>{const t=String(e.division_code||e.division_id||e.divisionId||e.DIVISION_ID||"");let n=String(j);return n.startsWith("mysql_div_")&&(n=n.replace("mysql_div_","")),t===n});console.log(`\ud83d\udd0d Filtered ${e.length} sections for division ${j}`),e.length>0&&console.log("Sample sections:",e.slice(0,3).map(e=>({id:e._id,name:e.name,division_id:e.division_id}))),I(e),N("all"),M([]),O("all")}},[j,D]),(0,i.useEffect)(()=>{_&&"all"!==_&&"all"!==j?Re(_):(M([]),O("all"))},[_,j]);const[G,J]=(0,i.useState)({startDate:"",endDate:""}),[K,Q]=(0,i.useState)("date-range"),[X,Z]=(0,i.useState)("date"),[ee,te]=(0,i.useState)("date"),[ne,ie]=(0,i.useState)((new Date).getFullYear()),[se,oe]=(0,i.useState)((new Date).getMonth()),[ae,re]=(0,i.useState)(!1),[le,de]=(0,i.useState)(null),[ce,ue]=(0,i.useState)(""),[he,pe]=(0,i.useState)(null),[fe]=(0,i.useState)(""),me=(0,i.useRef)(!1),ge=(0,i.useRef)(!1),ve=(0,i.useRef)(null),xe=(0,i.useRef)(null),be=(0,i.useMemo)(()=>{if(!le||!Array.isArray(le.data))return[];const e=(fe||"").trim().toLowerCase();return e?le.data.filter(t=>{const n=String(t.employee_id||t.employee_ID||t.employeeId||t.emp_no||t.empNo||"").toLowerCase(),i=String(t.employee_name||t.employeeName||t.name||"").toLowerCase();return n.includes(e)||i.includes(e)}):le.data},[le,fe]),ye=le?{...le,data:be}:le,Se=e=>{if(!e&&0!==e)return"";if("string"===typeof e)return e;try{const t=new Date(e);if(!isNaN(t.getTime()))return t.toLocaleTimeString("en-GB",{hour12:!1})}catch(cu){}return String(e)},je=Me("reports","create"),we=Me("reports","attendance_generate"),Ne=Me("reports","attendance_download"),ke=Me("reports","audit_generate"),Ce=Me("reports","meal_generate"),Ee=Me("reports","view_reports"),Ie=e=>!!Ee&&("attendance"===e?!(!we&&!je):"audit"===e?!(!ke&&!je):"meal"===e?!(!Ce&&!je):!!je);(0,i.useEffect)(()=>{De(),Ae();const e=d(new Date);J({startDate:e,endDate:e}),ie((new Date).getFullYear()),oe((new Date).getMonth())},[]),(0,i.useEffect)(()=>{if("none"===g)return;const e=new Date;let t,n;switch(g){case"daily":default:t=n=d(e);break;case"weekly":const i=e.getDay(),s=new Date(e);s.setDate(e.getDate()-i),t=d(s),n=d(e);break;case"monthly":const o=new Date(e.getFullYear(),e.getMonth(),1);t=d(o),n=d(e);break;case"annually":const a=new Date(e.getFullYear(),0,1);t=d(a),n=d(e)}J({startDate:t,endDate:n})},[g]),(0,i.useEffect)(()=>{"group"===f&&S("")},[f]),(0,i.useEffect)(()=>{"audit"===h&&m("group")},[h]),(0,i.useEffect)(()=>{if(!Ie(h)){const e=["attendance","audit","meal"].filter(e=>Ie(e));e.length>0&&p(e[0])}},[we,ke,Ce,Ee,h]),(0,i.useEffect)(()=>{N("all"),O("all")},[j]),(0,i.useEffect)(()=>{O("all")},[_,j]),(0,i.useEffect)(()=>{if(j&&"all"!==j)return;if(!k||0===k.length)return;if(me.current)return;const e=k.find(e=>{const t=String(e.code||e.DIVISION_CODE||"").toLowerCase(),n=String(e.name||e.DIVISION_NAME||"").toLowerCase();return"is"===t||n.includes("information systems")||n.includes("information system")});e&&(w(e._id||e.id),me.current=!0,ge.current=!1)},[k,j]),(0,i.useEffect)(()=>{if(!E||0===E.length)return;if(_&&"all"!==_)return;if(ge.current)return;const e=E.find(e=>{const t=String(e.code||e.section_code||e.SECTION_CODE||"").toLowerCase(),n=String(e.name||e.section_name||e.SECTION_NAME||"").toLowerCase();return"is"===t||n.includes("information systems")||n.includes("information system")||n.includes("(is)")});e&&(N(e._id||e.id||e.section_id),ge.current=!0)},[E,_]);const De=async()=>{try{const e=localStorage.getItem("token");console.log("\ud83d\udce5 Fetching divisions from MySQL data...");const t=await fetch(`${l}/mysql-data/divisions?includeEmployeeCount=true`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json();let n=[];Array.isArray(e)?n=e:e.data&&Array.isArray(e.data)&&(n=e.data);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[],n=new Set;return e.forEach(e=>{var i,s,o,a,r,l,d,c,u,h,p,f,m,g,v,x,b,y,S,j;const w=String(null!==(i=null!==(s=null!==(o=null!==(a=null!==(r=null!==(l=e._id)&&void 0!==l?l:e.id)&&void 0!==r?r:e.DIVISION_ID)&&void 0!==a?a:e.code)&&void 0!==o?o:e.hie_code)&&void 0!==s?s:e.DIVISION_CODE)&&void 0!==i?i:"");w&&(n.has(w)||(n.add(w),t.push({_id:w,id:w,code:String(null!==(d=null!==(c=null!==(u=null!==(h=null!==(p=e.code)&&void 0!==p?p:e.DIVISION_CODE)&&void 0!==h?h:e.hie_code)&&void 0!==u?u:e._id)&&void 0!==c?c:e.id)&&void 0!==d?d:w),name:null!==(f=null!==(m=null!==(g=null!==(v=e.name)&&void 0!==v?v:e.DIVISION_NAME)&&void 0!==g?g:e.hie_name)&&void 0!==m?m:e.hie_relationship)&&void 0!==f?f:"Unknown Division",hie_code:null!==(x=e.hie_code)&&void 0!==x?x:e.code,hie_name:null!==(b=e.hie_name)&&void 0!==b?b:e.name,def_level:null!==(y=e.def_level)&&void 0!==y?y:e.DEF_LEVEL,hie_relationship:e.hie_relationship,isActive:null===(S=null!==(j=e.isActive)&&void 0!==j?j:e.active)||void 0===S||S})))}),t.sort((e,t)=>e.name.localeCompare(t.name))}(n);console.log(`\u2705 Loaded ${i.length} divisions from MySQL data`),C(i)}else console.error("Failed to fetch divisions:",t.status),C([])}catch(e){console.error("Error fetching divisions:",e),C([])}},Ae=async()=>{try{const e=localStorage.getItem("token");console.log("\ud83d\udce5 Fetching sections from MySQL data...");const t=await fetch(`${l}/mysql-data/sections`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json();let n=[];Array.isArray(e)?n=e:e.data&&Array.isArray(e.data)?n=e.data:e.sections&&Array.isArray(e.sections)&&(n=e.sections);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[],n=new Set;return e.forEach(e=>{var i,s,o,a,r,l,d,c,u,h,p,f,m,g,v,x,b,y,S,j,w,_,N,k,C,E,I,D;const A=String(null!==(i=null!==(s=null!==(o=null!==(a=null!==(r=null!==(l=null!==(d=e._id)&&void 0!==d?d:e.id)&&void 0!==l?l:e.SECTION_ID)&&void 0!==r?r:e.code)&&void 0!==a?a:e.hie_code)&&void 0!==o?o:e.SECTION_CODE)&&void 0!==s?s:e.section_code)&&void 0!==i?i:"");if(!A)return;if(n.has(A))return;n.add(A);const T=String(null!==(c=null!==(u=null!==(h=null!==(p=null!==(f=null!==(m=e.division_code)&&void 0!==m?m:e.division_id)&&void 0!==f?f:e.DIVISION_ID)&&void 0!==p?p:e.division_code)&&void 0!==h?h:e.DIVISION_CODE)&&void 0!==u?u:e.hie_relationship)&&void 0!==c?c:"");t.push({_id:A,id:A,code:String(null!==(g=null!==(v=null!==(x=null!==(b=e.code)&&void 0!==b?b:e.SECTION_CODE)&&void 0!==x?x:e.hie_code)&&void 0!==v?v:e.section_code)&&void 0!==g?g:A),name:null!==(y=null!==(S=null!==(j=null!==(w=e.name)&&void 0!==w?w:e.section_name)&&void 0!==j?j:e.SECTION_NAME)&&void 0!==S?S:e.hie_relationship)&&void 0!==y?y:`Section ${A}`,division_code:T||"",division_id:T||"",divisionId:T||"",DIVISION_ID:T||"",divisionCode:String(null!==(_=null!==(N=e.division_code)&&void 0!==N?N:e.DIVISION_CODE)&&void 0!==_?_:""),divisionName:null!==(k=null!==(C=e.division_name)&&void 0!==C?C:e.DIVISION_NAME)&&void 0!==k?k:"",def_level:null!==(E=e.def_level)&&void 0!==E?E:e.DEF_LEVEL,isActive:null===(I=null!==(D=e.isActive)&&void 0!==D?D:e.active)||void 0===I||I})}),t.sort((e,t)=>e.name.localeCompare(t.name))}(n);console.log(`\u2705 Loaded ${i.length} sections from MySQL data`),console.log("Sample sections with division_id:",i.slice(0,3).map(e=>({id:e.id,name:e.name,divisionId:e.divisionId,divisionCode:e.divisionCode}))),A(i)}else console.error("Failed to fetch sections:",t.status),A([])}catch(e){console.error("Error fetching sections:",e),A([])}},Re=async e=>{try{const t=localStorage.getItem("token");let n=e;"string"===typeof e&&e.startsWith("mysql_sec_")&&(n=e.replace("mysql_sec_","")),console.log(`\ud83d\udce5 Fetching sub sections for section: ${e} (clean: ${n})`);const i=await fetch(`${l}/mysql-subsections?sectionId=${encodeURIComponent(n)}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(i.ok){const t=await i.json();let n=[];Array.isArray(t)?n=t:t.data&&Array.isArray(t.data)&&(n=t.data),console.log(`\u2705 Loaded ${n.length} sub sections for section ${e}`),M(n)}else console.error("Failed to fetch sub sections:",i.status),M([])}catch(t){console.error("Error fetching sub sections:",t),M([])}},Oe=()=>{le&&le.data&&0!==le.data.length?"attendance"!==h||Ne?"audit"===h?window.print():"group"===f?ve.current&&"function"===typeof ve.current.print?ve.current.print():alert("Group report print not available."):xe.current&&"function"===typeof xe.current.print?xe.current.print():alert("Individual report print not available."):ue("You do not have permission to download/print attendance reports"):alert("No data to print. Please generate a report first.")},Pe=()=>"meal"===h?["Emp No","Emp Name","Division","Section","Date","Meal Packet","Meal Money"]:("group"===f&&(null===le||void 0===le||le.reportType),["Emp No","Emp Name","Meal-Pkt-Mny","Punch Date","Punch Time","Function","Event Description"]),Le=e=>{if("meal"===h)return[e.employeeId||"",e.employeeName||"",e.division||"N/A",e.section||"N/A",e.date||"",e.mealPacket||"No",e.mealMoney||"No"];if("group"===f&&"group"===(null===le||void 0===le?void 0:le.reportType)){var t,n;const i=e.date_?new Date(e.date_):e.punchDate?new Date(e.punchDate):null,s=i&&!isNaN(i.getTime())?i.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"2-digit"}).replace(/\//g,"-")+" "+i.toLocaleDateString("en-US",{weekday:"short"}):e.punchDate||e.date_||"",o="IN"===(null===(t=e.scan_type)||void 0===t?void 0:t.toUpperCase())?"F1-0":"F4-0",a=("IN"===(null===(n=e.scan_type)||void 0===n?void 0:n.toUpperCase())?"ON":"OFF")+"Granted(ID & F tally plan COM0002)";return[e.employee_ID||e.employeeId||e.emp_no||e.empNo||"",e.employee_name||e.employeeName||e.name||"Unknown","I",s,Se(e.time_||e.time||e.punchTime||""),o,a]}{var i,s;const t=new Date(e.date_),n=t.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"2-digit"}).replace(/\//g,"-")+" "+t.toLocaleDateString("en-US",{weekday:"short"}),o="IN"===(null===(i=e.scan_type)||void 0===i?void 0:i.toUpperCase())?"F1-0":"F4-0",a=("IN"===(null===(s=e.scan_type)||void 0===s?void 0:s.toUpperCase())?"ON":"OFF")+"Granted(ID & F tally plan COM0002)";return[e.employee_ID||e.employeeId,e.employee_name||e.employeeName||"Unknown","I",n,Se(e.time_),o,a]}},ze=e=>{const t=(e=>{const t=e.getFullYear(),n=e.getMonth();return new Date(t,n+1,0).getDate()})(e),n=(e=>{const t=e.getFullYear(),n=e.getMonth();return new Date(t,n,1).getDay()})(e),i=[];for(let s=0;s<n;s++)i.push(null);for(let s=1;s<=t;s++)i.push(s);return i},Fe=(e,t)=>{if(!e)return;const n=t.getFullYear(),i=t.getMonth();if(!G.startDate||"start"===U){let t;t="month"===X?new Date(n,i,1):"year"===X?new Date(n,0,1):new Date(n,i,e);const s=d(t);return J({startDate:s,endDate:s}),L(new Date(t.getFullYear(),t.getMonth(),1)),void W("end")}if("end"===U){let t;t="month"===ee?new Date(n,i+1,0):"year"===ee?new Date(n,11,31):new Date(n,i,e);const s=d(t);s<G.startDate?J({startDate:s,endDate:G.startDate}):s===G.startDate?J({startDate:s,endDate:s}):J({...G,endDate:s}),F(new Date(t.getFullYear(),t.getMonth(),1)),W("start")}};return(0,_e.jsxs)("div",{className:"report-generation",children:[(0,_e.jsx)("div",{className:"report-header",children:(0,_e.jsx)("div",{className:"header-content header-no-subtitle",children:(0,_e.jsxs)("h1",{children:[(0,_e.jsx)("i",{className:"bi bi-graph-up-arrow"}),"Report Generation Center"]})})}),(0,_e.jsx)("div",{className:"report-form-container",children:(0,_e.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),ue(""),Ie(h))if(G.startDate&&G.endDate)if("meal"===h||"individual"!==f||y){re(!0);try{const e=localStorage.getItem("token");let d,c,u="",p={};if("attendance"===h){if(u="http://localhost:5000/api/reports/mysql/attendance",p={report_type:f,from_date:G.startDate,to_date:G.endDate,time_period:g,grouping:x},"individual"===f)p.employee_id=y;else if("group"===f){if("all"!==R&&"all"!==_){const e=T.find(e=>(e._id||e.id||e.sub_section_id)===R);var t,n;if(e)p.sub_section_id=e.sub_section_id||e.id||e._id||R,p.section_id="",p.division_id="",console.log("Selected sub section details:",{sub_section_db_id:p.sub_section_id,sub_section_name:(null===(t=e.subSection)||void 0===t?void 0:t.sub_hie_name)||(null===(n=e.subSection)||void 0===n?void 0:n.name)||e.sub_name||e.sub_code||e.sub_section_name||e.name||"",full_sub_section:e})}else if("all"!==_){const e=E.find(e=>(e._id||e.id||e.section_id||e.code)===_);e&&(p.section_id=e.code||e.hie_code||e.section_code||e.section_id||e.id||"",p.division_id=e.divisionCode||e.division_code||e.division_id||e.divisionId||"",console.log("\ud83c\udfaf Selected section details:",{section_id:_,section_code:p.section_id,division_code:p.division_id,full_section:e}))}else if("all"!==j){const e=k.find(e=>(e._id||e.id)===j);e&&(p.division_id=e.code||e.hie_code||e.division_id||e.id||"",p.section_id="",console.log("\ud83c\udfaf Selected division with all sections:",{division_id:j,division_code:p.division_id,section_filter:"All Sections",full_division:e}))}else p.division_id="",p.section_id="";console.log("Sending group report filters:",{division_name:p.division_id,section_name:p.section_id,sub_section_id:p.sub_section_id});const i=await(async(e,t)=>{try{let n="";if(e.sub_section_id?n=`${l}/mysql-subsections/transferred/${encodeURIComponent(e.sub_section_id)}`:e.section_id?n=`${l}/mysql-data/employees?sectionCode=${encodeURIComponent(e.section_id)}&limit=1000`:e.division_id&&(n=`${l}/mysql-data/employees?divisionCode=${encodeURIComponent(e.division_id)}&limit=1000`),!n)return null;const i=await fetch(n,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!i.ok)return null;const s=await i.json();let o=[];return Array.isArray(s)?o=s:s.data&&Array.isArray(s.data)?o=s.data:s.data&&s.data.data&&Array.isArray(s.data.data)&&(o=s.data.data),o}catch(n){return console.warn("Error fetching filtered employees preview:",n),null}})(p,e);if(Array.isArray(i)){if(console.log(`\u2705 Found ${i.length} employees matching filters`),0===i.length)return ue("No employees found for selected filters. Please check your division/section/sub-section selection."),void re(!1);p.preview_employee_count=i.length}else console.warn("Failed to verify filtered employees (preview unavailable)")}}else if("audit"===h){if(u="http://localhost:5000/api/reports/mysql/audit",p={from_date:G.startDate,to_date:G.endDate,time_period:g,grouping:x},"all"!==R&&"all"!==_){const e=T.find(e=>(e._id||e.id)===R);var i,s,o,a;if(e)p.sub_section_id=R,p.section_id=(null===(i=e.parentSection)||void 0===i?void 0:i.hie_name)||e.section_name||"",p.division_id=(null===(s=e.parentDivision)||void 0===s?void 0:s.division_name)||e.division_name||"",console.log("\ud83d\udd0d Audit sub section filter:",{sub_section_db_id:R,sub_section_name:(null===(o=e.subSection)||void 0===o?void 0:o.sub_hie_name)||(null===(a=e.subSection)||void 0===a?void 0:a.name)||e.sub_name||e.sub_code||"",section_id:p.section_id,division_id:p.division_id,selectedSubSection:e})}else if("all"!==_){const e=E.find(e=>(e._id||e.id||e.section_id)===_);e&&(p.section_id=e.name||e.section_name||"",p.division_id=e.divisionName||e.division_name||"",console.log("\ud83d\udd0d Audit section filter:",{section_id:p.section_id,division_id:p.division_id,selectedSection:e}))}else if("all"!==j){const e=k.find(e=>(e._id||e.id)===j);e&&(p.division_id=e.hie_name||e.name||"",console.log("\ud83d\udd0d Audit division filter:",{division_id:p.division_id,selectedDivision:e})),p.section_id=""}else p.division_id="",p.section_id="";console.log("Sending audit report filters:",{division_name:p.division_id,section_name:p.section_id})}else if("meal"===h){if(u="http://localhost:5000/api/reports/mysql/meal",p={from_date:G.startDate,to_date:G.endDate,division_id:"",section_id:"",sub_section_id:""},j&&"all"!==j){const e=k.find(e=>(e._id||e.id)===j);e&&(p.division_id=e.hie_name||e.name||"")}if(_&&"all"!==_){const e=E.find(e=>(e._id||e.id)===_);e&&(p.section_id=e.hie_name||e.name||"")}R&&"all"!==R&&(p.sub_section_id=R),console.log("\ud83c\udf7d\ufe0f Meal Report Payload (Group Scope):",p)}"attendance"===h||"audit"===h||"meal"===h?(console.log("\ud83d\udce4 Sending request to:",u),console.log("\ud83d\udce4 Request payload:",JSON.stringify(p,null,2)),d=await fetch(u,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(p)})):d=await fetch(u,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});try{c=await d.json(),console.log("\ud83d\udce5 Response status:",d.status),console.log("\ud83d\udce5 Response data:",JSON.stringify(c,null,2))}catch(r){return console.error("\u274c JSON parse error:",r),ue("Invalid response from server."),void de(null)}if(!d.ok)return console.error("\u274c Response not OK:",d.status,c.message),ue(c.message||`HTTP error! status: ${d.status}`),void de(null);const m=Array.isArray(c.data)?c.data:Array.isArray(c)?c:[];if(console.log("\ud83d\udcca Report array length:",m.length),console.log("\ud83d\udcca Data success flag:",c.success),console.log("\ud83d\udcca Sample data (first 2 items):",m.slice(0,2)),c.success&&m.length>0||!c.hasOwnProperty("success")&&m.length>0){console.log("\u2705 Report generated successfully with",m.length,"records");const e={...c,data:m};"group"===f&&"group"===c.reportType&&(e.reportType="group",e.employees=m),de(e),c.employee_info&&pe(c.employee_info),ue(""),$(!0)}else 0===m.length?(console.warn("\u26a0\ufe0f No records found in response"),console.log("Response details:",{success:c.success,message:c.message,summary:c.summary,employees:c.employees}),ue("No records found for the selected criteria."),de({...c,data:[]})):(console.error("\u274c Report generation failed:",c.message),ue(c.message||"Failed to generate report"),de(null))}catch(d){console.error("Error generating report:",d),ue(d.message||"Failed to generate report. Please try again."),de(null)}finally{re(!1)}}else ue("Please enter an employee ID for individual reports");else ue("Please select both start and end dates");else ue("You do not have permission to generate this type of report")},className:"config-form",children:[(0,_e.jsxs)("div",{className:"simple-form-layout",children:[(0,_e.jsx)("div",{className:"form-section-group",children:(0,_e.jsxs)("div",{className:"form-row",children:[(0,_e.jsxs)("div",{className:"form-field",children:[(0,_e.jsxs)("label",{htmlFor:"reportType",children:[(0,_e.jsx)("i",{className:"bi bi-file-earmark-text"}),"Report Type"]}),(0,_e.jsxs)("select",{id:"reportType",value:h,onChange:e=>p(e.target.value),className:"form-control",children:[Ie("attendance")&&(0,_e.jsx)("option",{value:"attendance",children:"Attendance Report"}),Ie("audit")&&(0,_e.jsx)("option",{value:"audit",children:"Audit Report"}),Ie("meal")&&(0,_e.jsx)("option",{value:"meal",children:"Meal Report"})]})]}),(0,_e.jsxs)("div",{className:"form-field",children:[(0,_e.jsxs)("label",{htmlFor:"reportScope",children:[(0,_e.jsx)("i",{className:"bi bi-people"}),"Report Scope"]}),(0,_e.jsxs)("select",{id:"reportScope",value:f,onChange:e=>m(e.target.value),className:"form-control",disabled:"audit"===h,children:[(0,_e.jsx)("option",{value:"individual",children:"Individual Report"}),(0,_e.jsx)("option",{value:"group",children:"Group Report"})]})]})]})}),(0,_e.jsxs)("div",{className:"form-section-group",children:["individual"===f&&"meal"!==h&&(0,_e.jsx)("div",{className:"form-row",children:(0,_e.jsxs)("div",{className:"form-field full-width",children:[(0,_e.jsxs)("label",{htmlFor:"employeeId",children:[(0,_e.jsx)("i",{className:"bi bi-person-badge"}),r("employeeIdLabel")]}),(0,_e.jsx)("input",{type:"text",id:"employeeId",value:y,onChange:e=>S(e.target.value),className:"form-control",placeholder:r("enterEmployeeId"),required:"individual"===f})]})}),"individual"!==f&&(0,_e.jsxs)("div",{className:"form-row",children:[(0,_e.jsxs)("div",{className:"form-field",children:[(0,_e.jsxs)("label",{htmlFor:"divisionId",children:[(0,_e.jsx)("i",{className:"bi bi-building"}),r("divisionLabel")]}),(0,_e.jsxs)("select",{id:"divisionId",value:j,onChange:e=>w(e.target.value),className:"form-control",children:[(0,_e.jsx)("option",{value:"all",children:r("allDivisionsLabel")}),(Array.isArray(k)?k:[]).map(e=>(0,_e.jsx)("option",{value:e._id||e.id,children:e.name||e.division_name},e._id||e.id))]})]}),(0,_e.jsxs)("div",{className:"form-field",children:[(0,_e.jsxs)("label",{htmlFor:"sectionId",children:[(0,_e.jsx)("i",{className:"bi bi-diagram-3"}),r("sectionLabel")]}),(0,_e.jsxs)("select",{id:"sectionId",value:_,onChange:e=>N(e.target.value),className:"form-control",disabled:"all"===j,children:[(0,_e.jsx)("option",{value:"all",children:r("allSectionsLabel")}),"all"!==j&&(Array.isArray(E)?E:[]).map(e=>(0,_e.jsx)("option",{value:e._id||e.id,children:e.name||e.section_name},e._id||e.id))]})]}),(0,_e.jsxs)("div",{className:"form-field",children:[(0,_e.jsxs)("label",{htmlFor:"subSectionId",children:[(0,_e.jsx)("i",{className:"bi bi-diagram-2"}),r("subSectionLabel")]}),(0,_e.jsxs)("select",{id:"subSectionId",value:R,onChange:e=>O(e.target.value),className:"form-control",disabled:"all"===_||"all"===j,children:[(0,_e.jsx)("option",{value:"all",children:r("allSubSectionsLabel")}),"all"!==_&&"all"!==j&&(Array.isArray(T)?T:[]).map(e=>{var t,n,i;const s=(null===(t=e.subSection)||void 0===t?void 0:t.sub_hie_name)||(null===(n=e.subSection)||void 0===n?void 0:n.name)||(null===(i=e.subSection)||void 0===i?void 0:i.hie_name)||e.sub_name||e.sub_hie_name||e.sub_section_name||e.sub_code||"Unnamed";return(0,_e.jsx)("option",{value:e._id||e.id,children:s},e._id||e.id)})]})]})]}),"group"===f&&"attendance"!==h&&"meal"!==h&&(0,_e.jsxs)("div",{className:"form-row",children:[(0,_e.jsxs)("div",{className:"form-field",children:[(0,_e.jsxs)("label",{htmlFor:"reportGrouping",children:[(0,_e.jsx)("i",{className:"bi bi-collection"}),"Group By"]}),(0,_e.jsxs)("select",{id:"reportGrouping",value:x,onChange:e=>b(e.target.value),className:"form-control",children:[(0,_e.jsx)("option",{value:"none",children:"None"}),(0,_e.jsx)("option",{value:"designation",children:"Designation Wise"}),(0,_e.jsx)("option",{value:"punch",children:"F1-0 (Punch Type)"})]})]}),"designation"!==x&&(0,_e.jsxs)("div",{className:"form-field",children:[(0,_e.jsxs)("label",{htmlFor:"timePeriod",children:[(0,_e.jsx)("i",{className:"bi bi-calendar-range"}),"Time Period"]}),(0,_e.jsxs)("select",{id:"timePeriod",value:g,onChange:e=>v(e.target.value),className:"form-control",children:[(0,_e.jsx)("option",{value:"none",children:"None"}),(0,_e.jsx)("option",{value:"daily",children:"Daily"}),(0,_e.jsx)("option",{value:"weekly",children:"Weekly"}),(0,_e.jsx)("option",{value:"monthly",children:"Monthly"}),(0,_e.jsx)("option",{value:"annually",children:"Annually"})]})]})]})]}),"designation"!==x&&(0,_e.jsx)("div",{className:"form-section-group date-range-section",children:(0,_e.jsxs)("div",{style:{padding:"20px",background:"#fff",borderRadius:"10px",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0,0,0,0.06)"},children:[(0,_e.jsxs)("div",{style:{marginBottom:20,display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:16},children:[(0,_e.jsx)("h3",{style:{margin:0,fontSize:16,fontWeight:600,color:"#334155"},children:"Select Dates"}),(0,_e.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[(0,_e.jsxs)("div",{children:[(0,_e.jsx)("label",{style:{display:"block",fontSize:12,fontWeight:500,color:"#64748b",marginBottom:4},children:"From"}),(0,_e.jsx)("input",{type:"date",value:G.startDate,onChange:e=>J(t=>({...t,startDate:e.target.value})),style:{padding:"8px 10px",borderRadius:6,border:"1px solid #e2e8f0",fontSize:14,background:"#fff"}})]}),(0,_e.jsxs)("div",{children:[(0,_e.jsx)("label",{style:{display:"block",fontSize:12,fontWeight:500,color:"#64748b",marginBottom:4},children:"To"}),(0,_e.jsx)("input",{type:"date",value:G.endDate,onChange:e=>J(t=>({...t,endDate:e.target.value})),style:{padding:"8px 10px",borderRadius:6,border:"1px solid #e2e8f0",fontSize:14,background:"#fff"}})]})]})]}),(0,_e.jsxs)("div",{style:{display:"flex",gap:20},children:[(0,_e.jsx)("div",{style:{minWidth:120,borderRight:"1px solid #e2e8f0",paddingRight:16},children:[{label:"Custom",action:()=>{}},{label:"Today",action:()=>{const e=d(new Date);J({startDate:e,endDate:e})}},{label:"Yesterday",action:()=>{const e=new Date;e.setDate(e.getDate()-1);const t=d(e);J({startDate:t,endDate:t})}},{label:"This Week",action:()=>{const e=new Date,t=e.getDate()-e.getDay(),n=new Date(e.setDate(t));J({startDate:d(n),endDate:d(new Date)})}},{label:"Last Week",action:()=>{const e=new Date,t=e.getDate()-e.getDay()-7,n=new Date(e.setDate(t)),i=new Date(e.setDate(t+6));J({startDate:d(n),endDate:d(i)})}},{label:"This Month",action:()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0);J({startDate:d(t),endDate:d(n)})}},{label:"Last Month",action:()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth()-1,1),n=new Date(e.getFullYear(),e.getMonth(),0);J({startDate:d(t),endDate:d(n)})}},{label:"This Year",action:()=>{const e=(new Date).getFullYear();J({startDate:`${e}-01-01`,endDate:`${e}-12-31`})}},{label:"Last Year",action:()=>{const e=(new Date).getFullYear()-1;J({startDate:`${e}-01-01`,endDate:`${e}-12-31`})}}].map((e,t)=>(0,_e.jsx)("button",{type:"button",onClick:e.action,style:{display:"block",width:"100%",padding:"8px 12px",marginBottom:4,textAlign:"left",background:0===t?"#f0f9ff":"transparent",border:"none",borderRadius:6,fontSize:14,fontWeight:0===t?600:500,color:"#334155",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="#f0f9ff",onMouseLeave:e=>e.currentTarget.style.background=0===t?"#f0f9ff":"transparent",children:e.label},t))}),(0,_e.jsxs)("div",{style:{flex:1,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:20},children:[(0,_e.jsxs)("div",{children:[(0,_e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[(0,_e.jsx)("button",{type:"button",onClick:()=>L(new Date(P.setMonth(P.getMonth()-1))),style:{border:"none",background:"transparent",cursor:"pointer",fontSize:18},children:"\u2039"}),(0,_e.jsx)("span",{style:{fontSize:14,fontWeight:600,color:"#334155"},children:P.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,_e.jsx)("button",{type:"button",onClick:()=>L(new Date(P.setMonth(P.getMonth()+1))),style:{border:"none",background:"transparent",cursor:"pointer",fontSize:18},children:"\u203a"})]}),(0,_e.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:4,textAlign:"center"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,_e.jsx)("div",{style:{fontSize:11,fontWeight:600,color:"#64748b",padding:"4px 0"},children:e},e)),ze(P).map((e,t)=>{const n=e?d(new Date(P.getFullYear(),P.getMonth(),e)):null,i=n&&(G.startDate===n||G.endDate===n),s=n&&G.startDate&&G.endDate&&n>=G.startDate&&n<=G.endDate;return(0,_e.jsx)("div",{onClick:()=>e&&Fe(e,P),style:{padding:"6px",borderRadius:6,fontSize:13,cursor:e?"pointer":"default",background:i?"#0ea5e9":s?"#e0f2fe":"transparent",color:i?"#fff":e?"#334155":"#cbd5e1",fontWeight:i?600:400},children:e||""},t)})]})]}),(0,_e.jsxs)("div",{children:[(0,_e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[(0,_e.jsx)("button",{type:"button",onClick:()=>F(new Date(z.setMonth(z.getMonth()-1))),style:{border:"none",background:"transparent",cursor:"pointer",fontSize:18},children:"\u2039"}),(0,_e.jsx)("span",{style:{fontSize:14,fontWeight:600,color:"#334155"},children:z.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,_e.jsx)("button",{type:"button",onClick:()=>F(new Date(z.setMonth(z.getMonth()+1))),style:{border:"none",background:"transparent",cursor:"pointer",fontSize:18},children:"\u203a"})]}),(0,_e.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:4,textAlign:"center"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,_e.jsx)("div",{style:{fontSize:11,fontWeight:600,color:"#64748b",padding:"4px 0"},children:e},e)),ze(z).map((e,t)=>{const n=e?d(new Date(z.getFullYear(),z.getMonth(),e)):null,i=n&&(G.startDate===n||G.endDate===n),s=n&&G.startDate&&G.endDate&&n>=G.startDate&&n<=G.endDate;return(0,_e.jsx)("div",{onClick:()=>e&&Fe(e,z),style:{padding:"6px",borderRadius:6,fontSize:13,cursor:e?"pointer":"default",background:i?"#0ea5e9":s?"#e0f2fe":"transparent",color:i?"#fff":e?"#334155":"#cbd5e1",fontWeight:i?600:400},children:e||""},t)})]})]})]})]}),(0,_e.jsxs)("div",{style:{marginTop:20,display:"flex",justifyContent:"flex-end",gap:12,paddingTop:16,borderTop:"1px solid #e2e8f0"},children:[(0,_e.jsx)("button",{type:"button",onClick:()=>J({startDate:"",endDate:""}),style:{padding:"8px 20px",borderRadius:6,border:"1px solid #e2e8f0",background:"#fff",fontSize:14,fontWeight:500,cursor:"pointer",color:"#334155"},children:"Cancel"}),(0,_e.jsx)("button",{type:"submit",disabled:ae||!Ie(h),style:{padding:"10px 24px",borderRadius:6,border:"none",background:ae?"#94a3b8":"#14b8a6",fontSize:14,fontWeight:600,cursor:ae?"not-allowed":"pointer",color:"#fff",display:"flex",alignItems:"center",gap:8},children:ae?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-hourglass-split spin"}),"Generating..."]}):(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-play-circle"}),"Apply and Generate"]})})]}),(0,_e.jsx)("input",{type:"hidden",id:"startDate",value:G.startDate,required:!0}),(0,_e.jsx)("input",{type:"hidden",id:"endDate",value:G.endDate,required:!0})]})}),(0,_e.jsxs)("div",{className:"dual-calendar-container",style:{display:"none",marginTop:"24px",gap:"24px",marginBottom:"20px",padding:"16px 20px",background:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0",flexWrap:"wrap",alignItems:"flex-end"},children:[(0,_e.jsxs)("div",{style:{flex:"1",minWidth:"220px"},children:[(0,_e.jsxs)("label",{style:{display:"block",fontSize:"13px",fontWeight:600,color:"#475569",marginBottom:"6px"},children:[(0,_e.jsx)("i",{className:"bi bi-calendar-event",style:{marginRight:"6px"}}),"Start Date"]}),(0,_e.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:6},children:[(0,_e.jsx)("button",{type:"button",className:"btn btn-sm "+("date"===X?"active":""),onClick:()=>Z("date"),style:{padding:"6px 10px",borderRadius:8,border:"date"===X?"2px solid #2563eb":"1px solid #e2e8f0",background:"date"===X?"#eef2ff":"#fff",cursor:"pointer"},children:"Date"}),(0,_e.jsx)("button",{type:"button",className:"btn btn-sm "+("month"===X?"active":""),onClick:()=>Z("month"),style:{padding:"6px 10px",borderRadius:8,border:"month"===X?"2px solid #2563eb":"1px solid #e2e8f0",background:"month"===X?"#eef2ff":"#fff",cursor:"pointer"},children:"Month"}),(0,_e.jsx)("button",{type:"button",className:"btn btn-sm "+("year"===X?"active":""),onClick:()=>Z("year"),style:{padding:"6px 10px",borderRadius:8,border:"year"===X?"2px solid #2563eb":"1px solid #e2e8f0",background:"year"===X?"#eef2ff":"#fff",cursor:"pointer"},children:"Year"})]}),(0,_e.jsxs)("div",{style:{fontSize:12,color:"#6b7280",marginBottom:8},children:["Choose how to select the Start value: ",(0,_e.jsx)("strong",{children:"Date"})," (exact day), ",(0,_e.jsx)("strong",{children:"Month"})," (entire month), or ",(0,_e.jsx)("strong",{children:"Year"})," (entire year)."]}),"date"===X&&(0,_e.jsx)("input",{type:"date",value:G.startDate,onChange:e=>J(t=>({...t,startDate:e.target.value})),style:{width:"100%",padding:"10px 14px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",fontWeight:500,color:"#1e293b",background:"#fff",cursor:"pointer"}}),"month"===X&&(0,_e.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,_e.jsxs)("select",{value:new Date(G.startDate||new Date).getMonth(),onChange:e=>{const t=parseInt(e.target.value,10),n=new Date(G.startDate||new Date).getFullYear(),i=new Date(n,t,1),s=d(i);L(i),J(e=>({...e,startDate:s,endDate:e.endDate&&e.endDate<s?s:e.endDate}))},style:{flex:1,padding:"10px 12px",borderRadius:"8px",border:"2px solid #e2e8f0",background:"#fff"},children:[(0,_e.jsx)("option",{value:0,children:"January"}),(0,_e.jsx)("option",{value:1,children:"February"}),(0,_e.jsx)("option",{value:2,children:"March"}),(0,_e.jsx)("option",{value:3,children:"April"}),(0,_e.jsx)("option",{value:4,children:"May"}),(0,_e.jsx)("option",{value:5,children:"June"}),(0,_e.jsx)("option",{value:6,children:"July"}),(0,_e.jsx)("option",{value:7,children:"August"}),(0,_e.jsx)("option",{value:8,children:"September"}),(0,_e.jsx)("option",{value:9,children:"October"}),(0,_e.jsx)("option",{value:10,children:"November"}),(0,_e.jsx)("option",{value:11,children:"December"})]}),(0,_e.jsx)("select",{value:new Date(G.startDate||new Date).getFullYear(),onChange:e=>{const t=parseInt(e.target.value,10),n=new Date(G.startDate||new Date).getMonth(),i=new Date(t,n,1),s=d(i);L(i),J(e=>({...e,startDate:s,endDate:e.endDate&&e.endDate<s?s:e.endDate}))},style:{width:"110px",padding:"10px 12px",borderRadius:"8px",border:"2px solid #e2e8f0",background:"#fff"},children:Array.from({length:10},(e,t)=>(new Date).getFullYear()-5+t).map(e=>(0,_e.jsx)("option",{value:e,children:e},e))})]}),"year"===X&&(0,_e.jsx)("select",{value:new Date(G.startDate||new Date).getFullYear(),onChange:e=>{const t=parseInt(e.target.value,10),n=new Date(t,0,1),i=d(n);J(e=>({...e,startDate:i,endDate:e.endDate&&e.endDate<i?i:e.endDate}))},style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"2px solid #e2e8f0",background:"#fff"},children:Array.from({length:10},(e,t)=>(new Date).getFullYear()-5+t).map(e=>(0,_e.jsx)("option",{value:e,children:e},e))})]}),(0,_e.jsxs)("div",{style:{flex:"1",minWidth:"220px"},children:[(0,_e.jsxs)("label",{style:{display:"block",fontSize:"13px",fontWeight:600,color:"#475569",marginBottom:"6px"},children:[(0,_e.jsx)("i",{className:"bi bi-calendar-event",style:{marginRight:"6px"}}),"End Date"]}),(0,_e.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:6},children:[(0,_e.jsx)("button",{type:"button",className:"btn btn-sm "+("date"===ee?"active":""),onClick:()=>te("date"),style:{padding:"6px 10px",borderRadius:8,border:"date"===ee?"2px solid #2563eb":"1px solid #e2e8f0",background:"date"===ee?"#eef2ff":"#fff",cursor:"pointer"},children:"Date"}),(0,_e.jsx)("button",{type:"button",className:"btn btn-sm "+("month"===ee?"active":""),onClick:()=>te("month"),style:{padding:"6px 10px",borderRadius:8,border:"month"===ee?"2px solid #2563eb":"1px solid #e2e8f0",background:"month"===ee?"#eef2ff":"#fff",cursor:"pointer"},children:"Month"}),(0,_e.jsx)("button",{type:"button",className:"btn btn-sm "+("year"===ee?"active":""),onClick:()=>te("year"),style:{padding:"6px 10px",borderRadius:8,border:"year"===ee?"2px solid #2563eb":"1px solid #e2e8f0",background:"year"===ee?"#eef2ff":"#fff",cursor:"pointer"},children:"Year"})]}),(0,_e.jsxs)("div",{style:{fontSize:12,color:"#6b7280",marginBottom:8},children:["Choose how to select the End value: ",(0,_e.jsx)("strong",{children:"Date"})," (exact day), ",(0,_e.jsx)("strong",{children:"Month"})," (entire month), or ",(0,_e.jsx)("strong",{children:"Year"})," (entire year)."]}),"date"===ee&&(0,_e.jsx)("input",{type:"date",value:G.endDate,onChange:e=>J(t=>({...t,endDate:e.target.value})),style:{width:"100%",padding:"10px 14px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",fontWeight:500,color:"#1e293b",background:"#fff",cursor:"pointer"}}),"month"===ee&&(0,_e.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,_e.jsxs)("select",{value:new Date(G.endDate||new Date).getMonth(),onChange:e=>{const t=parseInt(e.target.value,10),n=new Date(G.endDate||new Date).getFullYear(),i=new Date(n,t+1,0),s=d(i);F(i),J(e=>({...e,endDate:s,startDate:e.startDate&&e.startDate>s?s:e.startDate}))},style:{flex:1,padding:"10px 12px",borderRadius:"8px",border:"2px solid #e2e8f0",background:"#fff"},children:[(0,_e.jsx)("option",{value:0,children:"January"}),(0,_e.jsx)("option",{value:1,children:"February"}),(0,_e.jsx)("option",{value:2,children:"March"}),(0,_e.jsx)("option",{value:3,children:"April"}),(0,_e.jsx)("option",{value:4,children:"May"}),(0,_e.jsx)("option",{value:5,children:"June"}),(0,_e.jsx)("option",{value:6,children:"July"}),(0,_e.jsx)("option",{value:7,children:"August"}),(0,_e.jsx)("option",{value:8,children:"September"}),(0,_e.jsx)("option",{value:9,children:"October"}),(0,_e.jsx)("option",{value:10,children:"November"}),(0,_e.jsx)("option",{value:11,children:"December"})]}),(0,_e.jsx)("select",{value:new Date(G.endDate||new Date).getFullYear(),onChange:e=>{const t=parseInt(e.target.value,10),n=new Date(G.endDate||new Date).getMonth(),i=new Date(t,n+1,0),s=d(i);F(i),J(e=>({...e,endDate:s,startDate:e.startDate&&e.startDate>s?s:e.startDate}))},style:{width:"110px",padding:"10px 12px",borderRadius:"8px",border:"2px solid #e2e8f0",background:"#fff"},children:Array.from({length:10},(e,t)=>(new Date).getFullYear()-5+t).map(e=>(0,_e.jsx)("option",{value:e,children:e},e))})]}),"year"===ee&&(0,_e.jsx)("select",{value:new Date(G.endDate||new Date).getFullYear(),onChange:e=>{const t=parseInt(e.target.value,10),n=new Date(t,11,31);J(e=>({...e,endDate:d(n)}))},style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"2px solid #e2e8f0",background:"#fff"},children:Array.from({length:10},(e,t)=>(new Date).getFullYear()-5+t).map(e=>(0,_e.jsx)("option",{value:e,children:e},e))})]}),(0,_e.jsxs)("div",{style:{flex:"1",minWidth:"280px"},children:[(0,_e.jsxs)("label",{style:{display:"block",fontSize:"13px",fontWeight:600,color:"#475569",marginBottom:"6px"},children:[(0,_e.jsx)("i",{className:"bi bi-calendar-month",style:{marginRight:"6px"}}),"Quick Month/Year"]}),(0,_e.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,_e.jsxs)("select",{value:new Date(G.startDate||new Date).getMonth(),onChange:e=>{const t=parseInt(e.target.value),n=new Date(G.startDate||new Date).getFullYear(),i=new Date(n,t,1),s=new Date(n,t+1,0);J({startDate:i.toISOString().split("T")[0],endDate:s.toISOString().split("T")[0]})},style:{flex:"1",padding:"10px 12px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",fontWeight:500,color:"#1e293b",background:"#fff",cursor:"pointer"},children:[(0,_e.jsx)("option",{value:0,children:"January"}),(0,_e.jsx)("option",{value:1,children:"February"}),(0,_e.jsx)("option",{value:2,children:"March"}),(0,_e.jsx)("option",{value:3,children:"April"}),(0,_e.jsx)("option",{value:4,children:"May"}),(0,_e.jsx)("option",{value:5,children:"June"}),(0,_e.jsx)("option",{value:6,children:"July"}),(0,_e.jsx)("option",{value:7,children:"August"}),(0,_e.jsx)("option",{value:8,children:"September"}),(0,_e.jsx)("option",{value:9,children:"October"}),(0,_e.jsx)("option",{value:10,children:"November"}),(0,_e.jsx)("option",{value:11,children:"December"})]}),(0,_e.jsx)("select",{value:new Date(G.startDate||new Date).getFullYear(),onChange:e=>{const t=parseInt(e.target.value),n=new Date(G.startDate||new Date).getMonth(),i=new Date(t,n,1),s=new Date(t,n+1,0);J({startDate:i.toISOString().split("T")[0],endDate:s.toISOString().split("T")[0]})},style:{width:"100px",padding:"10px 12px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",fontWeight:500,color:"#1e293b",background:"#fff",cursor:"pointer"},children:Array.from({length:10},(e,t)=>(new Date).getFullYear()-5+t).map(e=>(0,_e.jsx)("option",{value:e,children:e},e))})]})]})]}),(0,_e.jsx)("input",{type:"hidden",id:"startDate",value:G.startDate,required:!0}),(0,_e.jsx)("input",{type:"hidden",id:"endDate",value:G.endDate,required:!0})]}),(0,_e.jsx)("div",{className:"form-actions",style:{marginTop:"2rem",display:"none",justifyContent:"center"},children:(0,_e.jsx)("button",{type:"submit",disabled:ae||!Ie(h),className:"btn btn-primary btn-generate",children:ae?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-hourglass-split spin"}),"Generating..."]}):(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-play-circle"}),"Generate Report"]})})}),(0,_e.jsx)("div",{style:{display:"none"},children:(0,_e.jsxs)("div",{className:"form-grid",style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",gap:"16px",alignItems:"end"},children:[(0,_e.jsxs)("div",{className:"form-group",children:[(0,_e.jsxs)("label",{htmlFor:"reportType-old",children:[(0,_e.jsx)("i",{className:"bi bi-file-earmark-text"}),r("reportTypeLabel")]}),(0,_e.jsxs)("select",{id:"reportType-old",value:h,onChange:e=>p(e.target.value),className:"form-control",children:[(0,_e.jsx)("option",{value:"attendance",children:r("attendanceReport")}),(0,_e.jsx)("option",{value:"audit",children:r("auditReport")})]})]}),(0,_e.jsxs)("div",{className:"form-group",children:[(0,_e.jsxs)("label",{htmlFor:"reportScope",children:[(0,_e.jsx)("i",{className:"bi bi-people"}),r("reportScopeLabel")]}),(0,_e.jsxs)("select",{id:"reportScope",value:f,onChange:e=>m(e.target.value),className:"form-control",disabled:"audit"===h,title:"audit"===h?r("auditReport")+" "+r("groupReport"):r("reportScopeLabel"),children:[(0,_e.jsx)("option",{value:"individual",children:r("individualReport")}),(0,_e.jsx)("option",{value:"group",children:r("groupReport")})]})]}),"group"===f&&"attendance"!==h&&"meal"!==h&&(0,_e.jsxs)("div",{className:"form-group",children:[(0,_e.jsxs)("label",{htmlFor:"reportGrouping",children:[(0,_e.jsx)("i",{className:"bi bi-collection"}),"Group By"]}),(0,_e.jsxs)("select",{id:"reportGrouping",value:x,onChange:e=>b(e.target.value),className:"form-control",children:[(0,_e.jsx)("option",{value:"none",children:"None"}),(0,_e.jsx)("option",{value:"designation",children:"Designation Wise"}),(0,_e.jsx)("option",{value:"punch",children:"F1-0 (Punch Type)"})]})]}),"individual"===f&&"meal"!==h&&(0,_e.jsxs)("div",{className:"form-group",style:{gridColumn:"span 1"},children:[(0,_e.jsxs)("label",{htmlFor:"employeeId",children:[(0,_e.jsx)("i",{className:"bi bi-person-badge"}),r("employeeIdLabel")]}),(0,_e.jsx)("input",{type:"text",id:"employeeId",value:y,onChange:e=>S(e.target.value),className:"form-control",placeholder:r("enterEmployeeId"),required:"individual"===f,title:r("enterEmployeeId")})]}),("group"===f||"meal"===h)&&(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsxs)("div",{className:"form-group",style:{gridColumn:"span 1"},children:[(0,_e.jsxs)("label",{htmlFor:"divisionId",children:[(0,_e.jsx)("i",{className:"bi bi-building"}),r("divisionLabel")]}),(0,_e.jsxs)("select",{id:"divisionId",value:j,onChange:e=>w(e.target.value),className:"form-control",disabled:"individual"===f&&"meal"!==h,style:{cursor:"individual"===f&&"meal"!==h?"not-allowed":"pointer"},children:[(0,_e.jsx)("option",{value:"all",children:r("allDivisionsLabel")}),(Array.isArray(k)?k:[]).map(e=>(0,_e.jsx)("option",{value:e._id||e.id,children:e.name||e.division_name},e._id||e.id))]})]}),(0,_e.jsxs)("div",{className:"form-group",style:{gridColumn:"span 1"},children:[(0,_e.jsxs)("label",{htmlFor:"sectionId",children:[(0,_e.jsx)("i",{className:"bi bi-diagram-3"}),r("sectionLabel")]}),(0,_e.jsxs)("select",{id:"sectionId",value:_,onChange:e=>N(e.target.value),className:"form-control",disabled:"meal"!==h&&("individual"===f||"all"===j),style:{cursor:"meal"===h?"pointer":"individual"===f||"all"===j?"not-allowed":"pointer"},title:"meal"===h?"Select a section":"all"===j?"All Divisions selected - Section must be All":"Select a section",children:[(0,_e.jsx)("option",{value:"all",children:r("allSectionsLabel")}),("meal"===h||"all"!==j)&&(Array.isArray(E)?E:[]).map(e=>(0,_e.jsx)("option",{value:e._id||e.id,children:e.name||e.section_name},e._id||e.id))]})]}),(0,_e.jsxs)("div",{className:"form-group",style:{gridColumn:"span 1"},children:[(0,_e.jsxs)("label",{htmlFor:"subSectionId",children:[(0,_e.jsx)("i",{className:"bi bi-diagram-2"}),r("subSectionLabel")]}),(0,_e.jsxs)("select",{id:"subSectionId",value:R,onChange:e=>O(e.target.value),className:"form-control",disabled:"meal"!==h&&("group"!==f||"all"===_||"all"===j),style:{cursor:"meal"===h?"pointer":"group"!==f||"all"===_||"all"===j?"not-allowed":"pointer"},title:"meal"===h?"Select a sub section (optional)":"all"===j?"All Divisions selected - Sub Section must be All":"all"===_?"Please select a section first":"Select a sub section",children:[(0,_e.jsx)("option",{value:"all",children:r("all"===j?"allSubSectionsLabel":"all"===_?"selectSectionFirst":"allSubSectionsLabel")}),("meal"===h||"all"!==_&&"all"!==j)&&(Array.isArray(T)?T:[]).map(e=>{var t,n,i,s,o;return(0,_e.jsx)("option",{value:e._id||e.id,children:(null===(t=e.subSection)||void 0===t?void 0:t.sub_hie_name)||(null===(n=e.subSection)||void 0===n?void 0:n.name)||(null===(i=e.subSection)||void 0===i?void 0:i.hie_name)||(null===(s=e.subSection)||void 0===s?void 0:s.sub_hie_code)||(null===(o=e.subSection)||void 0===o?void 0:o.code)||"Unnamed"},e._id||e.id)})]})]}),"designation"!==x&&"attendance"!==h&&"meal"!==h&&(0,_e.jsxs)("div",{className:"form-group",style:{gridColumn:"span 1"},children:[(0,_e.jsxs)("label",{htmlFor:"timePeriod",children:[(0,_e.jsx)("i",{className:"bi bi-calendar-range"}),"Time Period"]}),(0,_e.jsxs)("select",{id:"timePeriod",value:g,onChange:e=>v(e.target.value),className:"form-control",children:[(0,_e.jsx)("option",{value:"none",children:"None"}),(0,_e.jsx)("option",{value:"daily",children:"Daily"}),(0,_e.jsx)("option",{value:"weekly",children:"Weekly"}),(0,_e.jsx)("option",{value:"monthly",children:"Monthly"}),(0,_e.jsx)("option",{value:"annually",children:"Annually"})]})]})]}),"designation"!==x&&(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsxs)("div",{className:"form-group",children:[(0,_e.jsxs)("label",{htmlFor:"startDate",children:[(0,_e.jsx)("i",{className:"bi bi-calendar3"}),"Start Date"]}),(0,_e.jsx)("input",{type:"date",id:"startDate",value:G.startDate,onChange:e=>J({...G,startDate:e.target.value}),className:"form-control",required:!0})]}),(0,_e.jsxs)("div",{className:"form-group",children:[(0,_e.jsxs)("label",{htmlFor:"endDate",children:[(0,_e.jsx)("i",{className:"bi bi-calendar3"}),"End Date"]}),(0,_e.jsx)("input",{type:"date",id:"endDate",value:G.endDate,onChange:e=>J({...G,endDate:e.target.value}),className:"form-control",required:!0})]})]})]})}),y&&he&&(0,_e.jsx)("div",{style:{margin:"24px 0",display:"flex",justifyContent:"center"},children:(0,_e.jsxs)("div",{style:{background:"#fff",border:"1px solid #e6eefc",padding:"12px 18px",borderRadius:10,boxShadow:"0 2px 8px rgba(102,126,234,0.06)",minWidth:360},children:[(0,_e.jsx)("div",{style:{fontWeight:700,marginBottom:6},children:he.FULLNAME||he.FULL_NAME||he.CALLING_NAME||he.name||he.employee_name||""}),(0,_e.jsxs)("div",{style:{display:"flex",gap:12,fontSize:14},children:[(0,_e.jsxs)("div",{children:["Emp No: ",(0,_e.jsx)("b",{children:he.EMP_NUMBER||he.employee_id||he.employeeId||he._id})]}),(0,_e.jsxs)("div",{children:["Division: ",(0,_e.jsx)("b",{children:he.DIVISION_NAME||(null===(e=he.division)||void 0===e?void 0:e.name)||""})]}),(0,_e.jsxs)("div",{children:["Section: ",(0,_e.jsx)("b",{children:he.SECTION_NAME||(null===(t=he.section)||void 0===t?void 0:t.name)||""})]})]})]})}),y&&!he&&le&&le.data&&0===le.data.length&&(0,_e.jsx)("div",{style:{margin:"8px 0 18px",display:"flex",justifyContent:"center"},children:(0,_e.jsx)("div",{style:{background:"#fff6f6",border:"1px solid #fde2e2",padding:"10px 14px",borderRadius:8,color:"#c53030",minWidth:360,textAlign:"center"},children:"No employee found with the entered ID."})})]})}),ce&&(0,_e.jsxs)("div",{className:"error-message",children:[(0,_e.jsx)("i",{className:"bi bi-exclamation-triangle"}),r("noDataFoundText")&&ce&&ce.includes("No records")?r("noDataFoundText"):ce]}),B&&le&&le.data&&le.data.length>0&&(0,_e.jsx)("div",{className:"report-modal-overlay",onClick:()=>$(!1),children:(0,_e.jsxs)("div",{className:"report-modal-content",onClick:e=>e.stopPropagation(),children:[(0,_e.jsx)("button",{className:"report-modal-close",onClick:()=>$(!1),children:(0,_e.jsx)("i",{className:"bi bi-x-lg"})}),(0,_e.jsxs)("div",{className:"report-results",children:[(0,_e.jsx)("div",{className:"results-header",children:(0,_e.jsxs)("div",{className:"filter-summary attractive-summary-card",style:{background:"#fff",border:"1px solid #e0e0e0",borderRadius:"8px",padding:"18px 28px 16px 28px",color:"#222",fontFamily:"Segoe UI, Arial, sans-serif",fontSize:"1.05rem",margin:"0 auto 18px auto",boxShadow:"0 2px 8px 0 rgba(80,80,120,0.06)",maxWidth:"98vw",fontWeight:500},children:[(0,_e.jsx)("div",{style:{fontWeight:800,fontSize:"1.25rem",marginBottom:10,letterSpacing:"0.2px"},children:"Report Filter Summary"}),(0,_e.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"32px 48px",marginBottom:6},children:[(0,_e.jsxs)("span",{children:["Type: ",(0,_e.jsx)("b",{children:"attendance"===h?"Attendance Report":"audit"===h?"Audit Report":"Meal Report"})]}),(0,_e.jsxs)("span",{children:["Scope: ",(0,_e.jsx)("b",{children:"group"===f?"Group":"Individual"})]}),"individual"===f&&(0,_e.jsxs)("span",{children:["Employee ID: ",(0,_e.jsx)("b",{children:y||he&&(he.employee_id||he.id)||"N/A"})]}),"group"===f&&(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsxs)("span",{children:["Division: ",(0,_e.jsx)("b",{children:"all"===j?"All":(null===(n=k.find(e=>e._id===j||e.id===j))||void 0===n?void 0:n.name)||j})]}),(0,_e.jsxs)("span",{children:["Section: ",(0,_e.jsx)("b",{children:"all"===_?"All":(null===(s=E.find(e=>e._id===_||e.id===_))||void 0===s?void 0:s.name)||_})]})]})]}),(0,_e.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"32px 48px",borderTop:"1px solid #eee",paddingTop:8},children:[(0,_e.jsxs)("span",{children:["Date Range: ",(0,_e.jsxs)("b",{children:[G.startDate," to ",G.endDate]})]}),(0,_e.jsxs)("span",{children:["group"===le.reportType?"Employees Found:":"Records Found:",(0,_e.jsx)("b",{children:be.length}),be.length!==((null===(o=le.data)||void 0===o?void 0:o.length)||0)&&(0,_e.jsxs)("span",{style:{marginLeft:8,color:"#666",fontWeight:400},children:["(",(null===(a=le.data)||void 0===a?void 0:a.length)||0," total)"]})]}),(0,_e.jsxs)("span",{style:{color:"#666",fontWeight:400,fontSize:"0.98rem",marginLeft:"auto"},children:["Generated at ",(new Date).toLocaleString()]})]}),"meal"===h&&le.summary&&(0,_e.jsxs)("div",{style:{borderTop:"1px solid #eee",paddingTop:12,marginTop:10},children:[(0,_e.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px",marginBottom:"12px"},children:[(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"14px 18px",backgroundColor:"#f0f9ff",borderRadius:"8px",border:"1px solid #bfdbfe"},children:[(0,_e.jsx)("i",{className:"bi bi-basket-fill",style:{fontSize:"1.6rem",color:"#0284c7"}}),(0,_e.jsxs)("div",{children:[(0,_e.jsx)("div",{style:{fontSize:"0.85rem",color:"#64748b",marginBottom:"2px"},children:"Meal Packets Only"}),(0,_e.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#0284c7"},children:le.summary.totalMealPacketEmployees||0})]})]}),(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"14px 18px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fcd34d"},children:[(0,_e.jsx)("i",{className:"bi bi-cash-coin",style:{fontSize:"1.6rem",color:"#d97706"}}),(0,_e.jsxs)("div",{children:[(0,_e.jsx)("div",{style:{fontSize:"0.85rem",color:"#78716c",marginBottom:"2px"},children:"Meal Money Only"}),(0,_e.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#d97706"},children:le.summary.totalMealMoneyEmployees||0})]})]}),(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"14px 18px",backgroundColor:"#f3e8ff",borderRadius:"8px",border:"1px solid #d8b4fe"},children:[(0,_e.jsx)("i",{className:"bi bi-award-fill",style:{fontSize:"1.6rem",color:"#9333ea"}}),(0,_e.jsxs)("div",{children:[(0,_e.jsx)("div",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:"2px"},children:"Both Types"}),(0,_e.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#9333ea"},children:le.summary.totalBothTypesEmployees||0})]})]}),(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"14px 18px",backgroundColor:"#dcfce7",borderRadius:"8px",border:"1px solid #86efac"},children:[(0,_e.jsx)("i",{className:"bi bi-people-fill",style:{fontSize:"1.6rem",color:"#15803d"}}),(0,_e.jsxs)("div",{children:[(0,_e.jsx)("div",{style:{fontSize:"0.85rem",color:"#64748b",marginBottom:"2px"},children:"Total Unique Employees"}),(0,_e.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#15803d"},children:le.summary.totalEmployees||0})]})]})]}),(0,_e.jsxs)("div",{style:{display:"flex",justifyContent:"center",padding:"8px",backgroundColor:"#f8fafc",borderRadius:"6px",fontSize:"0.9rem",color:"#64748b"},children:[(0,_e.jsx)("i",{className:"bi bi-info-circle",style:{marginRight:"6px"}}),"Total meal records processed: ",(0,_e.jsx)("b",{style:{marginLeft:"4px",color:"#475569"},children:le.summary.totalMealRecords||0})]})]})]})}),(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"18px",marginBottom:"8px"},children:[(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",fontWeight:600,fontSize:"1.15rem"},children:[(0,_e.jsx)("i",{className:"bi bi-table",style:{marginRight:10,marginLeft:12,fontSize:"1.2rem"}}),"Data Preview"]}),"audit"!==h&&(0,_e.jsxs)("div",{className:"action-group",style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,_e.jsxs)("span",{style:{fontWeight:600,fontSize:"1.15rem",display:"flex",alignItems:"center",marginLeft:12},children:[(0,_e.jsx)("i",{className:"bi bi-download",style:{marginRight:6,fontSize:"1.2rem"}}),"Export Options"]}),"attendance"!==h||Ne?(0,_e.jsxs)("button",{onClick:()=>(e=>{const t=ye;t&&t.data&&0!==t.data.length?"pdf"===e&&Oe():ue("No data to export. Please generate a report first or adjust search filters.")})("pdf"),className:"btn btn-outline-primary",style:{marginLeft:8,marginRight:18,display:"flex",alignItems:"center",fontWeight:500,fontSize:"1rem"},children:[(0,_e.jsx)("i",{className:"bi bi-file-earmark-pdf",style:{marginRight:5,fontSize:"1.1rem"}}),"Print PDF"]}):(0,_e.jsxs)("button",{disabled:!0,title:"You do not have permission to download this report",className:"btn btn-outline-secondary",style:{marginLeft:8,marginRight:18,display:"flex",alignItems:"center",fontWeight:500,fontSize:"1rem",opacity:.7},children:[(0,_e.jsx)("i",{className:"bi bi-file-earmark-pdf",style:{marginRight:5,fontSize:"1.1rem"}}),"Print PDF"]})]})]}),(0,_e.jsx)("div",{className:"data-preview",children:(0,_e.jsx)("div",{className:"table-responsive",children:"audit"===h?(0,_e.jsx)(tc,{reportData:le}):"group"===f?(0,_e.jsx)(Zd,{ref:ve,reportData:ye,getHeaders:Pe,formatRow:Le,reportType:h,dateRange:G}):(0,_e.jsx)(ec,{ref:xe,reportData:ye,getHeaders:Pe,formatRow:Le,reportType:h,dateRange:G,employeeInfo:he})})})]})]})}),B&&le&&(!le.data||0===le.data.length)&&(0,_e.jsx)("div",{className:"report-modal-overlay",onClick:()=>$(!1),children:(0,_e.jsxs)("div",{className:"report-modal-content",onClick:e=>e.stopPropagation(),children:[(0,_e.jsx)("button",{className:"report-modal-close",onClick:()=>$(!1),children:(0,_e.jsx)("i",{className:"bi bi-x-lg"})}),(0,_e.jsx)("div",{className:"report-results",children:(0,_e.jsxs)("div",{className:"empty-state",children:[(0,_e.jsx)("div",{className:"empty-icon",children:(0,_e.jsx)("i",{className:"bi bi-inbox"})}),(0,_e.jsx)("h4",{className:"empty-title",children:r("noDataFoundTitle")}),(0,_e.jsx)("p",{className:"empty-text",children:r("noDataFoundText")})]})})]})}),!ae&&B&&!le&&(0,_e.jsx)("div",{className:"report-modal-overlay",onClick:()=>$(!1),children:(0,_e.jsxs)("div",{className:"report-modal-content",onClick:e=>e.stopPropagation(),children:[(0,_e.jsx)("button",{className:"report-modal-close",onClick:()=>$(!1),children:(0,_e.jsx)("i",{className:"bi bi-x-lg"})}),(0,_e.jsx)("div",{className:"report-results",children:(0,_e.jsxs)("div",{className:"empty-state",children:[(0,_e.jsx)("div",{className:"empty-icon",children:(0,_e.jsx)("i",{className:"bi bi-file-earmark-bar-graph"})}),(0,_e.jsx)("h4",{className:"empty-title",children:r("readyToGenerateTitle")}),(0,_e.jsx)("p",{className:"empty-text",children:r("readyToGenerateText")})]})})]})})]})},ic=()=>{const[e,t]=(0,i.useState)([]),[n,s]=(0,i.useState)([]),[o,a]=(0,i.useState)([]),[r,l]=(0,i.useState)({divisionId:"",sectionId:"",mealDate:(new Date).toISOString().split("T")[0],mealType:"",quantity:1,specialRequirements:""}),[d,c]=(0,i.useState)(!1),[u,h]=(0,i.useState)(""),[p,f]=(0,i.useState)(""),[m,g]=(0,i.useState)(0),{t:v}=Te(),[x,b]=(0,i.useState)(null),y=e=>{if(!e)return"";let t=String(e).replace(/\s*\([^)]*\)/g,"").trim();return t=t.replace(/\s*-\s*$/,"").trim(),t},[S,j]=(0,i.useState)(!1),[w,_]=(0,i.useState)(!1),[N,k]=(0,i.useState)(!1),[C,E]=(0,i.useState)(null),[I,D]=(0,i.useState)(!1),[A,T]=(0,i.useState)(""),[M,R]=(0,i.useState)([]),[O,P]=(0,i.useState)([]),[L,z]=(0,i.useState)([]),[F,B]=(0,i.useState)("meal"),[$,U]=(0,i.useState)("all"),[W,H]=(0,i.useState)("all"),[V,q]=(0,i.useState)("all"),[Y,G]=(0,i.useState)([]),[J,K]=(0,i.useState)([]),[Q,X]=(0,i.useState)(!1),[Z,ee]=(0,i.useState)(!1),[te,ne]=(0,i.useState)("all"),[ie,se]=(0,i.useState)("all"),[oe,ae]=(0,i.useState)("all"),[re,le]=(0,i.useState)([]),[de,ce]=(0,i.useState)([]),[ue,he]=(0,i.useState)([]),[pe,fe]=(0,i.useState)(!1),[me,ge]=(0,i.useState)(!1),[ve,xe]=(0,i.useState)(!1),[be,ye]=(0,i.useState)("meal");(0,i.useEffect)(()=>{Se(),je(),we(),Ne(),xe(!1)},[]),(0,i.useEffect)(()=>{if(x&&e.length>0&&o.length>0){var t,n;const e=(null===(t=x.division)||void 0===t?void 0:t._id)||x.division||x.divisionId,i=(null===(n=x.section)||void 0===n?void 0:n._id)||x.section||x.sectionId;e&&!r.divisionId&&l(t=>({...t,divisionId:e,sectionId:i||""}))}},[x,e,o]),(0,i.useEffect)(()=>{if(r.divisionId&&""!==r.divisionId){const e=o.filter(e=>String(e.division_id||e.divisionId||e.DIVISION_ID||"")===String(r.divisionId));console.log(`\ud83d\udd0d Filtered ${e.length} sections for division ${r.divisionId}`),s(e),l(e=>({...e,sectionId:""}))}else s(o),l(e=>({...e,sectionId:""}))},[r.divisionId,o]),(0,i.useEffect)(()=>{if("all"===$)G(o),H("all"),K([]),q("all");else{const e=o.filter(e=>String(e.division_id||e.divisionId||e.DIVISION_ID||"")===String($));G(e),H("all"),K([]),q("all")}},[$,o]),(0,i.useEffect)(()=>{Ce()},[A,$,W,V,M]);const Se=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("http://localhost:5000/api/auth/verify",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json();e.success&&e.user&&(console.log("\ud83d\udc64 User info loaded:",e.user),b(e.user))}}catch(e){console.error("Error fetching user info:",e)}},je=async()=>{try{const e=localStorage.getItem("token");console.log("\ud83d\udce5 Fetching HRIS divisions...");const n=await fetch("http://localhost:5000/api/divisions/hris",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(n.ok){const e=await n.json();let i=[];Array.isArray(e)?i=e:e.data&&Array.isArray(e.data)&&(i=e.data);const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[],n=new Set;return e.forEach(e=>{var i,s,o,a,r,l,d,c,u,h,p,f,m,g,v,x,b,y;const S=String(null!==(i=null!==(s=null!==(o=null!==(a=null!==(r=null!==(l=e._id)&&void 0!==l?l:e.id)&&void 0!==r?r:e.DIVISION_ID)&&void 0!==a?a:e.code)&&void 0!==o?o:e.hie_code)&&void 0!==s?s:e.DIVISION_CODE)&&void 0!==i?i:"");S&&(n.has(S)||(n.add(S),t.push({_id:S,id:S,division_id:S,code:String(null!==(d=null!==(c=null!==(u=null!==(h=null!==(p=e.code)&&void 0!==p?p:e.DIVISION_CODE)&&void 0!==h?h:e.hie_code)&&void 0!==u?u:e._id)&&void 0!==c?c:e.id)&&void 0!==d?d:S),name:null!==(f=null!==(m=null!==(g=null!==(v=e.name)&&void 0!==v?v:e.DIVISION_NAME)&&void 0!==g?g:e.hie_name)&&void 0!==m?m:e.hie_relationship)&&void 0!==f?f:"Unknown Division",division_name:null!==(x=null!==(b=null!==(y=e.name)&&void 0!==y?y:e.DIVISION_NAME)&&void 0!==b?b:e.hie_name)&&void 0!==x?x:"Unknown Division"})))}),t.sort((e,t)=>e.name.localeCompare(t.name))}(i);console.log(`\u2705 Loaded ${s.length} HRIS divisions`),t(s)}else console.error("Failed to fetch divisions:",n.status),t([])}catch(e){console.error("Error fetching divisions:",e),h(v("errorFetchingDivisions")),f("error"),t([])}},we=async()=>{try{const e=localStorage.getItem("token");console.log("\ud83d\udce5 Fetching HRIS sections...");let t=await fetch("http://localhost:5000/api/sections/hris",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(t.ok||(console.warn("HRIS sections endpoint returned non-OK, falling back to /api/sections",t.status),t=await fetch("http://localhost:5000/api/sections",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})),t.ok){const e=await t.json();let n=[];Array.isArray(e)?n=e:e.data&&Array.isArray(e.data)?n=e.data:e.sections&&Array.isArray(e.sections)&&(n=e.sections);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[],n=new Set;return e.forEach(e=>{var i,s,o,a,r,l,d,c,u,h,p,f,m,g,v,x,b,y,S,j,w,_,N;const k=String(null!==(i=null!==(s=null!==(o=null!==(a=null!==(r=null!==(l=null!==(d=e._id)&&void 0!==d?d:e.id)&&void 0!==l?l:e.SECTION_ID)&&void 0!==r?r:e.code)&&void 0!==a?a:e.hie_code)&&void 0!==o?o:e.SECTION_CODE)&&void 0!==s?s:e.section_code)&&void 0!==i?i:"");if(!k)return;if(n.has(k))return;n.add(k);const C=String(null!==(c=null!==(u=null!==(h=null!==(p=null!==(f=e.division_id)&&void 0!==f?f:e.DIVISION_ID)&&void 0!==p?p:e.division_code)&&void 0!==h?h:e.DIVISION_CODE)&&void 0!==u?u:e.hie_relationship)&&void 0!==c?c:"");t.push({_id:k,id:k,section_id:k,code:String(null!==(m=null!==(g=null!==(v=null!==(x=e.code)&&void 0!==x?x:e.SECTION_CODE)&&void 0!==v?v:e.hie_code)&&void 0!==g?g:e.section_code)&&void 0!==m?m:k),name:null!==(b=null!==(y=null!==(S=null!==(j=e.name)&&void 0!==j?j:e.section_name)&&void 0!==S?S:e.SECTION_NAME)&&void 0!==y?y:e.hie_relationship)&&void 0!==b?b:`Section ${k}`,section_name:null!==(w=null!==(_=null!==(N=e.name)&&void 0!==N?N:e.section_name)&&void 0!==_?_:e.SECTION_NAME)&&void 0!==w?w:`Section ${k}`,division_id:C||"",divisionId:C||"",DIVISION_ID:C||""})}),t.sort((e,t)=>e.name.localeCompare(t.name))}(n);console.log(`\u2705 Loaded ${i.length} HRIS sections`),console.log("Sample sections with division_id:",i.slice(0,3).map(e=>({section:e.name,section_id:e._id,division_id:e.division_id}))),a(i),s(i)}else console.error("Failed to fetch sections:",t.status,t.statusText),a([]),s([])}catch(e){console.error("Error fetching sections:",e),h(v("errorFetchingSections")),f("error"),a([]),s([])}},Ne=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("http://localhost:5000/api/meals/bookings/today/count",{headers:{Authorization:`Bearer ${e}`}}),n=await t.json();t.ok&&n.success&&g(n.count||0)}catch(e){console.error("Error fetching today's bookings:",e)}},ke=async()=>{if(!A||A.trim().length<2)return h("Please enter at least 2 characters to search"),void f("warning");X(!0);try{const e=await fetch(`http://localhost:5000/api/employee/hris/search?q=${encodeURIComponent(A)}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){const t=await e.json();R(t),h(""),0===t.length&&(h("No employees found"),f("info"))}else h("Failed to search employees"),f("danger")}catch(e){console.error("Error searching HRIS employees:",e),h("Error searching employees"),f("danger")}finally{X(!1)}},Ce=()=>{let e=[...M];"all"!==$&&(e=e.filter(e=>String(e.division_id||e.divisionId||e.DIVISION_ID||"")===String($))),"all"!==W&&(e=e.filter(e=>String(e.section_id||e.sectionId||e.SECTION_ID||"")===String(W))),"all"!==V&&(e=e.filter(e=>String(e.subsection_id||e.subsectionId||e.SUBSECTION_ID||"")===String(V))),P(e)},Ee=e=>{const t=e.employee_id||e.id||e.EMPLOYEE_ID,n=L.some(e=>(e.employee_id||e.id||e.EMPLOYEE_ID)===t);z(n?L.filter(e=>(e.employee_id||e.id||e.EMPLOYEE_ID)!==t):[...L,e])},Ie=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||O;L.length===e.length&&e.length>0?z([]):z([...e])},De=async()=>{if("all"===te||"all"===ie)return h("Please select both Division and Section to search"),void f("warning");fe(!0),he([]),z([]);try{const t=localStorage.getItem("token"),n=e.find(e=>e.division_id===te),i=o.find(e=>e.section_id===ie);if(!n||!i)return h("Invalid division or section selected"),f("danger"),void fe(!1);console.log("\ud83d\udd0d Searching HRIS for division:",n.code,n.name,"section:",i.code,i.name);const s=n.code||n.division_id||n._id,a=i.code||i.section_id||i._id;console.log("Using codes - Division:",s,"Section:",a);const r=await fetch("http://localhost:5000/api/users/hris",{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)return h("Failed to fetch HRIS employees"),f("danger"),void fe(!1);const l=await r.json();let d=[];Array.isArray(l)?d=l:l.data&&Array.isArray(l.data)?d=l.data:l.employees&&Array.isArray(l.employees)&&(d=l.employees),console.log(`\ud83d\udcca Got ${d.length} total employees from HRIS`),d.length>0&&(console.log("\ud83d\udccb Sample employee structure:",d[0]),console.log("\ud83d\udd11 Sample employee keys:",Object.keys(d[0]))),console.log("\ud83c\udfaf Target Division:",te,s,n),console.log("\ud83c\udfaf Target Section:",ie,a,i),console.log("\ud83d\udd11 Section object full:",i);const c=String(n.code||n.DIVISION_CODE||s).trim(),u=String(i.code||i.SECTION_CODE||a).trim();console.log("\ud83d\udccd Using codes for matching - Division:",c,"Section:",u);let p=0;const m=d.filter(e=>{const t=String(e.DIVISION_CODE||e.division_code||"").trim(),n=String(e.SECTION_CODE||e.section_code||"").trim(),i=t===c,s=n===u;return p<5&&console.log(`Employee ${e.EMP_NUMBER||e._id}:`,{empDiv:t,targetDiv:c,divMatch:i,empSec:n,targetSec:u,secMatch:s,result:i&&s?"\u2705 MATCH":"\u274c NO MATCH"}),i&&s&&p++,i&&s});console.log(`\u2705 Filtered to ${m.length} employees for division ${s} and section ${a}`),m.length>0&&console.log("\u2705 Sample filtered employee:",m[0]);const g=m.map(e=>({employee_id:e.EMP_NUMBER||e.EMPLOYEE_ID||e.employee_id||e._id,employee_name:e.FULLNAME||e.EMPLOYEE_NAME||e.employee_name||e.name||`${e.CALLING_NAME||e.FIRST_NAME||""} ${e.LAST_NAME||""}`.trim(),division_id:e.DIVISION_CODE||e.division_code||e.DIVISION_ID,division_code:e.DIVISION_CODE||e.division_code,division_name:e.DIVISION_NAME||e.division_name||n.division_name||n.name,section_id:e.SECTION_CODE||e.section_code||e.SECTION_ID,section_code:e.SECTION_CODE||e.section_code,section_name:e.SECTION_NAME||e.section_name||i.section_name||i.name,email:e.EMAIL||e.email||""}));console.log(`\ud83c\udfaf Found ${g.length} employees for division ${s} and section ${a}`),he(g),ye("search"),0===g.length?(h("No employees found for selected filters"),f("info")):(h(`Found ${g.length} employee(s)`),f("success"))}catch(t){console.error("Error fetching employees:",t),h("Error loading employees: "+t.message),f("danger")}finally{fe(!1)}},Ae=async e=>{if(0===L.length)return h("Please select at least one employee"),void f("warning");ge(!0);let t=0,n=0;try{const s=localStorage.getItem("token");for(const o of L)try{let i={};if(o.employee_data)try{i="string"===typeof o.employee_data?JSON.parse(o.employee_data):o.employee_data}catch(cu){console.error("Error parsing employee_data:",cu)}(await fetch("http://localhost:5000/api/meals/preference",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({employeeId:o.employee_id,employeeName:o.employee_name,email:i.email||o.email||"",preference:e,divisionId:o.division_code||o.division_id,divisionName:o.division_name,sectionId:o.section_code||o.section_id,sectionName:o.section_name,subsectionId:o.sub_section_id||o.subsection_id,subsectionName:o.sub_hie_name||o.subsection_name,allowanceAmount:"money"===e?500:0})})).ok?t++:n++}catch(i){console.error("Error transferring employee:",o,i),n++}t>0?(h(`\u2705 Successfully transferred ${t} employee(s) to ${"meal"===e?"Meal Package":"Money Allowance"}${n>0?`, ${n} failed`:""}`),f(n>0?"warning":"success"),z([]),await De()):(h("Failed to transfer employees"),f("danger"))}catch(i){console.error("Error in transfer process:",i),h("Error transferring employees"),f("danger")}finally{ge(!1)}};return(0,_e.jsxs)("div",{className:"meal-management",children:[(0,_e.jsx)("div",{className:"section-header",style:{marginBottom:"32px",padding:"32px 0 16px 0",borderBottom:"2px solid #eee",background:"none",boxShadow:"none",borderRadius:"0",textAlign:"left"},children:(0,_e.jsxs)("h2",{style:{fontSize:"2.2rem",fontWeight:700,display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[(0,_e.jsx)("i",{className:"bi bi-utensils",style:{fontSize:"2rem"}}),v("mealManagementTitle")]})}),u&&(0,_e.jsxs)("div",{className:`alert alert-${"success"===p?"success":"warning"===p?"warning":"danger"} alert-dismissible fade show`,style:{position:"sticky",top:"10px",zIndex:1050,boxShadow:"0 4px 6px rgba(0,0,0,0.1)",fontSize:"1.1rem",fontWeight:"500"},children:[(0,_e.jsx)("i",{className:`bi bi-${"success"===p?"check-circle-fill":"warning"===p?"exclamation-triangle-fill":"x-circle-fill"} me-2`}),(0,_e.jsx)("strong",{children:"success"===p?"Success!":"warning"===p?"Warning!":"Error!"})," ",u,(0,_e.jsx)("button",{type:"button",className:"btn-close",onClick:()=>h("")})]}),(0,_e.jsxs)("div",{className:"meal-container",children:[(0,_e.jsxs)("div",{className:"row justify-content-center",children:[(0,_e.jsx)("div",{className:"col-lg-6 col-md-8",children:(0,_e.jsxs)("div",{className:"meal-card",children:[(0,_e.jsx)("div",{className:"meal-card-header",children:(0,_e.jsx)("h4",{className:"mb-0",children:"\ud83d\udccb Book New Meal"})}),(0,_e.jsx)("div",{className:"card-body p-4",children:(0,_e.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),c(!0),h("");try{const t=localStorage.getItem("token"),i=e.find(e=>e.division_id===r.divisionId),s=n.find(e=>e.section_id===r.sectionId),o={divisionId:r.divisionId,divisionName:(null===i||void 0===i?void 0:i.name)||(null===i||void 0===i?void 0:i.division_name)||"",sectionId:r.sectionId,sectionName:(null===s||void 0===s?void 0:s.name)||(null===s||void 0===s?void 0:s.section_name)||"",mealDate:r.mealDate,mealType:r.mealType,quantity:parseInt(r.quantity),specialRequirements:r.specialRequirements},a=await fetch("http://localhost:5000/api/meals/book",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(o)}),d=await a.json();a.ok&&d.success?(h(v("mealBookingCreated")),f("success"),l({divisionId:"",sectionId:"",mealDate:(new Date).toISOString().split("T")[0],mealType:"",quantity:1,specialRequirements:""}),Ne(),setTimeout(()=>{h("")},3e3)):(h(d.message||"Error creating meal booking"),f("error"))}catch(i){console.error("Meal booking error:",i),h(v("mealBookingNetworkError")),f("error")}finally{c(!1)}},children:[(0,_e.jsxs)("div",{className:"meal-form-group",children:[(0,_e.jsx)("label",{className:"meal-form-label",children:"Division"}),(0,_e.jsxs)("select",{className:"form-select meal-form-control",value:r.divisionId,onChange:e=>l(t=>({...t,divisionId:e.target.value})),required:!0,children:[(0,_e.jsx)("option",{value:"",children:v("selectDivision")}),e.map(e=>(0,_e.jsx)("option",{value:e.division_id,children:e.division_name},e.division_id))]})]}),(0,_e.jsxs)("div",{className:"meal-form-group",children:[(0,_e.jsx)("label",{className:"meal-form-label",children:"Section"}),(0,_e.jsxs)("select",{className:"form-select meal-form-control",value:r.sectionId,onChange:e=>l(t=>({...t,sectionId:e.target.value})),required:!0,children:[(0,_e.jsx)("option",{value:"",children:v("selectSection")}),n.map(e=>(0,_e.jsx)("option",{value:e.section_id,children:y(e.section_name)},e.section_id))]})]}),(0,_e.jsxs)("div",{className:"meal-form-group",children:[(0,_e.jsx)("label",{className:"meal-form-label",children:"Meal Date"}),(0,_e.jsx)("input",{type:"date",className:"form-control meal-form-control",value:r.mealDate,onChange:e=>l(t=>({...t,mealDate:e.target.value})),min:(new Date).toISOString().split("T")[0],required:!0})]}),(0,_e.jsxs)("div",{className:"meal-form-group",children:[(0,_e.jsx)("label",{className:"meal-form-label",children:"Meal Type"}),(0,_e.jsxs)("select",{className:"form-select meal-form-control",value:r.mealType,onChange:e=>l(t=>({...t,mealType:e.target.value})),required:!0,children:[(0,_e.jsx)("option",{value:"",children:v("selectMealType")}),(0,_e.jsx)("option",{value:"breakfast",children:v("mealTypeBreakfast")}),(0,_e.jsx)("option",{value:"lunch",children:v("mealTypeLunch")}),(0,_e.jsx)("option",{value:"dinner",children:v("mealTypeDinner")}),(0,_e.jsx)("option",{value:"snack",children:v("mealTypeSnack")})]})]}),(0,_e.jsxs)("div",{className:"meal-form-group",children:[(0,_e.jsx)("label",{className:"meal-form-label",children:"Expected Quantity"}),(0,_e.jsx)("input",{type:"number",className:"form-control meal-form-control",value:r.quantity,onChange:e=>l(t=>({...t,quantity:e.target.value})),min:"1",max:"500",required:!0})]}),(0,_e.jsxs)("div",{className:"meal-form-group",children:[(0,_e.jsx)("label",{className:"meal-form-label",children:"Special Requirements"}),(0,_e.jsx)("textarea",{className:"form-control meal-form-control",rows:"3",value:r.specialRequirements,onChange:e=>l(t=>({...t,specialRequirements:e.target.value})),placeholder:v("specialRequirementsPlaceholder")})]}),(0,_e.jsx)("button",{type:"submit",className:"btn meal-btn meal-btn-primary w-100",disabled:d,children:d?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-arrow-clockwise spin"})," ",v("bookingInProgress")]}):(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-utensils"})," Book Meal"]})})]})})]})}),(0,_e.jsxs)("div",{className:"col-lg-3 col-md-4",children:[(0,_e.jsxs)("div",{className:"meal-stats-card",children:[(0,_e.jsx)("div",{className:"meal-stats-number",children:m}),(0,_e.jsx)("div",{className:"meal-stats-label",children:v("todaysBookingsLabel")})]}),(0,_e.jsxs)("div",{className:"info-card",children:[(0,_e.jsx)("div",{className:"info-card-header",children:(0,_e.jsx)("h5",{className:"mb-0",children:"\u2139\ufe0f Booking Information"})}),(0,_e.jsx)("div",{className:"info-card-body",children:(0,_e.jsxs)("ul",{className:"info-list",children:[(0,_e.jsxs)("li",{children:["\ud83d\udcc5 ",v("bookingInfo_line1")]}),(0,_e.jsxs)("li",{children:["\ud83d\udd50 ",v("bookingInfo_line2")]}),(0,_e.jsxs)("li",{children:["\ud83c\udf7d\ufe0f ",v("bookingInfo_line3")]}),(0,_e.jsxs)("li",{children:["\u26a0\ufe0f ",v("bookingInfo_line4")]}),(0,_e.jsxs)("li",{children:["\ud83d\udccb ",v("bookingInfo_line5")]})]})})]}),(0,_e.jsxs)("div",{className:"mt-3",children:[(0,_e.jsx)("button",{className:"btn btn-primary w-100 mb-2",onClick:async()=>{j(!0),k(!1);try{const e=localStorage.getItem("token"),t=(new Date).toISOString().split("T")[0],n=await fetch("http://localhost:5000/api/meals/bookings/today",{method:"GET",headers:{Authorization:`Bearer ${e}`}}),i=await n.json();if(n.ok&&i.success){const n=i.data||[];if(0===n.length)return h("No bookings found for today"),f("error"),j(!1),void setTimeout(()=>h(""),3e3);const s=await fetch("http://localhost:5000/api/divisions/hris",{headers:{Authorization:`Bearer ${e}`}}),o=await s.json(),a={};(Array.isArray(o)?o:o.data||[]).forEach(e=>{const t=e._id||e.id||e.DIVISION_ID||e.code;a[t]=e.name||e.DIVISION_NAME||e.hie_name||"Unknown"}),E({bookings:n,date:t,type:"bookings",divisionsMap:a}),_(!0)}else h(i.message||"Error generating report"),f("error")}catch(e){console.error("Generate report error:",e),h("Network error occurred while generating report"),f("error")}finally{j(!1)}},disabled:S,children:S?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-arrow-clockwise spin"})," Generating..."]}):(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-file-earmark-text"})," Generate Today's Bookings"]})}),(0,_e.jsx)("button",{className:"btn btn-success w-100 mb-2",onClick:async()=>{j(!0),_(!1);try{const e=localStorage.getItem("token"),t=(new Date).toISOString().split("T")[0],n=await fetch("http://localhost:5000/api/meals/bookings/today",{method:"GET",headers:{Authorization:`Bearer ${e}`}}),i=await n.json();if(n.ok&&i.success){const e=i.data||[];if(0===e.length)return h("No bookings found for today"),f("error"),j(!1),void setTimeout(()=>h(""),3e3);const n=e.reduce((e,t)=>{const n=t.mealType||"Unknown";return e[n]||(e[n]={count:0,quantity:0}),e[n].count+=1,e[n].quantity+=t.quantity||1,e},{});E({mealTypeCounts:n,date:t,type:"count",bookings:e}),k(!0)}else h(i.message||"Error generating report"),f("error")}catch(e){console.error("Generate count report error:",e),h("Network error occurred while generating report"),f("error")}finally{j(!1)}},disabled:S,children:S?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-arrow-clockwise spin"})," Generating..."]}):(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-bar-chart"})," Generate Meal Count Report"]})}),(0,_e.jsxs)("button",{className:"btn btn-warning w-100 mb-2",onClick:()=>D(!0),children:[(0,_e.jsx)("i",{className:"bi bi-gear"})," Set Meal Preference"]}),(0,_e.jsxs)("button",{className:"btn btn-info w-100",onClick:()=>xe(!ve),children:[(0,_e.jsx)("i",{className:"bi bi-people"})," ",ve?"Hide":"Show"," Employee Lists"]})]})]})]}),ve&&(0,_e.jsx)("div",{className:"row mt-4",children:(0,_e.jsx)("div",{className:"col-12",children:(0,_e.jsxs)("div",{className:"card",children:[(0,_e.jsx)("div",{className:"card-header bg-info text-white",children:(0,_e.jsxs)("h4",{className:"mb-0",children:[(0,_e.jsx)("i",{className:"bi bi-people-fill"})," Employee Meal Preferences"]})}),(0,_e.jsxs)("div",{className:"card-body",children:[(0,_e.jsxs)("div",{className:"alert alert-info mb-4",children:[(0,_e.jsx)("i",{className:"bi bi-info-circle me-2"}),(0,_e.jsx)("strong",{children:"How to use:"})," Select Division and Section, click Search to find unassigned employees, select employees, then transfer them to Meal Package or Money Allowance."]}),(0,_e.jsxs)("div",{className:"row mb-4",children:[(0,_e.jsxs)("div",{className:"col-md-6",children:[(0,_e.jsxs)("label",{className:"form-label fw-bold",children:["Division ",(0,_e.jsx)("span",{className:"text-danger",children:"*"})]}),(0,_e.jsxs)("select",{className:"form-select",value:te,onChange:t=>{console.log("Division selected:",t.target.value);const n=e.find(e=>e.division_id===t.target.value);console.log("Division object:",n);const i=o.filter(e=>String(e.division_id||e.divisionId||e.DIVISION_ID||"")===String(t.target.value));console.log(`Found ${i.length} sections for this division`),ne(t.target.value),se("all"),ae("all")},children:[(0,_e.jsx)("option",{value:"all",children:"All Divisions"}),e.map(e=>(0,_e.jsx)("option",{value:e.division_id,children:e.division_name},e.division_id))]})]}),(0,_e.jsxs)("div",{className:"col-md-6",children:[(0,_e.jsxs)("label",{className:"form-label fw-bold",children:["Section ",(0,_e.jsx)("span",{className:"text-danger",children:"*"})]}),(0,_e.jsxs)("select",{className:"form-select",value:ie,onChange:e=>{console.log("Section selected:",e.target.value),se(e.target.value),ae("all")},disabled:"all"===te,children:[(0,_e.jsx)("option",{value:"all",children:"Select Section"}),o.filter(e=>{if("all"===te)return!0;return String(e.division_id||e.divisionId||e.DIVISION_ID||"")===String(te)}).map(e=>(0,_e.jsx)("option",{value:e.section_id,children:e.section_name},e.section_id))]})]})]}),(0,_e.jsx)("div",{className:"row mb-4",children:(0,_e.jsx)("div",{className:"col-12",children:(0,_e.jsx)("button",{className:"btn btn-primary btn-lg w-100",onClick:De,disabled:pe||"all"===te||"all"===ie,children:pe?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Searching..."]}):(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-search me-2"}),"Search Employees"]})})})}),(0,_e.jsxs)("ul",{className:"nav nav-tabs mb-3",children:[ue.length>0&&(0,_e.jsx)("li",{className:"nav-item",children:(0,_e.jsxs)("button",{className:"nav-link "+("search"===be?"active":""),onClick:()=>ye("search"),children:[(0,_e.jsx)("i",{className:"bi bi-people"})," Search Results (",ue.length,")"]})}),(0,_e.jsx)("li",{className:"nav-item",children:(0,_e.jsxs)("button",{className:"nav-link "+("meal"===be?"active":""),onClick:()=>{ye("meal"),(async()=>{try{const e=localStorage.getItem("token");let t="http://localhost:5000/api/meals/employees/meal-package?";"all"!==te&&(t+=`divisionId=${te}&`),"all"!==ie&&(t+=`sectionId=${ie}&`),"all"!==oe&&(t+=`subsectionId=${oe}&`);const n=await fetch(t,{headers:{Authorization:`Bearer ${e}`}}),i=await n.json();n.ok&&i.success&&le(i.data||[])}catch(e){console.error("Error fetching meal package employees:",e)}})()},children:[(0,_e.jsx)("i",{className:"bi bi-egg-fried"})," Meal Package (",re.length,")"]})}),(0,_e.jsx)("li",{className:"nav-item",children:(0,_e.jsxs)("button",{className:"nav-link "+("money"===be?"active":""),onClick:()=>{ye("money"),(async()=>{try{const e=localStorage.getItem("token");let t="http://localhost:5000/api/meals/employees/money-allowance?";"all"!==te&&(t+=`divisionId=${te}&`),"all"!==ie&&(t+=`sectionId=${ie}&`),"all"!==oe&&(t+=`subsectionId=${oe}&`);const n=await fetch(t,{headers:{Authorization:`Bearer ${e}`}}),i=await n.json();n.ok&&i.success&&ce(i.data||[])}catch(e){console.error("Error fetching money allowance employees:",e)}})()},children:[(0,_e.jsx)("i",{className:"bi bi-cash-coin"})," Money Allowance (",de.length,")"]})})]}),"search"===be&&(0,_e.jsx)("div",{children:ue.length>0&&(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsxs)("div",{className:"row mb-3",children:[(0,_e.jsx)("div",{className:"col-md-6",children:(0,_e.jsxs)("button",{className:"btn btn-primary w-100",onClick:()=>Ae("meal"),disabled:0===L.length||me,children:[me?(0,_e.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}):(0,_e.jsx)("i",{className:"bi bi-egg-fried me-2"}),"Transfer to Meal Package (",L.length,")"]})}),(0,_e.jsx)("div",{className:"col-md-6",children:(0,_e.jsxs)("button",{className:"btn btn-success w-100",onClick:()=>Ae("money"),disabled:0===L.length||me,children:[me?(0,_e.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}):(0,_e.jsx)("i",{className:"bi bi-cash-coin me-2"}),"Transfer to Money Allowance (",L.length,")"]})})]}),(0,_e.jsx)("div",{className:"table-responsive",children:(0,_e.jsxs)("table",{className:"table table-striped table-hover",children:[(0,_e.jsx)("thead",{className:"table-primary",children:(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("th",{style:{width:"50px"},children:(0,_e.jsx)("input",{type:"checkbox",className:"form-check-input",checked:L.length===ue.length&&ue.length>0,onChange:()=>Ie(ue)})}),(0,_e.jsx)("th",{children:"#"}),(0,_e.jsx)("th",{children:"Employee ID"}),(0,_e.jsx)("th",{children:"Employee Name"})]})}),(0,_e.jsx)("tbody",{children:ue.map((e,t)=>{const n=L.some(t=>t.employee_id===e.employee_id);return(0,_e.jsxs)("tr",{style:{cursor:"pointer"},onClick:()=>Ee(e),className:n?"table-active":"",children:[(0,_e.jsx)("td",{onClick:e=>e.stopPropagation(),children:(0,_e.jsx)("input",{type:"checkbox",className:"form-check-input",checked:n,onChange:()=>Ee(e)})}),(0,_e.jsx)("td",{children:t+1}),(0,_e.jsx)("td",{children:(0,_e.jsx)("strong",{children:e.employee_id})}),(0,_e.jsx)("td",{children:e.employee_name})]},e.employee_id)})})]})})]})}),"meal"===be&&(0,_e.jsx)("div",{className:"table-responsive",children:(0,_e.jsxs)("table",{className:"table table-striped table-hover",children:[(0,_e.jsx)("thead",{className:"table-primary",children:(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("th",{children:"#"}),(0,_e.jsx)("th",{children:"Employee ID"}),(0,_e.jsx)("th",{children:"Employee Name"})]})}),(0,_e.jsx)("tbody",{children:re.length>0?re.map((e,t)=>(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("td",{children:t+1}),(0,_e.jsx)("td",{children:(0,_e.jsx)("strong",{children:e.employee_id})}),(0,_e.jsx)("td",{children:e.employee_name})]},e.id)):(0,_e.jsx)("tr",{children:(0,_e.jsx)("td",{colSpan:"3",className:"text-center text-muted",children:"No employees in meal package"})})})]})}),"money"===be&&(0,_e.jsx)("div",{className:"table-responsive",children:(0,_e.jsxs)("table",{className:"table table-striped table-hover",children:[(0,_e.jsx)("thead",{className:"table-success",children:(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("th",{children:"#"}),(0,_e.jsx)("th",{children:"Employee ID"}),(0,_e.jsx)("th",{children:"Employee Name"}),(0,_e.jsx)("th",{children:"Allowance"})]})}),(0,_e.jsx)("tbody",{children:de.length>0?de.map((e,t)=>(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("td",{children:t+1}),(0,_e.jsx)("td",{children:(0,_e.jsx)("strong",{children:e.employee_id})}),(0,_e.jsx)("td",{children:e.employee_name}),(0,_e.jsx)("td",{children:(0,_e.jsxs)("strong",{children:["Rs. ",parseFloat(e.allowance_amount).toFixed(2)]})})]},e.id)):(0,_e.jsx)("tr",{children:(0,_e.jsx)("td",{colSpan:"4",className:"text-center text-muted",children:"No employees with money allowance"})})})]})})]})]})})}),w&&C&&"bookings"===C.type&&(0,_e.jsx)("div",{className:"row mt-4",children:(0,_e.jsx)("div",{className:"col-12",children:(0,_e.jsxs)("div",{className:"card",children:[(0,_e.jsxs)("div",{className:"card-header bg-primary text-white d-flex justify-content-between align-items-center",children:[(0,_e.jsx)("h4",{className:"mb-0",children:"\ud83d\udccb Today's Meal Bookings Report"}),(0,_e.jsx)("button",{className:"btn btn-sm btn-light",onClick:()=>_(!1),children:"\u2715 Close"})]}),(0,_e.jsxs)("div",{className:"card-body",children:[(0,_e.jsxs)("div",{className:"row mb-3",children:[(0,_e.jsx)("div",{className:"col-md-3 col-sm-6 mb-2",children:(0,_e.jsxs)("div",{className:"alert alert-info mb-0",children:[(0,_e.jsx)("strong",{children:"\ud83d\udcc5 Date:"}),(0,_e.jsx)("br",{}),new Date(C.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})}),(0,_e.jsx)("div",{className:"col-md-3 col-sm-6 mb-2",children:(0,_e.jsxs)("div",{className:"alert alert-success mb-0",children:[(0,_e.jsx)("strong",{children:"\ud83d\udcca Total Bookings:"}),(0,_e.jsx)("br",{}),(0,_e.jsx)("h3",{className:"mb-0",children:C.bookings.length})]})}),(0,_e.jsx)("div",{className:"col-md-3 col-sm-6 mb-2",children:(0,_e.jsxs)("div",{className:"alert alert-warning mb-0",children:[(0,_e.jsx)("strong",{children:"\ud83c\udf7d\ufe0f Total Meals:"}),(0,_e.jsx)("br",{}),(0,_e.jsx)("h3",{className:"mb-0",children:C.bookings.reduce((e,t)=>e+(t.quantity||0),0)})]})}),(0,_e.jsx)("div",{className:"col-md-3 col-sm-6 mb-2",children:(0,_e.jsxs)("div",{className:"alert alert-primary mb-0",children:[(0,_e.jsx)("strong",{children:"\ud83d\udd50 Generated At:"}),(0,_e.jsx)("br",{}),(new Date).toLocaleTimeString()]})})]}),(0,_e.jsx)("div",{className:"table-responsive",children:(0,_e.jsxs)("table",{className:"table table-striped table-hover",children:[(0,_e.jsx)("thead",{className:"table-primary",children:(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("th",{children:"#"}),(0,_e.jsx)("th",{children:"Employee ID"}),(0,_e.jsx)("th",{children:"Employee Name"}),(0,_e.jsx)("th",{children:"Email"}),(0,_e.jsx)("th",{children:"Division"}),(0,_e.jsx)("th",{children:"Meal Type"}),(0,_e.jsx)("th",{children:"Quantity"}),(0,_e.jsx)("th",{children:"Status"}),(0,_e.jsx)("th",{children:"Special Requirements"}),(0,_e.jsx)("th",{children:"Booked At"})]})}),(0,_e.jsx)("tbody",{children:C.bookings.map((e,t)=>(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("td",{children:t+1}),(0,_e.jsx)("td",{children:e.employeeId||"N/A"}),(0,_e.jsx)("td",{children:(0,_e.jsx)("strong",{children:e.employeeName||"Unknown"})}),(0,_e.jsx)("td",{children:e.email||"N/A"}),(0,_e.jsx)("td",{children:C.divisionsMap[e.divisionId]||e.divisionId||"N/A"}),(0,_e.jsx)("td",{children:(0,_e.jsx)("span",{className:"badge bg-info text-capitalize",children:e.mealType||"N/A"})}),(0,_e.jsx)("td",{children:(0,_e.jsx)("strong",{children:e.quantity||1})}),(0,_e.jsx)("td",{children:(0,_e.jsx)("span",{className:"badge bg-"+("confirmed"===e.status?"success":"warning"),children:e.status||"pending"})}),(0,_e.jsx)("td",{children:e.specialRequirements||"-"}),(0,_e.jsx)("td",{children:new Date(e.createdAt).toLocaleString()})]},e.id||t))})]})})]})]})})}),N&&C&&"count"===C.type&&(0,_e.jsx)("div",{className:"row mt-4",children:(0,_e.jsx)("div",{className:"col-12",children:(0,_e.jsxs)("div",{className:"card",children:[(0,_e.jsxs)("div",{className:"card-header bg-success text-white d-flex justify-content-between align-items-center",children:[(0,_e.jsx)("h4",{className:"mb-0",children:"\ud83d\udcca Meal Count Report"}),(0,_e.jsx)("button",{className:"btn btn-sm btn-light",onClick:()=>k(!1),children:"\u2715 Close"})]}),(0,_e.jsxs)("div",{className:"card-body",children:[(0,_e.jsxs)("div",{className:"row mb-3",children:[(0,_e.jsx)("div",{className:"col-md-3 col-sm-6 mb-2",children:(0,_e.jsxs)("div",{className:"alert alert-info mb-0",children:[(0,_e.jsx)("strong",{children:"\ud83d\udcc5 Date:"}),(0,_e.jsx)("br",{}),new Date(C.date).toLocaleDateString()]})}),(0,_e.jsx)("div",{className:"col-md-3 col-sm-6 mb-2",children:(0,_e.jsxs)("div",{className:"alert alert-success mb-0",children:[(0,_e.jsx)("strong",{children:"\ud83d\udccb Total Bookings:"}),(0,_e.jsx)("br",{}),(0,_e.jsx)("h3",{className:"mb-0",children:C.bookings.length})]})}),(0,_e.jsx)("div",{className:"col-md-3 col-sm-6 mb-2",children:(0,_e.jsxs)("div",{className:"alert alert-warning mb-0",children:[(0,_e.jsx)("strong",{children:"\ud83c\udf7d\ufe0f Total Meals:"}),(0,_e.jsx)("br",{}),(0,_e.jsx)("h3",{className:"mb-0",children:Object.values(C.mealTypeCounts).reduce((e,t)=>e+t.quantity,0)})]})}),(0,_e.jsx)("div",{className:"col-md-3 col-sm-6 mb-2",children:(0,_e.jsxs)("div",{className:"alert alert-primary mb-0",children:[(0,_e.jsx)("strong",{children:"\ud83d\udd50 Generated At:"}),(0,_e.jsx)("br",{}),(new Date).toLocaleTimeString()]})})]}),(0,_e.jsx)("div",{className:"table-responsive",children:(0,_e.jsxs)("table",{className:"table table-striped table-hover",children:[(0,_e.jsx)("thead",{className:"table-success",children:(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("th",{children:"Meal Type"}),(0,_e.jsx)("th",{children:"Number of Bookings"}),(0,_e.jsx)("th",{children:"Total Quantity"})]})}),(0,_e.jsxs)("tbody",{children:[Object.entries(C.mealTypeCounts).map(e=>{let[t,n]=e;return(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("td",{className:"text-capitalize",children:(0,_e.jsxs)("strong",{children:["\ud83c\udf7d\ufe0f ",t]})}),(0,_e.jsx)("td",{children:(0,_e.jsx)("h5",{className:"text-success mb-0",children:n.count})}),(0,_e.jsx)("td",{children:(0,_e.jsx)("h5",{className:"text-success mb-0",children:n.quantity})})]},t)}),(0,_e.jsxs)("tr",{className:"table-success fw-bold",children:[(0,_e.jsx)("td",{children:(0,_e.jsx)("strong",{children:"\ud83d\udcca TOTAL"})}),(0,_e.jsx)("td",{children:(0,_e.jsx)("strong",{children:Object.values(C.mealTypeCounts).reduce((e,t)=>e+t.count,0)})}),(0,_e.jsx)("td",{children:(0,_e.jsx)("strong",{children:Object.values(C.mealTypeCounts).reduce((e,t)=>e+t.quantity,0)})})]})]})]})})]})]})})}),I&&(0,_e.jsx)("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,_e.jsx)("div",{className:"modal-dialog modal-xl",children:(0,_e.jsxs)("div",{className:"modal-content",children:[(0,_e.jsxs)("div",{className:"modal-header bg-warning",children:[(0,_e.jsxs)("h5",{className:"modal-title",children:[(0,_e.jsx)("i",{className:"bi bi-gear"})," Set Employee Meal Preference"]}),(0,_e.jsx)("button",{type:"button",className:"btn-close",onClick:()=>{D(!1),T(""),R([]),P([]),z([]),U("all"),H("all"),q("all"),B("")}})]}),(0,_e.jsxs)("div",{className:"modal-body",children:[(0,_e.jsxs)("div",{className:"alert alert-info",children:[(0,_e.jsx)("i",{className:"bi bi-info-circle"})," Search employees by ID or name from HRIS, then filter and select multiple employees to assign meal preferences"]}),(0,_e.jsx)("div",{className:"row mb-3",children:(0,_e.jsxs)("div",{className:"col-md-12",children:[(0,_e.jsx)("label",{className:"form-label fw-bold",children:"Search Employee (ID or Name)"}),(0,_e.jsxs)("div",{className:"input-group",children:[(0,_e.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter employee ID or name (min 2 characters)...",value:A,onChange:e=>T(e.target.value),onKeyPress:e=>"Enter"===e.key&&ke()}),(0,_e.jsx)("button",{className:"btn btn-primary",onClick:ke,disabled:Q,children:Q?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Searching..."]}):(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-search"})," Search HRIS"]})})]})]})}),0===M.length&&!Q&&(0,_e.jsxs)("div",{className:"alert alert-light border text-center py-4",children:[(0,_e.jsx)("i",{className:"bi bi-search fs-1 text-muted d-block mb-3"}),(0,_e.jsx)("h5",{className:"text-muted",children:"Search for employees to get started"}),(0,_e.jsx)("p",{className:"text-muted mb-0",children:'Enter an employee ID or name above and click "Search HRIS"'})]}),M.length>0&&(0,_e.jsxs)("div",{className:"row mb-3",children:[(0,_e.jsxs)("div",{className:"col-md-4",children:[(0,_e.jsx)("label",{className:"form-label fw-bold",children:"Filter by Division"}),(0,_e.jsxs)("select",{className:"form-select",value:$,onChange:e=>U(e.target.value),children:[(0,_e.jsx)("option",{value:"all",children:"All Divisions"}),e.map(e=>(0,_e.jsx)("option",{value:e.division_id,children:e.division_name},e.division_id))]})]}),(0,_e.jsxs)("div",{className:"col-md-4",children:[(0,_e.jsx)("label",{className:"form-label fw-bold",children:"Filter by Section"}),(0,_e.jsxs)("select",{className:"form-select",value:W,onChange:e=>H(e.target.value),disabled:"all"===$,children:[(0,_e.jsx)("option",{value:"all",children:"All Sections"}),Y.map(e=>(0,_e.jsx)("option",{value:e.section_id,children:e.section_name},e.section_id))]})]}),(0,_e.jsxs)("div",{className:"col-md-4",children:[(0,_e.jsx)("label",{className:"form-label fw-bold",children:"Filter by Sub-Section"}),(0,_e.jsxs)("select",{className:"form-select",value:V,onChange:e=>q(e.target.value),disabled:"all"===W,children:[(0,_e.jsx)("option",{value:"all",children:"All Sub-Sections"}),J.map(e=>(0,_e.jsx)("option",{value:e.id,children:e.sub_name},e.id))]})]})]}),O.length>0&&(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,_e.jsxs)("label",{className:"form-label fw-bold mb-0",children:["Select Employees (",L.length," of ",O.length," selected)"]}),(0,_e.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:Ie,children:L.length===O.length&&O.length>0?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-square"})," Deselect All"]}):(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-check-square"})," Select All"]})})]}),(0,_e.jsx)("div",{className:"table-responsive",style:{maxHeight:"300px",overflowY:"auto"},children:(0,_e.jsxs)("table",{className:"table table-hover table-sm",children:[(0,_e.jsx)("thead",{className:"table-light sticky-top",children:(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("th",{style:{width:"50px"},children:(0,_e.jsx)("input",{type:"checkbox",className:"form-check-input",checked:L.length===O.length&&O.length>0,onChange:Ie})}),(0,_e.jsx)("th",{children:"ID"}),(0,_e.jsx)("th",{children:"Name"}),(0,_e.jsx)("th",{children:"Division"}),(0,_e.jsx)("th",{children:"Section"}),(0,_e.jsx)("th",{children:"Sub-Section"})]})}),(0,_e.jsx)("tbody",{children:O.map(e=>{const t=e.employee_id||e.id||e.EMPLOYEE_ID,n=L.some(e=>(e.employee_id||e.id||e.EMPLOYEE_ID)===t);return(0,_e.jsxs)("tr",{style:{cursor:"pointer"},onClick:()=>Ee(e),className:n?"table-active":"",children:[(0,_e.jsx)("td",{children:(0,_e.jsx)("input",{type:"checkbox",className:"form-check-input",checked:n,onChange:()=>Ee(e)})}),(0,_e.jsx)("td",{children:(0,_e.jsx)("strong",{children:t})}),(0,_e.jsx)("td",{children:e.employee_name||e.name||e.EMPLOYEE_NAME}),(0,_e.jsx)("td",{children:e.division_name||e.divisionName||e.DIVISION_NAME||"N/A"}),(0,_e.jsx)("td",{children:e.section_name||e.sectionName||e.SECTION_NAME||"N/A"}),(0,_e.jsx)("td",{children:e.subsection_name||e.subsectionName||e.SUBSECTION_NAME||"N/A"})]},t)})})]})})]}),M.length>0&&0===O.length&&(0,_e.jsxs)("div",{className:"alert alert-warning",children:[(0,_e.jsx)("i",{className:"bi bi-exclamation-triangle"})," No employees match the selected filters"]}),L.length>0&&(0,_e.jsxs)("div",{className:"mt-4",children:[(0,_e.jsxs)("label",{className:"form-label fw-bold",children:["Select Meal Preference for ",L.length," Employee(s)"]}),(0,_e.jsxs)("div",{className:"row",children:[(0,_e.jsx)("div",{className:"col-md-6",children:(0,_e.jsx)("div",{className:"card "+("meal"===F?"border-primary border-3":""),style:{cursor:"pointer"},onClick:()=>B("meal"),children:(0,_e.jsxs)("div",{className:"card-body text-center",children:[(0,_e.jsx)("i",{className:"bi bi-egg-fried fs-1 text-primary"}),(0,_e.jsx)("h5",{className:"mt-2",children:"Physical Meal Package"}),(0,_e.jsx)("p",{className:"text-muted small",children:"Employees receive actual meals from cafeteria"}),"meal"===F&&(0,_e.jsx)("i",{className:"bi bi-check-circle-fill text-primary fs-4"})]})})}),(0,_e.jsx)("div",{className:"col-md-6",children:(0,_e.jsx)("div",{className:"card "+("money"===F?"border-success border-3":""),style:{cursor:"pointer"},onClick:()=>B("money"),children:(0,_e.jsxs)("div",{className:"card-body text-center",children:[(0,_e.jsx)("i",{className:"bi bi-cash-coin fs-1 text-success"}),(0,_e.jsx)("h5",{className:"mt-2",children:"Money Allowance"}),(0,_e.jsx)("p",{className:"text-muted small",children:"Employees receive money instead of meals"}),"money"===F&&(0,_e.jsx)("i",{className:"bi bi-check-circle-fill text-success fs-4"})]})})})]})]})]}),(0,_e.jsxs)("div",{className:"modal-footer",children:[(0,_e.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{D(!1),T(""),R([]),P([]),z([]),U("all"),H("all"),q("all"),B("")},children:"Cancel"}),(0,_e.jsx)("button",{type:"button",className:"btn btn-primary",onClick:async()=>{if(0===L.length)return h("Please select at least one employee"),void f("warning");if(!F)return h("Please select meal preference type"),void f("warning");ee(!0);try{let t=0,n=0;for(const i of L)try{(await fetch("http://localhost:5000/api/meals/preference",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({employeeId:i.employee_id||i.id||i.EMPLOYEE_ID,employeeName:i.employee_name||i.name||i.EMPLOYEE_NAME,email:i.email||i.EMAIL||"",divisionId:i.division_id||i.divisionId||i.DIVISION_ID,divisionName:i.division_name||i.divisionName||i.DIVISION_NAME,sectionId:i.section_id||i.sectionId||i.SECTION_ID,sectionName:i.section_name||i.sectionName||i.SECTION_NAME,subsectionId:i.subsection_id||i.subsectionId||i.SUBSECTION_ID||null,subsectionName:i.subsection_name||i.subsectionName||i.SUBSECTION_NAME||null,preference:F,allowanceAmount:"money"===F?500:0})})).ok?t++:n++}catch(e){console.error("Error assigning preference for employee:",i,e),n++}t>0?(h(`Successfully assigned preferences for ${t} employee(s)${n>0?`, ${n} failed`:""}`),f(n>0?"warning":"success"),z([]),R([]),P([]),T(""),U("all"),H("all"),q("all"),D(!1),De()):(h("Failed to assign preferences"),f("danger"))}catch(e){console.error("Error submitting batch preferences:",e),h("Error submitting preferences"),f("danger")}finally{ee(!1)}},disabled:0===L.length||!F||Z,children:Z?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Saving..."]}):(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-check-circle"})," Save Preferences (",L.length," employees)"]})})]})]})})})]})]})},sc=()=>{var e,t,n,s;const[o,a]=(0,i.useState)([]),[r,l]=(0,i.useState)(!0),[d,c]=(0,i.useState)(!1),[u,h]=(0,i.useState)(!1),[p,f]=(0,i.useState)(null),[m,g]=(0,i.useState)(!0),[v,x]=(0,i.useState)(""),[b,y]=(0,i.useState)("name_asc"),[S,j]=(0,i.useState)({name:"",code:""}),[w,_]=(0,i.useState)({}),[N,k]=(0,i.useState)(!1),C=Me("divisions","read"),E=(Me("divisions","create"),Me("divisions","update"),Me("divisions","delete"),{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000/api"),{t:I}=Te(),D=e=>{const t=e=>String(e).padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}`},A=e=>"string"===typeof e?e.replace(/\s+/g," ").trim().toLowerCase():"",T=async()=>{try{var e;const n=localStorage.getItem("token"),i=[`${E}/mysql-data/divisions`,`${E}/divisions/hris`];let s,o=null,r=null;for(const e of i){console.log(`Fetching divisions from ${e}...`);try{const t={"Content-Type":"application/json"};if(e.includes("/hris")&&n&&(t.Authorization=`Bearer ${n}`),s=await fetch(e,{headers:t,credentials:"include"}),s.ok){o=await s.json(),console.log("Divisions API Response:",o),r=e,g(e.includes("/hris"));break}{const t=await s.text();console.warn(`Division fetch failed at ${e}:`,s.status,s.statusText,t)}}catch(t){console.error(`Error fetching from ${e}:`,t)}}if(!o||!o.data)return console.error("No division data received from any endpoint"),a([]),void l(!1);const d=(Array.isArray(null===(e=o)||void 0===e?void 0:e.data)?o.data:[]).map(e=>{var t,n,i,s,o,a,l,d,c,u,h,p,f,m,g,v,x,b,y,S,j,w,_,N,k,C,E,I,D,A;return{_id:String(null!==(t=null!==(n=null!==(i=null!==(s=null!==(o=null!==(a=null!==(l=null===e||void 0===e?void 0:e._id)&&void 0!==l?l:null===e||void 0===e?void 0:e.id)&&void 0!==a?a:null===e||void 0===e?void 0:e.DIVISION_ID)&&void 0!==o?o:null===e||void 0===e?void 0:e.code)&&void 0!==s?s:null===e||void 0===e?void 0:e.hie_code)&&void 0!==i?i:null===e||void 0===e?void 0:e.DIVISION_CODE)&&void 0!==n?n:null===e||void 0===e?void 0:e.HIE_CODE)&&void 0!==t?t:""),code:String(null!==(d=null!==(c=null!==(u=null!==(h=null===e||void 0===e?void 0:e.code)&&void 0!==h?h:null===e||void 0===e?void 0:e.DIVISION_CODE)&&void 0!==u?u:null===e||void 0===e?void 0:e.hie_code)&&void 0!==c?c:null===e||void 0===e?void 0:e.HIE_CODE)&&void 0!==d?d:""),name:null!==(p=null!==(f=null!==(m=null!==(g=null!==(v=null===e||void 0===e?void 0:e.name)&&void 0!==v?v:null===e||void 0===e?void 0:e.DIVISION_NAME)&&void 0!==g?g:null===e||void 0===e?void 0:e.hie_name)&&void 0!==m?m:null===e||void 0===e?void 0:e.HIE_NAME)&&void 0!==f?f:null===e||void 0===e?void 0:e.hie_relationship)&&void 0!==p?p:"Unknown Division",nameSinhala:null!==(x=null!==(b=null===e||void 0===e?void 0:e.HIE_NAME_SINHALA)&&void 0!==b?b:null===e||void 0===e?void 0:e.name_sinhala)&&void 0!==x?x:"",nameTamil:null!==(y=null!==(S=null===e||void 0===e?void 0:e.HIE_NAME_TAMIL)&&void 0!==S?S:null===e||void 0===e?void 0:e.name_tamil)&&void 0!==y?y:"",isActive:"boolean"===typeof(null===e||void 0===e?void 0:e.isActive)?e.isActive:"boolean"===typeof(null===e||void 0===e?void 0:e.active)?e.active:"ACTIVE"===(null===e||void 0===e?void 0:e.STATUS),employeeCount:null!==(j=null!==(w=null===e||void 0===e?void 0:e.employeeCount)&&void 0!==w?w:null===e||void 0===e?void 0:e.count)&&void 0!==j?j:void 0,createdAt:null!==(_=null!==(N=null!==(k=null!==(C=null!==(E=null!==(I=null===e||void 0===e?void 0:e.createdAt)&&void 0!==I?I:null===e||void 0===e?void 0:e.created_at)&&void 0!==E?E:null===e||void 0===e?void 0:e.CREATED_AT)&&void 0!==C?C:null===e||void 0===e?void 0:e.createdOn)&&void 0!==k?k:null===e||void 0===e?void 0:e.CREATED_ON)&&void 0!==N?N:null===e||void 0===e?void 0:e.synced_at)&&void 0!==_?_:null,source:null!==(D=null===e||void 0===e?void 0:e.source)&&void 0!==D?D:null!==(A=r)&&void 0!==A&&A.includes("/mysql-data")?"MySQL Sync":"HRIS"}}).sort((e,t)=>e.name.localeCompare(t.name));a(d)}catch(n){console.error("Error fetching divisions:",n),a([])}finally{l(!1)}};return(0,i.useEffect)(()=>{T()},[]),r?(0,_e.jsx)("div",{className:"loading-container",children:I("loading")}):C?(0,_e.jsxs)("div",{className:"division-management",children:[(0,_e.jsxs)("div",{style:{background:"linear-gradient(135deg, #1e40af 0%, #2563eb 50%, #3b82f6 100%)",borderRadius:"20px",padding:"32px 40px",marginBottom:"28px",color:"#fff",position:"relative",overflow:"hidden",boxShadow:"0 10px 40px rgba(30, 64, 175, 0.3)"},children:[(0,_e.jsxs)("div",{style:{position:"relative",zIndex:2},children:[(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"8px"},children:[(0,_e.jsx)("div",{style:{width:"48px",height:"48px",background:"rgba(255,255,255,0.2)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,_e.jsx)("i",{className:"bi bi-building",style:{fontSize:"24px"}})}),(0,_e.jsx)("h2",{style:{margin:0,fontSize:"28px",fontWeight:700},children:I("divisionManagementTitle")})]}),(0,_e.jsx)("p",{style:{margin:0,opacity:.85,fontSize:"15px"},children:"Manage organizational divisions and view division details"})]}),(0,_e.jsx)("div",{style:{position:"absolute",right:"30px",top:"50%",transform:"translateY(-50%)",opacity:.1,fontSize:"120px"},children:(0,_e.jsx)("i",{className:"bi bi-buildings"})})]}),(0,_e.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",background:"#fff",borderRadius:"16px",boxShadow:"0 2px 12px rgba(102,126,234,0.07)",padding:"28px 32px",marginBottom:"28px",gap:"32px",flexWrap:"wrap"},children:(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",minWidth:320},children:[(0,_e.jsx)("label",{htmlFor:"divisionSearch",className:"form-label m-0",style:{fontWeight:600,color:"#374151",fontSize:"16px"},children:I("divisionSearchLabel")}),(0,_e.jsxs)("select",{id:"divisionSort",value:b,onChange:e=>y(e.target.value),style:{fontSize:"14px",borderRadius:"8px",border:"2px solid #e0e7ff",background:"#fff",color:"#374151",fontWeight:600,boxShadow:"0 1px 4px rgba(102,126,234,0.04)",padding:"8px 12px",outline:"none",marginRight:"8px"},children:[(0,_e.jsx)("option",{value:"name_asc",children:"Name A \u2192 Z"}),(0,_e.jsx)("option",{value:"name_desc",children:"Name Z \u2192 A"}),(0,_e.jsx)("option",{value:"id_asc",children:"ID Small \u2192 High"}),(0,_e.jsx)("option",{value:"id_desc",children:"ID High \u2192 Small"})]}),(0,_e.jsx)("input",{id:"divisionSearch",type:"text",className:"form-control",placeholder:I("divisionSearchPlaceholder"),value:v,onChange:e=>x(e.target.value),style:{maxWidth:"360px",fontSize:"15px",borderRadius:"8px",border:"2px solid #e0e7ff",background:"#f8fafc",color:"#374151",fontWeight:500,boxShadow:"0 1px 4px rgba(102,126,234,0.04)",padding:"10px 18px",outline:"none",transition:"border 0.2s"}})]})}),(0,_e.jsx)("div",{className:"professional-card",children:(0,_e.jsxs)("div",{className:"table-responsive",children:[(0,_e.jsxs)("table",{className:"professional-table",children:[(0,_e.jsx)("thead",{children:(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("th",{children:"Division ID"}),(0,_e.jsx)("th",{children:"Division"}),(0,_e.jsx)("th",{children:"Action"})]})}),(0,_e.jsx)("tbody",{children:(()=>{const e=A(v),t=e?o.filter(t=>{const n=A(t.code||""),i=A(t.name||"");return n.includes(e)||i.includes(e)}):o,n=e=>String((null===e||void 0===e?void 0:e.name)||"").toLowerCase(),i=e=>{var t,n;const i=null!==(t=null!==(n=null===e||void 0===e?void 0:e.code)&&void 0!==n?n:null===e||void 0===e?void 0:e._id)&&void 0!==t?t:"",s=Number(String(i).replace(/[^0-9.-]/g,""));return Number.isFinite(s)?s:String(i)};return t.slice().sort((e,t)=>{if("name_asc"===b)return n(e).localeCompare(n(t));if("name_desc"===b)return n(t).localeCompare(n(e));if("id_asc"===b){const n=i(e),s=i(t);return"number"===typeof n&&"number"===typeof s?n-s:String(n).localeCompare(String(s))}if("id_desc"===b){const n=i(e),s=i(t);return"number"===typeof n&&"number"===typeof s?s-n:String(s).localeCompare(String(n))}return 0}).map(e=>(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("td",{children:(0,_e.jsx)("span",{className:"division-code",children:e.code})}),(0,_e.jsx)("td",{className:"division-name",children:e.name}),(0,_e.jsx)("td",{children:(0,_e.jsxs)("button",{className:"btn-professional btn-info",onClick:()=>f(e),title:I("viewDivisionDetails"),style:{padding:"8px 12px",fontSize:"13px",fontWeight:600,color:"#2563eb",background:"#e0e7ff",border:"none",borderRadius:"8px",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px"},children:[(0,_e.jsx)("i",{className:"bi bi-eye"})," ",I("viewLabel")]})})]},e._id||e.code||e.name))})()})]}),0===o.length&&(0,_e.jsx)("div",{className:"no-data",children:(0,_e.jsx)("p",{children:I("noDivisionsFoundMsg")})})]})}),p&&(0,_e.jsx)("div",{className:"dm-modal-overlay",onClick:()=>f(null),children:(0,_e.jsxs)("div",{className:"dm-modal-card",onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":I("divisionDetailsTitle"),children:[(0,_e.jsxs)("div",{className:"dm-modal-header",children:[(0,_e.jsxs)("div",{className:"dm-modal-title",children:[(0,_e.jsx)("i",{className:"bi bi-eye dm-modal-icon","aria-hidden":"true"}),(0,_e.jsx)("h3",{children:I("divisionDetailsTitle")||"Division Details"})]}),(0,_e.jsx)("button",{className:"dm-modal-close",onClick:()=>f(null),"aria-label":I("close"),children:(0,_e.jsx)("i",{className:"bi bi-x"})})]}),(0,_e.jsxs)("div",{className:"dm-modal-body",children:[(0,_e.jsxs)("div",{className:"dm-field",children:[(0,_e.jsx)("strong",{className:"dm-label",children:"id:"}),(0,_e.jsx)("div",{className:"dm-value",children:null!==(e=p._id)&&void 0!==e?e:p.id||I("naLabel")})]}),(0,_e.jsxs)("div",{className:"dm-field",children:[(0,_e.jsx)("strong",{className:"dm-label",children:"Code:"}),(0,_e.jsx)("div",{className:"dm-value",children:null!==(t=p.code)&&void 0!==t?t:I("naLabel")})]}),(0,_e.jsxs)("div",{className:"dm-field",children:[(0,_e.jsx)("strong",{className:"dm-label",children:"Name:"}),(0,_e.jsx)("div",{className:"dm-value",children:null!==(n=p.name)&&void 0!==n?n:I("naLabel")})]}),(0,_e.jsxs)("div",{className:"dm-field",children:[(0,_e.jsx)("strong",{className:"dm-label",children:"Is Active:"}),(0,_e.jsx)("div",{className:"dm-value",children:"boolean"===typeof p.isActive?p.isActive?I("yesLabel")||"Yes":I("noLabel")||"No":I("naLabel")})]}),(0,_e.jsxs)("div",{className:"dm-field",children:[(0,_e.jsx)("strong",{className:"dm-label",children:"Employee Count:"}),(0,_e.jsx)("div",{className:"dm-value",children:null!==(s=p.employeeCount)&&void 0!==s?s:0})]}),(0,_e.jsxs)("div",{className:"dm-field",children:[(0,_e.jsx)("strong",{className:"dm-label",children:"Created At:"}),(0,_e.jsx)("div",{className:"dm-value",children:p.createdAt?(e=>{if(!e)return"";try{if("string"===typeof e){const t=Number(e);if(!Number.isNaN(t)&&""!==e.trim()){const e=new Date(t);return Number.isNaN(e)?"":D(e)}const n=new Date(e);return Number.isNaN(n)?"":D(n)}if("number"===typeof e){const t=new Date(e);return Number.isNaN(t)?"":D(t)}if("object"===typeof e){if(e.$date){const t=e.$date;if("object"===typeof t&&t.$numberLong){const e=new Date(Number(t.$numberLong));return Number.isNaN(e)?"":D(e)}if("string"===typeof t||"number"===typeof t){const e=new Date(t);return Number.isNaN(e)?"":D(e)}}if(e.$numberLong){const t=new Date(Number(e.$numberLong));return Number.isNaN(t)?"":D(t)}}}catch(t){return""}return""})(p.createdAt)||String(p.createdAt):I("naLabel")})]})]})]})})]}):(0,_e.jsxs)("div",{className:"division-management",children:[(0,_e.jsx)("div",{style:{background:"linear-gradient(135deg, #1e40af 0%, #2563eb 50%, #3b82f6 100%)",borderRadius:"20px",padding:"32px 40px",marginBottom:"28px",color:"#fff",position:"relative",overflow:"hidden",boxShadow:"0 10px 40px rgba(30, 64, 175, 0.3)"},children:(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,_e.jsx)("i",{className:"bi bi-building",style:{fontSize:"28px"}}),(0,_e.jsx)("h2",{style:{margin:0,fontSize:"28px",fontWeight:700},children:I("divisionManagementTitle")})]})}),(0,_e.jsx)("div",{className:"professional-card",children:(0,_e.jsx)("div",{className:"no-data",children:(0,_e.jsx)("p",{children:I("noPermissionViewDivisions")})})})]})},oc=()=>{var e,t,n,s,o,a,r,l,d,c,u,h,p,f,m,g,v,x,b,y,S,j,w,_,N,k,C,E,I,D;const[A,T]=(0,i.useState)([]),[M,R]=(0,i.useState)([]),[O,P]=(0,i.useState)(!0),[L,z]=(0,i.useState)(""),[F,B]=(0,i.useState)(""),[$,U]=(0,i.useState)("name_asc"),[W,H]=(0,i.useState)(!1),[V,q]=(0,i.useState)(!1),[Y,G]=(0,i.useState)(null),[J,K]=(0,i.useState)(!1),[Q,X]=(0,i.useState)(null),[Z,ee]=(0,i.useState)({name:"",code:""}),[te,ne]=(0,i.useState)(!1),[ie,se]=(0,i.useState)({}),[oe,ae]=(0,i.useState)(!1),[re,le]=(0,i.useState)(null),[de,ce]=(0,i.useState)({name:"",code:""}),[ue,he]=(0,i.useState)(!1),[pe,fe]=(0,i.useState)({}),[me,ge]=(0,i.useState)([]),[ve,xe]=(0,i.useState)([]),[be,ye]=(0,i.useState)({name:"",division:""}),[Se,je]=(0,i.useState)({}),[we,Ne]=(0,i.useState)(!1),[ke,Ce]=(0,i.useState)({}),[Ee,Ie]=(0,i.useState)({}),[De,Ae]=(0,i.useState)({}),[Te,Re]=(0,i.useState)(!1),[Oe,Pe]=(0,i.useState)(null),[Le,ze]=(0,i.useState)(!1),[Fe,Be]=(0,i.useState)(null),[$e,Ue]=(0,i.useState)(!1),[We,He]=(0,i.useState)(new Set),[Ve,qe]=(0,i.useState)(!1),[Ye,Ge]=(0,i.useState)([]),[Je,Ke]=(0,i.useState)(!1),[Qe,Xe]=(0,i.useState)(null),[Ze,et]=(0,i.useState)(!1),[tt,nt]=(0,i.useState)(null),[it,st]=(0,i.useState)(!1),[ot,at]=(0,i.useState)([]),[rt,lt]=(0,i.useState)(!1),[dt,ct]=(0,i.useState)(null),[ut,ht]=(0,i.useState)(!1),[pt,ft]=(0,i.useState)(!1),[mt,gt]=(0,i.useState)(new Set),[vt,xt]=(0,i.useState)(!1),[bt,yt]=(0,i.useState)(!1),[St,jt]=(0,i.useState)([]),[wt,_t]=(0,i.useState)(!1),[Nt,kt]=(0,i.useState)(0),[Ct,Et]=(0,i.useState)(0),[It,Dt]=(0,i.useState)(""),[At,Tt]=(0,i.useState)(""),[Mt,Rt]=(0,i.useState)({show:!1,type:"success",title:"",message:""}),Ot=(0,i.useRef)(null),Pt=Me("sections","read"),Lt=Me("sections","create"),zt=Me("subsections","read"),Ft=Me("subsections","create"),Bt=Me("subsections","update"),$t=Me("subsections","delete"),Ut=Me("subsections","transfer"),Wt=Me("subsections","recall"),Ht={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000/api",Vt=e=>{let{type:t="success",title:n="",message:i="",duration:s=3e3}=e;Ot.current&&(clearTimeout(Ot.current),Ot.current=null);const o=i&&"object"===typeof i?i.message||JSON.stringify(i):String(i||"");Rt({show:!0,type:t,title:n,message:o}),Ot.current=setTimeout(()=>{Rt(e=>({...e,show:!1})),Ot.current=null},s)},qt=e=>{const t=e=>String(e).padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}`},Yt=async function(e){let{force:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return;if(ke[e]&&!t)return;const n=localStorage.getItem("token");if(n){Ie(t=>({...t,[e]:!0})),Ae(t=>({...t,[e]:""}));try{const t=await fetch(`${Ht}/mysql-subsections?sectionId=${encodeURIComponent(e)}`,{headers:{Authorization:`Bearer ${n}`},credentials:"include"});if(!t.ok)throw new Error(`HTTP ${t.status}`);const i=await t.json(),s=Array.isArray(null===i||void 0===i?void 0:i.data)?i.data:[];Ce(t=>({...t,[e]:s}))}catch(cu){console.error("Failed to fetch sub-sections:",cu),Ae(t=>({...t,[e]:"Failed to load sub-sections"}))}finally{Ie(t=>({...t,[e]:!1}))}}},Gt=()=>{Re(!1),Pe(null)},Jt=()=>{ae(!1),le(null),ce({name:"",code:""}),fe({}),he(!1)},Kt=async(e,t)=>{try{console.log("\ud83d\udd0d Fetching transferred employees for subsection:",e);const n=await fetch(`${Ht}/mysql-subsections/transferred/${e}`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"});if(console.log("\ud83d\udce1 Response status:",n.status),!n.ok)return console.error("\u274c Failed to fetch transferred employees. Status:",n.status),[];const i=await n.json();console.log("\ud83d\udce6 Response data:",i);const s=(null===i||void 0===i?void 0:i.data)||[];console.log("\ud83d\udcca Number of transfers found:",s.length),s.length>0&&console.log("\ud83d\udccb Transfer records:",s);const o=s.map(e=>({employeeId:String(e.employeeId||e.employee_id||e.empId||e.emp_id||""),sub_section_id:e.sub_section_id||e.subSectionId||e.subsection_id||e.subsectionId}));return console.log("\ud83c\udfaf Mapped transferred IDs:",o),at(t=>{const n=[...t.filter(t=>t.sub_section_id!==e),...o];return console.log("\u2705 Updated transferred employees list:",n),n}),o}catch(n){return console.error("\u274c Error fetching transferred employees:",n),[]}},[Qt,Xt]=(0,i.useState)(!1),Zt=()=>{ze(!1),Be(null)},en=async e=>{if(Wt){Xe(e),ft(!0),gt(new Set),_t(!0),jt([]);try{const t=localStorage.getItem("token");if(!t)throw new Error("No authentication token");console.log("\ud83d\udd0d Fetching transferred employees for subsection:",e._id);const n=await fetch(`${Ht}/mysql-subsections/transferred/${e._id}`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"});if(!n.ok)throw new Error(`HTTP ${n.status}`);const i=await n.json(),s=(null===i||void 0===i?void 0:i.data)||[];console.log("\ud83d\udcca Transferred employees:",s);const o=s.map(e=>{var t,n;const i=null!==(t=null!==(n=e.employeeData)&&void 0!==n?n:e.employee_data)&&void 0!==t?t:null;if(!i)return{};try{return"string"===typeof i?JSON.parse(i):i}catch(s){return{}}}),a=o.filter(nn);console.log("\ud83c\udfaf Active transferred employees:",a.length,"(filtered out:",o.length-a.length,")"),jt(a),_t(!1)}catch(t){console.error("Error fetching transferred employees:",t),_t(!1),Vt({type:"error",title:"Error",message:"Failed to fetch transferred employees"})}}else Vt({type:"error",title:"Permission",message:"You do not have permission to view transferred employees."})},tn=e=>"string"===typeof e?e.replace(/\s+/g," ").trim().toLowerCase():"",nn=e=>1===(null===e||void 0===e?void 0:e.ACTIVE_HRM_FLG)||"ACTIVE"===(null===e||void 0===e?void 0:e.STATUS)||"ACTIVE"===(null===e||void 0===e?void 0:e.status)||!0===(null===e||void 0===e?void 0:e.isActive),sn=(0,i.useCallback)(async()=>{try{const e=localStorage.getItem("token"),[t,n]=await Promise.all([fetch(`${Ht}/mysql-data/sections`,{headers:{"Content-Type":"application/json"},credentials:"include"}).catch(()=>fetch(`${Ht}/sections/hris`,{headers:{Authorization:e?`Bearer ${e}`:"","Content-Type":"application/json"},credentials:"include"})),fetch(`${Ht}/mysql-data/divisions`,{headers:{"Content-Type":"application/json"},credentials:"include"}).catch(()=>fetch(`${Ht}/divisions/hris`,{headers:{Authorization:e?`Bearer ${e}`:"","Content-Type":"application/json"},credentials:"include"}))]);let i=[],s=[],o={};if(n.ok){const e=await n.json(),t=Array.isArray(null===e||void 0===e?void 0:e.data)?e.data:[];xe(t),s=t.map(e=>{var t,i,s,a,r,l,d,c,u,h,p,f,m,g,v,x,b,y,S,j,w,_,N,k,C,E,I,D,A;const T=String(null!==(t=null!==(i=null!==(s=null!==(a=null!==(r=null!==(l=null!==(d=null!==(c=null===e||void 0===e?void 0:e._id)&&void 0!==c?c:null===e||void 0===e?void 0:e.id)&&void 0!==d?d:null===e||void 0===e?void 0:e.DIVISION_ID)&&void 0!==l?l:null===e||void 0===e?void 0:e.code)&&void 0!==r?r:null===e||void 0===e?void 0:e.division_code)&&void 0!==a?a:null===e||void 0===e?void 0:e.DIVISION_CODE)&&void 0!==s?s:null===e||void 0===e?void 0:e.hie_code)&&void 0!==i?i:null===e||void 0===e?void 0:e.HIE_CODE)&&void 0!==t?t:""),M=String(null!==(u=null!==(h=null!==(p=null!==(f=null!==(m=null===e||void 0===e?void 0:e.code)&&void 0!==m?m:null===e||void 0===e?void 0:e.DIVISION_CODE)&&void 0!==f?f:null===e||void 0===e?void 0:e.division_code)&&void 0!==p?p:null===e||void 0===e?void 0:e.hie_code)&&void 0!==h?h:null===e||void 0===e?void 0:e.HIE_CODE)&&void 0!==u?u:"");return M&&(o[M]=T),{_id:T,name:null!==(g=null!==(v=null!==(x=null!==(b=null!==(y=null!==(S=null===e||void 0===e?void 0:e.name)&&void 0!==S?S:null===e||void 0===e?void 0:e.division_name)&&void 0!==y?y:null===e||void 0===e?void 0:e.DIVISION_NAME)&&void 0!==b?b:null===e||void 0===e?void 0:e.hie_name)&&void 0!==x?x:null===e||void 0===e?void 0:e.HIE_NAME)&&void 0!==v?v:null===e||void 0===e?void 0:e.HIE_NAME_3)&&void 0!==g?g:`Division ${T}`,code:M,isActive:"boolean"===typeof(null===e||void 0===e?void 0:e.isActive)?e.isActive:"boolean"===typeof(null===e||void 0===e?void 0:e.active)?e.active:"ACTIVE"===(null===e||void 0===e?void 0:e.STATUS),status:null!==(j=null!==(w=null===e||void 0===e?void 0:e.status)&&void 0!==w?w:null===e||void 0===e?void 0:e.STATUS)&&void 0!==j?j:void 0,createdAt:null!==(_=null!==(N=null!==(k=null!==(C=null!==(E=null!==(I=null===e||void 0===e?void 0:e.createdAt)&&void 0!==I?I:null===e||void 0===e?void 0:e.created_at)&&void 0!==E?E:null===e||void 0===e?void 0:e.CREATED_AT)&&void 0!==C?C:null===e||void 0===e?void 0:e.createdOn)&&void 0!==k?k:null===e||void 0===e?void 0:e.CREATED_ON)&&void 0!==N?N:null===e||void 0===e?void 0:e.synced_at)&&void 0!==_?_:null,source:null!==(D=null===e||void 0===e?void 0:e.source)&&void 0!==D?D:null!==(A=n.url)&&void 0!==A&&A.includes("/mysql-data")?"MySQL Sync":"HRIS",_raw:e}}).sort((e,t)=>e.name.localeCompare(t.name)),console.log("Division Map (Code -> ID):",Object.keys(o).length,"entries"),R(s),z(e=>e||"all")}if(t.ok){const e=await t.json(),n=Array.isArray(null===e||void 0===e?void 0:e.data)?e.data:[];ge(n),i=n.map(e=>{var n,i,s,a,r,l,d,c,u,h,p,f,m,g,v,x,b,y,S,j,w,_,N,k,C,E,I,D,A,T,M,R,O,P,L,z,F,B,$,U,W,H,V;const q=String(null!==(n=null!==(i=null!==(s=null!==(a=null===e||void 0===e?void 0:e.division_code)&&void 0!==a?a:null===e||void 0===e?void 0:e.DIVISION_CODE)&&void 0!==s?s:null===e||void 0===e?void 0:e.HIE_RELATIONSHIP)&&void 0!==i?i:null===e||void 0===e?void 0:e.HIE_CODE_3)&&void 0!==n?n:""),Y=q&&o[q]?o[q]:String(null!==(r=null!==(l=null!==(d=null===e||void 0===e?void 0:e.division_id)&&void 0!==d?d:null===e||void 0===e?void 0:e.DIVISION_ID)&&void 0!==l?l:q)&&void 0!==r?r:""),G=null!==(c=null!==(u=null!==(h=null!==(p=null===e||void 0===e?void 0:e.division_name)&&void 0!==p?p:null===e||void 0===e?void 0:e.DIVISION_NAME)&&void 0!==h?h:null===e||void 0===e||null===(f=e.parentDivision)||void 0===f?void 0:f.division_name)&&void 0!==u?u:null===e||void 0===e||null===(m=e.parentDivision)||void 0===m?void 0:m.name)&&void 0!==c?c:"",J=String(null!==(g=null!==(v=null!==(x=null!==(b=null!==(y=null!==(S=null!==(j=null!==(w=null===e||void 0===e?void 0:e._id)&&void 0!==w?w:null===e||void 0===e?void 0:e.id)&&void 0!==j?j:null===e||void 0===e?void 0:e.SECTION_ID)&&void 0!==S?S:null===e||void 0===e?void 0:e.code)&&void 0!==y?y:null===e||void 0===e?void 0:e.hie_code)&&void 0!==b?b:null===e||void 0===e?void 0:e.SECTION_CODE)&&void 0!==x?x:null===e||void 0===e?void 0:e.section_code)&&void 0!==v?v:null===e||void 0===e?void 0:e.HIE_CODE)&&void 0!==g?g:"");return{_id:J,name:null!==(_=null!==(N=null!==(k=null!==(C=null!==(E=null!==(I=null!==(D=null===e||void 0===e?void 0:e.name)&&void 0!==D?D:null===e||void 0===e?void 0:e.section_name)&&void 0!==I?I:null===e||void 0===e?void 0:e.SECTION_NAME)&&void 0!==E?E:null===e||void 0===e?void 0:e.hie_name)&&void 0!==C?C:null===e||void 0===e?void 0:e.HIE_NAME)&&void 0!==k?k:null===e||void 0===e?void 0:e.HIE_NAME_4)&&void 0!==N?N:null===e||void 0===e?void 0:e.hie_relationship)&&void 0!==_?_:`Section ${J}`,division:G?{_id:Y||void 0,name:G}:Y||"",code:String(null!==(A=null!==(T=null!==(M=null!==(R=null!==(O=null===e||void 0===e?void 0:e.code)&&void 0!==O?O:null===e||void 0===e?void 0:e.SECTION_CODE)&&void 0!==R?R:null===e||void 0===e?void 0:e.hie_code)&&void 0!==M?M:null===e||void 0===e?void 0:e.HIE_CODE)&&void 0!==T?T:null===e||void 0===e?void 0:e.section_code)&&void 0!==A?A:""),divisionCode:q,isActive:"boolean"===typeof(null===e||void 0===e?void 0:e.isActive)?e.isActive:"boolean"===typeof(null===e||void 0===e?void 0:e.active)?e.active:"ACTIVE"===(null===e||void 0===e?void 0:e.STATUS),status:null!==(P=null!==(L=null===e||void 0===e?void 0:e.status)&&void 0!==L?L:null===e||void 0===e?void 0:e.STATUS)&&void 0!==P?P:void 0,createdAt:null!==(z=null!==(F=null!==(B=null!==($=null!==(U=null!==(W=null===e||void 0===e?void 0:e.createdAt)&&void 0!==W?W:null===e||void 0===e?void 0:e.created_at)&&void 0!==U?U:null===e||void 0===e?void 0:e.CREATED_AT)&&void 0!==$?$:null===e||void 0===e?void 0:e.createdOn)&&void 0!==B?B:null===e||void 0===e?void 0:e.CREATED_ON)&&void 0!==F?F:null===e||void 0===e?void 0:e.synced_at)&&void 0!==z?z:null,source:null!==(H=null===e||void 0===e?void 0:e.source)&&void 0!==H?H:null!==(V=t.url)&&void 0!==V&&V.includes("/mysql-data")?"MySQL Sync":"HRIS",_raw:e}}).sort((e,t)=>e.name.localeCompare(t.name)),T(i)}P(!1)}catch(e){console.error("Error fetching data:",e),P(!1)}},[Ht]),on=e=>{if("object"===typeof e&&null!==e&&void 0!==e&&e.name)return e.name;if(!e)return"N/A";const t=M.find(t=>String(t._id)===String(e)||String(t.code)===String(e));return t?t.name:"N/A"},an=e=>{const{name:t,value:n}=e.target;ye(e=>({...e,[t]:n})),Se[t]&&je(e=>({...e,[t]:""}))},rn=()=>{K(!1),X(null),ee({name:"",code:""}),se({})},ln=()=>{H(!1),q(!1),G(null),ye({name:"",division:""}),je({})};if((0,i.useEffect)(()=>{sn()},[sn]),O)return(0,_e.jsx)("div",{className:"loading-container",children:(0,_e.jsx)("div",{className:"spinner-border",role:"status",children:(0,_e.jsx)("span",{className:"visually-hidden",children:"Loading..."})})});if(!Pt)return(0,_e.jsxs)("div",{className:"section-management",children:[(0,_e.jsx)("div",{style:{background:"linear-gradient(135deg, #1e40af 0%, #2563eb 50%, #3b82f6 100%)",borderRadius:"20px",padding:"32px 40px",marginBottom:"28px",color:"#fff",position:"relative",overflow:"hidden",boxShadow:"0 10px 40px rgba(30, 64, 175, 0.3)"},children:(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,_e.jsx)("i",{className:"bi bi-diagram-3",style:{fontSize:"28px"}}),(0,_e.jsx)("h2",{style:{margin:0,fontSize:"28px",fontWeight:700},children:"Section Management"})]})}),(0,_e.jsx)("div",{className:"professional-card",children:(0,_e.jsx)("div",{className:"no-data",children:(0,_e.jsx)("p",{children:"You do not have permission to view sections. Contact a Super Admin for access."})})})]});const dn=e=>{var t;return e?"object"===typeof e.division&&null!==(t=e.division)&&void 0!==t&&t._id?String(e.division._id):"string"===typeof e.division?String(e.division):"":""},cn=L&&"all"!==L?A.filter(e=>{var t,n;const i=dn(e);if(i)return String(i)===String(L);const s=tn("object"===typeof e.division?null===(t=e.division)||void 0===t?void 0:t.name:""),o=(null===(n=M.find(e=>String(e._id)===String(L)))||void 0===n?void 0:n.name)||"",a=tn(o);return s&&a&&s===a}):A,un=(()=>{const e=tn(F);return(e?cn.filter(t=>{const n=String(t._id||t.code||t.sectionId||""),i=tn(t.name||"");return n.includes(e)||i.includes(e)}):cn).slice().sort((e,t)=>{const n=e=>String((null===e||void 0===e?void 0:e.name)||"").toLowerCase(),i=e=>{var t,n,i;const s=null!==(t=null!==(n=null!==(i=null===e||void 0===e?void 0:e.code)&&void 0!==i?i:null===e||void 0===e?void 0:e.sectionId)&&void 0!==n?n:null===e||void 0===e?void 0:e._id)&&void 0!==t?t:"",o=Number(String(s).replace(/[^0-9.-]/g,""));return Number.isFinite(o)?o:String(s)};if("name_asc"===$)return n(e).localeCompare(n(t));if("name_desc"===$)return n(t).localeCompare(n(e));if("id_asc"===$){const n=i(e),s=i(t);return"number"===typeof n&&"number"===typeof s?n-s:String(n).localeCompare(String(s))}if("id_desc"===$){const n=i(e),s=i(t);return"number"===typeof n&&"number"===typeof s?s-n:String(s).localeCompare(String(n))}return 0})})(),hn=e=>z(e.target.value);return(0,_e.jsxs)("div",{className:"section-management",children:[(0,_e.jsx)("style",{children:"\n        @keyframes toast-slide-in { from { transform: translateY(-12px); opacity: 0 } to { transform: translateY(0); opacity: 1 } }\n        @keyframes toast-progress { from { width: 100% } to { width: 0 } }\n      "}),Mt.show&&(0,_e.jsx)("div",{role:"status","aria-live":"polite",style:{position:"fixed",top:20,right:20,zIndex:12e3},children:(0,_e.jsxs)("div",{style:{minWidth:320,maxWidth:420,background:"#111827",color:"white",borderRadius:12,boxShadow:"0 10px 30px rgba(0,0,0,0.25)",padding:14,display:"flex",gap:12,alignItems:"flex-start",animation:"toast-slide-in 200ms ease-out",borderLeft:"6px solid "+("success"===Mt.type?"#10b981":"warning"===Mt.type?"#f59e0b":"#ef4444")},children:[(0,_e.jsx)("div",{style:{width:36,height:36,borderRadius:8,background:"success"===Mt.type?"rgba(16,185,129,0.18)":"warning"===Mt.type?"rgba(245,158,11,0.18)":"rgba(239,68,68,0.18)",display:"flex",alignItems:"center",justifyContent:"center",color:"success"===Mt.type?"#34d399":"warning"===Mt.type?"#fbbf24":"#f87171",flexShrink:0},children:(0,_e.jsx)("i",{className:"bi "+("success"===Mt.type?"bi-check2-circle":"warning"===Mt.type?"bi-exclamation-triangle":"bi-x-circle"),style:{fontSize:18}})}),(0,_e.jsxs)("div",{style:{flex:1},children:[Mt.title?(0,_e.jsx)("div",{style:{fontWeight:700,fontSize:15,marginBottom:2},children:Mt.title}):null,(0,_e.jsx)("div",{style:{fontSize:14,opacity:.95},children:Mt.message}),(0,_e.jsx)("div",{style:{height:3,background:"rgba(255,255,255,0.2)",borderRadius:2,marginTop:10,overflow:"hidden"},children:(0,_e.jsx)("div",{style:{height:"100%",background:"success"===Mt.type?"#34d399":"warning"===Mt.type?"#fbbf24":"#f87171",animation:"toast-progress 3s linear forwards"}})})]}),(0,_e.jsx)("button",{onClick:()=>{Ot.current&&(clearTimeout(Ot.current),Ot.current=null),Rt(e=>({...e,show:!1}))},"aria-label":"Close notification",style:{background:"transparent",border:"none",color:"rgba(255,255,255,0.8)",cursor:"pointer",padding:6,borderRadius:6,alignSelf:"center"},children:(0,_e.jsx)("i",{className:"bi bi-x-lg"})})]})}),Ve&&Qe&&(0,_e.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001,padding:"20px"},children:(0,_e.jsxs)("div",{style:{background:"white",borderRadius:"16px",maxWidth:"700px",width:"100%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",overflow:"hidden"},children:[(0,_e.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px 28px",display:"flex",alignItems:"center",gap:"12px"},children:[(0,_e.jsx)("i",{className:"bi bi-people-fill",style:{fontSize:"22px",color:"white"}}),(0,_e.jsxs)("h3",{style:{margin:0,color:"white",fontSize:"18px",fontWeight:"600"},children:["Confirm Bulk Transfer (",We.size," selected)"]})]}),(0,_e.jsxs)("div",{style:{padding:"24px"},children:[(0,_e.jsxs)("p",{style:{fontSize:"14px",color:"#374151",marginBottom:"12px"},children:["You're about to transfer ",(0,_e.jsx)("strong",{children:We.size})," employee",1!==We.size?"s":""," to:"]}),(0,_e.jsxs)("div",{style:{padding:"12px 16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[(0,_e.jsx)("div",{style:{fontSize:"14px",color:"#1f2937",fontWeight:"600"},children:(null===Qe||void 0===Qe||null===(e=Qe.subSection)||void 0===e?void 0:e.sub_hie_name)||(null===Qe||void 0===Qe||null===(t=Qe.subSection)||void 0===t?void 0:t.hie_name)||"N/A"}),(0,_e.jsx)("div",{style:{fontSize:"13px",color:"#6b7280"},children:(null===Qe||void 0===Qe||null===(n=Qe.parentSection)||void 0===n?void 0:n.hie_name)||"Section: N/A"}),(0,_e.jsx)("div",{style:{fontSize:"13px",color:"#6b7280"},children:(null===Qe||void 0===Qe||null===(s=Qe.parentDivision)||void 0===s?void 0:s.division_name)||"Division: N/A"})]}),(0,_e.jsxs)("div",{style:{marginTop:"18px"},children:[(0,_e.jsx)("strong",{style:{color:"#374151"},children:"Selected employees preview:"}),(0,_e.jsxs)("div",{style:{marginTop:"8px",maxHeight:"160px",overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px"},children:[Array.from(We).slice(0,10).map((e,t)=>{const n=Ye.find(t=>String((null===t||void 0===t?void 0:t.EMP_NUMBER)||(null===t||void 0===t?void 0:t.empNumber)||(null===t||void 0===t?void 0:t.EMP_ID)||(null===t||void 0===t?void 0:t.emp_id)||"")===e),i=(null===n||void 0===n?void 0:n.FULLNAME)||(null===n||void 0===n?void 0:n.fullName)||(null===n||void 0===n?void 0:n.CALLING_NAME)||(null===n||void 0===n?void 0:n.calling_name)||(null===n||void 0===n?void 0:n.name)||e;return(0,_e.jsxs)("div",{style:{padding:"6px 8px",borderBottom:"1px dashed #e5e7eb",fontSize:"13px"},children:[e," - ",i]},e+t)}),We.size>10&&(0,_e.jsxs)("div",{style:{padding:"6px 8px",color:"#6b7280",fontSize:"13px"},children:["+ ",We.size-10," more..."]})]})]})]}),(0,_e.jsxs)("div",{style:{padding:"20px 28px",borderTop:"1px solid #e5e7eb",background:"#f9fafb",display:"flex",justifyContent:"flex-end",gap:"12px"},children:[(0,_e.jsx)("button",{onClick:()=>qe(!1),disabled:Qt,style:{padding:"10px 20px",border:"2px solid #d1d5db",borderRadius:"8px",backgroundColor:"white",color:"#6b7280",fontSize:"13px",fontWeight:"600",cursor:Qt?"not-allowed":"pointer"},children:"Cancel"}),(0,_e.jsx)("button",{onClick:async()=>{if(!Ut)return qe(!1),Vt({type:"error",title:"Permission",message:"You do not have permission to transfer employees."});if(!Qe||0===We.size)return;Xt(!0);const e=localStorage.getItem("token");if(!e)return Xt(!1),qe(!1),Vt({type:"error",title:"Auth",message:"Token missing. Please login."});try{const t=Array.from(We),n=Ye.filter(e=>t.includes(String((null===e||void 0===e?void 0:e.EMP_NUMBER)||(null===e||void 0===e?void 0:e.empNumber)||(null===e||void 0===e?void 0:e.EMP_ID)||(null===e||void 0===e?void 0:e.emp_id)||""))).map(e=>{var t,n,i,s,o,a,r,l;return{employeeId:String((null===e||void 0===e?void 0:e.EMP_NUMBER)||(null===e||void 0===e?void 0:e.empNumber)||(null===e||void 0===e?void 0:e.EMP_ID)||(null===e||void 0===e?void 0:e.emp_id)||""),employeeName:(null===e||void 0===e?void 0:e.FULLNAME)||(null===e||void 0===e?void 0:e.fullName)||(null===e||void 0===e?void 0:e.CALLING_NAME)||(null===e||void 0===e?void 0:e.calling_name)||(null===e||void 0===e?void 0:e.name)||"",division_code:(null===Qe||void 0===Qe||null===(t=Qe.parentDivision)||void 0===t?void 0:t.division_code)||"",division_name:(null===Qe||void 0===Qe||null===(n=Qe.parentDivision)||void 0===n?void 0:n.division_name)||"",hie_code:(null===Qe||void 0===Qe||null===(i=Qe.parentSection)||void 0===i?void 0:i.hie_code)||"",hie_name:(null===Qe||void 0===Qe||null===(s=Qe.parentSection)||void 0===s?void 0:s.hie_name)||"",sub_section_id:(null===Qe||void 0===Qe?void 0:Qe._id)||"",sub_hie_code:(null===Qe||void 0===Qe||null===(o=Qe.subSection)||void 0===o?void 0:o.sub_hie_code)||(null===Qe||void 0===Qe||null===(a=Qe.subSection)||void 0===a?void 0:a.hie_code)||"",sub_hie_name:(null===Qe||void 0===Qe||null===(r=Qe.subSection)||void 0===r?void 0:r.sub_hie_name)||(null===Qe||void 0===Qe||null===(l=Qe.subSection)||void 0===l?void 0:l.hie_name)||"",transferredAt:(new Date).toISOString(),employeeData:e}});let i=await fetch(`${Ht}/mysql-subsections/transfer/bulk`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)});if(i.ok){const e=await i.json();console.log("Bulk transfer result:",e)}else if(console.warn("Bulk transfer failed, will fallback to single inserts if supported. Status:",i.status),404===i.status||501===i.status||405===i.status){const t=[];for(const i of n){const n=await fetch(`${Ht}/mysql-subsections/transfer`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(i)});t.push(n)}if(t.some(e=>!e.ok))throw new Error("One or more single transfers failed in fallback")}else{const t=[];for(const i of n){const n=await fetch(`${Ht}/mysql-subsections/transfer`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(i)});t.push(n)}if(t.some(e=>!e.ok))throw new Error("One or more single transfers failed in fallback")}at(e=>{const t=[...e,...n.map(e=>({employeeId:String(e.employeeId),sub_section_id:String(e.sub_section_id)}))],i=[],s=new Set;return t.forEach(e=>{const t=`${e.employeeId}_${e.sub_section_id}`;s.has(t)||(s.add(t),i.push(e))}),i}),Ge(e=>e.filter(e=>!We.has(String((null===e||void 0===e?void 0:e.EMP_NUMBER)||(null===e||void 0===e?void 0:e.empNumber)||(null===e||void 0===e?void 0:e.EMP_ID)||(null===e||void 0===e?void 0:e.emp_id)||"")))),He(new Set),qe(!1),Xt(!1),Vt({type:"success",title:"Bulk Transfer Completed",message:`${n.length} employee${1!==n.length?"s were":" was"} transferred successfully.`});try{await Kt(Qe._id,e)}catch(cu){console.warn("Failed to refresh transfers after bulk operation",cu)}}catch(t){console.error("Bulk transfer failed:",t),qe(!1),Xt(!1),Vt({type:"error",title:"Transfer Failed",message:"Bulk transfer failed. Check console for details."})}},disabled:Qt,style:{padding:"10px 20px",border:"none",borderRadius:"8px",background:Qt?"#9ca3af":"linear-gradient(135deg, #10b981, #059669)",color:"white",fontSize:"13px",fontWeight:"600",cursor:Qt?"not-allowed":"pointer"},children:Qt?"Transferring...":`Confirm (${We.size})`})]})]})}),(0,_e.jsx)("style",{children:"\n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n        .modal-overlay {\n          backdrop-filter: blur(2px);\n        }\n      "}),(0,_e.jsxs)("div",{style:{background:"linear-gradient(135deg, #1e40af 0%, #2563eb 50%, #3b82f6 100%)",borderRadius:"20px",padding:"32px 40px",marginBottom:"28px",color:"#fff",position:"relative",overflow:"hidden",boxShadow:"0 10px 40px rgba(30, 64, 175, 0.3)"},children:[(0,_e.jsxs)("div",{style:{position:"relative",zIndex:2},children:[(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"8px"},children:[(0,_e.jsx)("div",{style:{width:"48px",height:"48px",background:"rgba(255,255,255,0.2)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,_e.jsx)("i",{className:"bi bi-diagram-3",style:{fontSize:"24px"}})}),(0,_e.jsx)("h2",{style:{margin:0,fontSize:"28px",fontWeight:700},children:"Section Management"})]}),(0,_e.jsx)("p",{style:{margin:0,opacity:.85,fontSize:"15px"},children:"Manage organizational sections, sub-sections and employee assignments"})]}),(0,_e.jsx)("div",{style:{position:"absolute",right:"30px",top:"50%",transform:"translateY(-50%)",opacity:.1,fontSize:"120px"},children:(0,_e.jsx)("i",{className:"bi bi-diagram-3-fill"})})]}),(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#fff",borderRadius:"16px",boxShadow:"0 2px 12px rgba(102,126,234,0.07)",padding:"28px 32px",marginBottom:"28px",gap:"32px",flexWrap:"wrap"},children:[(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"18px",flex:1,minWidth:320},children:[(0,_e.jsx)("label",{htmlFor:"divisionFilter",className:"form-label m-0",style:{fontWeight:600,color:"#374151",fontSize:"16px"},children:"Filter by Division:"}),(()=>{const e=new Map,t=new Map(M.map(e=>[tn(e.name||""),String(e._id)]));A.forEach(n=>{let i=dn(n);if(!i){var s;const e="object"===typeof n.division?null===(s=n.division)||void 0===s?void 0:s.name:"",o=t.get(tn(e||""));o&&(i=o)}i&&e.set(String(i),(e.get(String(i))||0)+1)});return(0,_e.jsxs)("select",{id:"divisionFilter",className:"form-select",value:L||"all",onChange:hn,style:{minWidth:"260px",fontSize:"15px",borderRadius:"8px",border:"2px solid #e0e7ff",background:"#f8fafc",color:"#374151",fontWeight:500,boxShadow:"0 1px 4px rgba(102,126,234,0.04)",padding:"10px 18px",outline:"none",transition:"border 0.2s"},children:[(0,_e.jsxs)("option",{value:"all",children:["All Divisions (",A.length," sections)"]}),M.map(t=>{return(0,_e.jsxs)("option",{value:t._id,children:[t.name," (",(n=t._id,e.get(String(n))||0),")"]},t._id);var n})]})})()]}),(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1,minWidth:320,justifyContent:"flex-end"},children:[(0,_e.jsx)("label",{htmlFor:"sectionSearch",className:"form-label m-0",style:{fontWeight:600,color:"#374151",fontSize:"16px"},children:"Search:"}),(0,_e.jsxs)("select",{id:"sectionSort",value:$,onChange:e=>U(e.target.value),style:{fontSize:"14px",borderRadius:"8px",border:"2px solid #e0e7ff",background:"#fff",color:"#374151",fontWeight:600,boxShadow:"0 1px 4px rgba(102,126,234,0.04)",padding:"8px 12px",outline:"none",marginRight:"8px"},children:[(0,_e.jsx)("option",{value:"name_asc",children:"Name A \u2192 Z"}),(0,_e.jsx)("option",{value:"name_desc",children:"Name Z \u2192 A"}),(0,_e.jsx)("option",{value:"id_asc",children:"ID Small \u2192 High"}),(0,_e.jsx)("option",{value:"id_desc",children:"ID High \u2192 Small"})]}),(0,_e.jsx)("input",{id:"sectionSearch",type:"text",className:"form-control",placeholder:"Search by Section ID or Name",value:F,onChange:e=>B(e.target.value),style:{maxWidth:"320px",fontSize:"15px",borderRadius:"8px",border:"2px solid #e0e7ff",background:"#f8fafc",color:"#374151",fontWeight:500,boxShadow:"0 1px 4px rgba(102,126,234,0.04)",padding:"10px 18px",outline:"none",transition:"border 0.2s"}})]})]}),(0,_e.jsxs)("div",{className:"professional-card",children:[(0,_e.jsx)("div",{className:"table-responsive",children:(0,_e.jsxs)("table",{className:"professional-table",children:[(0,_e.jsx)("thead",{children:(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("th",{children:"Section Name"}),(0,_e.jsx)("th",{children:"Division"}),(0,_e.jsx)("th",{children:"Sub Section"})]})}),(0,_e.jsx)("tbody",{children:un.map(e=>{var t,n,i,s;return(0,_e.jsxs)("tr",{className:"section-row section-card",children:[(0,_e.jsx)("td",{"data-label":"Section Name",style:{minWidth:320},children:(0,_e.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,_e.jsx)("div",{style:{fontSize:"15px",fontWeight:700,color:"#0f172a"},children:e.name}),(0,_e.jsx)("div",{style:{color:"#6b7280",fontSize:"13px"},children:String(e.code||"").toUpperCase()})]})}),(0,_e.jsx)("td",{"data-label":"Division",style:{width:260},children:(0,_e.jsx)("span",{className:"role-badge",children:on(e.division)})}),(0,_e.jsx)("td",{"data-label":"Sub Section",children:(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[(0,_e.jsxs)("div",{className:"sub-count",children:[null!==(t=null===(n=ke[e._id])||void 0===n?void 0:n.length)&&void 0!==t?t:0," sub-section",1!==(null!==(i=null===(s=ke[e._id])||void 0===s?void 0:s.length)&&void 0!==i?i:0)?"s":""]}),(0,_e.jsxs)("div",{className:"sub-actions",children:[(0,_e.jsx)("button",{className:"btn-professional btn-success",onClick:Ft?()=>(e=>{X(e),ee({name:"",code:""}),se({}),K(!0)})(e):void 0,title:Ft?"Create Sub-Section":"No permission to create sub sections",disabled:!Ft,style:{padding:"8px 12px",fontSize:"12px",cursor:Ft?"pointer":"not-allowed"},children:(0,_e.jsx)("i",{className:"bi bi-plus"})}),zt?(0,_e.jsx)("button",{className:"btn-professional btn-light",onClick:()=>(async e=>{Pe(e),Re(!0);const t=e._id;ke[t]||await Yt(t)})(e),title:"View Sub-Sections",style:{padding:"8px 12px",fontSize:"12px"},children:(0,_e.jsx)("i",{className:"bi bi-chevron-right"})}):null]})]})})]},e._id)})})]})}),0===A.length&&(0,_e.jsx)("div",{className:"no-data",children:(0,_e.jsx)("p",{children:"No sections found."})})]}),(W||V)&&(0,_e.jsx)("div",{className:"modal-overlay",onClick:ln,children:(0,_e.jsxs)("div",{className:"modal-content professional-form",onClick:e=>e.stopPropagation(),children:[(0,_e.jsxs)("div",{className:"modal-header",style:{borderBottom:"2px solid var(--gray-200)",paddingBottom:"20px",marginBottom:"24px"},children:[(0,_e.jsxs)("h3",{style:{fontSize:"24px",fontWeight:"700",color:"var(--gray-900)",display:"flex",alignItems:"center",gap:"12px"},children:[(0,_e.jsx)("i",{className:"bi "+(Y?"bi-pencil-square":"bi-plus-circle"),style:{color:"var(--primary)"}}),Y?"Edit Section":"Add New Section"]}),(0,_e.jsx)("button",{className:"modal-close btn-professional btn-danger",onClick:ln,style:{padding:"8px 12px",fontSize:"16px"},children:(0,_e.jsx)("i",{className:"bi bi-x"})})]}),(0,_e.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!Lt)return void alert("You do not have permission to perform this action.");const t=(()=>{const e={};return be.name.trim()||(e.name="Section name is required"),be.division||(e.division="Division is required"),console.log("Form validation:",{formData:be,errors:e,divisionsCount:M.length}),e})();if(Object.keys(t).length>0)je(t);else{Ne(!0);try{const e=localStorage.getItem("token");if(!e)return alert("Authentication token not found. Please log in again."),void Ne(!1);const t={name:be.name.trim(),division:be.division,code:be.name.trim().toUpperCase().replace(/[^A-Z0-9]/g,"_").slice(0,10),status:"active"};if(console.log("Submitting section data:",t),console.log("Token available:",!!e),console.log("Request URL:",Y?`http://localhost:5000/api/sections/${Y._id}`:"http://localhost:5000/api/sections"),Y){const i=await fetch(`http://localhost:5000/api/sections/${Y._id}`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(console.log("Update response status:",i.status),console.log("Update response headers:",Object.fromEntries(i.headers.entries())),i.ok){const e=await i.json();console.log("Section updated:",e),await sn(),alert("Section updated successfully!")}else{let e="Unknown error";try{const t=await i.json();console.error("Failed to update section:",i.status,t),t.errors&&Array.isArray(t.errors)?e=t.errors.map(e=>e.message).join(", "):t.error?e=t.error:t.message&&(e=t.message)}catch(n){console.error("Error parsing response:",n),e=`HTTP ${i.status}: ${i.statusText}`}alert(`Failed to update section: ${e}`)}}else{const i=await fetch("http://localhost:5000/api/sections",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(console.log("Create response status:",i.status),console.log("Create response headers:",Object.fromEntries(i.headers.entries())),i.ok){const e=await i.json();console.log("Section created:",e),await sn(),alert("Section created successfully!")}else{let e="Unknown error";try{const t=await i.json();console.error("Failed to create section:",i.status,t),t.errors&&Array.isArray(t.errors)?e=t.errors.map(e=>e.message).join(", "):t.error?e=t.error:t.message&&(e=t.message)}catch(n){console.error("Error parsing response:",n),e=`HTTP ${i.status}: ${i.statusText}`}alert(`Failed to create section: ${e}`)}}ln()}catch(i){console.error("Error submitting section:",i),alert(`Error ${Y?"updating":"adding"} section. Please try again.`)}finally{Ne(!1)}}},className:"modal-body",children:[(0,_e.jsxs)("div",{className:"form-group",children:[(0,_e.jsx)("label",{className:"form-label",children:"Section Name *"}),(0,_e.jsx)("input",{type:"text",name:"name",className:"form-input "+(Se.name?"error":""),value:be.name,onChange:an,placeholder:"Enter section name",required:!0}),Se.name&&(0,_e.jsx)("span",{className:"error-text",children:Se.name})]}),(0,_e.jsxs)("div",{className:"form-group",children:[(0,_e.jsx)("label",{className:"form-label",children:"Division *"}),(0,_e.jsxs)("select",{name:"division",className:"form-select "+(Se.division?"error":""),value:be.division,onChange:an,required:!0,children:[(0,_e.jsx)("option",{value:"",children:"Select Division"}),M.map(e=>(0,_e.jsxs)("option",{value:e._id,children:[e.name," (",e.code,")"]},e._id))]}),Se.division&&(0,_e.jsx)("span",{className:"error-text",children:Se.division})]}),(0,_e.jsxs)("div",{className:"modal-footer",style:{borderTop:"2px solid var(--gray-200)",paddingTop:"20px",marginTop:"24px",display:"flex",gap:"12px",justifyContent:"flex-end"},children:[(0,_e.jsx)("button",{type:"button",className:"btn-professional btn-secondary",onClick:ln,disabled:we,style:{background:"var(--gray-500)"},children:"Cancel"}),(0,_e.jsxs)("button",{type:"submit",className:"btn-professional btn-success",disabled:we||!Lt,"aria-disabled":we||!Lt,title:Lt?"":"You do not have permission to perform this action",children:[(0,_e.jsx)("i",{className:"bi "+(Y?"bi-check-circle":"bi-plus-circle")}),we?Y?"Updating...":"Adding...":Y?"Update Section":"Add Section"]})]})]})]})}),J&&Q&&(0,_e.jsx)("div",{className:"modal-overlay",onClick:rn,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1050,backdropFilter:"blur(2px)",padding:"20px",boxSizing:"border-box"},children:(0,_e.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{backgroundColor:"#fff",borderRadius:"16px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15)",width:"100%",maxWidth:"950px",maxHeight:"calc(100vh - 40px)",position:"relative",border:"none",overflow:"hidden",display:"flex",flexDirection:"column"},children:[(0,_e.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"24px 32px 20px",borderRadius:"16px 16px 0 0",position:"relative",overflow:"hidden",flexShrink:0},children:[(0,_e.jsx)("div",{style:{position:"relative",zIndex:2},children:(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,_e.jsx)("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"12px",padding:"12px",backdropFilter:"blur(10px)"},children:(0,_e.jsx)("i",{className:"bi bi-diagram-3-fill",style:{fontSize:"24px",color:"white"}})}),(0,_e.jsxs)("div",{children:[(0,_e.jsx)("h3",{style:{margin:0,fontSize:"22px",fontWeight:"700",letterSpacing:"-0.5px",textShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:"Create Sub-Section"}),(0,_e.jsx)("p",{style:{margin:"4px 0 0",fontSize:"14px",opacity:.9,fontWeight:"400"},children:"Add a new sub-division to organize your structure"})]})]}),(0,_e.jsx)("button",{onClick:rn,style:{background:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",padding:"8px",fontSize:"20px",transition:"all 0.2s ease",backdropFilter:"blur(10px)"},onMouseOver:e=>e.target.style.background="rgba(255, 255, 255, 0.3)",onMouseOut:e=>e.target.style.background="rgba(255, 255, 255, 0.2)",children:(0,_e.jsx)("i",{className:"bi bi-x-lg"})})]})}),(0,_e.jsx)("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"200px",height:"200px",background:"radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%)",borderRadius:"50%"}})]}),(0,_e.jsxs)("div",{style:{padding:"24px 32px",flex:1,overflowY:"auto",minHeight:0},children:[(0,_e.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea15 0%, #764ba215 100%)",border:"2px solid #667eea",borderRadius:"8px",padding:"16px 20px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"12px"},children:[(0,_e.jsx)("i",{className:"bi bi-funnel-fill",style:{color:"#667eea",fontSize:"20px"}}),(0,_e.jsxs)("div",{style:{flex:1},children:[(0,_e.jsx)("div",{style:{fontWeight:"600",color:"#495057",marginBottom:"4px"},children:"Parent Structure:"}),(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[(0,_e.jsx)("span",{style:{background:"#667eea",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:"500"},children:(null===(o=M.find(e=>{var t;return String(e._id)===String("object"===typeof Q.division&&null!==(t=Q.division)&&void 0!==t&&t._id?Q.division._id:String(Q.division||""))}))||void 0===o?void 0:o.name)||("object"===typeof Q.division?null===(a=Q.division)||void 0===a?void 0:a.name:"")||"N/A"}),(0,_e.jsx)("i",{className:"bi bi-chevron-right",style:{color:"#667eea"}}),(0,_e.jsx)("span",{style:{background:"#764ba2",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:"500"},children:Q.name||"N/A"})]})]})]}),(0,_e.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"10px",border:"2px solid #e1e5f2",padding:"20px"},children:[(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"18px"},children:[(0,_e.jsx)("i",{className:"bi bi-plus-circle-fill",style:{color:"#10b981",fontSize:"16px"}}),(0,_e.jsx)("h4",{style:{margin:0,fontSize:"15px",fontWeight:"600",color:"#374151"},children:"New Sub-Section Details"})]}),(0,_e.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"20px"},children:[(0,_e.jsxs)("div",{children:[(0,_e.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"10px"},children:[(0,_e.jsx)("i",{className:"bi bi-type",style:{color:"#667eea"}}),"Sub-Section Name",(0,_e.jsx)("span",{style:{color:"#ef4444",fontSize:"14px"},children:"*"})]}),(0,_e.jsx)("input",{type:"text",value:Z.name,onChange:e=>ee({...Z,name:e.target.value}),placeholder:"Enter a descriptive name for the sub-section",style:{width:"100%",padding:"14px",border:ie.name?"2px solid #ef4444":"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",transition:"all 0.2s ease",backgroundColor:"#fff",fontFamily:"inherit",outline:"none",boxSizing:"border-box"},onFocus:e=>{ie.name||(e.target.style.borderColor="#667eea"),e.target.style.boxShadow="0 0 0 3px rgba(102, 126, 234, 0.1)"},onBlur:e=>{ie.name||(e.target.style.borderColor="#e5e7eb"),e.target.style.boxShadow="none"}}),ie.name&&(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"#ef4444",fontSize:"13px",marginTop:"8px",fontWeight:"500"},children:[(0,_e.jsx)("i",{className:"bi bi-exclamation-circle-fill"}),ie.name]})]}),(0,_e.jsxs)("div",{children:[(0,_e.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"10px"},children:[(0,_e.jsx)("i",{className:"bi bi-hash",style:{color:"#667eea"}}),"Sub-Section Code/ID",(0,_e.jsx)("span",{style:{color:"#ef4444",fontSize:"14px"},children:"*"})]}),(0,_e.jsx)("input",{type:"text",value:Z.code,onChange:e=>ee({...Z,code:e.target.value}),placeholder:"e.g., SS-001",style:{width:"100%",padding:"14px",border:ie.code?"2px solid #ef4444":"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",transition:"all 0.2s ease",backgroundColor:"#fff",fontFamily:"inherit",outline:"none",boxSizing:"border-box"},onFocus:e=>{ie.code||(e.target.style.borderColor="#667eea"),e.target.style.boxShadow="0 0 0 3px rgba(102, 126, 234, 0.1)"},onBlur:e=>{ie.code||(e.target.style.borderColor="#e5e7eb"),e.target.style.boxShadow="none"}}),ie.code&&(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"#ef4444",fontSize:"13px",marginTop:"8px",fontWeight:"500"},children:[(0,_e.jsx)("i",{className:"bi bi-exclamation-circle-fill"}),ie.code]})]})]})]})]}),(0,_e.jsxs)("div",{style:{padding:"16px 32px 20px",borderTop:"1px solid #f3f4f6",backgroundColor:"#fafafa",display:"flex",gap:"12px",justifyContent:"flex-end",borderRadius:"0 0 16px 16px",flexShrink:0},children:[(0,_e.jsxs)("button",{onClick:rn,disabled:te,style:{padding:"12px 24px",border:"2px solid #d1d5db",borderRadius:"8px",backgroundColor:"white",color:"#6b7280",fontSize:"14px",fontWeight:"600",cursor:te?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:te?.6:1},onMouseOver:e=>{te||(e.target.style.borderColor="#9ca3af",e.target.style.color="#374151")},onMouseOut:e=>{te||(e.target.style.borderColor="#d1d5db",e.target.style.color="#6b7280")},children:[(0,_e.jsx)("i",{className:"bi bi-x-circle",style:{marginRight:"6px"}}),"Cancel"]}),(0,_e.jsxs)("button",{onClick:async()=>{if(!Ft)return void Vt({type:"error",title:"Permission",message:"You do not have permission to create sub-sections."});const e=(()=>{const e={};return Z.name.trim()||(e.name="Sub-section name is required"),Z.code.trim()||(e.code="Sub-section code is required"),e})();if(Object.keys(e).length)se(e);else try{var t,n;ne(!0);const e=localStorage.getItem("token"),l=Q,d="object"===typeof l.division&&null!==(t=l.division)&&void 0!==t&&t._id?l.division._id:String(l.division||""),c=M.find(e=>String(e._id)===String(d))||{},u=ve.find(e=>{var t,n,i,s,o;const a=String(null!==(t=null!==(n=null!==(i=null!==(s=null!==(o=null===e||void 0===e?void 0:e._id)&&void 0!==o?o:null===e||void 0===e?void 0:e.id)&&void 0!==s?s:null===e||void 0===e?void 0:e.DIVISION_ID)&&void 0!==i?i:null===e||void 0===e?void 0:e.code)&&void 0!==n?n:null===e||void 0===e?void 0:e.DIVISION_CODE)&&void 0!==t?t:"");return a&&String(a)===String(c._id||d)}),h=l._raw||me.find(e=>{var t,n,i,s,o;const a=String(null!==(t=null!==(n=null!==(i=null!==(s=null!==(o=null===e||void 0===e?void 0:e._id)&&void 0!==o?o:null===e||void 0===e?void 0:e.id)&&void 0!==s?s:null===e||void 0===e?void 0:e.SECTION_ID)&&void 0!==i?i:null===e||void 0===e?void 0:e.code)&&void 0!==n?n:null===e||void 0===e?void 0:e.SECTION_CODE)&&void 0!==t?t:"");return a&&String(a)===String(l._id)}),p={parentDivision:{id:c._id||d||"",division_code:(null===u||void 0===u?void 0:u.DIVISION_CODE)||(null===u||void 0===u?void 0:u.division_code)||c.code||l.divisionCode||"",division_name:(null===u||void 0===u?void 0:u.DIVISION_NAME)||(null===u||void 0===u?void 0:u.division_name)||c.name||("object"===typeof l.division?null===(n=l.division)||void 0===n?void 0:n.name:"")},parentSection:{id:l._id,hie_code:(null===h||void 0===h?void 0:h.hie_code)||(null===h||void 0===h?void 0:h.SECTION_CODE)||(null===h||void 0===h?void 0:h.code)||l.code||"",hie_name:(null===h||void 0===h?void 0:h.hie_name)||(null===h||void 0===h?void 0:h.SECTION_NAME)||(null===h||void 0===h?void 0:h.name)||l.name||""},subSection:{sub_hie_name:Z.name.trim(),sub_hie_code:Z.code.trim()},hrisSnapshot:{division:u||null,section:h||null}};console.log("\ud83d\udd0d Subsection Payload:",JSON.stringify(p,null,2));const f=await fetch(`${Ht}/mysql-subsections`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(p)});if(f.ok){const e=await f.json().catch(()=>null);rn(),Vt({type:"success",title:"Success",message:"Sub-section created successfully."});const t=null===Q||void 0===Q?void 0:Q._id;if(t){var i,s,o,a;const n=String(t),r=null!==(i=null!==(s=null!==(o=null!==(a=null===e||void 0===e?void 0:e.data)&&void 0!==a?a:null===e||void 0===e?void 0:e.created)&&void 0!==o?o:null===e||void 0===e?void 0:e.subSection)&&void 0!==s?s:e)&&void 0!==i?i:null;r&&Ce(e=>({...e,[n]:[...e[n]||[],r]})),await Yt(t,{force:!0})}}else{let e="Failed to create sub-section";try{const t=await f.json();e=(null===t||void 0===t?void 0:t.message)||e}catch(r){}Vt({type:"error",title:"Request Failed",message:e})}}catch(cu){console.error("Error creating sub-section:",cu),Vt({type:"error",title:"Unexpected Error",message:"Error creating sub-section."})}finally{ne(!1)}},disabled:te,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:te?"linear-gradient(135deg, #9ca3af 0%, #6b7280 100%)":"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",fontSize:"14px",fontWeight:"600",cursor:te?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:te?"none":"0 3px 10px rgba(16, 185, 129, 0.3)"},onMouseOver:e=>{te||(e.target.style.transform="translateY(-1px)",e.target.style.boxShadow="0 4px 15px rgba(16, 185, 129, 0.4)")},onMouseOut:e=>{te||(e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 3px 10px rgba(16, 185, 129, 0.3)")},children:[(0,_e.jsx)("i",{className:"bi "+(te?"bi-arrow-repeat":"bi-check-circle"),style:{marginRight:"8px",animation:te?"spin 1s linear infinite":"none"}}),te?"Creating...":"Create Sub-Section"]})]})]})}),oe&&re&&(0,_e.jsx)("div",{className:"modal-overlay",onClick:Jt,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:11500,backdropFilter:"blur(2px)",padding:"20px",boxSizing:"border-box"},children:(0,_e.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{backgroundColor:"#fff",borderRadius:"16px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15)",width:"100%",maxWidth:"950px",maxHeight:"calc(100vh - 40px)",position:"relative",border:"none",overflow:"hidden",display:"flex",flexDirection:"column"},children:[(0,_e.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"24px 32px 20px",borderRadius:"16px 16px 0 0",position:"relative",overflow:"hidden",flexShrink:0},children:[(0,_e.jsx)("div",{style:{position:"relative",zIndex:2},children:(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,_e.jsx)("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"12px",padding:"12px",backdropFilter:"blur(10px)"},children:(0,_e.jsx)("i",{className:"bi bi-pencil-square",style:{fontSize:"24px",color:"white"}})}),(0,_e.jsxs)("div",{children:[(0,_e.jsx)("h3",{style:{margin:0,fontSize:"22px",fontWeight:"700",letterSpacing:"-0.5px",textShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:"Edit Sub-Section"}),(0,_e.jsx)("p",{style:{margin:"4px 0 0",fontSize:"14px",opacity:.9,fontWeight:"400"},children:"Modify the sub-section details"})]})]}),(0,_e.jsx)("button",{onClick:Jt,disabled:ue,style:{background:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"8px",color:"white",cursor:ue?"not-allowed":"pointer",padding:"8px",fontSize:"20px",transition:"all 0.2s ease",backdropFilter:"blur(10px)",opacity:ue?.5:1},onMouseOver:e=>{ue||(e.target.style.background="rgba(255, 255, 255, 0.3)")},onMouseOut:e=>{ue||(e.target.style.background="rgba(255, 255, 255, 0.2)")},children:(0,_e.jsx)("i",{className:"bi bi-x-lg"})})]})}),(0,_e.jsx)("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"200px",height:"200px",background:"radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%)",borderRadius:"50%"}})]}),(0,_e.jsxs)("div",{style:{padding:"24px 32px",flex:1,overflowY:"auto",minHeight:0},children:[(0,_e.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea15 0%, #764ba215 100%)",border:"2px solid #667eea",borderRadius:"8px",padding:"16px 20px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"12px"},children:[(0,_e.jsx)("i",{className:"bi bi-funnel-fill",style:{color:"#667eea",fontSize:"20px"}}),(0,_e.jsxs)("div",{style:{flex:1},children:[(0,_e.jsx)("div",{style:{fontWeight:"600",color:"#495057",marginBottom:"4px"},children:"Parent Structure:"}),(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[(0,_e.jsx)("span",{style:{background:"#667eea",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:"500"},children:(null===re||void 0===re?void 0:re.parentDivision)||"N/A"}),(0,_e.jsx)("i",{className:"bi bi-chevron-right",style:{color:"#667eea"}}),(0,_e.jsx)("span",{style:{background:"#764ba2",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:"500"},children:(null===re||void 0===re?void 0:re.parentSection)||"N/A"})]})]})]}),(0,_e.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"10px",border:"2px solid #e1e5f2",padding:"20px"},children:[(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"18px"},children:[(0,_e.jsx)("i",{className:"bi bi-pencil-fill",style:{color:"#667eea",fontSize:"16px"}}),(0,_e.jsx)("h4",{style:{margin:0,fontSize:"15px",fontWeight:"600",color:"#374151"},children:"Edit Sub-Section Details"})]}),(0,_e.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"20px"},children:[(0,_e.jsxs)("div",{children:[(0,_e.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"10px"},children:[(0,_e.jsx)("i",{className:"bi bi-type",style:{color:"#667eea"}}),"Sub-Section Name",(0,_e.jsx)("span",{style:{color:"#ef4444",fontSize:"14px"},children:"*"})]}),(0,_e.jsx)("input",{type:"text",value:de.name,onChange:e=>{ce({...de,name:e.target.value}),pe.name&&fe({...pe,name:""})},placeholder:"Enter a descriptive name for the sub-section",disabled:ue,style:{width:"100%",padding:"14px",border:pe.name?"2px solid #ef4444":"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",transition:"all 0.2s ease",backgroundColor:ue?"#f3f4f6":"#fff",fontFamily:"inherit",outline:"none",boxSizing:"border-box"},onFocus:e=>{pe.name||ue||(e.target.style.borderColor="#667eea",e.target.style.boxShadow="0 0 0 3px rgba(102, 126, 234, 0.1)")},onBlur:e=>{pe.name||(e.target.style.borderColor="#e5e7eb"),e.target.style.boxShadow="none"}}),pe.name&&(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"#ef4444",fontSize:"13px",marginTop:"8px",fontWeight:"500"},children:[(0,_e.jsx)("i",{className:"bi bi-exclamation-circle-fill"}),pe.name]})]}),(0,_e.jsxs)("div",{children:[(0,_e.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"10px"},children:[(0,_e.jsx)("i",{className:"bi bi-hash",style:{color:"#667eea"}}),"Sub-Section Code/ID",(0,_e.jsx)("span",{style:{color:"#ef4444",fontSize:"14px"},children:"*"})]}),(0,_e.jsx)("input",{type:"text",value:de.code,onChange:e=>{ce({...de,code:e.target.value}),pe.code&&fe({...pe,code:""})},placeholder:"e.g., SS-001",disabled:ue,style:{width:"100%",padding:"14px",border:pe.code?"2px solid #ef4444":"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",transition:"all 0.2s ease",backgroundColor:ue?"#f3f4f6":"#fff",fontFamily:"inherit",outline:"none",boxSizing:"border-box"},onFocus:e=>{pe.code||ue||(e.target.style.borderColor="#667eea",e.target.style.boxShadow="0 0 0 3px rgba(102, 126, 234, 0.1)")},onBlur:e=>{pe.code||(e.target.style.borderColor="#e5e7eb"),e.target.style.boxShadow="none"}}),pe.code&&(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"#ef4444",fontSize:"13px",marginTop:"8px",fontWeight:"500"},children:[(0,_e.jsx)("i",{className:"bi bi-exclamation-circle-fill"}),pe.code]})]})]})]})]}),(0,_e.jsxs)("div",{style:{padding:"16px 32px",borderTop:"1px solid #e5e7eb",backgroundColor:"#f9fafb",display:"flex",gap:"10px",justifyContent:"flex-end",borderRadius:"0 0 16px 16px",flexShrink:0},children:[(0,_e.jsxs)("button",{onClick:Jt,disabled:ue,style:{padding:"10px 20px",border:"2px solid #e5e7eb",borderRadius:"8px",backgroundColor:"white",color:"#6b7280",fontSize:"14px",fontWeight:"600",cursor:ue?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:ue?.6:1,display:"flex",alignItems:"center",gap:"6px"},onMouseOver:e=>{ue||(e.target.style.borderColor="#9ca3af",e.target.style.color="#374151",e.target.style.transform="translateY(-1px)",e.target.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)")},onMouseOut:e=>{ue||(e.target.style.borderColor="#d1d5db",e.target.style.color="#6b7280",e.target.style.transform="translateY(0)",e.target.style.boxShadow="none")},children:[(0,_e.jsx)("i",{className:"bi bi-x-circle",style:{fontSize:"14px"}}),"Cancel"]}),(0,_e.jsxs)("button",{onClick:async()=>{if(!re)return;if(!Bt)return void Vt({type:"error",title:"Permission",message:"You do not have permission to update sub-sections."});const e={};if(de.name.trim()||(e.name="Sub-section name is required"),de.code.trim()||(e.code="Sub-section code is required"),Object.keys(e).length>0)return void fe(e);he(!0);const t=localStorage.getItem("token");if(!t)return he(!1),void Vt({type:"error",title:"Auth",message:"Token missing. Please login."});try{var n,i,s,o;const e=(null===re||void 0===re||null===(n=re.subSection)||void 0===n?void 0:n._id)||(null===re||void 0===re||null===(i=re.subSection)||void 0===i?void 0:i._id)||(null===re||void 0===re||null===(s=re.subSection)||void 0===s?void 0:s.id)||(null===re||void 0===re||null===(o=re.subSection)||void 0===o?void 0:o.section_id)||"",r={sub_hie_name:de.name.trim(),sub_hie_code:de.code.trim(),hie_name:de.name.trim(),hie_code:de.code.trim(),name:de.name.trim(),code:de.code.trim()},l=await fetch(`${Ht}/mysql-subsections/${encodeURIComponent(e)}`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)});if(!l.ok){let e=`Failed to update sub-section (HTTP ${l.status})`;try{const t=await l.json();e=(null===t||void 0===t?void 0:t.message)||e}catch(a){}throw new Error(e)}ae(!1),le(null),ce({name:"",code:""}),he(!1),setTimeout(()=>{Vt({type:"success",title:"Success!",message:"Sub-section updated successfully."})},150),await Yt(re.sectionId,{force:!0})}catch(cu){console.error("Edit sub-section failed:",cu),he(!1),Vt({type:"error",title:"Failed",message:(null===cu||void 0===cu?void 0:cu.message)||"Could not update sub-section."})}},disabled:ue,style:{padding:"10px 24px",border:"none",borderRadius:"8px",background:ue?"linear-gradient(135deg, #9ca3af 0%, #6b7280 100%)":"linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #60a5fa 100%)",color:"white",fontSize:"14px",fontWeight:"600",cursor:ue?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:ue?"none":"0 3px 10px rgba(59, 130, 246, 0.4)",display:"flex",alignItems:"center",gap:"8px"},onMouseOver:e=>{ue||(e.target.style.transform="translateY(-1px)",e.target.style.boxShadow="0 4px 15px rgba(59, 130, 246, 0.5)")},onMouseOut:e=>{ue||(e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 3px 10px rgba(59, 130, 246, 0.4)")},children:[(0,_e.jsx)("i",{className:"bi "+(ue?"bi-arrow-repeat":"bi-check-circle-fill"),style:{fontSize:"14px",animation:ue?"spin 1s linear infinite":"none"}}),ue?"Updating...":"Update Sub-Section"]})]})]})}),Te&&Oe&&(0,_e.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},onClick:Gt,children:(0,_e.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",width:"95%",maxWidth:"1400px",height:"90vh",maxHeight:"90vh",display:"flex",flexDirection:"column",overflow:"hidden"},onClick:e=>e.stopPropagation(),children:[(0,_e.jsxs)("div",{style:{padding:"24px 32px",borderBottom:"2px solid #e5e7eb",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0},children:[(0,_e.jsxs)("h3",{style:{fontSize:"24px",fontWeight:"700",margin:0,display:"flex",alignItems:"center",gap:"12px"},children:[(0,_e.jsx)("i",{className:"bi bi-layers"}),"Sub-Sections"]}),(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[Ft?(0,_e.jsxs)("button",{onClick:()=>{Re(!1),setTimeout(()=>{X(Oe),ee({name:"",code:""}),se({}),K(!0)},250)},style:{background:"#fff",color:"#764ba2",border:"none",borderRadius:"8px",fontWeight:700,fontSize:"15px",padding:"8px 18px",marginRight:"8px",boxShadow:"0 2px 8px rgba(102, 126, 234, 0.08)",cursor:"pointer",display:"flex",alignItems:"center",gap:"7px",transition:"background 0.2s, color 0.2s"},title:"Add Subsection",children:[(0,_e.jsx)("i",{className:"bi bi-plus-circle"})," Add Subsection"]}):null,(0,_e.jsx)("button",{onClick:Gt,style:{background:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"8px",color:"white",fontSize:"20px",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease"},onMouseOver:e=>{e.target.style.background="rgba(255, 255, 255, 0.3)"},onMouseOut:e=>{e.target.style.background="rgba(255, 255, 255, 0.2)"},children:(0,_e.jsx)("i",{className:"bi bi-x"})})]})]}),(0,_e.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea15 0%, #764ba215 100%)",border:"2px solid #667eea",borderRadius:"8px",padding:"16px 20px",margin:"16px 32px",display:"flex",alignItems:"center",gap:"12px",flexShrink:0},children:[(0,_e.jsx)("i",{className:"bi bi-funnel-fill",style:{color:"#667eea",fontSize:"20px"}}),(0,_e.jsxs)("div",{style:{flex:1},children:[(0,_e.jsx)("div",{style:{fontWeight:"600",color:"#495057",marginBottom:"4px"},children:"Active Filters:"}),(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[(0,_e.jsx)("span",{style:{background:"#667eea",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:"500"},children:on(Oe.division)}),(0,_e.jsx)("i",{className:"bi bi-chevron-right",style:{color:"#667eea"}}),(0,_e.jsx)("span",{style:{background:"#764ba2",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:"500"},children:Oe.name})]})]}),Array.isArray(ke[Oe._id])&&ke[Oe._id].length>0&&(0,_e.jsxs)("div",{style:{background:"white",padding:"8px 16px",borderRadius:"20px",fontWeight:"600",color:"#667eea",fontSize:"14px",border:"2px solid #667eea"},children:[ke[Oe._id].length," ",1===ke[Oe._id].length?"sub-section":"sub-sections"]})]}),(0,_e.jsx)("div",{style:{flex:1,overflowY:"auto",padding:"24px 32px"},children:Ee[Oe._id]?(0,_e.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 0",color:"#6b7280"},children:[(0,_e.jsx)("div",{className:"spinner-border",role:"status",style:{width:40,height:40,marginBottom:16},children:(0,_e.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,_e.jsx)("div",{children:"Loading sub-sections..."})]}):De[Oe._id]?(0,_e.jsxs)("div",{style:{padding:"40px 20px",textAlign:"center",color:"#ef4444",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[(0,_e.jsx)("i",{className:"bi bi-exclamation-triangle",style:{fontSize:"48px"}}),(0,_e.jsx)("p",{style:{margin:0,fontSize:"15px"},children:De[Oe._id]})]}):Array.isArray(ke[Oe._id])&&ke[Oe._id].length>0?(0,_e.jsx)("div",{style:{background:"white",borderRadius:"12px",border:"2px solid #e5e7eb",overflow:"hidden",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"},children:(0,_e.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"14px"},children:[(0,_e.jsx)("thead",{children:(0,_e.jsxs)("tr",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:[(0,_e.jsx)("th",{style:{padding:"16px 20px",textAlign:"left",fontWeight:"700",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Sub-Section Name"}),(0,_e.jsx)("th",{style:{padding:"16px 20px",textAlign:"left",fontWeight:"700",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Code"}),(0,_e.jsx)("th",{style:{padding:"16px 20px",textAlign:"left",fontWeight:"700",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Created Date"}),(0,_e.jsx)("th",{style:{padding:"16px 20px",textAlign:"center",fontWeight:"700",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Transferring"}),(0,_e.jsx)("th",{style:{padding:"16px 20px",textAlign:"center",fontWeight:"700",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Actions"})]})}),(0,_e.jsx)("tbody",{children:ke[Oe._id].map((e,t)=>{var n,i,s,o,a,r;return(0,_e.jsxs)("tr",{style:{borderBottom:t<ke[Oe._id].length-1?"1px solid #e5e7eb":"none",transition:"all 0.2s ease"},onMouseOver:e=>{e.currentTarget.style.background="#f9fafb"},onMouseOut:e=>{e.currentTarget.style.background="transparent"},children:[(0,_e.jsx)("td",{style:{padding:"12px 20px",fontWeight:"600",color:"#1f2937"},children:(null===e||void 0===e||null===(n=e.subSection)||void 0===n?void 0:n.sub_hie_name)||(null===e||void 0===e||null===(i=e.subSection)||void 0===i?void 0:i.hie_name)||(null===e||void 0===e||null===(s=e.subSection)||void 0===s?void 0:s.name)||"-"}),(0,_e.jsx)("td",{style:{padding:"12px 20px"},children:(0,_e.jsx)("span",{style:{fontFamily:"monospace",color:"#667eea",background:"#eef2ff",padding:"4px 10px",borderRadius:6,fontSize:"13px",fontWeight:"600",display:"inline-block"},children:(null===e||void 0===e||null===(o=e.subSection)||void 0===o?void 0:o.sub_hie_code)||(null===e||void 0===e||null===(a=e.subSection)||void 0===a?void 0:a.hie_code)||(null===e||void 0===e||null===(r=e.subSection)||void 0===r?void 0:r.code)||"-"})}),(0,_e.jsx)("td",{style:{padding:"12px 20px",color:"#6b7280"},children:(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,_e.jsx)("i",{className:"bi bi-calendar3"}),null!==e&&void 0!==e&&e.createdAt?qt(new Date(e.createdAt)):"\u2014"]})}),(0,_e.jsx)("td",{style:{padding:"12px 20px",textAlign:"center"},children:(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[Ut?(0,_e.jsx)("button",{className:"btn-professional",onClick:()=>(async e=>{if(Ut){Xe(e),Ue(!0),He(new Set),Ke(!0),Ge([]);try{var t,n,i,s,o,a,r,l,d,c,u,h;const p=localStorage.getItem("token");if(!p)throw new Error("No authentication token");const f=await Kt(e._id,p),m=e=>void 0===e||null===e?"":String(e).trim().toLowerCase(),g=(e,t)=>{const n=m(t);return!!n&&(e||[]).some(e=>{const t=m(e);return t&&(t===n||t.includes(n)||n.includes(t))})},v=(null===e||void 0===e||null===(t=e.parentDivision)||void 0===t?void 0:t.division_code)||(null===e||void 0===e||null===(n=e.parentDivision)||void 0===n?void 0:n.divisionCode)||(null===e||void 0===e||null===(i=e.parentDivision)||void 0===i?void 0:i.code)||"",x=(null===e||void 0===e||null===(s=e.parentDivision)||void 0===s?void 0:s.division_name)||(null===e||void 0===e||null===(o=e.parentDivision)||void 0===o?void 0:o.divisionName)||(null===e||void 0===e||null===(a=e.parentDivision)||void 0===a?void 0:a.name)||"",b=(null===e||void 0===e||null===(r=e.parentSection)||void 0===r?void 0:r.hie_code)||(null===e||void 0===e||null===(l=e.parentSection)||void 0===l?void 0:l.hieCode)||(null===e||void 0===e||null===(d=e.parentSection)||void 0===d?void 0:d.code)||"",y=(null===e||void 0===e||null===(c=e.parentSection)||void 0===c?void 0:c.hie_name)||(null===e||void 0===e||null===(u=e.parentSection)||void 0===u?void 0:u.hieName)||(null===e||void 0===e||null===(h=e.parentSection)||void 0===h?void 0:h.name)||"";console.log("\ud83d\udd0d Fetching employees from cache for (relaxed match):",{divisionCode:v,divisionName:x,sectionCode:b,sectionName:y});const S=await fetch(`${Ht}/hris-cache/employees`,{method:"GET",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"},credentials:"include"});if(!S.ok)throw new Error(`HTTP ${S.status}`);const j=await S.json(),w=(null===j||void 0===j?void 0:j.data)||j||[];console.log("\ud83d\udcca Fetched from cache - Total employees:",w.length);const _=e=>{var t,n,i,s,o,a,r;return[null===e||void 0===e?void 0:e.HIE_CODE_4,null===e||void 0===e?void 0:e.hie_code_4,null===e||void 0===e?void 0:e.DIVISION_CODE,null===e||void 0===e?void 0:e.division_code,null===e||void 0===e?void 0:e.divisionCode,null===e||void 0===e||null===(t=e.currentwork)||void 0===t?void 0:t.HIE_CODE_4,null===e||void 0===e||null===(n=e.currentwork)||void 0===n?void 0:n.DIVISION_CODE,null===e||void 0===e||null===(i=e.currentwork)||void 0===i?void 0:i.division_code,null===e||void 0===e||null===(s=e.currentwork)||void 0===s?void 0:s.divisionCode,null===e||void 0===e?void 0:e.HIE_NAME_3,null===e||void 0===e?void 0:e.hie_name_3,null===e||void 0===e?void 0:e.DIVISION_NAME,null===e||void 0===e?void 0:e.division_name,null===e||void 0===e?void 0:e.divisionName,null===e||void 0===e||null===(o=e.currentwork)||void 0===o?void 0:o.HIE_NAME_3,null===e||void 0===e||null===(a=e.currentwork)||void 0===a?void 0:a.DIVISION_NAME,null===e||void 0===e||null===(r=e.currentwork)||void 0===r?void 0:r.division_name].filter(Boolean)},N=e=>{var t,n,i,s,o,a,r;return[null===e||void 0===e?void 0:e.HIE_CODE_3,null===e||void 0===e?void 0:e.hie_code_3,null===e||void 0===e?void 0:e.SECTION_CODE,null===e||void 0===e?void 0:e.section_code,null===e||void 0===e?void 0:e.sectionCode,null===e||void 0===e||null===(t=e.currentwork)||void 0===t?void 0:t.HIE_CODE_3,null===e||void 0===e||null===(n=e.currentwork)||void 0===n?void 0:n.SECTION_CODE,null===e||void 0===e||null===(i=e.currentwork)||void 0===i?void 0:i.section_code,null===e||void 0===e||null===(s=e.currentwork)||void 0===s?void 0:s.sectionCode,null===e||void 0===e?void 0:e.HIE_NAME_4,null===e||void 0===e?void 0:e.hie_name_4,null===e||void 0===e?void 0:e.SECTION_NAME,null===e||void 0===e?void 0:e.section_name,null===e||void 0===e?void 0:e.sectionName,null===e||void 0===e||null===(o=e.currentwork)||void 0===o?void 0:o.HIE_NAME_4,null===e||void 0===e||null===(a=e.currentwork)||void 0===a?void 0:a.SECTION_NAME,null===e||void 0===e||null===(r=e.currentwork)||void 0===r?void 0:r.section_name].filter(Boolean)};let k=w.filter(e=>{const t=_(e),n=N(e),i=v&&g(t,v)||x&&g(t,x),s=b&&g(n,b)||y&&g(n,y);return i&&s});0===k.length&&(console.warn("No employees found with strict matching; trying relaxed matching (partial / name-based)"),k=w.filter(e=>{const t=_(e),n=N(e),i=v?g(t,v)||g([v],t.join(" ")):!!x&&g(t,x),s=b?g(n,b)||g([b],n.join(" ")):!!y&&g(n,y);return(i||!v&&x&&g(t,x))&&(s||!b&&y&&g(n,y))})),console.log("\u2705 Filtered employees (after relaxed matching):",k.length);const C=k.filter(t=>{const n=String((null===t||void 0===t?void 0:t.EMP_NUMBER)||(null===t||void 0===t?void 0:t.empNumber)||(null===t||void 0===t?void 0:t.EMP_ID)||(null===t||void 0===t?void 0:t.emp_id)||""),i=(f||[]).some(t=>String(t.employeeId)===n&&String(t.sub_section_id)===String(e._id)),s=(ot||[]).some(t=>String(t.employeeId)===n&&String(t.sub_section_id)===String(e._id));return!i&&!s});console.log("\u2705 Not transferred employees (after filtering):",C.length);const E=C.filter(nn);console.log("\ud83c\udfaf Active not-transferred employees:",E.length,"(filtered out:",C.length-E.length,")"),Ge(E),Ke(!1)}catch(p){console.error("Error fetching employees:",p),Ke(!1),Vt({type:"error",title:"Error",message:"Failed to fetch employees from HRIS API"})}}else Vt({type:"error",title:"Permission",message:"You do not have permission to transfer employees."})})(e),style:{padding:"6px 8px",fontSize:13,display:"flex",alignItems:"center",justifyContent:"center",minWidth:"32px",minHeight:"32px",backgroundColor:"#10b981",color:"white",border:"none"},title:"Add Employee - Shows all not-transferred employees",children:(0,_e.jsx)("i",{className:"bi bi-person-plus"})}):null,Wt?(0,_e.jsx)("button",{className:"btn-professional",onClick:()=>en(e),style:{padding:"6px 8px",fontSize:13,display:"flex",alignItems:"center",justifyContent:"center",minWidth:"32px",minHeight:"32px",backgroundColor:"#f59e0b",color:"white",border:"none"},title:"Recall - Shows all transferred employees",children:(0,_e.jsx)("i",{className:"bi bi-arrow-counterclockwise"})}):null]})}),(0,_e.jsx)("td",{style:{padding:"12px 20px",textAlign:"center"},children:(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[Bt?(0,_e.jsx)("button",{className:"btn-professional btn-primary",onClick:()=>((e,t)=>{var n,i,s,o,a,r;const l=on(null===Oe||void 0===Oe?void 0:Oe.division),d=(null===Oe||void 0===Oe?void 0:Oe.name)||"N/A";le({sectionId:e,subSection:t,parentDivision:l,parentSection:d}),ce({name:(null===t||void 0===t||null===(n=t.subSection)||void 0===n?void 0:n.sub_hie_name)||(null===t||void 0===t||null===(i=t.subSection)||void 0===i?void 0:i.hie_name)||(null===t||void 0===t||null===(s=t.subSection)||void 0===s?void 0:s.name)||"",code:(null===t||void 0===t||null===(o=t.subSection)||void 0===o?void 0:o.sub_hie_code)||(null===t||void 0===t||null===(a=t.subSection)||void 0===a?void 0:a.hie_code)||(null===t||void 0===t||null===(r=t.subSection)||void 0===r?void 0:r.code)||""}),fe({}),ae(!0)})(Oe._id,e),style:{padding:"6px 8px",fontSize:13,display:"flex",alignItems:"center",justifyContent:"center",minWidth:"32px",minHeight:"32px"},title:"Edit Sub-Section",children:(0,_e.jsx)("i",{className:"bi bi-pencil"})}):null,$t?(0,_e.jsx)("button",{className:"btn-professional btn-danger",onClick:()=>{return t=Oe._id,n=e._id,Be({sectionId:t,subSectionId:n}),void ze(!0);var t,n},style:{padding:"6px 8px",fontSize:13,display:"flex",alignItems:"center",justifyContent:"center",minWidth:"32px",minHeight:"32px"},title:"Delete Sub-Section",children:(0,_e.jsx)("i",{className:"bi bi-trash"})}):null]})})]},e._id)})})]})}):(0,_e.jsxs)("div",{style:{padding:"40px 20px",textAlign:"center",color:"#6b7280",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[(0,_e.jsx)("i",{className:"bi bi-inbox",style:{fontSize:"48px",opacity:.5}}),(0,_e.jsxs)("p",{style:{margin:0,fontSize:"15px"},children:["No sub-sections yet. Click the ",(0,_e.jsx)("strong",{children:"+"})," button to create one."]})]})})]})}),Le&&(0,_e.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:11e3,padding:"20px"},onClick:Zt,children:(0,_e.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.4)",width:"90%",maxWidth:"500px",overflow:"hidden",animation:"slideIn 0.3s ease-out"},onClick:e=>e.stopPropagation(),children:[(0,_e.jsxs)("div",{style:{padding:"24px 28px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",display:"flex",alignItems:"center",gap:"12px"},children:[(0,_e.jsx)("i",{className:"bi bi-exclamation-triangle-fill",style:{fontSize:"28px"}}),(0,_e.jsx)("h3",{style:{fontSize:"22px",fontWeight:"700",margin:0},children:"Confirm Deletion"})]}),(0,_e.jsx)("div",{style:{padding:"28px"},children:(0,_e.jsx)("p",{style:{fontSize:"16px",color:"#374151",margin:0,lineHeight:"1.6"},children:"Are you sure you want to delete this sub-section? This action cannot be undone."})}),(0,_e.jsxs)("div",{style:{padding:"20px 28px",borderTop:"1px solid #e5e7eb",background:"#f9fafb",display:"flex",justifyContent:"flex-end",gap:"12px"},children:[(0,_e.jsxs)("button",{onClick:Zt,style:{padding:"12px 24px",border:"2px solid #d1d5db",borderRadius:"8px",backgroundColor:"white",color:"#6b7280",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseOver:e=>{e.target.style.borderColor="#9ca3af",e.target.style.color="#374151"},onMouseOut:e=>{e.target.style.borderColor="#d1d5db",e.target.style.color="#6b7280"},children:[(0,_e.jsx)("i",{className:"bi bi-x-circle",style:{marginRight:"8px"}}),"Cancel"]}),(0,_e.jsxs)("button",{onClick:async()=>{if(!Fe)return;if(!$t)return ze(!1),Be(null),Vt({type:"error",title:"Permission",message:"You do not have permission to delete sub-sections."});const{sectionId:e,subSectionId:t}=Fe,n=localStorage.getItem("token");if(!n)return ze(!1),Be(null),Vt({type:"error",title:"Auth",message:"Token missing. Please login."});try{const i=await fetch(`${Ht}/mysql-subsections/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`},credentials:"include"});if(!i.ok)throw new Error(`HTTP ${i.status}`);ze(!1),Be(null),setTimeout(()=>{Vt({type:"success",title:"Success!",message:"Sub-section deleted successfully."})},150),await Yt(e,{force:!0})}catch(cu){console.error("Delete sub-section failed:",cu),ze(!1),Be(null),setTimeout(()=>{Vt({type:"error",title:"Failed",message:"Could not delete sub-section."})},150)}},style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 3px 10px rgba(239, 68, 68, 0.3)"},onMouseOver:e=>{e.target.style.transform="translateY(-1px)",e.target.style.boxShadow="0 4px 15px rgba(239, 68, 68, 0.4)"},onMouseOut:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 3px 10px rgba(239, 68, 68, 0.3)"},children:[(0,_e.jsx)("i",{className:"bi bi-trash",style:{marginRight:"8px"}}),"Delete"]})]})]})}),$e&&(0,_e.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},children:(0,_e.jsxs)("div",{style:{background:"white",borderRadius:"16px",maxWidth:"1000px",width:"100%",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",overflow:"hidden"},children:[(0,_e.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"24px 32px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,_e.jsx)("i",{className:"bi bi-people-fill",style:{fontSize:"24px",color:"white"}}),(0,_e.jsxs)("h2",{style:{margin:0,color:"white",fontSize:"20px",fontWeight:"600"},children:["Employee List - ",(null===Qe||void 0===Qe||null===(r=Qe.subSection)||void 0===r?void 0:r.sub_hie_name)||(null===Qe||void 0===Qe||null===(l=Qe.subSection)||void 0===l?void 0:l.hie_name)||"Sub-Section"]})]}),(0,_e.jsx)("button",{onClick:()=>{Ue(!1),Xe(null),Ge([]),Dt(""),He(new Set),qe(!1)},style:{background:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",color:"white",fontSize:"20px"},onMouseOver:e=>e.target.style.background="rgba(255, 255, 255, 0.3)",onMouseOut:e=>e.target.style.background="rgba(255, 255, 255, 0.2)",children:(0,_e.jsx)("i",{className:"bi bi-x"})})]}),(0,_e.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea15 0%, #764ba215 100%)",border:"2px solid #667eea",borderRadius:"8px",padding:"16px 20px",margin:"16px 32px",display:"flex",alignItems:"center",gap:"12px"},children:[(0,_e.jsx)("i",{className:"bi bi-funnel-fill",style:{color:"#667eea",fontSize:"20px"}}),(0,_e.jsxs)("div",{style:{flex:1},children:[(0,_e.jsx)("div",{style:{fontWeight:"600",color:"#495057",marginBottom:"4px"},children:"Active Filters:"}),(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[(0,_e.jsx)("span",{style:{background:"#667eea",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:"500"},children:(null===Qe||void 0===Qe||null===(d=Qe.parentDivision)||void 0===d?void 0:d.division_name)||"N/A"}),(0,_e.jsx)("i",{className:"bi bi-chevron-right",style:{color:"#667eea"}}),(0,_e.jsx)("span",{style:{background:"#764ba2",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:"500"},children:(null===Qe||void 0===Qe||null===(c=Qe.parentSection)||void 0===c?void 0:c.hie_name)||"N/A"}),(0,_e.jsx)("i",{className:"bi bi-chevron-right",style:{color:"#667eea"}}),(0,_e.jsx)("span",{style:{background:"#f093fb",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:"500"},children:(null===Qe||void 0===Qe||null===(u=Qe.subSection)||void 0===u?void 0:u.sub_hie_name)||(null===Qe||void 0===Qe||null===(h=Qe.subSection)||void 0===h?void 0:h.hie_name)||"Sub-Section"})]})]})]}),(0,_e.jsx)("div",{style:{padding:"16px 32px",borderBottom:"1px solid #e5e7eb",background:"#f9fafb"},children:(0,_e.jsxs)("div",{style:{position:"relative"},children:[(0,_e.jsx)("i",{className:"bi bi-search",style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"#9ca3af",fontSize:"16px"}}),(0,_e.jsx)("input",{type:"text",placeholder:"Search by Employee ID or Name...",value:It,onChange:e=>Dt(e.target.value),style:{width:"100%",padding:"12px 16px 12px 42px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"all 0.2s ease"},onFocus:e=>{e.target.style.borderColor="#667eea",e.target.style.boxShadow="0 0 0 3px rgba(102, 126, 234, 0.1)"},onBlur:e=>{e.target.style.borderColor="#e5e7eb",e.target.style.boxShadow="none"}}),(0,_e.jsxs)("div",{style:{marginTop:"8px",color:"#6b7280",fontSize:"13px"},children:["Showing ",(0,_e.jsx)("strong",{children:"active"})," employees only"]})]})}),(0,_e.jsx)("div",{style:{padding:"24px 32px",flex:1,overflow:"auto"},children:Je?(0,_e.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",gap:"16px"},children:[(0,_e.jsx)("div",{className:"spinner-border",role:"status",style:{color:"#667eea"},children:(0,_e.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,_e.jsx)("p",{style:{color:"#6b7280",margin:0},children:"Loading employees from HRIS..."})]}):(()=>{const e=Ye.filter(e=>{if(!It.trim())return!0;const t=It.toLowerCase().trim(),n=String((null===e||void 0===e?void 0:e.EMP_NUMBER)||(null===e||void 0===e?void 0:e.empNumber)||(null===e||void 0===e?void 0:e.EMP_ID)||(null===e||void 0===e?void 0:e.emp_id)||"").toLowerCase(),i=String((null===e||void 0===e?void 0:e.FULLNAME)||(null===e||void 0===e?void 0:e.fullName)||(null===e||void 0===e?void 0:e.CALLING_NAME)||(null===e||void 0===e?void 0:e.calling_name)||(null===e||void 0===e?void 0:e.name)||"").toLowerCase();return n.includes(t)||i.includes(t)});return 0===e.length?(0,_e.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",gap:"12px"},children:[(0,_e.jsx)("i",{className:"bi bi-person-x",style:{fontSize:"48px",color:"#d1d5db"}}),(0,_e.jsx)("p",{style:{color:"#6b7280",margin:0,fontSize:"16px"},children:It?"No employees match your search":"No employees found for this division and section"})]}):(0,_e.jsx)("div",{style:{border:"1px solid #e5e7eb",borderRadius:"12px",overflow:"hidden"},children:(0,_e.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,_e.jsx)("thead",{children:(0,_e.jsxs)("tr",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[(0,_e.jsx)("th",{style:{padding:"14px 16px",width:"40px",textAlign:"center"},children:(0,_e.jsx)("input",{type:"checkbox",checked:(()=>{try{const e=Ye.filter(e=>{if(!It.trim())return!0;const t=It.toLowerCase().trim(),n=String((null===e||void 0===e?void 0:e.EMP_NUMBER)||(null===e||void 0===e?void 0:e.empNumber)||(null===e||void 0===e?void 0:e.EMP_ID)||(null===e||void 0===e?void 0:e.emp_id)||"").toLowerCase(),i=String((null===e||void 0===e?void 0:e.FULLNAME)||(null===e||void 0===e?void 0:e.fullName)||(null===e||void 0===e?void 0:e.CALLING_NAME)||(null===e||void 0===e?void 0:e.calling_name)||(null===e||void 0===e?void 0:e.name)||"").toLowerCase();return n.includes(t)||i.includes(t)});return e.length>0&&We.size===e.length}catch(cu){return!1}})(),onChange:e=>{((e,t)=>{if(e){const e=new Set((t||Ye).map(e=>String((null===e||void 0===e?void 0:e.EMP_NUMBER)||(null===e||void 0===e?void 0:e.empNumber)||(null===e||void 0===e?void 0:e.EMP_ID)||(null===e||void 0===e?void 0:e.emp_id)||"")));He(e)}else He(new Set)})(!!e.target.checked,Ye.filter(e=>{if(!It.trim())return!0;const t=It.toLowerCase().trim(),n=String((null===e||void 0===e?void 0:e.EMP_NUMBER)||(null===e||void 0===e?void 0:e.empNumber)||(null===e||void 0===e?void 0:e.EMP_ID)||(null===e||void 0===e?void 0:e.emp_id)||"").toLowerCase(),i=String((null===e||void 0===e?void 0:e.FULLNAME)||(null===e||void 0===e?void 0:e.fullName)||(null===e||void 0===e?void 0:e.CALLING_NAME)||(null===e||void 0===e?void 0:e.calling_name)||(null===e||void 0===e?void 0:e.name)||"").toLowerCase();return n.includes(t)||i.includes(t)}))},title:"Select all visible employees"})}),(0,_e.jsx)("th",{style:{padding:"14px 16px",textAlign:"left",color:"white",fontWeight:"600",fontSize:"13px"},children:"EMPLOYEE ID"}),(0,_e.jsx)("th",{style:{padding:"14px 16px",textAlign:"left",color:"white",fontWeight:"600",fontSize:"13px"},children:"NAME"}),(0,_e.jsx)("th",{style:{padding:"14px 16px",textAlign:"center",color:"white",fontWeight:"600",fontSize:"13px"},children:"STATUS"}),(0,_e.jsx)("th",{style:{padding:"14px 16px",textAlign:"center",color:"white",fontWeight:"600",fontSize:"13px"},children:"ACTION"})]})}),(0,_e.jsx)("tbody",{children:e.map((t,n)=>{const i=(null===t||void 0===t?void 0:t.EMP_NUMBER)||(null===t||void 0===t?void 0:t.empNumber)||(null===t||void 0===t?void 0:t.EMP_ID)||(null===t||void 0===t?void 0:t.emp_id);return(0,_e.jsxs)("tr",{style:{borderBottom:n<e.length-1?"1px solid #e5e7eb":"none",transition:"all 0.2s ease"},onMouseOver:e=>e.currentTarget.style.background="#f9fafb",onMouseOut:e=>e.currentTarget.style.background="transparent",children:[(0,_e.jsx)("td",{style:{padding:"12px 10px",textAlign:"center"},children:(0,_e.jsx)("input",{type:"checkbox",checked:We.has(String(i)),onChange:()=>(e=>{const t=String((null===e||void 0===e?void 0:e.EMP_NUMBER)||(null===e||void 0===e?void 0:e.empNumber)||(null===e||void 0===e?void 0:e.EMP_ID)||(null===e||void 0===e?void 0:e.emp_id)||"");He(e=>{const n=new Set(Array.from(e));return n.has(t)?n.delete(t):n.add(t),n})})(t),title:"Select employee for bulk transfer"})}),(0,_e.jsx)("td",{style:{padding:"12px 16px",fontSize:"14px",color:"#1f2937",fontWeight:"600"},children:i||"N/A"}),(0,_e.jsx)("td",{style:{padding:"12px 16px",fontSize:"14px",color:"#1f2937"},children:(null===t||void 0===t?void 0:t.FULLNAME)||(null===t||void 0===t?void 0:t.fullName)||(null===t||void 0===t?void 0:t.CALLING_NAME)||(null===t||void 0===t?void 0:t.calling_name)||(null===t||void 0===t?void 0:t.name)||"N/A"}),(0,_e.jsx)("td",{style:{padding:"12px 16px",textAlign:"center"},children:(()=>{const e=1===(null===t||void 0===t?void 0:t.ACTIVE_HRM_FLG)||"ACTIVE"===(null===t||void 0===t?void 0:t.STATUS)||"ACTIVE"===(null===t||void 0===t?void 0:t.status)||!0===(null===t||void 0===t?void 0:t.isActive);return(0,_e.jsx)("span",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",background:e?"#dcfce7":"#fee2e2",color:e?"#16a34a":"#dc2626",display:"inline-block"},children:e?"Active":"Inactive"})})()}),(0,_e.jsx)("td",{style:{padding:"12px 16px",textAlign:"center"},children:(0,_e.jsxs)("button",{onClick:()=>(nt(t),void et(!0)),style:{padding:"8px 16px",border:"none",borderRadius:"6px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"inline-flex",alignItems:"center",gap:"6px"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.4)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},title:"Transfer employee to this sub-section",children:[(0,_e.jsx)("i",{className:"bi bi-arrow-left-right"}),"Transfer"]})})]},i||n)})})]})})})()}),(0,_e.jsxs)("div",{style:{padding:"20px 32px",borderTop:"1px solid #e5e7eb",background:"#f9fafb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,_e.jsx)("div",{style:{fontSize:"14px",color:"#6b7280"},children:(()=>{const e=Ye.filter(e=>{if(!It.trim())return!0;const t=It.toLowerCase().trim(),n=String((null===e||void 0===e?void 0:e.EMP_NUMBER)||(null===e||void 0===e?void 0:e.empNumber)||(null===e||void 0===e?void 0:e.EMP_ID)||(null===e||void 0===e?void 0:e.emp_id)||"").toLowerCase(),i=String((null===e||void 0===e?void 0:e.FULLNAME)||(null===e||void 0===e?void 0:e.fullName)||(null===e||void 0===e?void 0:e.CALLING_NAME)||(null===e||void 0===e?void 0:e.calling_name)||(null===e||void 0===e?void 0:e.name)||"").toLowerCase();return n.includes(t)||i.includes(t)}).length;return(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("strong",{style:{color:"#1f2937"},children:e})," employee",1!==e?"s":""," found",It&&e!==Ye.length&&(0,_e.jsxs)("span",{style:{marginLeft:"8px",color:"#9ca3af"},children:["(filtered from ",Ye.length,")"]})]})})()}),(0,_e.jsx)("button",{onClick:()=>qe(!0),disabled:0===We.size,style:{padding:"10px 24px",border:"none",borderRadius:"8px",background:0===We.size?"#d1d5db":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontSize:"14px",fontWeight:"600",cursor:0===We.size?"not-allowed":"pointer",transition:"all 0.2s ease",marginLeft:"12px"},children:"Transfer Selected"})]})]})}),Ze&&tt&&Qe&&(0,_e.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001,padding:"20px"},children:(0,_e.jsxs)("div",{style:{background:"white",borderRadius:"16px",maxWidth:"550px",width:"100%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",overflow:"hidden"},children:[(0,_e.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"24px 32px",display:"flex",alignItems:"center",gap:"12px"},children:[(0,_e.jsx)("i",{className:"bi bi-arrow-left-right-circle",style:{fontSize:"28px",color:"white"}}),(0,_e.jsx)("h3",{style:{margin:0,color:"white",fontSize:"20px",fontWeight:"600"},children:"Confirm Transfer"})]}),(0,_e.jsxs)("div",{style:{padding:"32px"},children:[(0,_e.jsxs)("div",{style:{background:"#f9fafb",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"2px solid #e5e7eb"},children:[(0,_e.jsx)("div",{style:{fontSize:"16px",color:"#374151",marginBottom:"20px",lineHeight:"1.6"},children:"Are you sure you want to transfer this employee?"}),(0,_e.jsxs)("div",{style:{background:"white",borderRadius:"8px",padding:"16px",marginBottom:"16px",border:"1px solid #e5e7eb"},children:[(0,_e.jsx)("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Employee"}),(0,_e.jsx)("div",{style:{fontSize:"16px",color:"#1f2937",fontWeight:"600"},children:(null===tt||void 0===tt?void 0:tt.FULLNAME)||(null===tt||void 0===tt?void 0:tt.fullName)||(null===tt||void 0===tt?void 0:tt.CALLING_NAME)||"N/A"}),(0,_e.jsxs)("div",{style:{fontSize:"13px",color:"#667eea",marginTop:"4px"},children:["ID: ",(null===tt||void 0===tt?void 0:tt.EMP_NUMBER)||(null===tt||void 0===tt?void 0:tt.empNumber)||"N/A"]})]}),(0,_e.jsxs)("div",{style:{background:"white",borderRadius:"8px",padding:"16px",border:"1px solid #e5e7eb"},children:[(0,_e.jsxs)("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"8px"},children:[(0,_e.jsx)("i",{className:"bi bi-arrow-down"})," Transferring to:"]}),(0,_e.jsxs)("div",{style:{marginLeft:"16px"},children:[(0,_e.jsxs)("div",{style:{fontSize:"14px",color:"#1f2937",marginBottom:"6px"},children:[(0,_e.jsx)("strong",{children:"Sub-Section:"})," ",(null===Qe||void 0===Qe||null===(p=Qe.subSection)||void 0===p?void 0:p.sub_hie_name)||(null===Qe||void 0===Qe||null===(f=Qe.subSection)||void 0===f?void 0:f.hie_name)||"N/A"]}),(0,_e.jsxs)("div",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"4px"},children:[(0,_e.jsx)("strong",{children:"Section:"})," ",(null===Qe||void 0===Qe||null===(m=Qe.parentSection)||void 0===m?void 0:m.hie_name)||"N/A"]}),(0,_e.jsxs)("div",{style:{fontSize:"13px",color:"#6b7280"},children:[(0,_e.jsx)("strong",{children:"Division:"})," ",(null===Qe||void 0===Qe||null===(g=Qe.parentDivision)||void 0===g?void 0:g.division_name)||"N/A"]})]})]})]}),(0,_e.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[(0,_e.jsxs)("button",{onClick:()=>{et(!1),nt(null)},disabled:it,style:{padding:"12px 24px",border:"2px solid #d1d5db",borderRadius:"8px",backgroundColor:"white",color:"#6b7280",fontSize:"14px",fontWeight:"600",cursor:it?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:it?.5:1},onMouseOver:e=>{it||(e.target.style.borderColor="#9ca3af",e.target.style.color="#374151")},onMouseOut:e=>{it||(e.target.style.borderColor="#d1d5db",e.target.style.color="#6b7280")},children:[(0,_e.jsx)("i",{className:"bi bi-x-circle",style:{marginRight:"8px"}}),"Cancel"]}),(0,_e.jsx)("button",{onClick:async()=>{if(!Ut)return et(!1),nt(null),Vt({type:"error",title:"Permission",message:"You do not have permission to transfer employees."});if(!tt||!Qe)return;st(!0);const e=localStorage.getItem("token");if(!e)return st(!1),et(!1),Vt({type:"error",title:"Auth",message:"Token missing. Please login."});try{var t,n,i,s,o,a,r,l,d;const c={employeeId:String((null===tt||void 0===tt?void 0:tt.EMP_NUMBER)||(null===tt||void 0===tt?void 0:tt.empNumber)||(null===tt||void 0===tt?void 0:tt.EMP_ID)||""),employeeName:(null===tt||void 0===tt?void 0:tt.FULLNAME)||(null===tt||void 0===tt?void 0:tt.fullName)||(null===tt||void 0===tt?void 0:tt.CALLING_NAME)||"",division_code:(null===Qe||void 0===Qe||null===(t=Qe.parentDivision)||void 0===t?void 0:t.division_code)||"",division_name:(null===Qe||void 0===Qe||null===(n=Qe.parentDivision)||void 0===n?void 0:n.division_name)||"",hie_code:(null===Qe||void 0===Qe||null===(i=Qe.parentSection)||void 0===i?void 0:i.hie_code)||"",hie_name:(null===Qe||void 0===Qe||null===(s=Qe.parentSection)||void 0===s?void 0:s.hie_name)||"",sub_section_id:(null===Qe||void 0===Qe?void 0:Qe._id)||"",sub_hie_code:(null===Qe||void 0===Qe||null===(o=Qe.subSection)||void 0===o?void 0:o.sub_hie_code)||(null===Qe||void 0===Qe||null===(a=Qe.subSection)||void 0===a?void 0:a.hie_code)||"",sub_hie_name:(null===Qe||void 0===Qe||null===(r=Qe.subSection)||void 0===r?void 0:r.sub_hie_name)||(null===Qe||void 0===Qe||null===(l=Qe.subSection)||void 0===l?void 0:l.hie_name)||"",transferredAt:(new Date).toISOString(),employeeData:tt};console.log("\ud83d\udce4 Transferring employee:",c);const u=await fetch(`${Ht}/mysql-subsections/transfer`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(c)});if(!u.ok)throw new Error(`HTTP ${u.status}`);const h=await u.json();console.log("\u2705 Transfer successful - API response:",h);const p={employeeId:c.employeeId,sub_section_id:c.sub_section_id};at(e=>[...e,p]),Ge(e=>e.filter(e=>String((null===e||void 0===e?void 0:e.EMP_NUMBER)||(null===e||void 0===e?void 0:e.empNumber)||(null===e||void 0===e?void 0:e.EMP_ID)||"")!==String(c.employeeId))),He(e=>{const t=new Set(Array.from(e));return t.has(String(c.employeeId))&&t.delete(String(c.employeeId)),t}),et(!1),nt(null),st(!1),Vt({type:"success",title:"Success!",message:`Employee ${c.employeeName} has been successfully transferred to ${c.sub_hie_name}!`}),console.log("\u2705 Transfer complete - Record saved to DB with ID:",null===h||void 0===h||null===(d=h.data)||void 0===d?void 0:d._id)}catch(c){console.error("\u274c Transfer failed:",c),st(!1),et(!1),Vt({type:"error",title:"Transfer Failed",message:"Failed to transfer employee. Please try again."})}},disabled:it,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:it?"#9ca3af":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontSize:"14px",fontWeight:"600",cursor:it?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:"0 3px 10px rgba(102, 126, 234, 0.3)",display:"flex",alignItems:"center",gap:"8px"},onMouseOver:e=>{it||(e.target.style.transform="translateY(-1px)",e.target.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.4)")},onMouseOut:e=>{it||(e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 3px 10px rgba(102, 126, 234, 0.3)")},children:it?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Transferring..."]}):(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-check-circle"}),"Confirm Transfer"]})})]})]})]})}),pt&&(0,_e.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},children:(0,_e.jsxs)("div",{style:{background:"white",borderRadius:"16px",maxWidth:"1000px",width:"100%",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",overflow:"hidden"},children:[(0,_e.jsxs)("div",{style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",padding:"24px 32px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,_e.jsx)("i",{className:"bi bi-arrow-counterclockwise",style:{fontSize:"24px",color:"white"}}),(0,_e.jsxs)("h2",{style:{margin:0,color:"white",fontSize:"20px",fontWeight:"600"},children:["Transferred Employees - ",(null===Qe||void 0===Qe||null===(v=Qe.subSection)||void 0===v?void 0:v.sub_hie_name)||(null===Qe||void 0===Qe||null===(x=Qe.subSection)||void 0===x?void 0:x.hie_name)||"Sub-Section"]})]}),(0,_e.jsx)("button",{onClick:()=>{ft(!1),Xe(null),jt([]),Tt(""),gt(new Set),xt(!1)},style:{background:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",color:"white",fontSize:"20px"},onMouseOver:e=>e.target.style.background="rgba(255, 255, 255, 0.3)",onMouseOut:e=>e.target.style.background="rgba(255, 255, 255, 0.2)",children:(0,_e.jsx)("i",{className:"bi bi-x"})})]}),(0,_e.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea15 0%, #764ba215 100%)",border:"2px solid #667eea",borderRadius:"8px",padding:"16px 20px",margin:"16px 32px",display:"flex",alignItems:"center",gap:"12px"},children:[(0,_e.jsx)("i",{className:"bi bi-funnel-fill",style:{color:"#667eea",fontSize:"20px"}}),(0,_e.jsxs)("div",{style:{flex:1},children:[(0,_e.jsx)("div",{style:{fontWeight:"600",color:"#495057",marginBottom:"4px"},children:"Active Filters:"}),(0,_e.jsxs)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[(0,_e.jsx)("span",{style:{background:"#667eea",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:"500"},children:(null===Qe||void 0===Qe||null===(b=Qe.parentDivision)||void 0===b?void 0:b.division_name)||"N/A"}),(0,_e.jsx)("i",{className:"bi bi-chevron-right",style:{color:"#667eea"}}),(0,_e.jsx)("span",{style:{background:"#764ba2",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:"500"},children:(null===Qe||void 0===Qe||null===(y=Qe.parentSection)||void 0===y?void 0:y.hie_name)||"N/A"}),(0,_e.jsx)("i",{className:"bi bi-chevron-right",style:{color:"#667eea"}}),(0,_e.jsx)("span",{style:{background:"#f093fb",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:"500"},children:(null===Qe||void 0===Qe||null===(S=Qe.subSection)||void 0===S?void 0:S.sub_hie_name)||(null===Qe||void 0===Qe||null===(j=Qe.subSection)||void 0===j?void 0:j.hie_name)||"Sub-Section"})]})]})]}),(0,_e.jsx)("div",{style:{padding:"16px 32px",borderBottom:"1px solid #e5e7eb",background:"#fef3c7"},children:(0,_e.jsxs)("div",{style:{position:"relative"},children:[(0,_e.jsx)("i",{className:"bi bi-search",style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"#d97706",fontSize:"16px"}}),(0,_e.jsx)("input",{type:"text",placeholder:"Search by Employee ID or Name...",value:At,onChange:e=>Tt(e.target.value),style:{width:"100%",padding:"12px 16px 12px 42px",border:"2px solid #fbbf24",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"all 0.2s ease",background:"white"},onFocus:e=>{e.target.style.borderColor="#f59e0b",e.target.style.boxShadow="0 0 0 3px rgba(245, 158, 11, 0.1)"},onBlur:e=>{e.target.style.borderColor="#fbbf24",e.target.style.boxShadow="none"}}),(0,_e.jsxs)("div",{style:{marginTop:"8px",color:"#6b7280",fontSize:"13px"},children:["Showing ",(0,_e.jsx)("strong",{children:"active"})," transferred employees only"]})]})}),(0,_e.jsx)("div",{style:{padding:"24px 32px",flex:1,overflow:"auto"},children:wt?(0,_e.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",gap:"16px"},children:[(0,_e.jsx)("div",{className:"spinner-border",role:"status",style:{color:"#f59e0b"},children:(0,_e.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,_e.jsx)("p",{style:{color:"#6b7280",margin:0},children:"Loading transferred employees..."})]}):(()=>{const e=St.filter(e=>{if(!At.trim())return!0;const t=At.toLowerCase().trim(),n=String((null===e||void 0===e?void 0:e.EMP_NUMBER)||(null===e||void 0===e?void 0:e.empNumber)||(null===e||void 0===e?void 0:e.EMP_ID)||(null===e||void 0===e?void 0:e.emp_id)||"").toLowerCase(),i=String((null===e||void 0===e?void 0:e.FULLNAME)||(null===e||void 0===e?void 0:e.fullName)||(null===e||void 0===e?void 0:e.CALLING_NAME)||(null===e||void 0===e?void 0:e.calling_name)||(null===e||void 0===e?void 0:e.name)||"").toLowerCase();return n.includes(t)||i.includes(t)});return 0===e.length?(0,_e.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",gap:"12px"},children:[(0,_e.jsx)("i",{className:"bi bi-inbox",style:{fontSize:"48px",color:"#d1d5db"}}),(0,_e.jsx)("p",{style:{color:"#6b7280",margin:0,fontSize:"16px"},children:At?"No transferred employees match your search":"No transferred employees found for this sub-section"})]}):(0,_e.jsx)("div",{style:{border:"1px solid #e5e7eb",borderRadius:"12px",overflow:"hidden"},children:(0,_e.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,_e.jsx)("thead",{children:(0,_e.jsxs)("tr",{style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)"},children:[(0,_e.jsx)("th",{style:{padding:"14px 16px",width:"40px",textAlign:"center"},children:(0,_e.jsx)("input",{type:"checkbox",checked:(()=>{try{const e=St.filter(e=>{if(!At.trim())return!0;const t=At.toLowerCase().trim(),n=String((null===e||void 0===e?void 0:e.EMP_NUMBER)||(null===e||void 0===e?void 0:e.empNumber)||(null===e||void 0===e?void 0:e.EMP_ID)||(null===e||void 0===e?void 0:e.emp_id)||"").toLowerCase(),i=String((null===e||void 0===e?void 0:e.FULLNAME)||(null===e||void 0===e?void 0:e.fullName)||(null===e||void 0===e?void 0:e.CALLING_NAME)||(null===e||void 0===e?void 0:e.calling_name)||(null===e||void 0===e?void 0:e.name)||"").toLowerCase();return n.includes(t)||i.includes(t)});return e.length>0&&mt.size===e.length}catch(cu){return!1}})(),onChange:e=>{const t=!!e.target.checked,n=St.filter(e=>{if(!At.trim())return!0;const t=At.toLowerCase().trim(),n=String((null===e||void 0===e?void 0:e.EMP_NUMBER)||(null===e||void 0===e?void 0:e.empNumber)||(null===e||void 0===e?void 0:e.EMP_ID)||(null===e||void 0===e?void 0:e.emp_id)||"").toLowerCase(),i=String((null===e||void 0===e?void 0:e.FULLNAME)||(null===e||void 0===e?void 0:e.fullName)||(null===e||void 0===e?void 0:e.CALLING_NAME)||(null===e||void 0===e?void 0:e.calling_name)||(null===e||void 0===e?void 0:e.name)||"").toLowerCase();return n.includes(t)||i.includes(t)});if(t){const e=new Set(n.map(e=>String((null===e||void 0===e?void 0:e.EMP_NUMBER)||(null===e||void 0===e?void 0:e.empNumber)||(null===e||void 0===e?void 0:e.EMP_ID)||(null===e||void 0===e?void 0:e.emp_id)||"")));gt(e)}else gt(new Set)},title:"Select all visible transferred employees"})}),(0,_e.jsx)("th",{style:{padding:"14px 16px",textAlign:"left",color:"white",fontWeight:"600",fontSize:"13px"},children:"EMPLOYEE ID"}),(0,_e.jsx)("th",{style:{padding:"14px 16px",textAlign:"left",color:"white",fontWeight:"600",fontSize:"13px"},children:"NAME"}),(0,_e.jsx)("th",{style:{padding:"14px 16px",textAlign:"center",color:"white",fontWeight:"600",fontSize:"13px"},children:"STATUS"}),(0,_e.jsx)("th",{style:{padding:"14px 16px",textAlign:"center",color:"white",fontWeight:"600",fontSize:"13px"},children:"ACTION"})]})}),(0,_e.jsx)("tbody",{children:e.map((t,n)=>{const i=(null===t||void 0===t?void 0:t.EMP_NUMBER)||(null===t||void 0===t?void 0:t.empNumber)||(null===t||void 0===t?void 0:t.EMP_ID)||(null===t||void 0===t?void 0:t.emp_id);return(0,_e.jsxs)("tr",{style:{borderBottom:n<e.length-1?"1px solid #e5e7eb":"none",transition:"all 0.2s ease"},onMouseOver:e=>e.currentTarget.style.background="#fef3c7",onMouseOut:e=>e.currentTarget.style.background="transparent",children:[(0,_e.jsx)("td",{style:{padding:"12px 10px",textAlign:"center"},children:(0,_e.jsx)("input",{type:"checkbox",checked:mt.has(String(i)),onChange:()=>{const e=String(i);gt(t=>{const n=new Set(Array.from(t));return n.has(e)?n.delete(e):n.add(e),n})},title:"Select transferred employee for recall"})}),(0,_e.jsx)("td",{style:{padding:"12px 16px",fontSize:"14px",color:"#1f2937",fontWeight:"600"},children:i||"N/A"}),(0,_e.jsx)("td",{style:{padding:"12px 16px",fontSize:"14px",color:"#1f2937"},children:(null===t||void 0===t?void 0:t.FULLNAME)||(null===t||void 0===t?void 0:t.fullName)||(null===t||void 0===t?void 0:t.CALLING_NAME)||(null===t||void 0===t?void 0:t.calling_name)||(null===t||void 0===t?void 0:t.name)||"N/A"}),(0,_e.jsx)("td",{style:{padding:"12px 16px",textAlign:"center"},children:(()=>{const e=1===(null===t||void 0===t?void 0:t.ACTIVE_HRM_FLG)||"ACTIVE"===(null===t||void 0===t?void 0:t.STATUS)||"ACTIVE"===(null===t||void 0===t?void 0:t.status)||!0===(null===t||void 0===t?void 0:t.isActive);return(0,_e.jsx)("span",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",background:e?"#dcfce7":"#fee2e2",color:e?"#16a34a":"#dc2626",display:"inline-block"},children:e?"Active":"Inactive"})})()}),(0,_e.jsx)("td",{style:{padding:"12px 16px",textAlign:"center"},children:(0,_e.jsxs)("button",{onClick:()=>{ft(!1),setTimeout(()=>{(e=>{ct(e),lt(!0)})(t)},200)},style:{padding:"8px 16px",border:"none",borderRadius:"6px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"inline-flex",alignItems:"center",gap:"6px"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.4)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},title:"Recall employee transfer from this sub-section",children:[(0,_e.jsx)("i",{className:"bi bi-arrow-counterclockwise"}),"Recall"]})})]},i||n)})})]})})})()}),(0,_e.jsxs)("div",{style:{padding:"20px 32px",borderTop:"1px solid #e5e7eb",background:"#f9fafb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,_e.jsx)("div",{style:{fontSize:"14px",color:"#6b7280"},children:(()=>{const e=St.filter(e=>{if(!At.trim())return!0;const t=At.toLowerCase().trim(),n=String((null===e||void 0===e?void 0:e.EMP_NUMBER)||(null===e||void 0===e?void 0:e.empNumber)||(null===e||void 0===e?void 0:e.EMP_ID)||(null===e||void 0===e?void 0:e.emp_id)||"").toLowerCase(),i=String((null===e||void 0===e?void 0:e.FULLNAME)||(null===e||void 0===e?void 0:e.fullName)||(null===e||void 0===e?void 0:e.CALLING_NAME)||(null===e||void 0===e?void 0:e.calling_name)||(null===e||void 0===e?void 0:e.name)||"").toLowerCase();return n.includes(t)||i.includes(t)}).length;return(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("strong",{style:{color:"#1f2937"},children:e})," transferred employee",1!==e?"s":"",At&&e!==St.length&&(0,_e.jsxs)("span",{style:{marginLeft:"8px",color:"#9ca3af"},children:["(filtered from ",St.length,")"]})]})})()}),(0,_e.jsx)("button",{onClick:()=>xt(!0),disabled:0===mt.size,style:{padding:"10px 24px",border:"none",borderRadius:"8px",background:0===mt.size?"#d1d5db":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",fontSize:"14px",fontWeight:"600",cursor:0===mt.size?"not-allowed":"pointer",transition:"all 0.2s ease",marginLeft:"12px"},children:"Recall Selected"})]})]})}),rt&&dt&&Qe&&(0,_e.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001,padding:"20px"},children:(0,_e.jsxs)("div",{style:{background:"white",borderRadius:"16px",maxWidth:"550px",width:"100%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",overflow:"hidden"},children:[(0,_e.jsxs)("div",{style:{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",padding:"24px 32px",display:"flex",alignItems:"center",gap:"12px"},children:[(0,_e.jsx)("i",{className:"bi bi-arrow-counterclockwise",style:{fontSize:"28px",color:"white"}}),(0,_e.jsx)("h3",{style:{margin:0,color:"white",fontSize:"20px",fontWeight:"600"},children:"Confirm Recall Transfer"})]}),(0,_e.jsxs)("div",{style:{padding:"32px"},children:[(0,_e.jsxs)("div",{style:{background:"#fef2f2",borderRadius:"12px",padding:"20px",marginBottom:"24px",border:"2px solid #fecaca"},children:[(0,_e.jsx)("div",{style:{fontSize:"16px",color:"#991b1b",marginBottom:"20px",lineHeight:"1.6",fontWeight:"600"},children:"Are you sure you want to recall the transfer for this employee?"}),(0,_e.jsx)("div",{style:{fontSize:"14px",color:"#7f1d1d",marginBottom:"20px",lineHeight:"1.6"},children:"This will remove the employee from this sub-section."}),(0,_e.jsxs)("div",{style:{background:"white",borderRadius:"8px",padding:"16px",marginBottom:"16px",border:"1px solid #fecaca"},children:[(0,_e.jsx)("div",{style:{fontSize:"12px",color:"#991b1b",marginBottom:"4px"},children:"Employee"}),(0,_e.jsx)("div",{style:{fontSize:"16px",color:"#1f2937",fontWeight:"600"},children:(null===dt||void 0===dt?void 0:dt.FULLNAME)||(null===dt||void 0===dt?void 0:dt.fullName)||(null===dt||void 0===dt?void 0:dt.CALLING_NAME)||"N/A"}),(0,_e.jsxs)("div",{style:{fontSize:"13px",color:"#dc2626",marginTop:"4px"},children:["ID: ",(null===dt||void 0===dt?void 0:dt.EMP_NUMBER)||(null===dt||void 0===dt?void 0:dt.empNumber)||"N/A"]})]}),(0,_e.jsxs)("div",{style:{background:"white",borderRadius:"8px",padding:"16px",border:"1px solid #fecaca"},children:[(0,_e.jsxs)("div",{style:{fontSize:"12px",color:"#991b1b",marginBottom:"8px"},children:[(0,_e.jsx)("i",{className:"bi bi-building"})," Current Assignment:"]}),(0,_e.jsxs)("div",{style:{marginLeft:"16px"},children:[(0,_e.jsxs)("div",{style:{fontSize:"14px",color:"#1f2937",marginBottom:"6px"},children:[(0,_e.jsx)("strong",{children:"Sub-Section:"})," ",(null===Qe||void 0===Qe||null===(w=Qe.subSection)||void 0===w?void 0:w.sub_hie_name)||(null===Qe||void 0===Qe||null===(_=Qe.subSection)||void 0===_?void 0:_.hie_name)||"N/A"]}),(0,_e.jsxs)("div",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"4px"},children:[(0,_e.jsx)("strong",{children:"Section:"})," ",(null===Qe||void 0===Qe||null===(N=Qe.parentSection)||void 0===N?void 0:N.hie_name)||"N/A"]}),(0,_e.jsxs)("div",{style:{fontSize:"13px",color:"#6b7280"},children:[(0,_e.jsx)("strong",{children:"Division:"})," ",(null===Qe||void 0===Qe||null===(k=Qe.parentDivision)||void 0===k?void 0:k.division_name)||"N/A"]})]})]})]}),(0,_e.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[(0,_e.jsxs)("button",{onClick:()=>{lt(!1),ct(null)},disabled:ut,style:{padding:"12px 24px",border:"2px solid #d1d5db",borderRadius:"8px",backgroundColor:"white",color:"#6b7280",fontSize:"14px",fontWeight:"600",cursor:ut?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:ut?.5:1},onMouseOver:e=>{ut||(e.target.style.borderColor="#9ca3af",e.target.style.color="#374151")},onMouseOut:e=>{ut||(e.target.style.borderColor="#d1d5db",e.target.style.color="#6b7280")},children:[(0,_e.jsx)("i",{className:"bi bi-x-circle",style:{marginRight:"8px"}}),"Cancel"]}),(0,_e.jsx)("button",{onClick:async()=>{if(!Wt)return lt(!1),ct(null),Vt({type:"error",title:"Permission",message:"You do not have permission to recall transfers."});if(!dt||!Qe)return;ht(!0);const e=localStorage.getItem("token");if(!e)return ht(!1),lt(!1),Vt({type:"error",title:"Auth",message:"Token missing. Please login."});const t=(null===dt||void 0===dt?void 0:dt.EMP_NUMBER)||(null===dt||void 0===dt?void 0:dt.empNumber)||(null===dt||void 0===dt?void 0:dt.EMP_ID)||(null===dt||void 0===dt?void 0:dt.emp_id),n=(null===dt||void 0===dt?void 0:dt.FULLNAME)||(null===dt||void 0===dt?void 0:dt.fullName)||(null===dt||void 0===dt?void 0:dt.CALLING_NAME)||(null===dt||void 0===dt?void 0:dt.calling_name)||(null===dt||void 0===dt?void 0:dt.name)||"Employee";try{console.log("RECALL PAYLOAD:",{employeeId:String(t),sub_section_id:null===Qe||void 0===Qe?void 0:Qe._id}),console.log("\ud83d\udd04 Recalling transfer for:",{empId:t,sub_section_id:Qe._id});const i=`${Ht}/mysql-subsections/recall-transfer?employeeId=${encodeURIComponent(String(t))}&sub_section_id=${encodeURIComponent(String(Qe._id))}`;let s=await fetch(i,{method:"DELETE",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({employeeId:String(t),sub_section_id:Qe._id})});if(s.ok||(console.warn("DELETE recall failed, attempting POST fallback...",s.status),s=await fetch(`${Ht}/mysql-subsections/recall-transfer`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({employeeId:String(t),sub_section_id:Qe._id})})),!s.ok)throw new Error(`HTTP ${s.status}`);const o=await s.json();at(e=>e.filter(e=>!(String(e.employeeId)===String(t)&&String(e.sub_section_id)===String(Qe._id))));try{await Kt(Qe._id,e)}catch(cu){console.warn("\u26a0\ufe0f Failed to refresh transferred list after recall:",cu)}Ge(e=>e.some(e=>String((null===e||void 0===e?void 0:e.EMP_NUMBER)||(null===e||void 0===e?void 0:e.empNumber)||(null===e||void 0===e?void 0:e.EMP_ID)||"")===String(t))?e:[...e,dt]),gt(e=>{const n=new Set(Array.from(e));return n.has(String(t))&&n.delete(String(t)),n}),lt(!1),ct(null),ht(!1),Vt({type:"success",title:"Recalled!",message:`Successfully recalled the transfer for ${n}!`}),console.log("\u2705 Recall successful:",o),pt&&await en(Qe)}catch(i){console.error("\u274c Recall failed:",i),ht(!1),lt(!1),Vt({type:"error",title:"Recall Failed",message:"Failed to recall the transfer. Please try again."})}},disabled:ut,style:{padding:"12px 24px",border:"none",borderRadius:"8px",background:ut?"#9ca3af":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",fontSize:"14px",fontWeight:"600",cursor:ut?"not-allowed":"pointer",transition:"all 0.2s ease",boxShadow:"0 3px 10px rgba(239, 68, 68, 0.3)",display:"flex",alignItems:"center",gap:"8px"},onMouseOver:e=>{ut||(e.target.style.transform="translateY(-1px)",e.target.style.boxShadow="0 4px 15px rgba(239, 68, 68, 0.4)")},onMouseOut:e=>{ut||(e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 3px 10px rgba(239, 68, 68, 0.3)")},children:ut?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Recalling..."]}):(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-check-circle"}),"Confirm Recall"]})})]})]})]})}),vt&&Qe&&(0,_e.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001,padding:"20px"},children:(0,_e.jsxs)("div",{style:{background:"white",borderRadius:"16px",maxWidth:"700px",width:"100%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",overflow:"hidden"},children:[(0,_e.jsxs)("div",{style:{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",padding:"20px 28px",display:"flex",alignItems:"center",gap:"12px"},children:[(0,_e.jsx)("i",{className:"bi bi-arrow-counterclockwise",style:{fontSize:"22px",color:"white"}}),(0,_e.jsxs)("h3",{style:{margin:0,color:"white",fontSize:"18px",fontWeight:"600"},children:["Confirm Bulk Recall (",mt.size," selected)"]})]}),(0,_e.jsxs)("div",{style:{padding:"24px"},children:[(0,_e.jsxs)("p",{style:{fontSize:"14px",color:"#374151",marginBottom:"12px"},children:["You're about to recall the transfer for ",(0,_e.jsx)("strong",{children:mt.size})," employee",1!==mt.size?"s":""," from:"]}),(0,_e.jsxs)("div",{style:{padding:"12px 16px",background:"#fef2f2",borderRadius:"8px",border:"1px solid #fecaca"},children:[(0,_e.jsx)("div",{style:{fontSize:"14px",color:"#1f2937",fontWeight:"600"},children:(null===Qe||void 0===Qe||null===(C=Qe.subSection)||void 0===C?void 0:C.sub_hie_name)||(null===Qe||void 0===Qe||null===(E=Qe.subSection)||void 0===E?void 0:E.hie_name)||"N/A"}),(0,_e.jsx)("div",{style:{fontSize:"13px",color:"#6b7280"},children:(null===Qe||void 0===Qe||null===(I=Qe.parentSection)||void 0===I?void 0:I.hie_name)||"Section: N/A"}),(0,_e.jsx)("div",{style:{fontSize:"13px",color:"#6b7280"},children:(null===Qe||void 0===Qe||null===(D=Qe.parentDivision)||void 0===D?void 0:D.division_name)||"Division: N/A"})]}),(0,_e.jsxs)("div",{style:{marginTop:"18px"},children:[(0,_e.jsx)("strong",{style:{color:"#374151"},children:"Selected employees preview:"}),(0,_e.jsxs)("div",{style:{marginTop:"8px",maxHeight:"160px",overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px"},children:[Array.from(mt).slice(0,10).map((e,t)=>{const n=St.find(t=>String((null===t||void 0===t?void 0:t.EMP_NUMBER)||(null===t||void 0===t?void 0:t.empNumber)||(null===t||void 0===t?void 0:t.EMP_ID)||(null===t||void 0===t?void 0:t.emp_id)||"")===e),i=(null===n||void 0===n?void 0:n.FULLNAME)||(null===n||void 0===n?void 0:n.fullName)||(null===n||void 0===n?void 0:n.CALLING_NAME)||(null===n||void 0===n?void 0:n.calling_name)||(null===n||void 0===n?void 0:n.name)||e;return(0,_e.jsxs)("div",{style:{padding:"6px 8px",borderBottom:"1px dashed #e5e7eb",fontSize:"13px"},children:[e," - ",i]},e+t)}),mt.size>10&&(0,_e.jsxs)("div",{style:{padding:"6px 8px",color:"#6b7280",fontSize:"13px"},children:["+ ",mt.size-10," more..."]})]})]})]}),(0,_e.jsxs)("div",{style:{padding:"20px 28px",borderTop:"1px solid #e5e7eb",background:"#f9fafb",display:"flex",justifyContent:"flex-end",gap:"12px"},children:[(0,_e.jsx)("button",{onClick:()=>xt(!1),disabled:bt,style:{padding:"10px 20px",border:"2px solid #d1d5db",borderRadius:"8px",backgroundColor:"white",color:"#6b7280",fontSize:"13px",fontWeight:"600",cursor:bt?"not-allowed":"pointer"},children:"Cancel"}),(0,_e.jsx)("button",{onClick:async()=>{if(!Wt)return xt(!1),Vt({type:"error",title:"Permission",message:"You do not have permission to recall transfers."});if(!Qe||0===mt.size)return;yt(!0);const e=localStorage.getItem("token");if(!e)return yt(!1),xt(!1),Vt({type:"error",title:"Auth",message:"Token missing. Please login."});try{const t=Array.from(mt),n=t.map(e=>({employeeId:String(e),sub_section_id:Qe._id}));let i=await fetch(`${Ht}/mysql-subsections/recall-transfer/bulk`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)});if(i.ok){const e=await i.json();console.log("Bulk recall result:",e)}else{console.warn("Bulk recall failed; falling back to individual recals",i.status);const t=[];for(const i of n){const n=await fetch(`${Ht}/mysql-subsections/recall-transfer`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(i)});t.push(n)}if(t.some(e=>!e.ok))throw new Error("One or more individual recalls failed during fallback")}jt(e=>e.filter(e=>!mt.has(String((null===e||void 0===e?void 0:e.EMP_NUMBER)||(null===e||void 0===e?void 0:e.empNumber)||(null===e||void 0===e?void 0:e.EMP_ID)||(null===e||void 0===e?void 0:e.emp_id)||"")))),at(e=>e.filter(e=>!mt.has(String(e.employeeId||e.employee_id||e.empId||e.emp_id)))),gt(new Set),xt(!1),yt(!1),Vt({type:"success",title:"Recalled",message:`${t.length} transfer${1!==t.length?"s":""} recalled successfully`});try{await Kt(Qe._id,e)}catch(cu){console.warn("Failed to refresh transferred employees after bulk recall",cu)}}catch(t){console.error("Bulk recall failed:",t),yt(!1),xt(!1),Vt({type:"error",title:"Recall Failed",message:"Bulk recall failed. Check console for details."})}},disabled:bt,style:{padding:"10px 20px",border:"none",borderRadius:"8px",background:bt?"#9ca3af":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",fontSize:"13px",fontWeight:"600",cursor:bt?"not-allowed":"pointer"},children:bt?"Recalling...":`Confirm (${mt.size})`})]})]})})]})};var ac=n(139),rc=n.n(ac),lc=n(173),dc=n.n(lc);const cc={type:dc().string,tooltip:dc().bool,as:dc().elementType},uc=i.forwardRef((e,t)=>{let{as:n="div",className:i,type:s="valid",tooltip:o=!1,...a}=e;return(0,_e.jsx)(n,{...a,ref:t,className:rc()(i,`${s}-${o?"tooltip":"feedback"}`)})});uc.displayName="Feedback",uc.propTypes=cc;const hc=uc,pc=i.createContext({}),fc=["xxl","xl","lg","md","sm","xs"],mc="xs",gc=i.createContext({prefixes:{},breakpoints:fc,minBreakpoint:mc}),{Consumer:vc,Provider:xc}=gc;function bc(e,t){const{prefixes:n}=(0,i.useContext)(gc);return e||n[t]||t}const yc=i.forwardRef((e,t)=>{let{id:n,bsPrefix:s,className:o,type:a="checkbox",isValid:r=!1,isInvalid:l=!1,as:d="input",...c}=e;const{controlId:u}=(0,i.useContext)(pc);return s=bc(s,"form-check-input"),(0,_e.jsx)(d,{...c,ref:t,type:a,id:n||u,className:rc()(o,s,r&&"is-valid",l&&"is-invalid")})});yc.displayName="FormCheckInput";const Sc=yc,jc=i.forwardRef((e,t)=>{let{bsPrefix:n,className:s,htmlFor:o,...a}=e;const{controlId:r}=(0,i.useContext)(pc);return n=bc(n,"form-check-label"),(0,_e.jsx)("label",{...a,ref:t,htmlFor:o||r,className:rc()(s,n)})});jc.displayName="FormCheckLabel";const wc=jc;const _c=i.forwardRef((e,t)=>{let{id:n,bsPrefix:s,bsSwitchPrefix:o,inline:a=!1,reverse:r=!1,disabled:l=!1,isValid:d=!1,isInvalid:c=!1,feedbackTooltip:u=!1,feedback:h,feedbackType:p,className:f,style:m,title:g="",type:v="checkbox",label:x,children:b,as:y="input",...S}=e;s=bc(s,"form-check"),o=bc(o,"form-switch");const{controlId:j}=(0,i.useContext)(pc),w=(0,i.useMemo)(()=>({controlId:n||j}),[j,n]),_=!b&&null!=x&&!1!==x||function(e,t){return i.Children.toArray(e).some(e=>i.isValidElement(e)&&e.type===t)}(b,wc),N=(0,_e.jsx)(Sc,{...S,type:"switch"===v?"checkbox":v,ref:t,isValid:d,isInvalid:c,disabled:l,as:y});return(0,_e.jsx)(pc.Provider,{value:w,children:(0,_e.jsx)("div",{style:m,className:rc()(f,_&&s,a&&`${s}-inline`,r&&`${s}-reverse`,"switch"===v&&o),children:b||(0,_e.jsxs)(_e.Fragment,{children:[N,_&&(0,_e.jsx)(wc,{title:g,children:x}),h&&(0,_e.jsx)(hc,{type:p,tooltip:u,children:h})]})})})});_c.displayName="FormCheck";const Nc=Object.assign(_c,{Input:Sc,Label:wc});n(440);const kc=i.forwardRef((e,t)=>{let{bsPrefix:n,type:s,size:o,htmlSize:a,id:r,className:l,isValid:d=!1,isInvalid:c=!1,plaintext:u,readOnly:h,as:p="input",...f}=e;const{controlId:m}=(0,i.useContext)(pc);return n=bc(n,"form-control"),(0,_e.jsx)(p,{...f,type:s,size:a,ref:t,readOnly:h,id:r||m,className:rc()(l,u?`${n}-plaintext`:n,o&&`${n}-${o}`,"color"===s&&`${n}-color`,d&&"is-valid",c&&"is-invalid")})});kc.displayName="FormControl";const Cc=Object.assign(kc,{Feedback:hc}),Ec=i.forwardRef((e,t)=>{let{className:n,bsPrefix:i,as:s="div",...o}=e;return i=bc(i,"form-floating"),(0,_e.jsx)(s,{ref:t,className:rc()(n,i),...o})});Ec.displayName="FormFloating";const Ic=Ec,Dc=i.forwardRef((e,t)=>{let{controlId:n,as:s="div",...o}=e;const a=(0,i.useMemo)(()=>({controlId:n}),[n]);return(0,_e.jsx)(pc.Provider,{value:a,children:(0,_e.jsx)(s,{...o,ref:t})})});Dc.displayName="FormGroup";const Ac=Dc;function Tc(e){let{as:t,bsPrefix:n,className:s,...o}=e;n=bc(n,"col");const a=function(){const{breakpoints:e}=(0,i.useContext)(gc);return e}(),r=function(){const{minBreakpoint:e}=(0,i.useContext)(gc);return e}(),l=[],d=[];return a.forEach(e=>{const t=o[e];let i,s,a;delete o[e],"object"===typeof t&&null!=t?({span:i,offset:s,order:a}=t):i=t;const c=e!==r?`-${e}`:"";i&&l.push(!0===i?`${n}${c}`:`${n}${c}-${i}`),null!=a&&d.push(`order${c}-${a}`),null!=s&&d.push(`offset${c}-${s}`)}),[{...o,className:rc()(s,...l,...d)},{as:t,bsPrefix:n,spans:l}]}const Mc=i.forwardRef((e,t)=>{const[{className:n,...i},{as:s="div",bsPrefix:o,spans:a}]=Tc(e);return(0,_e.jsx)(s,{...i,ref:t,className:rc()(n,!a.length&&o)})});Mc.displayName="Col";const Rc=Mc,Oc=i.forwardRef((e,t)=>{let{as:n="label",bsPrefix:s,column:o=!1,visuallyHidden:a=!1,className:r,htmlFor:l,...d}=e;const{controlId:c}=(0,i.useContext)(pc);s=bc(s,"form-label");let u="col-form-label";"string"===typeof o&&(u=`${u} ${u}-${o}`);const h=rc()(r,s,a&&"visually-hidden",o&&u);return l=l||c,o?(0,_e.jsx)(Rc,{ref:t,as:"label",className:h,htmlFor:l,...d}):(0,_e.jsx)(n,{ref:t,className:h,htmlFor:l,...d})});Oc.displayName="FormLabel";const Pc=Oc,Lc=i.forwardRef((e,t)=>{let{bsPrefix:n,className:s,id:o,...a}=e;const{controlId:r}=(0,i.useContext)(pc);return n=bc(n,"form-range"),(0,_e.jsx)("input",{...a,type:"range",ref:t,className:rc()(s,n),id:o||r})});Lc.displayName="FormRange";const zc=Lc,Fc=i.forwardRef((e,t)=>{let{bsPrefix:n,size:s,htmlSize:o,className:a,isValid:r=!1,isInvalid:l=!1,id:d,...c}=e;const{controlId:u}=(0,i.useContext)(pc);return n=bc(n,"form-select"),(0,_e.jsx)("select",{...c,size:o,ref:t,className:rc()(a,n,s&&`${n}-${s}`,r&&"is-valid",l&&"is-invalid"),id:d||u})});Fc.displayName="FormSelect";const Bc=Fc,$c=i.forwardRef((e,t)=>{let{bsPrefix:n,className:i,as:s="small",muted:o,...a}=e;return n=bc(n,"form-text"),(0,_e.jsx)(s,{...a,ref:t,className:rc()(i,n,o&&"text-muted")})});$c.displayName="FormText";const Uc=$c,Wc=i.forwardRef((e,t)=>(0,_e.jsx)(Nc,{...e,ref:t,type:"switch"}));Wc.displayName="Switch";const Hc=Object.assign(Wc,{Input:Nc.Input,Label:Nc.Label}),Vc=i.forwardRef((e,t)=>{let{bsPrefix:n,className:i,children:s,controlId:o,label:a,...r}=e;return n=bc(n,"form-floating"),(0,_e.jsxs)(Ac,{ref:t,className:rc()(i,n),controlId:o,...r,children:[s,(0,_e.jsx)("label",{htmlFor:o,children:a})]})});Vc.displayName="FloatingLabel";const qc=Vc,Yc={_ref:dc().any,validated:dc().bool,as:dc().elementType},Gc=i.forwardRef((e,t)=>{let{className:n,validated:i,as:s="form",...o}=e;return(0,_e.jsx)(s,{...o,ref:t,className:rc()(n,i&&"was-validated")})});Gc.displayName="Form",Gc.propTypes=Yc;const Jc=Object.assign(Gc,{Group:Ac,Control:Cc,Floating:Ic,Check:Nc,Switch:Hc,Label:Pc,Text:Uc,Range:zc,Select:Bc,FloatingLabel:qc}),Kc=()=>{const{user:e,hasPermission:t}=(0,i.useContext)(Ne),[n,s]=(0,i.useState)([]),[o,a]=(0,i.useState)(!0),[r,l]=(0,i.useState)(!1),[d,c]=(0,i.useState)(!1),[u,h]=(0,i.useState)(!1),[p,f]=(0,i.useState)(!1),[m,g]=(0,i.useState)(""),[v,x]=(0,i.useState)(null),[b,y]=(0,i.useState)(null),[S,j]=(0,i.useState)(""),[w,_]=(0,i.useState)(""),[N,k]=(0,i.useState)(!1),[C,E]=(0,i.useState)(""),I="super_admin"===(null===e||void 0===e?void 0:e.role),D=()=>I||t("view_roles")||t("roles.read"),A=()=>I||t("create_role")||t("roles.create"),T=()=>I||t("update_role")||t("roles.update")||t("permission_management.manage_permission"),M=()=>I||t("delete_role")||t("roles.delete"),R=e=>{E(e),f(!0),setTimeout(()=>{f(!1),E("")},3e3)};(0,i.useEffect)(()=>{(async()=>{try{a(!0);const e=localStorage.getItem("token"),t=await fetch("http://localhost:5000/api/roles",{headers:{...e?{Authorization:`Bearer ${e}`}:{}}});if(t.ok){const e=await t.json();console.log("Fetched roles:",e.data),s(e.data||[])}else console.error("Failed to fetch roles, status:",t.status),j("Failed to fetch roles"),_("error"),k(!0),setTimeout(()=>k(!1),4e3)}catch(e){console.error("Error fetching roles:",e),j("Error fetching roles"),_("error"),k(!0),setTimeout(()=>k(!1),4e3)}finally{a(!1)}})()},[]);return o?(0,_e.jsx)("div",{className:"role-access-wrapper",children:(0,_e.jsx)("div",{className:"loading-overlay",children:(0,_e.jsx)("div",{className:"loading-spinner"})})}):(0,_e.jsxs)("div",{className:"role-access-wrapper",children:[(0,_e.jsxs)("div",{className:"geometric-background",children:[(0,_e.jsx)("div",{className:"geometric-shape shape-1"}),(0,_e.jsx)("div",{className:"geometric-shape shape-2"}),(0,_e.jsx)("div",{className:"geometric-shape shape-3"}),(0,_e.jsx)("div",{className:"geometric-shape shape-4"})]}),(0,_e.jsx)("div",{className:"container-fluid px-4",children:(0,_e.jsxs)("div",{className:"main-card",children:[(0,_e.jsx)("div",{className:"card-header-custom",children:(0,_e.jsxs)("div",{className:"header-content",style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,_e.jsx)("div",{className:"header-text",children:(0,_e.jsx)("h1",{className:"page-title role-title-black",children:"Role Management"})}),D()?(0,_e.jsxs)("button",{className:"btn-professional "+(A()?"btn-primary":"btn-secondary"),onClick:()=>{A()?l(!0):(j('You do not have permission to create roles. Contact a Super Admin for "roles.create" access.'),_("error"),k(!0),setTimeout(()=>k(!1),4e3))},title:A()?"Add New Role":"You need 'roles.create' permission to add roles",style:{padding:"10px 16px",fontSize:"14px",cursor:A()?"pointer":"not-allowed",opacity:A()?1:.6},children:[(0,_e.jsx)("i",{className:"bi "+(A()?"bi-plus-circle":"bi-lock")}),"Add Role",!A()&&(0,_e.jsx)("i",{className:"bi bi-exclamation-triangle ml-1",style:{fontSize:"12px"}})]}):(0,_e.jsxs)("div",{className:"alert alert-info",style:{margin:0,padding:"8px 12px",fontSize:"14px"},children:[(0,_e.jsx)("i",{className:"bi bi-info-circle mr-2"}),"You have limited access to role management."]})]})}),(0,_e.jsxs)("div",{className:"card-body-custom",children:[N&&S&&(0,_e.jsxs)("div",{className:"toast-popup "+("success"===w?"toast-success":"toast-error"),children:[(0,_e.jsx)("i",{className:`bi ${"success"===w?"bi-check-circle":"bi-exclamation-circle"} mr-2`}),S]}),!D()&&(0,_e.jsxs)("div",{className:"alert alert-warning",children:[(0,_e.jsx)("i",{className:"bi bi-lock-fill mr-2"}),'You do not have permission to view role management. Contact a Super Admin for "roles.read" access.']}),"            ",D()&&!A()&&!T()&&!M()&&(0,_e.jsxs)("div",{className:"alert alert-info",children:[(0,_e.jsx)("i",{className:"bi bi-eye mr-2"}),"You have read-only access to role management. Contact a Super Admin for additional permissions."]}),D()&&(0,_e.jsx)(_e.Fragment,{children:(0,_e.jsx)("div",{className:"professional-card",children:(0,_e.jsx)("div",{className:"table-responsive",children:(0,_e.jsxs)("table",{className:"professional-table",children:[(0,_e.jsx)("thead",{children:(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("th",{children:"Role Name"}),(0,_e.jsx)("th",{children:"Role Value"}),(0,_e.jsx)("th",{children:"Created Date"}),(0,_e.jsx)("th",{children:"Actions"})]})}),(0,_e.jsx)("tbody",{children:0===n.length?(0,_e.jsx)("tr",{children:(0,_e.jsx)("td",{colSpan:"4",className:"text-center",children:"No roles found"})}):n.map(e=>(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("td",{children:(0,_e.jsx)("strong",{children:e.label})}),(0,_e.jsx)("td",{children:(0,_e.jsx)("code",{children:e.value})}),(0,_e.jsx)("td",{children:new Date(e.createdAt||Date.now()).toLocaleDateString()}),(0,_e.jsx)("td",{children:D()?(0,_e.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,_e.jsxs)("button",{className:"btn-professional "+(T(),"btn-secondary"),onClick:()=>{T()?(e=>{x(e),g(e.label),c(!0)})(e):(j('You do not have permission to edit roles. Contact a Super Admin for "roles.update" access.'),_("error"),k(!0),setTimeout(()=>k(!1),4e3))},title:T()?"Edit Role":"You need 'roles.update' permission to edit roles",style:{padding:"6px 10px",fontSize:"12px",cursor:T()?"pointer":"not-allowed",opacity:T()?1:.6},children:[(0,_e.jsx)("i",{className:"bi "+(T()?"bi-pencil":"bi-lock")}),"Edit",!T()&&(0,_e.jsx)("i",{className:"bi bi-exclamation-triangle ml-1",style:{fontSize:"10px"}})]}),(0,_e.jsxs)("button",{className:"btn-professional "+(M()?"btn-danger":"btn-secondary"),onClick:t=>{t.preventDefault(),t.stopPropagation(),M()?(console.log("Delete button clicked for role:",e),(e=>{console.log("Opening delete confirmation for role:",e),y(e),h(!0)})(e)):(j('You do not have permission to delete roles. Contact a Super Admin for "roles.delete" access.'),_("error"),k(!0),setTimeout(()=>k(!1),4e3))},title:M()?"Delete Role":"You need 'roles.delete' permission to delete roles",style:{padding:"6px 10px",fontSize:"12px",cursor:M()?"pointer":"not-allowed",opacity:M()?1:.6},children:[(0,_e.jsx)("i",{className:"bi "+(M()?"bi-trash":"bi-lock")}),"Delete",!M()&&(0,_e.jsx)("i",{className:"bi bi-exclamation-triangle ml-1",style:{fontSize:"10px"}})]})]}):(0,_e.jsxs)("span",{className:"text-muted",children:[(0,_e.jsx)("i",{className:"bi bi-lock mr-1"}),"No access"]})})]},e._id))})]})})})})]})]})}),r&&(0,_e.jsx)("div",{className:"modal-overlay",onClick:()=>l(!1),children:(0,_e.jsxs)("div",{className:"modal-content professional-form",onClick:e=>e.stopPropagation(),style:{maxWidth:"420px"},children:[(0,_e.jsxs)("div",{className:"modal-header",style:{borderBottom:"2px solid var(--gray-200)",paddingBottom:"12px",marginBottom:"16px"},children:[(0,_e.jsxs)("h3",{style:{fontSize:"20px",fontWeight:"700",color:"var(--gray-900)",display:"flex",alignItems:"center",gap:"8px"},children:[(0,_e.jsx)("i",{className:"bi bi-plus-circle",style:{color:"var(--primary)"}}),"Add New Role"]}),(0,_e.jsx)("button",{className:"modal-close btn-professional btn-danger",onClick:()=>l(!1),style:{padding:"6px 10px",fontSize:"14px"},children:(0,_e.jsx)("i",{className:"bi bi-x"})})]}),(0,_e.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=m.trim(),n=t.toLowerCase().replace(/\s+/g,"_");if(n)try{const e=localStorage.getItem("token"),i=await fetch("http://localhost:5000/api/roles",{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({value:n,label:t})});if(i.ok){const e=(await i.json()).data;s(t=>[...t,e]),g(""),l(!1),R(`Role "${e.label}" has been successfully created!`),j(`Role "${e.label}" created successfully!`),_("success"),k(!0),setTimeout(()=>k(!1),4e3),window.dispatchEvent(new CustomEvent("roleAdded",{detail:{value:e.value,label:e.label}}))}else{const e=await i.json().catch(()=>({}));j(e.message||"Failed to create role"),_("error"),k(!0),setTimeout(()=>k(!1),4e3)}}catch(i){console.error("Error creating role:",i),j("Network error while creating role"),_("error"),k(!0),setTimeout(()=>k(!1),4e3)}},className:"modal-body",children:[(0,_e.jsxs)("div",{className:"form-group",children:[(0,_e.jsx)("label",{className:"form-label",children:"Role Name *"}),(0,_e.jsx)("input",{type:"text",name:"roleName",className:"form-input",value:m,onChange:e=>g(e.target.value),placeholder:"e.g., Regional Manager",required:!0}),(0,_e.jsx)("small",{className:"text-muted",children:"Only a name is required. We'll create an internal value automatically."})]}),(0,_e.jsxs)("div",{className:"modal-footer",style:{borderTop:"2px solid var(--gray-200)",paddingTop:"12px",marginTop:"12px",display:"flex",gap:"12px",justifyContent:"flex-end"},children:[(0,_e.jsx)("button",{type:"button",className:"btn-professional btn-secondary",onClick:()=>l(!1),children:"Cancel"}),(0,_e.jsx)("button",{type:"submit",className:"btn-professional btn-success",children:"Add Role"})]})]})]})}),d&&(0,_e.jsx)("div",{className:"modal-overlay",onClick:()=>c(!1),children:(0,_e.jsxs)("div",{className:"modal-content professional-form",onClick:e=>e.stopPropagation(),style:{maxWidth:"420px"},children:[(0,_e.jsxs)("div",{className:"modal-header",style:{borderBottom:"2px solid var(--gray-200)",paddingBottom:"12px",marginBottom:"16px"},children:[(0,_e.jsxs)("h3",{style:{fontSize:"20px",fontWeight:"700",color:"var(--gray-900)",display:"flex",alignItems:"center",gap:"8px"},children:[(0,_e.jsx)("i",{className:"bi bi-pencil",style:{color:"var(--primary)"}}),"Edit Role"]}),(0,_e.jsx)("button",{className:"modal-close btn-professional btn-danger",onClick:()=>c(!1),style:{padding:"6px 10px",fontSize:"14px"},children:(0,_e.jsx)("i",{className:"bi bi-x"})})]}),(0,_e.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=m.trim();if(t&&v)try{const e=localStorage.getItem("token"),n=await fetch(`http://localhost:5000/api/roles/${v._id}`,{method:"PUT",headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}},body:JSON.stringify({label:t})});if(n.ok){const e=(await n.json()).data;s(t=>t.map(t=>t._id===v._id?e:t)),g(""),x(null),c(!1),R(`Role "${e.label}" has been successfully updated!`),j("Role updated successfully!"),_("success"),k(!0),setTimeout(()=>k(!1),4e3),window.dispatchEvent(new CustomEvent("roleUpdated",{detail:{value:e.value,label:e.label}}))}else{const e=await n.json().catch(()=>({}));j(e.message||"Failed to update role"),_("error"),k(!0),setTimeout(()=>k(!1),4e3)}}catch(n){console.error("Error updating role:",n),j("Network error while updating role"),_("error"),k(!0),setTimeout(()=>k(!1),4e3)}},className:"modal-body",children:[(0,_e.jsxs)("div",{className:"form-group",children:[(0,_e.jsx)("label",{className:"form-label",children:"Role Name *"}),(0,_e.jsx)("input",{type:"text",name:"roleName",className:"form-input",value:m,onChange:e=>g(e.target.value),placeholder:"e.g., Regional Manager",required:!0}),(0,_e.jsx)("small",{className:"text-muted",children:"Update the role name. The internal value will remain the same."})]}),(0,_e.jsxs)("div",{className:"modal-footer",style:{borderTop:"2px solid var(--gray-200)",paddingTop:"12px",marginTop:"12px",display:"flex",gap:"12px",justifyContent:"flex-end"},children:[(0,_e.jsx)("button",{type:"button",className:"btn-professional btn-secondary",onClick:()=>c(!1),children:"Cancel"}),(0,_e.jsx)("button",{type:"submit",className:"btn-professional btn-success",children:"Update Role"})]})]})]})}),u&&(0,_e.jsx)("div",{className:"modal-overlay confirm-overlay",onClick:()=>h(!1),children:(0,_e.jsxs)("div",{className:"modal-content confirm-modal",onClick:e=>e.stopPropagation(),children:[(0,_e.jsx)("div",{className:"modal-header",children:(0,_e.jsx)("h4",{className:"confirm-title",children:"Confirm Role Deletion"})}),(0,_e.jsxs)("div",{className:"modal-body",children:[(0,_e.jsxs)("p",{children:["Are you sure you want to delete the role ",(0,_e.jsxs)("strong",{children:['"',null===b||void 0===b?void 0:b.label,'"']}),"?"]}),(0,_e.jsxs)("p",{className:"text-warning",children:[(0,_e.jsx)("i",{className:"bi bi-exclamation-triangle"}),"This action cannot be undone. Users with this role may lose access to certain features."]})]}),(0,_e.jsxs)("div",{className:"modal-footer",children:[(0,_e.jsx)("button",{className:"btn-professional btn-secondary",onClick:()=>h(!1),children:"Cancel"}),(0,_e.jsx)("button",{className:"btn-professional btn-danger",onClick:e=>{e.preventDefault(),console.log("Delete confirmation clicked, calling handleDeleteRole"),(async()=>{if(console.log("handleDeleteRole called with roleToDelete:",b),b)try{const t=localStorage.getItem("token");console.log("Token exists:",!!t),console.log("Attempting to delete role:",b._id,b.label);const n=await fetch(`http://localhost:5000/api/roles/${b._id}`,{method:"DELETE",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}});if(console.log("Delete response status:",n.status,n.statusText),n.ok){const e=await n.json();console.log("Delete successful:",e),s(e=>{const t=e.filter(e=>e._id!==b._id);return console.log("Updated roles list:",t),t}),y(null),h(!1),R(`Role "${b.label}" has been successfully deleted from the system!`),j(`Role "${b.label}" deleted successfully!`),_("success"),k(!0),setTimeout(()=>k(!1),4e3),window.dispatchEvent(new CustomEvent("roleDeleted",{detail:{value:b.value,label:b.label}}))}else{const t=await n.text();let i;console.error("Delete failed with response:",t);try{i=JSON.parse(t)}catch(e){i={message:t||"Failed to delete role"}}j(i.message||"Failed to delete role"),_("error"),k(!0),setTimeout(()=>k(!1),4e3),h(!1)}}catch(t){console.error("Error deleting role:",t),j("Network error while deleting role"),_("error"),k(!0),setTimeout(()=>k(!1),4e3),h(!1)}else console.error("No role to delete")})()},children:"Yes, Delete Role"})]})]})}),p&&(0,_e.jsx)("div",{className:"modal-overlay",style:{backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9999},children:(0,_e.jsx)("div",{className:"modal-content success-modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:"500px",textAlign:"center",border:"3px solid #28a745",borderRadius:"15px",background:"linear-gradient(135deg, #f8f9fa, #e9ecef)",boxShadow:"0 10px 30px rgba(40, 167, 69, 0.3)",animation:"fadeInUp 0.3s ease-out"},children:(0,_e.jsxs)("div",{style:{padding:"30px"},children:[(0,_e.jsx)("div",{style:{fontSize:"60px",color:"#28a745",marginBottom:"20px",animation:"bounce 1s ease-in-out"},children:(0,_e.jsx)("i",{className:"bi bi-check-circle-fill"})}),(0,_e.jsx)("h2",{style:{color:"#28a745",marginBottom:"15px",fontWeight:"bold"},children:"Success!"}),(0,_e.jsx)("p",{style:{fontSize:"16px",color:"#495057",marginBottom:"25px",lineHeight:"1.5"},children:C}),(0,_e.jsxs)("button",{className:"btn-professional btn-success",onClick:()=>f(!1),style:{padding:"10px 30px",fontSize:"16px",fontWeight:"bold"},children:[(0,_e.jsx)("i",{className:"bi bi-check2"})," Awesome!"]})]})})})]})},Qc=()=>{var e,t,n,s;const{user:o,hasPermission:a}=(0,i.useContext)(Ne),r="super_admin"===(null===o||void 0===o?void 0:o.role),[l,d]=(0,i.useState)([]),[c,u]=(0,i.useState)([]),[h,p]=(0,i.useState)(""),[f,m]=(0,i.useState)({}),[g,v]=(0,i.useState)(!1),[x,b]=(0,i.useState)(!1),[y,S]=(0,i.useState)(!0),[j,w]=(0,i.useState)(!1),[_,N]=(0,i.useState)(!1),[k,C]=(0,i.useState)({}),E=Object.keys(k||{}).length>0;(0,i.useEffect)(()=>{A(),T();const e=()=>{A(!0)},t=()=>{A(!0)},n=()=>{A(!0),p("")};return window.addEventListener("roleAdded",e),window.addEventListener("roleUpdated",t),window.addEventListener("roleDeleted",n),()=>{window.removeEventListener("roleAdded",e),window.removeEventListener("roleUpdated",t),window.removeEventListener("roleDeleted",n)}},[]),(0,i.useEffect)(()=>{if(h){const e=l.find(e=>e.value===h),t=(null===e||void 0===e?void 0:e.permissions)||{},n={...t};t.subsections&&(t.subsections.transfer||t.subsections.recall)&&!t.transfer_recall&&(n.transfer_recall={transfer:!!t.subsections.transfer,recall:!!t.subsections.recall}),m(n)}},[h,l]),(0,i.useEffect)(()=>{if(!j&&!h&&!E){const e=setInterval(()=>{A()},3e4);return()=>clearInterval(e)}return()=>{}},[j,h,E]);const I=()=>!!r||(a("role_management.view_roles")||a("role_management.view")||a("view_roles")||a("roles.read")||a("roles.view")),D=()=>r||a("update_role")||a("roles.update")||a("permission_management.manage_permission"),A=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{e&&N(!0),S(!0);const t=localStorage.getItem("token"),n=await fetch("http://localhost:5000/api/roles",{headers:{...t?{Authorization:`Bearer ${t}`}:{}}});if(n.ok){const e=await n.json();d(e.data||[])}else console.error("Failed to fetch roles")}catch(t){console.error("Error fetching roles:",t)}finally{S(!1),e&&setTimeout(()=>N(!1),500)}},T=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("http://localhost:5000/api/permissions/catalog",{headers:{...e?{Authorization:`Bearer ${e}`}:{}}});if(t.ok){const e=await t.json();u(e.data||[])}else console.error("Failed to fetch permission catalog")}catch(e){console.error("Error fetching permission catalog:",e)}},M=(()=>{const e=c.map(e=>"divisions"===e.category||"sections"===e.category||"employees"===e.category?{...e,permissions:(e.permissions||[]).filter(e=>"read"===e.id)}:"reports"===e.category?{...e,permissions:[{id:"attendance_generate",name:"Attendance Report - Generate Report"},{id:"attendance_download",name:"Attendance Report - Download Report"},{id:"audit_generate",name:"Audit Report - Generate Report"},{id:"meal_generate",name:"Meal Report - Generate Report"},{id:"view_reports",name:"View Reports"}]}:"settings"===e.category?{...e,permissions:[{id:"settings_view",name:"View Settings"},{id:"settings_general",name:"Change General Settings"},{id:"settings_appearance",name:"Change Appearance"},{id:"settings_security",name:"Change Security"}]}:"subsections"===e.category?{...e,permissions:(e.permissions||[]).filter(e=>["create","read","update","delete"].includes(e.id))}:"transfer_recall"===e.category?{...e,permissions:(e.permissions||[]).filter(e=>["transfer","recall"].includes(e.id))}:e).slice();e.some(e=>"subsections"===e.category)||e.push({category:"subsections",name:"Sub-Section Management",permissions:[{id:"create",name:"Create Sub-Sections"},{id:"read",name:"View Sub-Sections"},{id:"update",name:"Update Sub-Sections"},{id:"delete",name:"Delete Sub-Sections"}]});e.some(e=>"transfer_recall"===e.category)||e.push({category:"transfer_recall",name:"Transfer & Recall Management",permissions:[{id:"transfer",name:"Transfer Employee to Sub-Section"},{id:"recall",name:"Recall Transferred Employee"}]});const t=e.findIndex(e=>"sections"===e.category),n=e.findIndex(e=>"employees"===e.category);if(-1!==t&&-1!==n&&1!==Math.abs(t-n)){const t=e.splice(n,1)[0],i=e.findIndex(e=>"sections"===e.category)+1;e.splice(i,0,t)}const i=e.filter(e=>"attendance"!==e.category&&"roles"!==e.category);i.some(e=>"role_management"===e.category)||i.push({category:"role_management",name:"Role Management",permissions:[{id:"create_role",name:"Create Role"},{id:"update_role",name:"Update Role"},{id:"delete_role",name:"Delete Role"},{id:"view_roles",name:"View Roles"}]});return i.some(e=>"permission_management"===e.category)||i.push({category:"permission_management",name:"Permission Management",permissions:[{id:"manage_permission",name:"Manage Permission"}]}),i})(),R=()=>M.reduce((e,t)=>{var n;return e+((null===(n=t.permissions)||void 0===n?void 0:n.length)||0)},0),O=()=>{let e=0;return M.forEach(t=>{(t.permissions||[]).forEach(n=>{var i;null!==(i=f[t.category])&&void 0!==i&&i[n.id]&&e++})}),e},P=e=>({users:"bi-people-fill",attendance:"bi-clock-fill",reports:"bi-bar-chart-fill",divisions:"bi-building-fill",sections:"bi-diagram-3-fill",subsections:"bi-list-check",transfer_recall:"bi-arrow-left-right",roles:"bi-shield-fill-check",role_management:"bi-people-fill",permission_management:"bi-key-fill",settings:"bi-gear-fill",employees:"bi-person-badge-fill"}[e]||"bi-gear-fill"),L=e=>({users:"Manage user accounts, profiles, and authentication settings",attendance:"Track, monitor, and manage employee attendance records",reports:"Generate, view, and manage various system reports",divisions:"Create and manage organizational divisions and departments",sections:"Organize and manage different sections within divisions",subsections:"Create and manage sub-sections within sections",transfer_recall:"Manage transferring and recalling employees to and from sub-sections",roles:"Define user roles and assign permission levels",role_management:"Create, update, delete and view roles",permission_management:"Manage the permission catalog and assignments",settings:"Configure system-wide settings and preferences",employees:"Manage employee information and employment records"}[e]||"Manage related system features and data"),z=(e,t)=>{const n={create:`Add new ${"users"===t?"user accounts":"employees"===t?"employee records":"subsections"===t?"sub-section":t}`,read:"reports"===t?"Download and export existing reports":`View and browse existing ${"users"===t?"user information":"employees"===t?"employee data":"subsections"===t?"sub-section":t}`,update:`Edit and modify existing ${"users"===t?"user details":"employees"===t?"employee information":"subsections"===t?"sub-section":t}`,delete:`Remove and delete ${"users"===t?"user accounts":"employees"===t?"employee records":"subsections"===t?"sub-section":t}`,transfer:"Transfer employee to "+("subsections"===t||"transfer_recall"===t?"sub-section":"that module"),recall:"Recall transferred employees from "+("subsections"===t||"transfer_recall"===t?"sub-section":"that module"),manage:`Full administrative access to ${t} management`,attendance_generate:"Generate attendance reports for selected date ranges and filters",attendance_download:"Download/export attendance reports (CSV, PDF) for distribution",audit_generate:"Generate system audit reports showing activity and changes",meal_generate:"Generate meal reports for employee meal tracking",view_reports:"Browse and view available reports and their metadata",settings_general:"Change general system settings (timezone, locale, defaults)",settings_appearance:"Change appearance options (theme, layout, branding)",settings_security:"Change security settings (password policies, 2FA, session rules)",settings_view:"View system settings and read configuration without editing",create_role:"Create new roles that can be assigned to users",update_role:"Modify existing role details and assigned permissions",delete_role:"Delete roles that are no longer needed",view_roles:"View list of roles and their basic details",manage_permission:"Manage the permission catalog and assignments (view and update)"};return n[e]||`Perform ${e} operations`};return y?(0,_e.jsx)("div",{children:"Loading..."}):(0,_e.jsxs)("div",{className:"role-access-wrapper",children:[(0,_e.jsxs)("div",{className:"section-header",children:[(0,_e.jsxs)("h2",{children:[(0,_e.jsx)("i",{className:"bi bi-people-fill"}),"Role Access Management"]}),(0,_e.jsx)("div",{className:"header-actions",children:(0,_e.jsxs)("button",{className:"btn-manage-roles",onClick:()=>{I()&&window.dispatchEvent(new CustomEvent("navigateTo",{detail:"role-management"}))},disabled:!I(),title:I()?"Manage Roles":"You need 'view_roles' or 'roles.read' access to manage roles",children:[(0,_e.jsx)("i",{className:"bi bi-gear",style:{marginRight:"6px",fontSize:"1.1rem"}})," Manage Roles"]})})]}),I()?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsxs)("div",{className:"stats-section",children:[(0,_e.jsxs)("div",{className:"stats-item",children:[(0,_e.jsx)("span",{className:"stats-number",children:l.length}),(0,_e.jsx)("span",{className:"stats-label",children:"Available Roles"})]}),(0,_e.jsxs)("div",{className:"stats-item",children:[(0,_e.jsx)("span",{className:"stats-number",children:R()}),(0,_e.jsx)("span",{className:"stats-label",children:"Available Permissions"})]}),h&&(0,_e.jsxs)("div",{className:"stats-item",children:[(0,_e.jsx)("span",{className:"stats-number",children:O()}),(0,_e.jsx)("span",{className:"stats-label",children:"Granted Permissions"})]})]}),(0,_e.jsxs)("div",{className:"form-section",children:[(0,_e.jsxs)("label",{htmlFor:"role",className:"form-label-modern",children:[(0,_e.jsx)("i",{className:"bi bi-person-gear text-primary mr-2"}),"Select Role to Manage",_&&(0,_e.jsx)("span",{className:"refresh-indicator ml-2",children:"\ud83d\udd04 Updating..."})]}),(0,_e.jsxs)(Jc.Select,{name:"role",id:"role",className:"form-control-modern",value:h,onChange:e=>{p(e.target.value)},disabled:!D()||_,title:D()?"":'You need "Update Role Permissions" access to change role selection',children:[(0,_e.jsx)("option",{value:"",children:"-- Choose a role to configure --"}),l.map(e=>(0,_e.jsxs)("option",{value:e.value,children:[e.label," - ",e.description||"No description"]},e.value))]}),h&&(0,_e.jsxs)("small",{className:"text-muted mt-2 d-block",children:[(0,_e.jsx)("i",{className:"bi bi-info-circle mr-1"}),"This will update permissions for users with the role: ",(null===(e=l.find(e=>e.value===h))||void 0===e?void 0:e.label)||h]}),!D()&&(0,_e.jsxs)("div",{className:"alert alert-warning mt-3",children:[(0,_e.jsx)("i",{className:"bi bi-lock-fill mr-2"}),'You have view-only access. To modify role permissions, you need the "Update Role Permissions" access.']})]}),h&&(0,_e.jsxs)("div",{className:"permissions-container",children:[(0,_e.jsxs)("div",{className:"permissions-header",children:[(0,_e.jsxs)("div",{className:"permissions-title",children:[(0,_e.jsxs)("h4",{children:["Configure Permissions for ",(0,_e.jsx)("span",{className:"role-highlight",children:(null===(t=l.find(e=>e.value===h))||void 0===t?void 0:t.label)||h})]}),(0,_e.jsx)("p",{className:"permissions-subtitle",children:"Grant or revoke access to different system modules and features"})]}),(0,_e.jsx)("div",{className:"permissions-actions",children:(0,_e.jsxs)("button",{className:"btn-toggle-all",onClick:()=>{const e=O()!==R(),t={...f};M.forEach(n=>{t[n.category]=t[n.category]||{},n.permissions.forEach(i=>{t[n.category][i.id]=e})}),m(t)},children:[(0,_e.jsx)("i",{className:"bi "+(O()===R()?"bi-check-square":"bi-square")}),O()===R()?"Unselect All":"Select All"]})})]}),(0,_e.jsx)("div",{className:"permissions-grid",children:M.map(e=>(0,_e.jsxs)("div",{className:"permission-card",children:[(0,_e.jsxs)("div",{className:"permission-card-header",children:[(0,_e.jsx)("div",{className:"permission-icon",children:(0,_e.jsx)("i",{className:P(e.category)})}),(0,_e.jsxs)("div",{className:"permission-card-title",children:[(0,_e.jsx)("h5",{children:e.name}),(0,_e.jsx)("p",{children:L(e.category)})]}),(0,_e.jsxs)("div",{className:"permission-status",children:[(0,_e.jsx)("span",{className:"enabled-count",children:e.permissions.filter(t=>{var n;return null===(n=f[e.category])||void 0===n?void 0:n[t.id]}).length}),(0,_e.jsxs)("span",{className:"total-count",children:["/",e.permissions.length]})]})]}),(0,_e.jsx)("div",{className:"permission-card-body",children:e.permissions.map(t=>{var n,i,s,o,a,r,c,u,p;const g=(null===(n=f[e.category])||void 0===n?void 0:n[t.id])||!1,v=`${e.category}_${t.id}`;return(0,_e.jsxs)("div",{className:"permission-toggle "+(g?"active":""),children:[(0,_e.jsxs)("label",{className:"permission-switch",children:[(0,_e.jsx)("input",{type:"checkbox",checked:g,onChange:()=>(async(e,t)=>{var n;if(!D())return;if(!h)return;const i=l.find(e=>e.value===h);if(!i)return;const s=`${e}_${t}`,o=!(null===(n=f[e])||void 0===n||!n[t]);if("settings"===e&&"settings_view"===t&&!0===o){var a;const t=(null===(a=M.find(e=>"settings"===e.category))||void 0===a?void 0:a.permissions)||[],n={};t.forEach(e=>{n[e.id]=!1}),m(t=>({...t,[e]:{...t[e]||{},...n}}))}else if("subsections"===e&&"read"===t&&!0===o){var r;const t=(null===(r=M.find(e=>"subsections"===e.category))||void 0===r?void 0:r.permissions)||[],n={};t.forEach(e=>{n[e.id]=!1}),m(t=>({...t,[e]:{...t[e]||{},...n}}))}else if("users"===e&&"read"===t&&!0===o){var c;const t=(null===(c=M.find(e=>"users"===e.category))||void 0===c?void 0:c.permissions)||[],n={};t.forEach(e=>{n[e.id]=!1}),m(t=>({...t,[e]:{...t[e]||{},...n}}))}else if("reports"===e&&"view_reports"===t&&!0===o){var u;const t=(null===(u=M.find(e=>"reports"===e.category))||void 0===u?void 0:u.permissions)||[],n={};t.forEach(e=>{n[e.id]=!1}),m(t=>({...t,[e]:{...t[e]||{},...n}}))}else if("reports"===e&&"view_reports"!==t&&!0===!o){var p;if(null===(p=f[e])||void 0===p||!p.view_reports)return void alert('Cannot enable report permissions without "View Reports" permission. Please enable "View Reports" first.');m(n=>({...n,[e]:{...n[e],[t]:!o}}))}else if("role_management"===e&&"view_roles"===t&&!0===o){var g;const t=(null===(g=M.find(e=>"role_management"===e.category))||void 0===g?void 0:g.permissions)||[],n={};t.forEach(e=>{n[e.id]=!1}),m(t=>({...t,[e]:{...t[e]||{},...n}}))}else if("role_management"===e&&"view_roles"!==t&&!0===!o){var v;if(null===(v=f[e])||void 0===v||!v.view_roles)return void alert('Cannot enable role-management permissions without "View Roles" permission. Please enable "View Roles" first.');m(n=>({...n,[e]:{...n[e],[t]:!o}}))}else m(n=>({...n,[e]:{...n[e],[t]:!o}}));C(e=>({...e,[s]:!0}));try{const n=localStorage.getItem("token"),s={...i.permissions||{}};if(s[e]={...s[e]||{}},"settings"===e&&"settings_view"===t&&!0===o){var x;const t=(null===(x=M.find(e=>"settings"===e.category))||void 0===x?void 0:x.permissions)||[];s[e]=s[e]||{},t.forEach(t=>{s[e][t.id]=!1})}else if("subsections"===e&&"read"===t&&!0===o){var b;const t=(null===(b=M.find(e=>"subsections"===e.category))||void 0===b?void 0:b.permissions)||[];s[e]=s[e]||{},t.forEach(t=>{s[e][t.id]=!1})}else if("users"===e&&"read"===t&&!0===o){var y;const t=(null===(y=M.find(e=>"users"===e.category))||void 0===y?void 0:y.permissions)||[];s[e]=s[e]||{},t.forEach(t=>{s[e][t.id]=!1})}else if("reports"===e&&"view_reports"===t&&!0===o){var S;const t=(null===(S=M.find(e=>"reports"===e.category))||void 0===S?void 0:S.permissions)||[];s[e]=s[e]||{},t.forEach(t=>{s[e][t.id]=!1})}else if("role_management"===e&&"view_roles"===t&&!0===o){var j;const t=(null===(j=M.find(e=>"role_management"===e.category))||void 0===j?void 0:j.permissions)||[];s[e]=s[e]||{},t.forEach(t=>{s[e][t.id]=!1})}else s[e][t]=!o;const a=await fetch(`http://localhost:5000/api/permissions/roles/${i._id}`,{method:"PUT",headers:{"Content-Type":"application/json",...n?{Authorization:`Bearer ${n}`}:{}},body:JSON.stringify({permissions:s})});if(a.ok){const e=await a.json().catch(()=>({}));e&&e.data&&(d(t=>t.map(t=>t._id===i._id?e.data:t)),window.dispatchEvent(new CustomEvent("permissionsChanged")))}else m(n=>({...n,[e]:{...n[e],[t]:o}})),console.error("Failed to update permission toggle",await a.text())}catch(w){m(n=>({...n,[e]:{...n[e],[t]:o}})),console.error("Error updating permission toggle:",w)}finally{C(e=>{const t={...e};return delete t[s],t})}})(e.category,t.id),disabled:!D()||!!k[v]||"settings"===e.category&&"settings_view"!==t.id&&!(null!==f&&void 0!==f&&null!==(i=f.settings)&&void 0!==i&&i.settings_view)||"subsections"===e.category&&"read"!==t.id&&!(null!==f&&void 0!==f&&null!==(s=f.subsections)&&void 0!==s&&s.read)||"users"===e.category&&"read"!==t.id&&!(null!==f&&void 0!==f&&null!==(o=f.users)&&void 0!==o&&o.read)||"role_management"===e.category&&"view_roles"!==t.id&&!(null!==f&&void 0!==f&&null!==(a=f.role_management)&&void 0!==a&&a.view_roles),title:`${t.name} - ${z(t.id,e.category)}`+("settings"!==e.category||"settings_view"===t.id||null!==f&&void 0!==f&&null!==(r=f.settings)&&void 0!==r&&r.settings_view?"":' \u2014 Requires "View Settings" permission')+("subsections"!==e.category||"read"===t.id||null!==f&&void 0!==f&&null!==(c=f.subsections)&&void 0!==c&&c.read?"":' \u2014 Requires "View Sub-Sections" permission')+("users"!==e.category||"read"===t.id||null!==f&&void 0!==f&&null!==(u=f.users)&&void 0!==u&&u.read?"":' \u2014 Requires "View Users" permission')+("role_management"!==e.category||"view_roles"===t.id||null!==f&&void 0!==f&&null!==(p=f.role_management)&&void 0!==p&&p.view_roles?"":' \u2014 Requires "View Roles" permission')}),(0,_e.jsx)("span",{className:"slider"})]}),(0,_e.jsxs)("div",{className:"permission-info",children:[(0,_e.jsx)("span",{className:"permission-name",children:t.name}),k[v]&&(0,_e.jsx)("span",{className:"save-indicator ml-2",title:"Saving...",children:"\ud83d\udd04"}),(0,_e.jsx)("span",{className:"permission-desc",children:z(t.id,e.category)})]})]},`${e.category}_${t.id}`)})})]},e.category))}),(0,_e.jsxs)("div",{className:"permissions-footer",children:[(0,_e.jsxs)("div",{className:"permission-summary",children:[(0,_e.jsxs)("div",{className:"summary-stat",children:[(0,_e.jsx)("span",{className:"stat-number",children:O()}),(0,_e.jsx)("span",{className:"stat-label",children:"permissions granted"})]}),(0,_e.jsxs)("div",{className:"summary-stat",children:[(0,_e.jsx)("span",{className:"stat-number",children:R()-O()}),(0,_e.jsx)("span",{className:"stat-label",children:"permissions restricted"})]})]}),(0,_e.jsxs)("button",{className:"btn-save-permissions",onClick:e=>{e.preventDefault(),b(!0)},disabled:!D()||E,children:[(0,_e.jsx)("i",{className:"bi bi-shield-check"}),E?"Applying...":"Save Permission Changes"]})]})]})]}):(0,_e.jsxs)("div",{className:"alert alert-warning mt-4",children:[(0,_e.jsx)("i",{className:"bi bi-lock-fill mr-2"}),'You do not have permission to view role access management. Contact a Super Admin for "roles.read" access.']}),x&&(0,_e.jsx)("div",{className:"modal-overlay confirm-overlay",onClick:()=>b(!1),children:(0,_e.jsxs)("div",{className:"modal-content confirm-modal",onClick:e=>e.stopPropagation(),children:[(0,_e.jsx)("div",{className:"modal-header",children:(0,_e.jsx)("h4",{className:"confirm-title",children:"Confirm Save"})}),(0,_e.jsx)("div",{className:"modal-body",children:(0,_e.jsxs)("p",{children:["Are you sure you want to save these permission changes for ",(0,_e.jsx)("strong",{children:(null===(n=l.find(e=>e.value===h))||void 0===n?void 0:n.label)||h}),"?"]})}),(0,_e.jsxs)("div",{className:"modal-footer",children:[(0,_e.jsx)("button",{className:"btn-save-modern btn-secondary btn-confirm-cancel",onClick:()=>b(!1),children:"Cancel"}),(0,_e.jsx)("button",{className:"btn-save-modern btn-success btn-confirm-confirm",onClick:async()=>{await(async()=>{b(!1);const e=l.find(e=>e.value===h);if(e)try{const t=localStorage.getItem("token"),n={...e.permissions||{}};Object.keys(f).forEach(e=>{n[e]={...n[e],...f[e]}}),await fetch(`http://localhost:5000/api/permissions/roles/${e._id}`,{method:"PUT",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify({permissions:n})}),await A(),window.dispatchEvent(new CustomEvent("permissionsChanged")),v(!0)}catch(t){console.error("Error saving permissions:",t);try{await A()}catch(n){console.error("Error refreshing roles after failed save:",n)}}})()},children:"Yes, Save"})]})]})}),g&&(0,_e.jsx)("div",{className:"modal-overlay",style:{backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9999},children:(0,_e.jsx)("div",{className:"modal-content success-modal-content",onClick:e=>e.stopPropagation(),style:{maxWidth:"400px",textAlign:"center",border:"3px solid #2575fc",borderRadius:"15px",background:"linear-gradient(135deg, #f8f9fa, #e9ecef)",boxShadow:"0 10px 30px rgba(37,117,252,0.15)"},children:(0,_e.jsxs)("div",{style:{padding:"30px"},children:[(0,_e.jsx)("div",{style:{fontSize:"48px",color:"#2575fc",marginBottom:"18px"},children:(0,_e.jsx)("i",{className:"bi bi-check-circle-fill"})}),(0,_e.jsx)("h2",{style:{color:"#2575fc",marginBottom:"12px",fontWeight:"bold"},children:"Success!"}),(0,_e.jsxs)("p",{style:{fontSize:"15px",color:"#495057",marginBottom:"18px",lineHeight:"1.5"},children:["Permissions updated for ",(0,_e.jsx)("strong",{children:(null===(s=l.find(e=>e.value===h))||void 0===s?void 0:s.label)||h}),"."]}),(0,_e.jsxs)("button",{className:"btn-save-modern btn-success",onClick:()=>v(!1),style:{padding:"8px 24px",fontSize:"15px",fontWeight:"bold"},children:[(0,_e.jsx)("i",{className:"bi bi-check2"})," OK"]})]})})})]})},Xc=()=>{const[e,t]=(0,i.useState)([]),[n,s]=(0,i.useState)([]),[o,a]=(0,i.useState)([]),[r,l]=(0,i.useState)(!1),[d,c]=(0,i.useState)("divisions"),[u,h]=(0,i.useState)(null),[p,f]=(0,i.useState)([]),[m,g]=(0,i.useState)("all"),[v,x]=(0,i.useState)([]),[b,y]=(0,i.useState)("all"),[S,j]=(0,i.useState)("all"),[w,_]=(0,i.useState)([]),[N,k]=(0,i.useState)(!1),[C,E]=(0,i.useState)(!1),[I,D]=(0,i.useState)(!1),[A,T]=(0,i.useState)(()=>{const e=new Date;return e.setDate(e.getDate()-7),se(e)}),[M,R]=(0,i.useState)(()=>se(new Date)),[O,P]=(0,i.useState)("last7"),[L,z]=(0,i.useState)(!1),[F,B]=(0,i.useState)(null),[$,U]=(0,i.useState)([]),[W,H]=(0,i.useState)(null),[V,q]=(0,i.useState)(null),[Y,G]=(0,i.useState)("all"),[J,K]=(0,i.useState)("all"),[Q,X]=(0,i.useState)([]),[Z,ee]=(0,i.useState)([]),[te,ne]=(0,i.useState)([]),ie={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000/api";function se(e){const t=e=>String(e).padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}`}const oe=e=>{if(!e)return"";try{if("string"===typeof e){const t=Number(e);if(!Number.isNaN(t)&&""!==e.trim()){const e=new Date(t);return Number.isNaN(e)?"":se(e)}const n=new Date(e);return Number.isNaN(n)?"":se(n)}if("number"===typeof e){const t=new Date(e);return Number.isNaN(t)?"":se(t)}if("object"===typeof e){if(e.$date){const t=e.$date;if("object"===typeof t&&t.$numberLong){const e=new Date(Number(t.$numberLong));return Number.isNaN(e)?"":se(e)}if("string"===typeof t||"number"===typeof t){const e=new Date(t);return Number.isNaN(e)?"":se(e)}}if(e.$numberLong){const t=new Date(Number(e.$numberLong));return Number.isNaN(t)?"":se(t)}}}catch(t){return""}return""},ae=e=>"string"===typeof e&&e.toLowerCase().includes("colombo"),re=e=>{var t;return!!e&&(ae(e.DIVISION_NAME)||ae(e.HIE_NAME_3)||ae(null===e||void 0===e||null===(t=e.currentwork)||void 0===t?void 0:t.HIE_NAME_3)||ae(null===e||void 0===e?void 0:e.division_name)||ae(null===e||void 0===e?void 0:e.divisionName))},le=e=>ae(e.divisionHierarchyName)||ae(e.divisionName),de=e=>e&&"string"===typeof e?e.replace(/\s+/g," ").trim().toLowerCase():"",ce=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[],n=new Set;return e.forEach(e=>{var i,s,o,a,r,l,d,c,u,h,p,f,m,g,v,x,b,y;const S=String(null!==(i=null!==(s=null!==(o=null!==(a=null!==(r=null!==(l=e._id)&&void 0!==l?l:e.id)&&void 0!==r?r:e.DIVISION_ID)&&void 0!==a?a:e.code)&&void 0!==o?o:e.hie_code)&&void 0!==s?s:e.DIVISION_CODE)&&void 0!==i?i:"");S&&(n.has(S)||(n.add(S),t.push({id:S,code:String(null!==(d=null!==(c=null!==(u=null!==(h=null!==(p=e.code)&&void 0!==p?p:e.DIVISION_CODE)&&void 0!==h?h:e.hie_code)&&void 0!==u?u:e._id)&&void 0!==c?c:e.id)&&void 0!==d?d:S),name:null!==(f=null!==(m=null!==(g=null!==(v=e.name)&&void 0!==v?v:e.DIVISION_NAME)&&void 0!==g?g:e.hie_name)&&void 0!==m?m:e.hie_relationship)&&void 0!==f?f:"Unknown Division",def_level:null!==(x=e.def_level)&&void 0!==x?x:e.DEF_LEVEL,hie_relationship:e.hie_relationship,isActive:null===(b=null!==(y=e.isActive)&&void 0!==y?y:e.active)||void 0===b||b})))}),t.sort((e,t)=>e.name.localeCompare(t.name))},ue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[],n=new Set;return e.forEach(e=>{var i,s,o,a,r,l,d,c,u,h,p,f,m,g,v,x,b,y,S,j,w,_,N,k,C,E,I;const D=String(null!==(i=null!==(s=null!==(o=null!==(a=null!==(r=null!==(l=null!==(d=e._id)&&void 0!==d?d:e.id)&&void 0!==l?l:e.SECTION_ID)&&void 0!==r?r:e.code)&&void 0!==a?a:e.hie_code)&&void 0!==o?o:e.SECTION_CODE)&&void 0!==s?s:e.section_code)&&void 0!==i?i:"");if(!D)return;if(n.has(D))return;n.add(D);const A=String(null!==(c=null!==(u=null!==(h=null!==(p=null!==(f=e.division_id)&&void 0!==f?f:e.DIVISION_ID)&&void 0!==p?p:e.division_code)&&void 0!==h?h:e.DIVISION_CODE)&&void 0!==u?u:e.hie_relationship)&&void 0!==c?c:"");t.push({id:D,code:String(null!==(m=null!==(g=null!==(v=null!==(x=e.code)&&void 0!==x?x:e.SECTION_CODE)&&void 0!==v?v:e.hie_code)&&void 0!==g?g:e.section_code)&&void 0!==m?m:D),name:null!==(b=null!==(y=null!==(S=null!==(j=e.name)&&void 0!==j?j:e.section_name)&&void 0!==S?S:e.SECTION_NAME)&&void 0!==y?y:e.hie_relationship)&&void 0!==b?b:`Section ${D}`,divisionId:A||"",divisionCode:String(null!==(w=null!==(_=e.division_code)&&void 0!==_?_:e.DIVISION_CODE)&&void 0!==w?w:""),divisionName:null!==(N=null!==(k=e.division_name)&&void 0!==k?k:e.DIVISION_NAME)&&void 0!==N?N:"",def_level:null!==(C=e.def_level)&&void 0!==C?C:e.DEF_LEVEL,isActive:null===(E=null!==(I=e.isActive)&&void 0!==I?I:e.active)||void 0===E||E})}),t.sort((e,t)=>e.name.localeCompare(t.name))},he=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[],n=new Set;return e.forEach(e=>{var i,s,o,a,r,l,d,c,u,h,p,f,m,g,v,x,b,y,S,j,w,_,N,k,C,E,I,D,A,T,M,R,O,P,L,z,F,B,$,U,W,H,V,q,Y,G,J,K,Q;const X=String(null!==(i=null!==(s=null!==(o=e.EMP_NUMBER)&&void 0!==o?o:e.empNumber)&&void 0!==s?s:e.id)&&void 0!==i?i:"");if(!X)return;if(n.has(X))return;n.add(X);const Z=null!==(a=null!==(r=null!==(l=e.HIE_NAME_3)&&void 0!==l?l:e.hie_name_3)&&void 0!==r?r:null===e||void 0===e||null===(d=e.currentwork)||void 0===d?void 0:d.HIE_NAME_3)&&void 0!==a?a:null===e||void 0===e||null===(c=e.currentwork)||void 0===c?void 0:c.hie_name_3,ee=null!==(u=null!==(h=null!==(p=e.HIE_NAME_4)&&void 0!==p?p:e.hie_name_4)&&void 0!==h?h:null===e||void 0===e||null===(f=e.currentwork)||void 0===f?void 0:f.HIE_NAME_4)&&void 0!==u?u:null===e||void 0===e||null===(m=e.currentwork)||void 0===m?void 0:m.hie_name_4;t.push({empNumber:X,fullName:null!==(g=null!==(v=null!==(x=e.FULLNAME)&&void 0!==x?x:e.fullName)&&void 0!==v?v:e.name)&&void 0!==g?g:"Unknown",callingName:null!==(b=null!==(y=null!==(S=e.CALLING_NAME)&&void 0!==S?S:e.calling_name)&&void 0!==y?y:e.preferredName)&&void 0!==b?b:"",designation:null!==(j=null!==(w=e.DESIGNATION)&&void 0!==w?w:e.designation)&&void 0!==j?j:"",nic:String(null!==(_=null!==(N=e.NIC)&&void 0!==N?N:e.nic)&&void 0!==_?_:""),divisionId:String(null!==(k=null!==(C=null!==(E=null!==(I=e.DIVISION_ID)&&void 0!==I?I:e.division_id)&&void 0!==E?E:e.DIVISION_CODE)&&void 0!==C?C:e.division_code)&&void 0!==k?k:""),divisionCode:String(null!==(D=null!==(A=e.DIVISION_CODE)&&void 0!==A?A:e.division_code)&&void 0!==D?D:""),divisionName:null!==(T=null!==(M=null!==(R=e.DIVISION_NAME)&&void 0!==R?R:e.division_name)&&void 0!==M?M:Z)&&void 0!==T?T:"",sectionId:String(null!==(O=null!==(P=null!==(L=null!==(z=e.SECTION_ID)&&void 0!==z?z:e.section_id)&&void 0!==L?L:e.SECTION_CODE)&&void 0!==P?P:e.section_code)&&void 0!==O?O:""),sectionCode:String(null!==(F=null!==(B=e.SECTION_CODE)&&void 0!==B?B:e.section_code)&&void 0!==F?F:""),sectionName:null!==($=null!==(U=null!==(W=e.SECTION_NAME)&&void 0!==W?W:e.section_name)&&void 0!==U?U:ee)&&void 0!==$?$:"",gender:null!==(H=null!==(V=e.GENDER)&&void 0!==V?V:e.gender)&&void 0!==H?H:"",status:null!==(q=null!==(Y=e.STATUS)&&void 0!==Y?Y:e.status)&&void 0!==q?q:"ACTIVE",dateOfBirth:oe(null!==(G=null!==(J=e.DATE_OF_BIRTH)&&void 0!==J?J:e.date_of_birth)&&void 0!==G?G:e.dob),dateOfJoining:oe(null!==(K=null!==(Q=e.DATE_OF_JOINING)&&void 0!==Q?Q:e.date_of_joining)&&void 0!==K?K:e.doj),divisionHierarchyName:null!==Z&&void 0!==Z?Z:"",sectionHierarchyName:null!==ee&&void 0!==ee?ee:""})}),t},pe=()=>{const t=new Map,n=new Map,i=new Map;return e.forEach(e=>{e.code&&t.set(String(e.code),String(e.id)),e.name&&n.set(String(e.name),String(e.id)),i.set(String(e.id),e.name)}),{codeToId:t,nameToId:n,idToName:i}},fe=e=>e.divisionHierarchyName||e.divisionName||String(e.divisionId||e.divisionCode||"Unknown Division"),me=(e,t)=>{var n,i,s;const o=String(e.divisionId||"");if(o&&null!==t&&void 0!==t&&null!==(n=t.idToName)&&void 0!==n&&n.has(o))return`id:${o}`;const a=String(e.divisionCode||"");if(a&&null!==t&&void 0!==t&&null!==(i=t.codeToId)&&void 0!==i&&i.has(a))return`id:${t.codeToId.get(a)}`;const r=fe(e);return r&&null!==t&&void 0!==t&&null!==(s=t.nameToId)&&void 0!==s&&s.has(r)?`id:${t.nameToId.get(r)}`:`name:${r}`},ge=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;if(!t.length)return void s([]);if("all"===e)return void s(t);const n=t.filter(t=>String(t.divisionId)===String(e));s(n)},ve=async()=>{try{l(!0),h(null);const e=await Qd.get(`${ie}/divisions/hris`);if(e.data.success){const n=e.data.data||[];X(n);const i=ce(n);t(i),e.data.fallback&&h(`\u26a0\ufe0f ${e.data.message}`)}else h("Failed to fetch divisions from HRIS API")}catch(u){var e;console.error("Error fetching divisions:",u),h(`Failed to fetch divisions: ${(null===(e=u.response)||void 0===e?void 0:e.status)||500}`)}finally{l(!1)}},xe=async()=>{try{l(!0),h(null);const e=await Qd.get(`${ie}/sections/hris`);if(e.data.success){const t=e.data.data||[];ee(t);const n=ue(t);f(n),ge(m,n),e.data.fallback&&h(`\u26a0\ufe0f ${e.data.message}`)}else h("Failed to fetch sections from HRIS API")}catch(u){var e;console.error("Error fetching sections:",u),h(`Failed to fetch sections: ${(null===(e=u.response)||void 0===e?void 0:e.status)||500}`)}finally{l(!1)}},be=async()=>{try{l(!0),h(null);const e=[Qd.get(`${ie}/users/hris`),Qd.get(`${ie}/sections/hris`),Qd.get(`${ie}/divisions/hris`)],[n,i,s]=await Promise.all(e);if(s.data.success){const e=s.data.data||[];X(e);const n=ce(e);t(n),s.data.fallback&&h(`\u26a0\ufe0f ${s.data.message}`)}else h("Failed to fetch divisions from HRIS API");if(i.data.success){const e=i.data.data||[];ee(e);const t=ue(e);f(t),ge(m,t),i.data.fallback&&h(e=>null!==e&&void 0!==e?e:`\u26a0\ufe0f ${i.data.message}`)}else h("Failed to fetch sections from HRIS API");if(n.data.success){const e=(n.data.data||[]).filter(re);ne(e);const t=he(e);x(t),a(t),n.data.fallback&&h(e=>null!==e&&void 0!==e?e:`\u26a0\ufe0f ${n.data.message}`)}else h("Failed to fetch employees from HRIS API")}catch(u){var e;console.error("Error fetching data:",u),h(`Failed to fetch data: ${(null===(e=u.response)||void 0===e?void 0:e.status)||500}`)}finally{l(!1)}};(0,i.useEffect)(()=>{"divisions"===d?ve():"sections"===d?xe():"employees"!==d&&"individual-attendance"!==d||be()},[d]);const ye=e=>{const t=e.target.value;g(t),ge(t)},Se=()=>e,je=()=>{const t=pe();if(e&&e.length){const n=new Map;v.forEach(e=>{const i=me(e,t);n.set(i,(n.get(i)||0)+1)});const i=e.map(e=>{const t=`id:${String(e.id)}`;return{key:t,name:e.name,count:n.get(t)||0}}),s=[],o=new Set(i.map(e=>e.key));return v.forEach(e=>{const n=me(e,t);if(o.has(n)){const e=s.find(e=>e.key===n);e&&(e.count+=1)}else o.add(n),s.push({key:n,name:fe(e),count:1})}),[...i,...s].sort((e,t)=>e.name.localeCompare(t.name))}const n=new Map;return v.forEach(e=>{const i=me(e,t),s=fe(e),o=n.get(i);o?o.count+=1:n.set(i,{key:i,name:s,count:1})}),Array.from(n.values()).sort((e,t)=>e.name.localeCompare(t.name))},we=e=>{if("all"===e)return[];const t=pe();if(e.startsWith("id:")){const t=e.slice(3),n=p.filter(e=>String(e.divisionId)===String(t)).map(e=>({id:e.id,code:e.code,name:e.name}));if(n.length){const e=new Set,t=[];return n.forEach(n=>{e.has(n.id)||(e.add(n.id),t.push(n))}),t.sort((e,t)=>e.name.localeCompare(t.name))}}const n=[],i=new Set;return v.filter(n=>me(n,t)===String(e)).forEach(e=>{const t=e.sectionId||e.sectionCode,s=e.sectionHierarchyName||e.sectionName||String(t),o=String(t||"");o&&!i.has(o)&&(i.add(o),n.push({id:o,code:o,name:s}))}),n.sort((e,t)=>e.name.localeCompare(t.name))};(0,i.useEffect)(()=>{const e=new Date;let t=new Date,n=new Date;switch(O){case"last7":t=new Date,t.setDate(e.getDate()-7),n=e;break;case"last30":t=new Date,t.setDate(e.getDate()-30),n=e;break;case"thisMonth":t=new Date(e.getFullYear(),e.getMonth(),1),n=e;break;default:return}T(se(t)),R(se(n))},[O]);const Ne=e=>{const t=e.target.value;y(t),j("all")},ke=e=>{const t=e.target.value;j(t)};(0,i.useEffect)(()=>{if("all"===b)return void _([]);const e=we(b);_(e)},[b,p,v]);const Ce=(0,i.useRef)(!1),Ee=(0,i.useRef)(!1);(0,i.useEffect)(()=>{if("all"!==b)return;if(!e||!e.length)return;if(Ce.current)return;const t=e.find(e=>{const t=String(e.code||"").toLowerCase(),n=String(e.name||"").toLowerCase();return"is"===t||n.includes("information systems")||n.includes("information system")});t&&(y(`id:${String(t.id)}`),Ce.current=!0,Ee.current=!1)},[e,b]),(0,i.useEffect)(()=>{if("all"!==S)return;if(!w||!w.length)return;if(Ee.current)return;const e=w.find(e=>{const t=String(e.code||"").toLowerCase(),n=String(e.name||"").toLowerCase();return"is"===t||n.includes("(is)")||n.includes("information systems")||n.includes("information system")});e&&(j(String(e.id)),Ee.current=!0)},[w,S]),(0,i.useEffect)(()=>{let e=v;if("all"!==b){const t=pe();e=e.filter(e=>me(e,t)===String(b))}if("all"!==S){const t=w.find(e=>String(e.id)===String(S)),n=de((null===t||void 0===t?void 0:t.name)||"");e=e.filter(e=>{if(String(e.sectionId||e.sectionCode)===String(S))return!0;const t=de((i=e).sectionHierarchyName||i.sectionName||String(i.sectionId||i.sectionCode||""));var i;return n&&t===n})}e=e.filter(le),a(e)},[v,b,S]);const Ie=async e=>{try{z(!0),B(null),U([]),H(null),q(e);const n={report_type:"individual",employee_id:e,from_date:A,to_date:M},i=await Qd.post(`${ie}/reports/mysql/attendance`,n);var t;if(i.data&&i.data.success)U(i.data.data||[]),H(i.data.summary||null);else B((null===(t=i.data)||void 0===t?void 0:t.message)||"Failed to fetch attendance")}catch(u){var n,i;console.error("Error fetching attendance:",u),B((null===(n=u.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||u.message||"Error fetching attendance")}finally{z(!1)}};return(0,_e.jsxs)("div",{className:"api-data-viewer",children:[(0,_e.jsxs)("div",{className:"api-header",children:[(0,_e.jsxs)("h2",{children:[(0,_e.jsx)("i",{className:"bi bi-cloud-download"}),"HRIS API Data Viewer"]}),(0,_e.jsxs)("button",{className:"btn btn-outline-primary refresh-btn",onClick:()=>{"divisions"===d?ve():"sections"===d?(xe(),g("all")):"employees"===d?(be(),y("all"),j("all"),_([])):"individual-attendance"===d&&(be(),G("all"),K("all"),q(null),P("last7")),k(!1),E(!1),D(!1)},disabled:r,children:[(0,_e.jsx)("i",{className:"bi bi-arrow-clockwise"}),"Refresh"]})]}),(0,_e.jsxs)("div",{className:"api-tabs",children:[(0,_e.jsxs)("button",{className:"tab-btn "+("divisions"===d?"active":""),onClick:()=>c("divisions"),children:[(0,_e.jsx)("i",{className:"bi bi-building"}),"Divisions"]}),(0,_e.jsxs)("button",{className:"tab-btn "+("sections"===d?"active":""),onClick:()=>c("sections"),children:[(0,_e.jsx)("i",{className:"bi bi-diagram-3"}),"Sections"]}),(0,_e.jsxs)("button",{className:"tab-btn "+("employees"===d?"active":""),onClick:()=>c("employees"),children:[(0,_e.jsx)("i",{className:"bi bi-people"}),"Employees"]}),(0,_e.jsxs)("button",{className:"tab-btn "+("individual-attendance"===d?"active":""),onClick:()=>{c("individual-attendance"),be()},children:[(0,_e.jsx)("i",{className:"bi bi-person-lines-fill"}),"Individual Attendance"]})]}),(0,_e.jsxs)("div",{className:"api-content",children:[u&&(0,_e.jsxs)("div",{className:"alert "+(u.includes("\u26a0\ufe0f")?"alert-warning":"alert-danger"),children:[(0,_e.jsx)("i",{className:"bi "+(u.includes("\u26a0\ufe0f")?"bi-exclamation-triangle":"bi-exclamation-circle")}),u]}),r?(0,_e.jsxs)("div",{className:"loading-container",children:[(0,_e.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,_e.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,_e.jsx)("p",{children:"Fetching data from HRIS API..."})]}):(0,_e.jsxs)(_e.Fragment,{children:["divisions"===d&&(0,_e.jsxs)("div",{className:"api-table-container",children:[(0,_e.jsx)("h3",{children:"HRIS Divisions (Level 3)"}),(0,_e.jsx)("div",{className:"mb-3",children:(0,_e.jsxs)("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>E(!C),children:[C?"Hide":"Show"," Division JSON"]})}),C&&(0,_e.jsx)("div",{className:"json-viewer",children:(0,_e.jsx)("pre",{children:JSON.stringify(e,null,2)})}),(0,_e.jsx)("div",{className:"table-responsive",children:(0,_e.jsxs)("table",{className:"table table-striped",children:[(0,_e.jsx)("thead",{children:(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("th",{children:"_ID"}),(0,_e.jsx)("th",{children:"NAME"}),(0,_e.jsx)("th",{children:"STATUS"}),(0,_e.jsx)("th",{children:"EMP COUNT"})]})}),(0,_e.jsx)("tbody",{children:(()=>{const e=new Map;return v.forEach(t=>{const n=t.divisionHierarchyName||t.divisionName||"",i=de(n);i&&e.set(i,(e.get(i)||0)+1)}),Q.map((t,n)=>{var i,s,o,a,r,l,d,c,u;const h=String(null!==(i=null!==(s=null!==(o=null===t||void 0===t?void 0:t._id)&&void 0!==o?o:null===t||void 0===t?void 0:t.id)&&void 0!==s?s:null===t||void 0===t?void 0:t.code)&&void 0!==i?i:n),p=null!==(a=null!==(r=null===t||void 0===t?void 0:t._id)&&void 0!==r?r:null===t||void 0===t?void 0:t.id)&&void 0!==a?a:"",f=null!==(l=null!==(d=null!==(c=null===t||void 0===t?void 0:t.name)&&void 0!==c?c:null===t||void 0===t?void 0:t.DIVISION_NAME)&&void 0!==d?d:null===t||void 0===t?void 0:t.hie_name)&&void 0!==l?l:"",m=null!==(u=null===t||void 0===t?void 0:t.status)&&void 0!==u?u:"boolean"===typeof(null===t||void 0===t?void 0:t.isActive)?t.isActive?"ACTIVE":"INACTIVE":"",g=e.get(de(String(f)))||0;return(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("td",{children:String(p)}),(0,_e.jsx)("td",{children:String(f)}),(0,_e.jsx)("td",{children:String(m)}),(0,_e.jsx)("td",{children:String(g)})]},h)})})()})]})})]}),"sections"===d&&(()=>{var e;return(0,_e.jsxs)("div",{className:"api-table-container",children:[(0,_e.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,_e.jsxs)("h3",{children:["HRIS Sections (Level 4)",(0,_e.jsxs)("span",{className:"badge bg-primary ms-2",children:[n.length,"all"!==m&&` of ${p.length}`]})]}),(0,_e.jsxs)("div",{className:"division-filter",children:[(0,_e.jsx)("label",{htmlFor:"division-select",className:"form-label me-2",children:"Filter by Division:"}),(0,_e.jsxs)("select",{id:"division-select",className:"form-select",value:m,onChange:ye,style:{width:"auto",display:"inline-block"},children:[(0,_e.jsxs)("option",{value:"all",children:["All Divisions (",p.length," sections)"]}),Se().map(e=>(0,_e.jsxs)("option",{value:e.id,children:[e.name," (",p.filter(t=>String(t.divisionId)===String(e.id)).length," sections)"]},e.id))]})]})]}),"all"!==m&&(0,_e.jsxs)("div",{className:"alert alert-info mb-3",children:[(0,_e.jsx)("i",{className:"bi bi-filter"}),"Showing sections from: ",(0,_e.jsx)("strong",{children:(null===(e=Se().find(e=>String(e.id)===String(m)))||void 0===e?void 0:e.name)||m}),(0,_e.jsxs)("span",{className:"ms-2",children:["(",n.length," of ",p.length," sections)"]})]}),(0,_e.jsx)("div",{className:"mb-3",children:(0,_e.jsxs)("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>D(!I),children:[I?"Hide":"Show"," Section JSON"]})}),I&&(0,_e.jsx)("div",{className:"json-viewer",children:(()=>{const e="all"===m?Z:Z.filter(e=>String((e=>{var t,n,i,s,o,a,r,l,d,c,u,h;return{id:String(null!==(t=null!==(n=null!==(i=null!==(s=null!==(o=null!==(a=null!==(r=null===e||void 0===e?void 0:e._id)&&void 0!==r?r:null===e||void 0===e?void 0:e.id)&&void 0!==a?a:null===e||void 0===e?void 0:e.SECTION_ID)&&void 0!==o?o:null===e||void 0===e?void 0:e.code)&&void 0!==s?s:null===e||void 0===e?void 0:e.hie_code)&&void 0!==i?i:null===e||void 0===e?void 0:e.SECTION_CODE)&&void 0!==n?n:null===e||void 0===e?void 0:e.section_code)&&void 0!==t?t:""),divisionId:String(null!==(l=null!==(d=null!==(c=null!==(u=null!==(h=null===e||void 0===e?void 0:e.division_id)&&void 0!==h?h:null===e||void 0===e?void 0:e.DIVISION_ID)&&void 0!==u?u:null===e||void 0===e?void 0:e.division_code)&&void 0!==c?c:null===e||void 0===e?void 0:e.DIVISION_CODE)&&void 0!==d?d:null===e||void 0===e?void 0:e.hie_relationship)&&void 0!==l?l:"")}})(e).divisionId)===String(m));return(0,_e.jsx)("pre",{children:JSON.stringify(e,null,2)})})()}),(0,_e.jsx)("div",{className:"table-responsive",children:(0,_e.jsxs)("table",{className:"table table-striped",children:[(0,_e.jsx)("thead",{children:(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("th",{children:"_ID"}),(0,_e.jsx)("th",{children:"NAME"}),(0,_e.jsx)("th",{children:"DIVISION CODE"}),(0,_e.jsx)("th",{children:"DIVISION NAME"}),(0,_e.jsx)("th",{children:"EMP COUNT"})]})}),(0,_e.jsx)("tbody",{children:(()=>{const e=new Map;return v.forEach(t=>{const n=t.sectionId?String(t.sectionId):"",i=t.sectionCode?String(t.sectionCode):"",s=de(t.sectionHierarchyName||t.sectionName||"");n&&e.set(n,(e.get(n)||0)+1),i&&e.set(i,(e.get(i)||0)+1),s&&e.set(s,(e.get(s)||0)+1)}),n.map(t=>{const n=String(t.id||""),i=String(t.code||""),s=de(t.name||""),o=e.get(n)||e.get(i)||e.get(s)||0;return(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("td",{children:String(t.id||"")}),(0,_e.jsx)("td",{children:String(t.name||"")}),(0,_e.jsx)("td",{children:String(t.divisionCode||"")}),(0,_e.jsx)("td",{children:String(t.divisionName||"")}),(0,_e.jsx)("td",{children:String(o)})]},n||i||s)})})()})]})})]})})(),"employees"===d&&(()=>{var t,n,i;const s="all"!==b,a=pe(),r=s?v.filter(e=>me(e,a)===String(b)):[],l=new Map;r.forEach(e=>{const t=e.sectionId?String(e.sectionId):"",n=e.sectionCode?String(e.sectionCode):"",i=de(e.sectionHierarchyName||e.sectionName||"");t&&l.set(t,(l.get(t)||0)+1),n&&l.set(n,(l.get(n)||0)+1),i&&l.set(i,(l.get(i)||0)+1)});const d=new Map(e.map(e=>[String(e.id),e.name])),c=new Map(p.map(e=>[String(e.id),e.name]));return(0,_e.jsxs)("div",{className:"api-table-container",children:[(0,_e.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[(0,_e.jsxs)("h3",{children:["HRIS Employees",(0,_e.jsxs)("span",{className:"badge bg-primary ms-2",children:[o.length,(s||"all"!==S)&&v.length>0&&` of ${v.length}`]})]}),(0,_e.jsxs)("div",{className:"employee-filters d-flex gap-3",children:[(0,_e.jsxs)("div",{className:"division-filter",children:[(0,_e.jsx)("label",{htmlFor:"employee-division-select",className:"form-label me-2",children:"Division:"}),(0,_e.jsxs)("select",{id:"employee-division-select",className:"form-select",value:b,onChange:Ne,style:{width:"auto",minWidth:"200px"},children:[(0,_e.jsx)("option",{value:"all",children:"All Divisions"}),je().map(e=>(0,_e.jsx)("option",{value:e.key,children:e.name},e.key))]})]}),(0,_e.jsxs)("div",{className:"section-filter",children:[(0,_e.jsx)("label",{htmlFor:"employee-section-select",className:"form-label me-2",children:"Section:"}),(0,_e.jsx)("select",{id:"employee-section-select",className:"form-select",value:S,onChange:ke,style:{width:"auto",minWidth:"200px"},disabled:!s,children:s?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsxs)("option",{value:"all",children:["All Sections (",r.length," employees)"]}),w.length?w.map(e=>{const t=String(e.id||""),n=String(e.code||""),i=de(e.name||""),s=l.get(t)||l.get(n)||l.get(i)||0;return(0,_e.jsxs)("option",{value:e.id,children:[e.name," (",s," employees)"]},e.id)}):(0,_e.jsx)("option",{value:"__no_sections",disabled:!0,children:"No sections available"})]}):(0,_e.jsx)("option",{value:"all",children:"Select a division first"})})]})]})]}),(0,_e.jsxs)("div",{className:"mb-3 d-flex align-items-center gap-2",children:[(0,_e.jsx)("label",{className:"form-label mb-0",children:"From:"}),(0,_e.jsx)("input",{type:"date",className:"form-control",style:{width:"180px"},value:A,onChange:e=>T(e.target.value)}),(0,_e.jsx)("label",{className:"form-label mb-0",children:"To:"}),(0,_e.jsx)("input",{type:"date",className:"form-control",style:{width:"180px"},value:M,onChange:e=>R(e.target.value)}),(0,_e.jsx)("small",{className:"text-muted ms-2",children:'Click "View Attendance" on an employee row to load individual punches.'})]}),("all"!==b||"all"!==S)&&(0,_e.jsxs)("div",{className:"alert alert-info mb-3",children:[(0,_e.jsx)("i",{className:"bi bi-filter"}),"Showing employees from:","all"!==b&&(0,_e.jsx)("strong",{className:"ms-1",children:(null===(t=je().find(e=>String(e.key)===String(b)))||void 0===t?void 0:t.name)||b}),"all"!==S&&(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-arrow-right mx-2"}),(0,_e.jsx)("strong",{children:(null===(n=w.find(e=>String(e.id)===String(S)))||void 0===n?void 0:n.name)||S})]}),(0,_e.jsxs)("span",{className:"ms-2",children:["(",o.length," of ",v.length," employees)"]})]}),(0,_e.jsx)("div",{className:"mb-3",children:(0,_e.jsxs)("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>k(!N),children:[N?"Hide":"Show"," Employee JSON"]})}),N&&(0,_e.jsx)("div",{className:"json-viewer",children:(()=>{const e=w.find(e=>String(e.id)===String(S)),t=de((null===e||void 0===e?void 0:e.name)||""),n=te.filter(e=>{const n=(e=>{var t,n,i,s,o,a,r,l,d,c,u;return{empNumber:String(null!==(t=null!==(n=null!==(i=null===e||void 0===e?void 0:e.EMP_NUMBER)&&void 0!==i?i:null===e||void 0===e?void 0:e.empNumber)&&void 0!==n?n:null===e||void 0===e?void 0:e.id)&&void 0!==t?t:""),divisionId:String(null!==(s=null!==(o=null!==(a=null!==(r=null===e||void 0===e?void 0:e.DIVISION_ID)&&void 0!==r?r:null===e||void 0===e?void 0:e.division_id)&&void 0!==a?a:null===e||void 0===e?void 0:e.DIVISION_CODE)&&void 0!==o?o:null===e||void 0===e?void 0:e.division_code)&&void 0!==s?s:""),sectionId:String(null!==(l=null!==(d=null!==(c=null!==(u=null===e||void 0===e?void 0:e.SECTION_ID)&&void 0!==u?u:null===e||void 0===e?void 0:e.section_id)&&void 0!==c?c:null===e||void 0===e?void 0:e.SECTION_CODE)&&void 0!==d?d:null===e||void 0===e?void 0:e.section_code)&&void 0!==l?l:"")}})(e);if("all"!==b&&String(n.divisionId)!==String(b))return!1;if("all"!==S){var i;if(String(n.sectionId)===String(S))return!0;const s=e.HIE_NAME_4||e.SECTION_NAME||(null===e||void 0===e||null===(i=e.currentwork)||void 0===i?void 0:i.HIE_NAME_4)||"",o=de(s);return t&&o===t}return!0});return(0,_e.jsx)("pre",{children:JSON.stringify(n,null,2)})})()}),(0,_e.jsx)("div",{className:"table-responsive",children:(0,_e.jsxs)("table",{className:"table table-striped",children:[(0,_e.jsx)("thead",{children:(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("th",{children:"Employee ID"}),(0,_e.jsx)("th",{children:"Full Name"}),(0,_e.jsx)("th",{children:"Designation"}),(0,_e.jsx)("th",{children:"Gender"}),(0,_e.jsx)("th",{children:"NIC"}),(0,_e.jsx)("th",{children:"Division"}),(0,_e.jsx)("th",{children:"Section"}),(0,_e.jsx)("th",{children:"Actions"})]})}),(0,_e.jsx)("tbody",{children:o.map(e=>(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("td",{children:e.empNumber}),(0,_e.jsx)("td",{children:e.fullName}),(0,_e.jsx)("td",{children:e.designation}),(0,_e.jsx)("td",{children:e.gender}),(0,_e.jsx)("td",{children:e.nic}),(0,_e.jsx)("td",{children:e.divisionHierarchyName||e.divisionName||d.get(String(e.divisionId))||e.divisionCode||"-"}),(0,_e.jsx)("td",{children:e.sectionHierarchyName||e.sectionName||c.get(String(e.sectionId))||e.sectionCode||"-"}),(0,_e.jsx)("td",{children:(0,_e.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>Ie(e.empNumber),disabled:L,children:"View Attendance"})})]},e.empNumber))})]})}),V&&(0,_e.jsxs)("div",{className:"attendance-panel mt-4",children:[(0,_e.jsxs)("h5",{children:["Attendance for ",V," \xa0 ",(0,_e.jsxs)("small",{className:"text-muted",children:["(",A," to ",M,")"]})]}),L?(0,_e.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,_e.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):F?(0,_e.jsx)("div",{className:"alert alert-danger",children:F}):(0,_e.jsxs)(_e.Fragment,{children:[W&&(0,_e.jsxs)("div",{className:"mb-2",children:[(0,_e.jsx)("strong",{children:"Summary:"})," ",(null!==(i=W.total_records)&&void 0!==i?i:0===W.total_records)?` ${W.total_records} records`:""]}),(0,_e.jsx)("div",{className:"table-responsive",children:(0,_e.jsxs)("table",{className:"table table-sm table-bordered",children:[(0,_e.jsx)("thead",{children:(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("th",{children:"Date"}),(0,_e.jsx)("th",{children:"Time"}),(0,_e.jsx)("th",{children:"Scan Type"}),(0,_e.jsx)("th",{children:"Division"}),(0,_e.jsx)("th",{children:"Section"})]})}),(0,_e.jsx)("tbody",{children:$&&$.length?$.map(e=>(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("td",{children:e.date_}),(0,_e.jsx)("td",{children:e.time_}),(0,_e.jsx)("td",{children:e.scan_type}),(0,_e.jsx)("td",{children:e.division_name||e.divisionName||""}),(0,_e.jsx)("td",{children:e.section_name||e.sectionName||""})]},`${e.attendance_id||e.employee_ID}-${e.date_}-${e.time_}`)):(0,_e.jsx)("tr",{children:(0,_e.jsx)("td",{colSpan:5,className:"text-center",children:"No attendance records found for this period."})})})]})})]})]})]})})(),"individual-attendance"===d&&(()=>{var t;const n=e||[];return(0,_e.jsxs)("div",{className:"api-table-container",children:[(0,_e.jsx)("h3",{children:"Individual Attendance Report"}),(0,_e.jsxs)("div",{className:"mb-3 d-flex align-items-center gap-2 flex-wrap",children:[(0,_e.jsx)("label",{className:"form-label mb-0",children:"Division:"}),(0,_e.jsxs)("select",{className:"form-select",style:{width:"260px"},value:Y,onChange:e=>{G(e.target.value),K("all")},children:[(0,_e.jsx)("option",{value:"all",children:"All Divisions"}),n.map(e=>(0,_e.jsx)("option",{value:`id:${e.id}`,children:e.name},e.id))]}),(0,_e.jsx)("label",{className:"form-label mb-0",children:"Section:"}),(0,_e.jsx)("select",{className:"form-select",style:{width:"260px"},value:J,onChange:e=>K(e.target.value),disabled:"all"===Y,children:"all"===Y?(0,_e.jsx)("option",{value:"all",children:"Select a division first"}):(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("option",{value:"all",children:"All Sections"}),we(Y).map(e=>(0,_e.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,_e.jsx)("label",{className:"form-label mb-0",children:"Period:"}),(0,_e.jsxs)("select",{className:"form-select",style:{width:"180px"},value:O,onChange:e=>P(e.target.value),children:[(0,_e.jsx)("option",{value:"last7",children:"Last 7 days"}),(0,_e.jsx)("option",{value:"last30",children:"Last 30 days"}),(0,_e.jsx)("option",{value:"thisMonth",children:"This month"}),(0,_e.jsx)("option",{value:"custom",children:"Custom"})]}),(0,_e.jsx)("label",{className:"form-label mb-0",children:"From:"}),(0,_e.jsx)("input",{type:"date",className:"form-control",style:{width:"180px"},value:A,onChange:e=>{T(e.target.value),P("custom")}}),(0,_e.jsx)("label",{className:"form-label mb-0",children:"To:"}),(0,_e.jsx)("input",{type:"date",className:"form-control",style:{width:"180px"},value:M,onChange:e=>{R(e.target.value),P("custom")}}),(0,_e.jsx)("label",{className:"form-label mb-0",children:"Employee ID:"}),(0,_e.jsx)("input",{type:"text",className:"form-control",style:{width:"320px"},placeholder:"Enter employee ID",value:V||"",onChange:e=>q(e.target.value||null),onKeyDown:e=>{if("Enter"===e.key){if(!V)return void B("Please enter an employee ID");Ie(V)}}}),(0,_e.jsx)("button",{className:"btn btn-primary",onClick:()=>{V?Ie(V):B("Please select an employee")},disabled:L,children:L?"Loading...":"Load Report"})]}),F&&(0,_e.jsx)("div",{className:"alert alert-danger",children:F}),W&&(0,_e.jsxs)("div",{className:"mb-2",children:[(0,_e.jsx)("strong",{children:"Summary:"})," ",(null!==(t=W.total_records)&&void 0!==t?t:0===W.total_records)?` ${W.total_records} records`:""]}),(0,_e.jsx)("div",{className:"table-responsive",children:(0,_e.jsxs)("table",{className:"table table-sm table-bordered",children:[(0,_e.jsx)("thead",{children:(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("th",{children:"Date"}),(0,_e.jsx)("th",{children:"Time"}),(0,_e.jsx)("th",{children:"Scan Type"}),(0,_e.jsx)("th",{children:"Division"}),(0,_e.jsx)("th",{children:"Section"})]})}),(0,_e.jsx)("tbody",{children:$&&$.length?$.map(e=>(0,_e.jsxs)("tr",{children:[(0,_e.jsx)("td",{children:e.date_}),(0,_e.jsx)("td",{children:e.time_}),(0,_e.jsx)("td",{children:e.scan_type}),(0,_e.jsx)("td",{children:e.division_name||e.divisionName||""}),(0,_e.jsx)("td",{children:e.section_name||e.sectionName||""})]},`${e.attendance_id||e.employee_ID}-${e.date_}-${e.time_}`)):(0,_e.jsx)("tr",{children:(0,_e.jsx)("td",{colSpan:5,className:"text-center",children:"No attendance records loaded."})})})]})})]})})()]})]}),(0,_e.jsxs)("div",{className:"api-stats",children:[(0,_e.jsxs)("div",{className:"stat-card",children:[(0,_e.jsx)("div",{className:"stat-value",children:e.length}),(0,_e.jsx)("div",{className:"stat-label",children:"Divisions"})]}),(0,_e.jsxs)("div",{className:"stat-card",children:[(0,_e.jsxs)("div",{className:"stat-value",children:[n.length,"all"!==m&&p.length>0&&(0,_e.jsxs)("small",{style:{fontSize:"0.6em",display:"block"},children:["of ",p.length]})]}),(0,_e.jsx)("div",{className:"stat-label",children:"Sections"})]}),(0,_e.jsxs)("div",{className:"stat-card",children:[(0,_e.jsxs)("div",{className:"stat-value",children:[o.length,("all"!==b||"all"!==S)&&v.length>0&&(0,_e.jsxs)("small",{style:{fontSize:"0.6em",display:"block"},children:["of ",v.length]})]}),(0,_e.jsx)("div",{className:"stat-label",children:"Employees"})]})]})]})},Zc="The name displayed across the system.",eu="Select the timezone for attendance records.",tu="Set the official working hours for employees.",nu=()=>{const e=e=>e?"string"===typeof e?e:"object"===typeof e?e.city||e.street||e.address||e.line1||Object.values(e).find(e=>"string"===typeof e)||JSON.stringify(e):String(e):"",[t,n]=(0,i.useState)({systemName:"Time Attendance System",timezone:"Asia/Colombo",workingHours:{start:"09:00",end:"17:00"},emailNotifications:!0,autoLogout:30}),[s,o]=(0,i.useState)("general"),{lang:a,setLang:r,t:l}=Te(),{user:d,hasPermission:c}=(0,i.useContext)(Ne),u=e=>{var t;if(!d)return!1;if("super_admin"===d.role)return!0;if("function"===typeof c)return e.includes(".")?c(e):c(`settings.${e}`);const n=(null===(t=d.permissions)||void 0===t?void 0:t.settings)||{};return!0===n[e]||"true"===n[e]||!1};(0,i.useEffect)(()=>{const e=["profile","general","appearance","security"],t={profile:null,general:"settings_general",appearance:"settings_appearance",security:"settings_security"};if(t[s]&&!u(t[s])){const n=e.find(e=>!t[e]||u(t[e]));n&&o(n)}},[d,s]);const[h,p]=(0,i.useState)(()=>{try{return localStorage.getItem("appTheme")||"Light"}catch(cu){return"Light"}}),[f,m]=(0,i.useState)(""),[g,v]=(0,i.useState)(!0),[x,b]=(0,i.useState)("CSV"),[y,S]=(0,i.useState)(()=>{try{const e=localStorage.getItem("notificationEmails");return e?JSON.parse(e):[]}catch(cu){return[]}}),[j,w]=(0,i.useState)(""),[_,N]=(0,i.useState)(""),[k,C]=(0,i.useState)(!1),[E,I]=(0,i.useState)(!1),[D,A]=(0,i.useState)(null),[T,M]=(0,i.useState)(!1),[R,O]=(0,i.useState)(""),[P,L]=(0,i.useState)(""),[z,F]=(0,i.useState)(""),[B,$]=(0,i.useState)(""),U={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000/api",[W,H]=(0,i.useState)(""),[V,q]=(0,i.useState)(!1),[Y,G]=(0,i.useState)(!1),[J,K]=(0,i.useState)(""),[Q,X]=(0,i.useState)(""),[Z,ee]=(0,i.useState)(""),[te,ne]=(0,i.useState)(""),[ie,se]=(0,i.useState)(""),[oe,ae]=(0,i.useState)(!1),[re,le]=(0,i.useState)(!1),[de,ce]=(0,i.useState)(!1),[ue,he]=(0,i.useState)(""),[pe,fe]=(0,i.useState)(null),[me,ge]=(0,i.useState)(!1),[ve,xe]=(0,i.useState)(""),[be,ye]=(0,i.useState)(""),[Se,je]=(0,i.useState)(!1),[we,ke]=(0,i.useState)(""),[Ce,Ee]=(0,i.useState)(!1),[Ie,De]=(0,i.useState)(""),[Ae,Me]=(0,i.useState)(""),[Re,Oe]=(0,i.useState)(!1),[Pe,Le]=(0,i.useState)(null);(0,i.useEffect)(()=>{try{const e="Dark"===h?"dark":"light";document.documentElement.setAttribute("data-theme",e),localStorage.setItem("appTheme",h)}catch(cu){}},[h]),(0,i.useEffect)(()=>{try{localStorage.setItem("notificationEmails",JSON.stringify(y))}catch(cu){}},[y]),(0,i.useEffect)(()=>(document.body.style.overflow=de?"hidden":"",()=>{document.body.style.overflow=""}),[de]),(0,i.useEffect)(()=>{"profile"===s&&(async()=>{C(!0),A(null);try{const t=localStorage.getItem("token"),n=await fetch(`${U}/auth/me`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""},credentials:"include"});if(n.ok){const t=(await n.json()).data;O(t.firstName||""),L(t.lastName||""),F(t.phone||""),$(e(t.address))}else A("Failed to load profile")}catch(t){console.error("Load profile error",t),A("Failed to load profile")}finally{C(!1)}})()},[s]);return(0,_e.jsx)("div",{className:"settings-page container-fluid",style:{width:"100%",margin:"6px 0",padding:"12px 12px",boxSizing:"border-box"},children:(0,_e.jsxs)("div",{className:"row",children:[(0,_e.jsx)("div",{className:"col-12 col-md-3 col-lg-2 mb-4",children:(0,_e.jsxs)("div",{className:"list-group shadow-sm",style:{maxWidth:220},children:[d&&(0,_e.jsxs)("button",{className:"list-group-item list-group-item-action"+("profile"===s?" active":""),onClick:()=>o("profile"),children:[(0,_e.jsx)("i",{className:"bi bi-person me-2"})," ",l("profile")]}),u("settings_general")&&(0,_e.jsxs)("button",{className:"list-group-item list-group-item-action"+("general"===s?" active":""),onClick:()=>o("general"),children:[(0,_e.jsx)("i",{className:"bi bi-gear me-2"})," ",l("general")]}),u("settings_appearance")&&(0,_e.jsxs)("button",{className:"list-group-item list-group-item-action"+("appearance"===s?" active":""),onClick:()=>o("appearance"),children:[(0,_e.jsx)("i",{className:"bi bi-palette me-2"})," ",l("appearance")]}),u("settings_security")&&(0,_e.jsxs)("button",{className:"list-group-item list-group-item-action"+("security"===s?" active":""),onClick:()=>o("security"),children:[(0,_e.jsx)("i",{className:"bi bi-shield-lock me-2"})," ",l("security")]})]})}),(0,_e.jsxs)("div",{className:"col-12 col-md-9 col-lg-10",children:[(0,_e.jsx)("div",{className:"card shadow-sm mb-3",style:{width:"100%"},children:(0,_e.jsx)("div",{className:"card-body",style:{padding:"18px 22px"},children:(0,_e.jsxs)("h3",{className:"mb-0",children:[(0,_e.jsx)("i",{className:"bi bi-gear me-2"}),l("systemSettings")]})})}),"general"===s&&(0,_e.jsx)("div",{className:"card shadow-sm",style:{width:"100%"},children:(0,_e.jsxs)("div",{className:"card-body",style:{padding:"22px"},children:[(0,_e.jsx)("h5",{className:"fw-bold mb-4",children:l("general")}),(0,_e.jsxs)("div",{className:"mb-4",children:[(0,_e.jsxs)("label",{className:"form-label fw-bold",children:[l("systemName"),(0,_e.jsx)("span",{className:"ms-1 text-muted",title:Zc,children:(0,_e.jsx)("i",{className:"bi bi-info-circle"})})]}),(0,_e.jsx)("input",{type:"text",className:"form-control",value:t.systemName,onChange:e=>n({...t,systemName:e.target.value})}),(0,_e.jsx)("small",{className:"form-text text-muted",children:Zc})]}),(0,_e.jsxs)("div",{className:"mb-4",children:[(0,_e.jsxs)("label",{className:"form-label fw-bold",children:[l("timezone"),(0,_e.jsx)("span",{className:"ms-1 text-muted",title:eu,children:(0,_e.jsx)("i",{className:"bi bi-info-circle"})})]}),(0,_e.jsxs)("select",{className:"form-select",value:t.timezone,onChange:e=>n({...t,timezone:e.target.value}),children:[(0,_e.jsx)("option",{value:"Asia/Colombo",children:"Asia/Colombo"}),(0,_e.jsx)("option",{value:"UTC",children:"UTC"})]}),(0,_e.jsx)("small",{className:"form-text text-muted",children:eu})]}),(0,_e.jsxs)("div",{className:"mb-4 p-3 bg-light rounded",style:{background:"#fafbfc"},children:[(0,_e.jsxs)("h6",{className:"fw-bold mb-3",children:[(0,_e.jsx)("i",{className:"bi bi-clock me-2"}),l("workingHours"),(0,_e.jsx)("span",{className:"ms-1 text-muted",title:tu,children:(0,_e.jsx)("i",{className:"bi bi-info-circle"})})]}),(0,_e.jsxs)("div",{className:"row g-3",children:[(0,_e.jsxs)("div",{className:"col-12 col-sm-6",children:[(0,_e.jsx)("label",{className:"form-label",children:l("startTime")}),(0,_e.jsx)("input",{type:"time",className:"form-control",value:t.workingHours.start,onChange:e=>n({...t,workingHours:{...t.workingHours,start:e.target.value}})})]}),(0,_e.jsxs)("div",{className:"col-12 col-sm-6",children:[(0,_e.jsx)("label",{className:"form-label",children:l("endTime")}),(0,_e.jsx)("input",{type:"time",className:"form-control",value:t.workingHours.end,onChange:e=>n({...t,workingHours:{...t.workingHours,end:e.target.value}})})]})]}),(0,_e.jsx)("small",{className:"form-text text-muted",children:tu})]}),(0,_e.jsxs)("div",{className:"mb-4",children:[(0,_e.jsx)("label",{className:"form-label fw-bold",children:l("language")}),(0,_e.jsxs)("select",{className:"form-select",value:a,onChange:e=>r(e.target.value),children:[(0,_e.jsx)("option",{value:"en",children:"English"}),(0,_e.jsx)("option",{value:"si",children:"Sinhala"}),(0,_e.jsx)("option",{value:"ta",children:"Tamil"})]}),(0,_e.jsx)("small",{className:"form-text text-muted",children:"Select your preferred language."})]})]})}),"profile"===s&&(0,_e.jsx)("div",{className:"card shadow-sm",style:{width:"100%"},children:(0,_e.jsxs)("div",{className:"card-body",style:{padding:"22px"},children:[(0,_e.jsx)("h5",{className:"fw-bold mb-4",children:l("profile")}),k?(0,_e.jsx)("div",{className:"text-muted",children:l("loading")}):(0,_e.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),I(!0),A(null);try{const t=localStorage.getItem("token"),i=await fetch(`${U}/auth/profile`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""},credentials:"include",body:JSON.stringify({firstName:R,lastName:P,phone:z,address:B?{city:B}:""})}),s=await i.json();if(i.ok){A(s.message||"Profile updated"),M(!0),setTimeout(()=>M(!1),3e3);try{const t=s.data||null;t&&t.address&&$(e(t.address)),window.dispatchEvent(new CustomEvent("profileUpdated",{detail:t}))}catch(n){}}else A(s.message||"Failed to update profile"),M(!1)}catch(i){console.error("Update profile error",i),A("Failed to update profile"),M(!1)}finally{I(!1)}},children:[(0,_e.jsxs)("div",{className:"row g-3",children:[(0,_e.jsxs)("div",{className:"col-12 col-sm-6",children:[(0,_e.jsx)("label",{className:"form-label",children:l("firstName")}),(0,_e.jsx)("input",{className:"form-control",value:R,onChange:e=>O(e.target.value)})]}),(0,_e.jsxs)("div",{className:"col-12 col-sm-6",children:[(0,_e.jsx)("label",{className:"form-label",children:l("lastName")}),(0,_e.jsx)("input",{className:"form-control",value:P,onChange:e=>L(e.target.value)})]}),(0,_e.jsxs)("div",{className:"col-12 col-sm-6",children:[(0,_e.jsx)("label",{className:"form-label",children:"Phone"}),(0,_e.jsx)("input",{className:"form-control",value:z,onChange:e=>F(e.target.value)})]}),(0,_e.jsxs)("div",{className:"col-12",children:[(0,_e.jsx)("label",{className:"form-label",children:"Address"}),(0,_e.jsx)("input",{className:"form-control",value:B,onChange:e=>$(e.target.value)})]})]}),(0,_e.jsxs)("div",{className:"mt-3 d-flex gap-2",children:[(0,_e.jsx)("button",{className:"btn btn-primary",type:"submit",disabled:E,children:l(E?"loading":"saveChanges")}),(0,_e.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>{o("profile")},children:l("cancel")})]}),D&&(0,_e.jsx)("div",{className:"mt-3",style:{color:T?"var(--bs-success)":"var(--bs-danger)"},children:D})]})]})}),"appearance"===s&&(0,_e.jsx)("div",{className:"card shadow-sm",children:(0,_e.jsxs)("div",{className:"card-body",children:[(0,_e.jsx)("h5",{className:"fw-bold mb-4",children:l("appearance")}),(0,_e.jsxs)("div",{className:"mb-4",children:[(0,_e.jsx)("label",{className:"form-label fw-bold",children:l("theme")}),(0,_e.jsxs)("select",{className:"form-select",value:h,onChange:e=>p(e.target.value),children:[(0,_e.jsx)("option",{value:"Light",children:"Light"}),(0,_e.jsx)("option",{value:"Dark",children:"Dark"})]}),(0,_e.jsx)("small",{className:"form-text text-muted",children:"Choose your preferred theme."})]})]})}),"security"===s&&(0,_e.jsx)("div",{className:"card shadow-sm",children:(0,_e.jsxs)("div",{className:"card-body",children:[(0,_e.jsx)("h5",{className:"fw-bold mb-4",children:l("security")}),(0,_e.jsxs)("form",{onSubmit:e=>e.preventDefault(),children:[(0,_e.jsxs)("div",{className:"mb-3",children:[(0,_e.jsx)("label",{className:"form-label fw-bold",children:l("changePasswordTitle")}),(0,_e.jsxs)("div",{children:[(0,_e.jsx)("input",{type:"password",className:"form-control",placeholder:l("enterCurrentPasswordPlaceholder"),value:W,onChange:e=>{H(e.target.value),q(!1),se(""),K("")},onBlur:async()=>{if(W){G(!0),K("");try{const e=localStorage.getItem("token");(await fetch(`${U}/auth/verify-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""},credentials:"include",body:JSON.stringify({password:W})})).ok?(q(!0),X(l("passwordVerifiedSuccess")),setTimeout(()=>X(""),3e3)):(q(!1),K(l("verifyPasswordFailed")))}catch(e){console.error("Verify password error",e),q(!1),K(l("passwordChangeError"))}finally{G(!1)}}}}),(0,_e.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-2",children:[(0,_e.jsx)("small",{className:"form-text text-muted",children:Y?l("verifyingPassword"):""}),(0,_e.jsx)("button",{type:"button",className:"btn btn-link p-0",onClick:()=>ce(e=>!e),children:l("forgotPasswordText")})]}),J&&(0,_e.jsx)("div",{className:"mt-2 text-danger",children:J}),Q&&(0,_e.jsx)("div",{className:"mt-2 text-success",children:Q})]}),(0,_e.jsxs)("div",{className:"mt-3",children:[(0,_e.jsx)("label",{className:"form-label",children:l("enterNewPasswordLabel")}),(0,_e.jsx)("input",{type:"password",className:"form-control",value:Z,onChange:e=>ee(e.target.value),disabled:!V})]}),(0,_e.jsxs)("div",{className:"mt-3",children:[(0,_e.jsx)("label",{className:"form-label",children:l("confirmNewPasswordLabel")}),(0,_e.jsx)("input",{type:"password",className:"form-control",value:te,onChange:e=>ne(e.target.value),disabled:!V})]}),(0,_e.jsx)("div",{className:"mt-3",children:(0,_e.jsx)("button",{className:"btn btn-primary",type:"button",disabled:oe||!V,onClick:async()=>{if(se(""),Z===te)if(V){ae(!0);try{const e=localStorage.getItem("token"),t=await fetch(`${U}/auth/change-password`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""},credentials:"include",body:JSON.stringify({currentPassword:W,newPassword:Z,confirmPassword:te})}),n=await t.json();t.ok?(se(l("passwordChangedSuccess")),le(!0),H(""),ee(""),ne(""),q(!1),setTimeout(()=>le(!1),4e3)):(se(n.message||l("passwordChangeError")),le(!1))}catch(e){console.error("Change password error",e),se(l("passwordChangeError"))}finally{ae(!1)}}else se(l("verifyPasswordFailed"));else se(l("passwordMismatch"))},children:l(oe?"verifyingPassword":"changePasswordButton")})}),ie&&(0,_e.jsx)("div",{className:"mt-3",style:{color:re?"var(--bs-success)":"var(--bs-danger)"},children:ie})]}),de&&(0,_e.jsxs)("div",{className:"custom-modal-overlay",role:"dialog","aria-modal":"true",style:{zIndex:1080},children:[(0,_e.jsx)("div",{className:"custom-modal-backdrop",onClick:()=>ce(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.45)"}}),(0,_e.jsxs)("div",{className:"custom-modal-content",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:640,width:"95%",background:"#fff",borderRadius:8,boxShadow:"0 8px 24px rgba(0,0,0,0.2)",padding:20},children:[(0,_e.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,_e.jsx)("h5",{className:"mb-0",children:l("forgotPasswordText")}),(0,_e.jsx)("button",{className:"btn btn-sm btn-light",onClick:()=>ce(!1),children:"\xd7"})]}),(0,_e.jsx)("div",{className:"mb-2",children:(0,_e.jsx)("small",{className:"text-muted",children:l("forgotPasswordInstructions")})}),(0,_e.jsxs)("div",{className:"d-flex gap-2 align-items-start mb-3",children:[(0,_e.jsx)("input",{type:"email",className:"form-control",placeholder:"you@company.com",value:ue,onChange:e=>{he(e.target.value),fe(null)},style:{maxWidth:360}}),(0,_e.jsx)("button",{className:"btn btn-secondary",onClick:async()=>{fe(null),ye(""),ge(!1),Le(null);try{if(!ue)return void fe("Please enter an email");const e=await fetch(`${U}/auth/request-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:ue})}),t=await e.json();e.ok?(ge(!0),fe(t.message||l("resetEmailSentMsg")),t.otp&&fe(e=>e+` OTP: ${t.otp}`)):fe(t.message||l("resetEmailSentMsg"))}catch(e){console.error("Request OTP error",e),fe(l("passwordChangeError"))}},children:"Send"})]}),pe&&(0,_e.jsx)("div",{className:"mb-2 text-muted",children:pe}),me&&(0,_e.jsxs)("div",{className:"mb-3 p-3 bg-light border rounded",children:[(0,_e.jsx)("label",{className:"form-label fw-bold",children:"Enter OTP"}),(0,_e.jsxs)("div",{className:"d-flex gap-2",children:[(0,_e.jsx)("input",{type:"text",className:"form-control",placeholder:"6-digit OTP",value:ve,onChange:e=>{xe(e.target.value),ye("")},style:{maxWidth:220}}),(0,_e.jsx)("button",{className:"btn btn-primary",onClick:async()=>{ye(""),je(!0);try{const e=await fetch(`${U}/auth/verify-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:ue,otp:ve})}),t=await e.json();e.ok?t.resetToken?(ke(t.resetToken),Ee(!0),Le("OTP verified. You can now set a new password.")):Le(t.message||"OTP verified. Check your email for reset link."):ye(t.message||"Invalid OTP")}catch(e){console.error("Verify OTP error",e),ye("Failed to verify OTP")}finally{je(!1)}},children:Se?l("verifyingPassword"):"Verify OTP"})]}),be&&(0,_e.jsx)("div",{className:"mt-2 text-danger",children:be}),Pe&&(0,_e.jsx)("div",{className:"mt-2 text-success",children:Pe})]}),Ce&&(0,_e.jsxs)("div",{className:"mb-0 p-3 bg-white border rounded",children:[(0,_e.jsx)("label",{className:"form-label fw-bold",children:"Reset Password"}),(0,_e.jsx)("div",{className:"mb-2",children:(0,_e.jsx)("input",{type:"password",className:"form-control",placeholder:l("enterNewPasswordLabel"),value:Ie,onChange:e=>De(e.target.value)})}),(0,_e.jsx)("div",{className:"mb-2",children:(0,_e.jsx)("input",{type:"password",className:"form-control",placeholder:l("confirmNewPasswordLabel"),value:Ae,onChange:e=>Me(e.target.value)})}),(0,_e.jsxs)("div",{className:"d-flex gap-2",children:[(0,_e.jsx)("button",{className:"btn btn-success",onClick:async()=>{if(Le(null),Ie&&Ae)if(Ie===Ae){Oe(!0);try{const e=we,t=await fetch(`${U}/auth/reset-password/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:Ie})}),n=await t.json();t.ok?(Le(l("passwordChangedSuccess")),ce(!1),Ee(!1),ge(!1),he(""),xe(""),De(""),Me("")):Le(n.message||l("passwordChangeError"))}catch(e){console.error("Reset password error",e),Le(l("passwordChangeError"))}finally{Oe(!1)}}else Le(l("passwordMismatch"));else Le("Please fill both password fields")},disabled:Re,children:Re?l("verifyingPassword"):"Reset Password"}),(0,_e.jsx)("button",{className:"btn btn-outline-secondary",onClick:()=>{Ee(!1),ke("")},children:l("cancel")})]}),Pe&&(0,_e.jsx)("div",{className:"mt-2",style:{color:Pe===l("passwordChangedSuccess")?"var(--bs-success)":"var(--bs-danger)"},children:Pe})]})]})]})]})]})})]})]})})},iu=()=>{const[e,t]=(0,i.useState)({}),[n,s]=(0,i.useState)(null),[o,a]=(0,i.useState)(!1),[r,l]=(0,i.useState)(null),d=()=>{a(!1),s(null)};return(0,_e.jsxs)("div",{className:"manual-sync-container",children:[(0,_e.jsx)("div",{className:"page-header-banner",children:(0,_e.jsxs)("div",{className:"page-header-content",children:[(0,_e.jsx)("div",{className:"page-header-icon",children:(0,_e.jsx)("i",{className:"bi bi-arrow-repeat"})}),(0,_e.jsxs)("div",{className:"page-header-text",children:[(0,_e.jsx)("h1",{children:"Manual Data Synchronization"}),(0,_e.jsx)("p",{children:"Sync data from HRIS API to local MySQL database. Only new records will be added."})]})]})}),r&&(0,_e.jsxs)("div",{className:"sync-alert alert-danger",children:[(0,_e.jsx)("i",{className:"bi bi-exclamation-triangle"}),(0,_e.jsx)("span",{children:r}),(0,_e.jsx)("button",{onClick:()=>l(null),className:"alert-close",children:(0,_e.jsx)("i",{className:"bi bi-x"})})]}),(0,_e.jsx)("div",{className:"sync-grid",children:[{id:"divisions",name:"Divisions",endpoint:"/api/sync/trigger/divisions",icon:"bi-building",color:"primary",description:"Sync company divisions from HRIS"},{id:"sections",name:"Sections",endpoint:"/api/sync/trigger/sections",icon:"bi-diagram-3",color:"info",description:"Sync organizational sections from HRIS"},{id:"employees",name:"Employees",endpoint:"/api/sync/trigger/employees",icon:"bi-people",color:"success",description:"Sync employee records from HRIS"},{id:"emp-index",name:"Employee Index",endpoint:"/api/sync/trigger/emp-index",icon:"bi-list-ul",color:"warning",description:"Build employee index (Auto-syncs daily at 12PM)",note:"This table syncs automatically at 12PM daily"},{id:"subsections",name:"Sub-Sections",endpoint:"/api/sync/trigger/subsections",icon:"bi-diagram-2",color:"secondary",description:"Check sub-section status (manually managed)"}].map(n=>(0,_e.jsxs)("div",{className:"sync-card",children:[(0,_e.jsxs)("div",{className:"sync-card-header",children:[(0,_e.jsx)("div",{className:`sync-icon ${n.color}`,children:(0,_e.jsx)("i",{className:`bi ${n.icon}`})}),(0,_e.jsx)("h3",{children:n.name})]}),(0,_e.jsxs)("div",{className:"sync-card-body",children:[(0,_e.jsx)("p",{className:"sync-description",children:n.description}),n.note&&(0,_e.jsxs)("div",{className:"sync-note-badge",children:[(0,_e.jsx)("i",{className:"bi bi-clock-history"}),(0,_e.jsx)("span",{children:n.note})]})]}),(0,_e.jsx)("div",{className:"sync-card-footer",children:(0,_e.jsx)("button",{onClick:()=>(async e=>{try{t(t=>({...t,[e.id]:!0})),l(null);const n=localStorage.getItem("token"),i=await Qd.post(`http://localhost:5000${e.endpoint}`,{},{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});i.data.success?(s({tableName:e.name,...i.data.data}),a(!0)):l(`Failed to sync ${e.name}: ${i.data.message}`)}catch(o){var n,i;console.error(`Error syncing ${e.name}:`,o),l((null===(n=o.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||o.message||`Failed to sync ${e.name}`)}finally{t(t=>({...t,[e.id]:!1}))}})(n),disabled:e[n.id],className:`sync-btn btn-${n.color}`,children:e[n.id]?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Syncing..."]}):(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("i",{className:"bi bi-arrow-repeat"}),"Sync ",n.name]})})})]},n.id))}),o&&n&&(0,_e.jsx)("div",{className:"sync-modal-overlay",onClick:d,children:(0,_e.jsxs)("div",{className:"sync-modal",onClick:e=>e.stopPropagation(),children:[(0,_e.jsxs)("div",{className:"sync-modal-header",children:[(0,_e.jsxs)("h3",{children:[(0,_e.jsx)("i",{className:"bi bi-check-circle text-success"}),n.tableName," Sync Complete"]}),(0,_e.jsx)("button",{onClick:d,className:"modal-close-btn",children:(0,_e.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,_e.jsxs)("div",{className:"sync-modal-body",children:[(0,_e.jsxs)("div",{className:"sync-stats",children:[(0,_e.jsxs)("div",{className:"stat-item",children:[(0,_e.jsx)("span",{className:"stat-label",children:"New Records Added"}),(0,_e.jsx)("span",{className:"stat-value success",children:n.recordsAdded||0})]}),(0,_e.jsxs)("div",{className:"stat-item",children:[(0,_e.jsx)("span",{className:"stat-label",children:"Existing Records (Skipped)"}),(0,_e.jsx)("span",{className:"stat-value info",children:n.recordsUpdated||n.updated||0})]}),(0,_e.jsxs)("div",{className:"stat-item",children:[(0,_e.jsx)("span",{className:"stat-label",children:"Total Processed"}),(0,_e.jsx)("span",{className:"stat-value",children:n.recordsSynced||n.inserted+(n.updated||0)||0})]}),n.recordsFailed>0&&(0,_e.jsxs)("div",{className:"stat-item",children:[(0,_e.jsx)("span",{className:"stat-label",children:"Failed"}),(0,_e.jsx)("span",{className:"stat-value danger",children:n.recordsFailed})]})]}),n.newRecords&&n.newRecords.length>0&&(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("div",{className:"new-records-header",children:(0,_e.jsxs)("h4",{children:[(0,_e.jsx)("i",{className:"bi bi-file-earmark-plus"}),"Newly Added Records (",n.newRecords.length,")"]})}),(0,_e.jsxs)("div",{className:"new-records-list",children:[n.newRecords.slice(0,20).map((e,t)=>(0,_e.jsxs)("div",{className:"record-item",children:[(0,_e.jsx)("div",{className:"record-index",children:t+1}),(0,_e.jsx)("div",{className:"record-details",children:Object.entries(e).filter(e=>{let[t]=e;return!t.includes("synced_at")&&!t.includes("id")}).map(e=>{let[t,n]=e;return(0,_e.jsxs)("div",{className:"record-field",children:[(0,_e.jsxs)("span",{className:"field-label",children:[t,":"]}),(0,_e.jsx)("span",{className:"field-value",children:n||"N/A"})]},t)})})]},t)),n.newRecords.length>20&&(0,_e.jsxs)("div",{className:"record-item-more",children:[(0,_e.jsx)("i",{className:"bi bi-three-dots"}),"And ",n.newRecords.length-20," more records..."]})]})]}),(!n.newRecords||0===n.newRecords.length)&&(0,_e.jsxs)("div",{className:"no-new-records",children:[(0,_e.jsx)("i",{className:"bi bi-info-circle"}),(0,_e.jsx)("p",{children:"No new records were added. All records already exist in the database."})]}),n.note&&(0,_e.jsxs)("div",{className:"sync-note",children:[(0,_e.jsx)("i",{className:"bi bi-info-circle"}),(0,_e.jsx)("span",{children:n.note})]})]}),(0,_e.jsx)("div",{className:"sync-modal-footer",children:(0,_e.jsxs)("button",{onClick:d,className:"btn-close-modal",children:[(0,_e.jsx)("i",{className:"bi bi-check"}),"Close"]})})]})})]})},su=n.p+"static/media/fottermp4.c5a52f0cd860c11976c4.mp4",ou=()=>(0,_e.jsx)("div",{className:"footer-wrapper",children:(0,_e.jsx)("div",{className:"footer-video-section",children:(0,_e.jsxs)("div",{className:"video-container",children:[(0,_e.jsxs)("video",{className:"footer-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:[(0,_e.jsx)("source",{src:su,type:"video/mp4"}),"Your browser does not support the video tag."]}),(0,_e.jsx)("div",{className:"video-text-overlay",children:(0,_e.jsx)("div",{className:"video-text-content",children:(0,_e.jsxs)("div",{className:"center-text",children:[(0,_e.jsx)("span",{className:"authority-name",children:"Copyright \xa9 Ports Authority 2025. All rights reserved."}),(0,_e.jsx)("span",{className:"info-system",children:"Created By: INFORMATION SYSTEM"})]})})})]})})}),au=n.p+"static/media/PortAuthLogo.bc82c23fb8a961b5c784.png",ru=()=>{const[e,t]=(0,i.useState)("dashboard"),[n,s]=(0,i.useState)(!1),{user:o,logout:a}=(0,i.useContext)(Ne),{t:r}=Te(),l=Me("settings","view"),d=o&&("super_admin"===o.role||"admin"===o.role)||l||!(null===o||void 0===o||!o.permissions||!o.permissions.settings||!0!==o.permissions.settings.settings_view&&!0!==o.permissions.settings.view),c=Me("employees","read"),u=o&&("super_admin"===o.role||"admin"===o.role)||c||!(null===o||void 0===o||!o.permissions||!o.permissions.employees||!0!==o.permissions.employees.employees_view&&!0!==o.permissions.employees.view),h=Me("divisions","read"),p=o&&("super_admin"===o.role||"admin"===o.role)||h||!(null===o||void 0===o||!o.permissions||!o.permissions.divisions||!0!==o.permissions.divisions.divisions_view&&!0!==o.permissions.divisions.view),f=Me("sections","read"),m=o&&("super_admin"===o.role||"admin"===o.role)||f||!(null===o||void 0===o||!o.permissions||!o.permissions.sections||!0!==o.permissions.sections.sections_view&&!0!==o.permissions.sections.view),g=Me("permission_management","manage_permission"),v=o&&("super_admin"===o.role||"admin"===o.role)||g||!(null===o||void 0===o||!o.permissions||!o.permissions.roles||!0!==o.permissions.roles.read&&!0!==o.permissions.roles.view),x=e=>{switch(e){case"home":t("dashboard");break;case"users":t("users");break;case"employees":t("employees");break;case"reports":t("reports");break;case"meals":t("meals");break;case"divisions":t("divisions");break;case"sections":t("sections");break;case"roles":t("roles");break;case"sync":t("sync");break;case"settings":t("settings");break;case"api":t("api")}};i.useEffect(()=>{const e=e=>{"Escape"===e.key&&n&&s(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n]);const b=()=>{const e=new Date;return{time:e.toLocaleTimeString("en-US",{hour12:!0,hour:"2-digit",minute:"2-digit"}),date:e.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}},[y,S]=i.useState(b());i.useEffect(()=>{const e=setInterval(()=>{S(b())},1e3);return()=>clearInterval(e)},[]);const j=()=>{const e=(new Date).getHours();return e<12?"good morning":e<18?"good afternoon":"good evening"},w=[null===o||void 0===o?void 0:o.firstName,null===o||void 0===o?void 0:o.lastName].filter(Boolean).join(" ").trim()||(null===o||void 0===o?void 0:o.name)||(null===o||void 0===o?void 0:o.username)||(null===o||void 0===o?void 0:o.email)||"",_=(()=>{try{if(w){return w.split(" ").filter(Boolean).map(e=>e[0]).slice(0,2).join("").toUpperCase()}if(null!==o&&void 0!==o&&o.email)return String(o.email[0]||"U").toUpperCase()}catch(cu){}return"U"})();i.useEffect(()=>{const e=e=>{const n=null===e||void 0===e?void 0:e.detail;"string"===typeof n&&t(n)};return window.addEventListener("navigateTo",e),()=>window.removeEventListener("navigateTo",e)},[]);const N=Me("users","read"),k=o&&("super_admin"===o.role||"admin"===o.role)||N||!(null===o||void 0===o||!o.permissions||!o.permissions.users||!0!==o.permissions.users.users_view&&!0!==o.permissions.users.view),C=Me("reports","view_reports"),E=o&&("super_admin"===o.role||"admin"===o.role)||C||!(null===o||void 0===o||!o.permissions||!o.permissions.reports||!0!==o.permissions.reports.view_reports&&!0!==o.permissions.reports.view),I=[{id:"home",label:r("dashboard"),icon:"bi-house",color:"primary",roles:["super_admin","admin","clerk","administrative_clerk","employee"]},{id:"users",label:r("addUser"),icon:"bi-people",color:"success",roles:["super_admin","admin","administrative_clerk"]},{id:"reports",label:r("reportGeneration"),icon:"bi-graph-up",color:"info",roles:["super_admin","admin","clerk","administrative_clerk"]},{id:"meals",label:r("mealManagement"),icon:"bi-cup-hot",color:"orange",roles:["super_admin","admin","clerk","administrative_clerk"]},{id:"divisions",label:r("divisionManagement"),icon:"bi-building",color:"warning",roles:["super_admin"]},{id:"sections",label:r("sectionManagement"),icon:"bi-diagram-3",color:"purple",roles:["super_admin","admin"]},{id:"sync",label:"Manual Sync",icon:"bi-arrow-repeat",color:"info",roles:["super_admin","admin"]},{id:"roles",label:r("rolesPermissions"),icon:"bi-shield-check",color:"secondary",roles:["super_admin"]},{id:"employees",label:"Employee Management",icon:"bi-people",color:"secondary",roles:["super_admin","admin","administrative_clerk"]},{id:"settings",label:r("settings"),icon:"bi-gear",color:"secondary",roles:["super_admin","admin","clerk","administrative_clerk","employee"]}];return(0,_e.jsxs)("div",{className:"modern-dashboard",children:[(0,_e.jsxs)("div",{className:"sidebar "+(n?"sidebar-open":""),children:[(0,_e.jsxs)("div",{className:"sidebar-header",children:[(0,_e.jsxs)("div",{className:"sidebar-brand",children:[(0,_e.jsx)("div",{className:"brand-icon",children:(0,_e.jsx)("img",{src:au,alt:"SLPA Logo",className:"brand-logo"})}),(0,_e.jsxs)("div",{className:"brand-text",children:[(0,_e.jsx)("h3",{children:r("attendanceSystem")}),(0,_e.jsx)("span",{children:r("poweredBy")})]})]}),(0,_e.jsx)("button",{className:"sidebar-close-btn",onClick:()=>s(!1),title:r("closeSidebar"),children:(0,_e.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,_e.jsx)("div",{className:"sidebar-content",children:(0,_e.jsxs)("div",{className:"sidebar-section",children:[(0,_e.jsx)("div",{className:"sidebar-section-title",children:r("quickActions")}),(0,_e.jsx)("div",{className:"sidebar-actions",children:I.map(t=>(t.roles,("settings"!==t.id||d)&&("reports"!==t.id||E)&&("employees"!==t.id||u)&&("divisions"!==t.id||p)&&("sections"!==t.id||m)&&("users"!==t.id||k)&&("roles"!==t.id||v)?(0,_e.jsxs)("button",{className:`sidebar-btn ${t.color} ${e===t.id?"active":""}`,onClick:()=>{x(t.id),s(!1)},title:t.label,children:[(0,_e.jsx)("i",{className:`bi ${t.icon}`}),(0,_e.jsx)("span",{children:t.label})]},t.id):null))})]})})]}),n&&(0,_e.jsx)("div",{className:"sidebar-overlay active",onClick:()=>s(!1)}),(0,_e.jsx)("nav",{className:"top-nav",children:(0,_e.jsxs)("div",{className:"nav-container",children:[(0,_e.jsxs)("div",{className:"nav-left",children:[(0,_e.jsx)("button",{className:"sidebar-toggle-btn",onClick:()=>s(!n),title:r("toggleSidebar"),children:(0,_e.jsx)("i",{className:"bi bi-list"})}),(0,_e.jsxs)("div",{className:"nav-brand",children:[(0,_e.jsxs)("div",{className:"brand-logo-container",children:[(0,_e.jsx)("img",{src:au,alt:"SLPA Logo",className:"brand-logo-animated"}),(0,_e.jsx)("div",{className:"logo-glow"})]}),(0,_e.jsxs)("div",{className:"brand-text-container",children:[(0,_e.jsxs)("h1",{className:"brand-title",children:[(0,_e.jsx)("span",{className:"title-main",children:"SLPA"}),(0,_e.jsx)("span",{className:"title-divider"}),(0,_e.jsx)("span",{className:"title-sub",children:"Time & Attendance"})]}),(0,_e.jsxs)("span",{className:"brand-subtitle",children:[(0,_e.jsx)("i",{className:"bi bi-shield-check"}),"Sri Lanka Ports Authority"]})]})]})]}),(0,_e.jsx)("div",{className:"nav-center",children:(0,_e.jsxs)("div",{className:"greeting-container",children:[(0,_e.jsxs)("div",{className:"greeting-avatar-wrapper",children:[(0,_e.jsx)("div",{className:"greeting-avatar",children:_}),(0,_e.jsx)("div",{className:"avatar-status"})]}),(0,_e.jsxs)("div",{className:"greeting-text",children:[(0,_e.jsxs)("span",{className:"greeting-hello",children:["Hello, ",(0,_e.jsx)("strong",{children:w||(null===o||void 0===o?void 0:o.email)||"User"})]}),(0,_e.jsxs)("span",{className:"greeting-time-of-day",children:[(0,_e.jsx)("i",{className:"bi "+(j().includes("morning")?"bi-sun":j().includes("afternoon")?"bi-brightness-high":"bi-moon-stars")}),j()]})]})]})}),(0,_e.jsxs)("div",{className:"nav-user",children:[(0,_e.jsxs)("div",{className:"header-datetime",children:[(0,_e.jsx)("div",{className:"datetime-time",children:y.time}),(0,_e.jsx)("div",{className:"datetime-date",children:y.date})]}),(0,_e.jsxs)("div",{className:"header-actions",children:[d&&(0,_e.jsx)("button",{className:"header-action-btn settings-btn",onClick:()=>x("settings"),title:r("settings"),children:(0,_e.jsx)("i",{className:"bi bi-gear"})}),(0,_e.jsxs)("button",{className:"logout-btn",onClick:async()=>{try{await a(),window.location.href="/login"}catch(e){console.error("Logout error:",e)}},children:[(0,_e.jsx)("i",{className:"bi bi-box-arrow-right"}),(0,_e.jsx)("span",{children:r("logout")})]})]})]})]})}),(0,_e.jsx)("main",{className:"main-content",children:(0,_e.jsx)("div",{className:"content-container",children:(()=>{switch(e){case"dashboard":default:return(0,_e.jsx)(Tr,{onQuickAction:x});case"users":return(0,_e.jsx)(Mr,{});case"employees":return(0,_e.jsx)(Xd,{});case"reports":case"unit-attendance":case"audit-report":case"meal-report":return(0,_e.jsx)(nc,{});case"meals":return(0,_e.jsx)(ic,{});case"divisions":return(0,_e.jsx)(sc,{});case"sections":return(0,_e.jsx)(oc,{});case"roles":return(0,_e.jsx)(Qc,{});case"role-management":return(0,_e.jsx)(Kc,{});case"sync":return(0,_e.jsx)(iu,{});case"api":return(0,_e.jsx)(Xc,{});case"settings":return(0,_e.jsx)(nu,{})}})()})}),(0,_e.jsx)(ou,{})]})},lu=e=>{let{children:t}=e;const{user:n,loading:s,isAuthenticated:o}=(0,i.useContext)(Ne);return s?(0,_e.jsx)("div",{className:"loading-screen d-flex justify-content-center align-items-center min-vh-100",children:(0,_e.jsxs)("div",{className:"text-center",children:[(0,_e.jsx)("div",{className:"spinner-border text-primary mb-3",role:"status",style:{width:"3rem",height:"3rem"},children:(0,_e.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,_e.jsx)("p",{className:"text-muted",children:"Verifying your session..."})]})}):o&&n?!1===n.isActive?(0,_e.jsx)("div",{className:"error-screen d-flex justify-content-center align-items-center min-vh-100",children:(0,_e.jsxs)("div",{className:"text-center",children:[(0,_e.jsx)("h3",{className:"text-danger mb-3",children:"Account Deactivated"}),(0,_e.jsx)("p",{className:"text-muted",children:"Your account has been deactivated. Please contact the administrator."}),(0,_e.jsx)("button",{className:"btn btn-primary",onClick:()=>window.location.href="/login",children:"Back to Login"})]})}):t:(0,_e.jsx)(me,{to:"/login",replace:!0})};const du=function(){return(0,_e.jsx)(ke,{children:(0,_e.jsx)(Se,{children:(0,_e.jsxs)(xe,{children:[(0,_e.jsx)(ge,{path:"/login",element:(0,_e.jsx)(Ee,{})}),(0,_e.jsx)(ge,{path:"/dashboard",element:(0,_e.jsx)(lu,{children:(0,_e.jsx)(ru,{})})}),(0,_e.jsx)(ge,{path:"*",element:(0,_e.jsx)(me,{to:"/login",replace:!0})})]})})})};o.createRoot(document.getElementById("root")).render((0,_e.jsx)(i.StrictMode,{children:(0,_e.jsx)(Ae,{children:(0,_e.jsx)(du,{})})}))})()})();
//# sourceMappingURL=main.b5a06bc1.js.map