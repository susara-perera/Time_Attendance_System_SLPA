"use strict";(self.webpackChunktime_attendance_frontend=self.webpackChunktime_attendance_frontend||[]).push([[723],{83:(e,s,i)=>{i.d(s,{A:()=>n});i(43);var o=i(769),a=i(579);const n=e=>{let{title:s,subtitle:i,icon:n="bi-folder",actions:r,onBack:t}=e;return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsxs)("button",{className:"back-arrow-btn",onClick:t,title:"Back to Dashboard",style:{marginBottom:"12px",background:"transparent",color:"#0f172a",border:"1px solid rgba(15,23,42,0.08)",width:"auto",padding:"8px 12px"},children:[(0,a.jsx)("i",{className:"bi bi-arrow-left"}),"\xa0",(0,a.jsx)("span",{style:{fontWeight:600},children:"Back"})]}),(0,a.jsxs)("div",{className:"page-header-banner",children:[(0,a.jsxs)("div",{className:"page-header-content",children:[(0,a.jsxs)("div",{className:"page-header-left",children:[(0,a.jsx)("div",{className:"page-header-icon",children:(0,a.jsx)("i",{className:`bi ${n}`})}),(0,a.jsxs)("div",{className:"page-header-text",children:[(0,a.jsx)("h1",{children:s}),i&&(0,a.jsx)("p",{children:i})]})]}),(0,a.jsxs)("div",{className:"page-header-right",children:[r&&(0,a.jsx)("div",{className:"page-header-actions",children:r}),(0,a.jsx)("div",{className:"page-header-logo",children:(0,a.jsx)("img",{src:o,alt:"Company Logo"})})]})]}),(0,a.jsxs)("div",{className:"page-header-decoration",children:[(0,a.jsx)("div",{className:"decoration-circle decoration-circle-1"}),(0,a.jsx)("div",{className:"decoration-circle decoration-circle-2"}),(0,a.jsx)("div",{className:"decoration-circle decoration-circle-3"})]})]})]})}},154:(e,s,i)=>{i.d(s,{M5:()=>l,Vv:()=>t});let o=null;const a=()=>(o||(o=document.createElement("div"),o.id="modern-alert-container",o.className="modern-alert-container",document.body.appendChild(o)),o),n=()=>`alert-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,r=e=>{const s={success:"bi-check-circle-fill",error:"bi-x-circle-fill",warning:"bi-exclamation-triangle-fill",info:"bi-info-circle-fill",question:"bi-question-circle-fill"};return s[e]||s.info},t=e=>{let{type:s="info",title:i="",message:o="",duration:t=3e3,showConfetti:l=!1}=e;const d=a(),u=n(),p=document.createElement("div");if(p.id=u,p.className=`modern-alert modern-alert-${s} modern-alert-enter`,p.innerHTML=`\n    <div class="modern-alert-content">\n      <div class="modern-alert-icon">\n        <i class="bi ${r(s)}"></i>\n      </div>\n      <div class="modern-alert-body">\n        ${i?`<div class="modern-alert-title">${i}</div>`:""}\n        <div class="modern-alert-message">${o}</div>\n      </div>\n      <button class="modern-alert-close" onclick="this.closest('.modern-alert').remove()">\n        <i class="bi bi-x"></i>\n      </button>\n    </div>\n    <div class="modern-alert-progress"></div>\n  `,d.appendChild(p),setTimeout(()=>{p.classList.remove("modern-alert-enter"),p.classList.add("modern-alert-active")},10),l&&"success"===s&&m(),t>0){const e=p.querySelector(".modern-alert-progress");e&&(e.style.animationDuration=`${t}ms`),setTimeout(()=>{c(u)},t)}return u},l=e=>{let{title:s="Confirm",message:i="Are you sure?",confirmText:o="Confirm",cancelText:t="Cancel",type:l="warning",showIcon:c=!0}=e;return new Promise(e=>{const m=a(),u=n(),p=document.createElement("div");p.id=u,p.className="modern-dialog-overlay modern-dialog-enter",p.innerHTML=`\n      <div class="modern-dialog modern-dialog-${l}">\n        <div class="modern-dialog-content">\n          ${c?`\n            <div class="modern-dialog-icon">\n              <i class="bi ${r("danger"===l?"error":l)}"></i>\n            </div>\n          `:""}\n          <div class="modern-dialog-body">\n            <h3 class="modern-dialog-title">${s}</h3>\n            <p class="modern-dialog-message">${i}</p>\n          </div>\n        </div>\n        <div class="modern-dialog-footer">\n          <button class="modern-btn modern-btn-cancel" data-action="cancel">\n            <i class="bi bi-x-circle"></i>\n            ${t}\n          </button>\n          <button class="modern-btn modern-btn-confirm modern-btn-${l}" data-action="confirm">\n            <i class="bi bi-check-circle"></i>\n            ${o}\n          </button>\n        </div>\n      </div>\n    `,m.appendChild(p),setTimeout(()=>{p.classList.remove("modern-dialog-enter"),p.classList.add("modern-dialog-active")},10),p.addEventListener("click",s=>{if(s.target.closest("[data-action]")){const i=s.target.closest("[data-action]").dataset.action;d(u),e("confirm"===i)}else s.target===p&&(d(u),e(!1))})})},c=e=>{const s=document.getElementById(e);s&&(s.classList.remove("modern-alert-active"),s.classList.add("modern-alert-exit"),setTimeout(()=>{s.remove()},300))},d=e=>{const s=document.getElementById(e);s&&(s.classList.remove("modern-dialog-active"),s.classList.add("modern-dialog-exit"),setTimeout(()=>{s.remove()},300))},m=()=>{const e=document.body;for(let s=0;s<50;s++){const s=document.createElement("div");s.className="confetti",s.style.left=100*Math.random()+"%",s.style.animationDelay=.5*Math.random()+"s",s.style.backgroundColor=u(),e.appendChild(s),setTimeout(()=>s.remove(),3e3)}},u=()=>{const e=["#ff6b6b","#4ecdc4","#45b7d1","#f9ca24","#6c5ce7","#a29bfe","#fd79a8"];return e[Math.floor(Math.random()*e.length)]}},723:(e,s,i)=>{i.r(s),i.d(s,{default:()=>d});var o=i(43),a=i(715),n=i(477),r=i(68),t=i(154),l=i(83),c=i(579);const d=e=>{let{onBack:s}=e;const[i,d]=(0,o.useState)([]),[m,u]=(0,o.useState)(!0),[p,h]=(0,o.useState)(!1),[v,N]=(0,o.useState)(null),[b,x]=(0,o.useState)({firstName:"",lastName:"",email:"",employeeId:"",role:"",password:"",confirmPassword:"",phone:"",division:"",section:"",subsection:""}),[f,g]=(0,o.useState)([]),[j,y]=(0,o.useState)([]),[w,_]=(0,o.useState)([]),[S,C]=(0,o.useState)([]),[I,E]=(0,o.useState)([]),[A,k]=(0,o.useState)([]),D=(0,a.A)("users","read"),$=(0,a.A)("users","create"),L=(0,a.A)("users","update"),{user:U}=((0,a.A)("users","delete"),(0,o.useContext)(r.c)),{t:P}=(0,n.ok)(),T=e=>!(!U||"super_admin"!==U.role)&&(e!==U._id&&e!==U.id),q=e=>{if(!e)return"N/A";const s=String(e),i=f.find(e=>!!e&&[e._id,e.id].some(e=>void 0!==e&&String(e)===s));return i?i.name||"Unknown Division":"N/A"},B=e=>{if(!e)return"N/A";const s=String(e),i=j.find(e=>!!e&&[e._id,e.id].some(e=>void 0!==e&&String(e)===s));return i?i.name||"Unknown Section":"N/A"},M=e=>{if(!e)return"";let s=String(e).replace(/\s*\([^)]*\)/g,"").trim();return s=s.replace(/\s*-\s*$/,"").trim(),s};(0,o.useEffect)(()=>{(async()=>{try{const n=localStorage.getItem("token"),r="http://10.70.4.186:5000/api";try{const e=await fetch(`${r}/users`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(e.ok){const s=await e.json();console.log("Users API Response:",s);const i=(s.users||s.data||[]).map(e=>{console.log("Mapping user:",e);const s=e.divisionId||null,i=e.sectionId||null,o=e.subsectionId||null,a=e.divisionName||"",n=e.sectionName||"",r=M(n),t=e.subsectionName||"";return{id:e._id||e.id,firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",role:e.role||"employee",employeeId:e.employeeId||"",status:!1!==e.isActive?"active":"inactive",division:s,section:i,subsection:o,divisionName:a,sectionName:r,subsectionName:t,divisionDisplay:a||"N/A",sectionDisplay:r||"N/A",subsectionDisplay:t||"N/A"}});console.log("Mapped users:",i),d(i)}else{console.error("Failed to fetch users, status:",e.status);const s=await e.text();console.error("Error response:",s),d([])}}catch(e){console.error("Error fetching users:",e),d([])}try{const e=await fetch(`${r}/mysql-data/divisions`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(e.ok){const s=await e.json();console.log("Divisions HRIS API Response:",s);const i=s.data||s||[];console.log("Raw divisions:",i.length);const o=i.map(e=>({_id:e._id||e.id||e.HIE_CODE||e.code,id:e._id||e.id||e.HIE_CODE||e.code,code:e.code||e.HIE_CODE||e.hie_code||e._id||e.id,name:e.name||e.HIE_NAME||e.hie_name||e.hie_relationship||"Unknown Division",hie_relationship:e.hie_relationship||e.HIE_RELATIONSHIP,isActive:!1!==e.isActive})).sort((e,s)=>e.name.localeCompare(s.name));console.log("Normalized divisions:",o),g(o)}else{console.error("Failed to fetch divisions, status:",e.status);const s=await e.text();console.error("Divisions error response:",s),g([])}}catch(s){console.error("Error fetching divisions:",s),g([])}try{const e=await fetch(`${r}/mysql-data/sections`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(e.ok){const s=await e.json();console.log("Sections HRIS API Response:",s);const i=s.data||s||[];console.log("Raw sections:",i.length);const o=i.map(e=>({_id:e._id||e.id||e.HIE_CODE||e.code,id:e._id||e.id||e.HIE_CODE||e.code,code:e.code||e.HIE_CODE||e.hie_code||e.section_code||e._id||e.id,name:e.name||e.HIE_NAME||e.hie_name||e.section_name||`Section ${e.code}`,divisionCode:e.division_code||e.HIE_RELATIONSHIP||e.divisionCode||"",divisionId:e.division_id||e.divisionId||"",divisionName:e.division_name||e.divisionName||"",hie_relationship:e.hie_relationship||e.HIE_RELATIONSHIP||e.division_code||"",isActive:!1!==e.isActive})).sort((e,s)=>e.name.localeCompare(s.name));console.log("Normalized sections:",o),y(o)}else{console.error("Failed to fetch sections, status:",e.status);const s=await e.text();console.error("Sections error response:",s),y([])}}catch(i){console.error("Error fetching sections:",i),y([])}try{const e=await fetch(`${r}/mysql-data/subsections`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(e.ok){const s=await e.json();console.log("Subsections API Response:",s);const i=s.data||s||[];console.log("Raw subsections:",i.length);const o=i.map(e=>{var s,i,o,a,n,r,t,l;return{_id:e._id||e.id||e.sub_code,id:e._id||e.id||e.sub_code,code:(null===(s=e.subSection)||void 0===s?void 0:s.sub_hie_code)||e.sub_code||e.code||e._id,name:(null===(i=e.subSection)||void 0===i?void 0:i.sub_hie_name)||e.sub_name||e.name||`Subsection ${e.code}`,sectionId:(null===(o=e.parentSection)||void 0===o?void 0:o.id)||e.section_id||e.section_code||"",sectionCode:(null===(a=e.parentSection)||void 0===a?void 0:a.hie_code)||e.section_code||"",sectionName:(null===(n=e.parentSection)||void 0===n?void 0:n.hie_name)||e.section_name||"",divisionId:(null===(r=e.parentDivision)||void 0===r?void 0:r.id)||e.division_id||e.division_code||"",divisionCode:(null===(t=e.parentDivision)||void 0===t?void 0:t.division_code)||e.division_code||"",divisionName:(null===(l=e.parentDivision)||void 0===l?void 0:l.division_name)||e.division_name||"",isActive:!1!==e.isActive}}).sort((e,s)=>e.name.localeCompare(s.name));console.log("Normalized subsections:",o),C(o)}else{console.error("Failed to fetch subsections, status:",e.status);const s=await e.text();console.error("Subsections error response:",s),C([])}}catch(o){console.error("Error fetching subsections:",o),C([])}try{const e=await fetch(`${r}/roles`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(e.ok){const s=await e.json();console.log("Roles API Response:",s);const i=s.data||s||[];console.log("Fetched roles:",i),k(i)}else{console.error("Failed to fetch roles, status:",e.status);const s=await e.text();console.error("Roles error response:",s),k([])}}catch(a){console.error("Error fetching roles:",a),k([])}u(!1)}catch(n){console.error("Error fetching data:",n),u(!1)}})()},[]),(0,o.useEffect)(()=>{if(!b.division)return void _([]);const e=f.find(e=>e.name===b.division),s=(null===e||void 0===e?void 0:e.code)||"";console.log("Selected Division Name:",b.division),console.log("Selected Division Code:",s);const i=j.filter(e=>String(e.divisionCode||e.hie_relationship||"")===s);console.log("Filtered Sections:",i.length),_(i)},[b.division,j,f]),(0,o.useEffect)(()=>{if(!b.section)return void E([]);const e=w.find(e=>e.name===b.section),s=(null===e||void 0===e?void 0:e.code)||"";console.log("Selected Section Name:",b.section),console.log("Selected Section Code:",s);const i=S.filter(e=>String(e.sectionCode||e.sectionId||"")===s);console.log("Filtered Subsections:",i.length),E(i)},[b.section,S,w]);const R=e=>{const{name:s,value:i}=e.target;x(e=>"division"===s?{...e,[s]:i,section:"",subsection:""}:"section"===s?{...e,[s]:i,subsection:""}:{...e,[s]:i})};return m?(0,c.jsx)("div",{className:"loading-container",children:(0,c.jsx)("div",{className:"spinner-border",role:"status",children:(0,c.jsx)("span",{className:"visually-hidden",children:P("loading")||"Loading..."})})}):D?(0,c.jsxs)("div",{className:"user-management",children:[(0,c.jsx)(l.A,{title:P("userManagement"),subtitle:"Manage system users and access permissions",icon:"bi-people",onBack:s,actions:(0,c.jsxs)("button",{className:"btn-professional btn-primary",onClick:$?()=>{x({firstName:"",lastName:"",email:"",employeeId:"",role:"",password:"",confirmPassword:"",phone:"",division:"",section:"",subsection:""}),N(null),h(!0)}:void 0,title:P($?"addUser":"noPermissionAddUser"),disabled:!$,style:{cursor:$?"pointer":"not-allowed"},children:[(0,c.jsx)("i",{className:"bi bi-plus-circle"})," Add User"]})}),(0,c.jsxs)("div",{className:"professional-card",children:[(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"professional-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:P("employeeIdLabel")}),(0,c.jsx)("th",{children:P("nameLabel")||"Name"}),(0,c.jsx)("th",{children:P("emailLabel")}),(0,c.jsx)("th",{children:P("roleLabel")}),(0,c.jsx)("th",{children:P("divisionLabel")}),(0,c.jsx)("th",{children:P("sectionLabel")}),(0,c.jsx)("th",{children:P("statusLabel")||"Status"}),(0,c.jsx)("th",{children:P("actionsLabel")||"Actions"})]})}),(0,c.jsx)("tbody",{children:i.map(e=>{var s,o;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsx)("strong",{children:e.employeeId})}),(0,c.jsx)("td",{children:`${e.firstName} ${e.lastName}`}),(0,c.jsx)("td",{children:e.email}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:`role-badge role-${e.role.replace("_","-")}`,children:e.role.replace("_"," ").toUpperCase()})}),(0,c.jsx)("td",{children:e.divisionDisplay||e.divisionName||(null===(s=e.division)||void 0===s?void 0:s.name)||q(e.division)||"N/A"}),(0,c.jsx)("td",{children:e.sectionDisplay||e.sectionName||(null===(o=e.section)||void 0===o?void 0:o.name)||B(e.section)||"N/A"}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:`status-badge status-${e.status}`,children:e.status.toUpperCase()})}),(0,c.jsx)("td",{children:(0,c.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,c.jsx)("button",{className:"btn-professional btn-primary",onClick:L?()=>(e=>{const s=e.divisionName&&"N/A"!==e.divisionName?e.divisionName:"",i=e.sectionName&&"N/A"!==e.sectionName?e.sectionName:"";console.log("Editing user:",e),console.log("Division value for form:",s),console.log("Section value for form:",i),x({firstName:e.firstName,lastName:e.lastName,email:e.email,employeeId:e.employeeId,role:e.role,password:"",confirmPassword:"",phone:e.phone||"",division:s,section:i}),N(e),h(!0)})(e):void 0,title:L?"Edit User":"No permission to edit users",disabled:!L,style:{padding:"8px 12px",fontSize:"12px",cursor:L?"pointer":"not-allowed"},children:(0,c.jsx)("i",{className:"bi bi-pencil"})}),(0,c.jsx)("button",{className:"btn-professional btn-danger",onClick:T(e.id)?()=>(async e=>{if(await(0,t.M5)({title:P("confirmDeleteUser")||"Delete User",message:"This action cannot be undone. Are you sure you want to delete this user?",confirmText:"Delete",cancelText:"Cancel",type:"danger"}))try{const s=localStorage.getItem("token"),o=await fetch(`http://localhost:5000/api/users/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(o.ok)d(i.filter(s=>s.id!==e)),(0,t.Vv)({type:"success",title:"Deleted!",message:P("userDeletedSuccess")||"User deleted successfully",duration:3e3});else{const e=await o.json();(0,t.Vv)({type:"error",title:"Error",message:e.message||P("noUsersFound"),duration:4e3})}}catch(s){console.error("Error deleting user:",s),(0,t.Vv)({type:"error",title:"Error",message:"Failed to delete user. Please try again.",duration:4e3})}})(e.id):void 0,title:T(e.id)?"Delete User":e.id===(null===U||void 0===U?void 0:U._id)||e.id===(null===U||void 0===U?void 0:U.id)?"Cannot delete your own account":"No permission to delete users",disabled:!T(e.id),style:{padding:"8px 12px",fontSize:"12px",cursor:T(e.id)?"pointer":"not-allowed"},children:(0,c.jsx)("i",{className:"bi bi-trash"})})]})})]},e.id)})})]})}),0===i.length&&(0,c.jsx)("div",{className:"no-data",children:(0,c.jsx)("p",{children:P("noUsersFound")})})]}),p&&(0,c.jsx)("div",{className:"user-modal-overlay",onClick:()=>h(!1),children:(0,c.jsxs)("div",{className:"user-modal-content",onClick:e=>e.stopPropagation(),children:[(0,c.jsx)("div",{className:"user-modal-decoration top-right"}),(0,c.jsxs)("div",{className:"user-modal-header",children:[(0,c.jsxs)("div",{className:"user-modal-header-content",children:[(0,c.jsx)("div",{className:"user-modal-icon-wrapper",children:(0,c.jsx)("i",{className:"bi "+(v?"bi-person-gear":"bi-person-plus-fill")})}),(0,c.jsxs)("div",{className:"user-modal-title-group",children:[(0,c.jsx)("h3",{className:"user-modal-title",children:P(v?"editUser":"addNewUser")}),(0,c.jsx)("span",{className:"user-modal-subtitle",children:v?"Update user information and permissions":"Create a new user account"})]})]}),(0,c.jsx)("button",{className:"user-modal-close-btn",onClick:()=>h(!1),type:"button",children:(0,c.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,c.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),$||v)if(v||b.password===b.confirmPassword)if(b.firstName&&b.lastName&&b.email&&b.employeeId&&b.role)if(v||b.password)try{const e=localStorage.getItem("token");let s=null,o=null,a=null;console.log("\ud83d\udd0d DEBUG - Divisions array:",f),console.log("\ud83d\udd0d DEBUG - FormData division value:",b.division),b.division&&(s=f.find(e=>e.name===b.division),console.log("\ud83d\udd0d DEBUG - Found division object:",s)),b.section&&(o=j.find(e=>e.name===b.section),console.log("\ud83d\udd0d DEBUG - Found section object:",o)),b.subsection&&(a=S.find(e=>e.name===b.subsection),console.log("\ud83d\udd0d DEBUG - Found subsection object:",a));const n={firstName:b.firstName,lastName:b.lastName,email:b.email,employeeId:b.employeeId,role:b.role,phone:b.phone,division:s,section:o,subsection:a};let r;if(console.log("\ud83d\udce4 Sending user data to server:",n),v?b.password&&(n.password=b.password):n.password=b.password,r=v?await fetch(`http://localhost:5000/api/users/${v.id}`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(n)}):await fetch("http://localhost:5000/api/users",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(n)}),r.ok){const e=await r.json();console.log("\ud83d\udce5 Server response:",e);const s=e.user||e.data||null;console.log("\ud83d\udce6 Returned user data:",s);const o=e=>{if(!e)return null;console.log("\ud83d\udd04 Normalizing user from server:",e);const s=e.divisionId||null,i=e.sectionId||null,o=e.subsectionId||null,a=e.divisionName||"",n=e.sectionName||"",r=M(n),t=e.subsectionName||"",l={id:e._id||e.id,firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",role:e.role||"employee",employeeId:e.employeeId||"",status:!1!==e.isActive?"active":"inactive",division:s,section:i,subsection:o,divisionName:a,sectionName:r,subsectionName:t,divisionDisplay:a||"N/A",sectionDisplay:r||"N/A",subsectionDisplay:t||"N/A"};return console.log("\u2705 Normalized user:",l),l};if(s){const e=o(s);d(v?i.map(s=>s.id===v.id?e:s):s=>[...s,e])}else if(v)d(i.map(e=>e.id===v.id?{...e,firstName:b.firstName,lastName:b.lastName,email:b.email,employeeId:b.employeeId,role:b.role,division:b.division,section:b.section}:e));else{const s={id:e.data&&(e.data.id||e.data._id)||`${Date.now()}`,firstName:b.firstName,lastName:b.lastName,email:b.email,employeeId:b.employeeId,role:b.role,status:"active",division:b.division,section:b.section};d(e=>[...e,s])}h(!1),N(null),(0,t.Vv)({type:"success",title:v?"Updated!":"Created!",message:v?P("userUpdateSuccess")||"User updated successfully":P("userCreateSuccess")||"User created successfully",duration:3e3,showConfetti:!v})}else{const e=await r.json();(0,t.Vv)({type:"error",title:"Error",message:e.message||P("failedToSaveUser")||"Failed to save user",duration:4e3})}}catch(s){console.error("Error saving user:",s),(0,t.Vv)({type:"error",title:"Error",message:P("failedToSaveUser")||"Error saving user. Please try again.",duration:4e3})}else(0,t.Vv)({type:"warning",title:"Password Required",message:P("passwordRequired")||"Password is required for new users!",duration:3e3});else(0,t.Vv)({type:"warning",title:"Missing Information",message:P("pleaseFillRequired")||"Please fill in all required fields!",duration:3e3});else(0,t.Vv)({type:"warning",title:"Password Mismatch",message:P("passwordsDoNotMatch")||"Passwords do not match!",duration:3e3});else(0,t.Vv)({type:"error",title:"Permission Denied",message:"You do not have permission to create users.",duration:3e3})},children:[(0,c.jsxs)("div",{className:"user-modal-body",children:[(0,c.jsxs)("div",{className:"user-form-section",children:[(0,c.jsxs)("div",{className:"user-form-section-header",children:[(0,c.jsx)("div",{className:"user-form-section-icon",children:(0,c.jsx)("i",{className:"bi bi-person"})}),(0,c.jsx)("span",{className:"user-form-section-title",children:"Personal Information"})]}),(0,c.jsxs)("div",{className:"user-form-grid",children:[(0,c.jsxs)("div",{className:"user-form-group",children:[(0,c.jsxs)("label",{className:"user-form-label",children:[(0,c.jsx)("i",{className:"bi bi-person-badge"}),P("firstName")," ",(0,c.jsx)("span",{className:"required",children:"*"})]}),(0,c.jsxs)("div",{className:"user-input-wrapper",children:[(0,c.jsx)("i",{className:"bi bi-person user-input-icon"}),(0,c.jsx)("input",{type:"text",name:"firstName",className:"user-form-input",value:b.firstName,onChange:R,placeholder:"Enter first name",required:!0})]})]}),(0,c.jsxs)("div",{className:"user-form-group",children:[(0,c.jsxs)("label",{className:"user-form-label",children:[(0,c.jsx)("i",{className:"bi bi-person-badge"}),P("lastName")," ",(0,c.jsx)("span",{className:"required",children:"*"})]}),(0,c.jsxs)("div",{className:"user-input-wrapper",children:[(0,c.jsx)("i",{className:"bi bi-person user-input-icon"}),(0,c.jsx)("input",{type:"text",name:"lastName",className:"user-form-input",value:b.lastName,onChange:R,placeholder:"Enter last name",required:!0})]})]})]}),(0,c.jsxs)("div",{className:"user-form-grid",style:{marginTop:"20px"},children:[(0,c.jsxs)("div",{className:"user-form-group",children:[(0,c.jsxs)("label",{className:"user-form-label",children:[(0,c.jsx)("i",{className:"bi bi-envelope"}),P("emailLabel")," ",(0,c.jsx)("span",{className:"required",children:"*"})]}),(0,c.jsxs)("div",{className:"user-input-wrapper",children:[(0,c.jsx)("i",{className:"bi bi-envelope user-input-icon"}),(0,c.jsx)("input",{type:"email",name:"email",className:"user-form-input",value:b.email,onChange:R,placeholder:"user@slpa.lk",required:!0})]})]}),(0,c.jsxs)("div",{className:"user-form-group",children:[(0,c.jsxs)("label",{className:"user-form-label",children:[(0,c.jsx)("i",{className:"bi bi-hash"}),P("employeeIdLabel")," ",(0,c.jsx)("span",{className:"required",children:"*"})]}),(0,c.jsxs)("div",{className:"user-input-wrapper",children:[(0,c.jsx)("i",{className:"bi bi-hash user-input-icon"}),(0,c.jsx)("input",{type:"text",name:"employeeId",className:"user-form-input",value:b.employeeId,onChange:R,placeholder:"e.g., EMP001",required:!0})]})]})]})]}),(0,c.jsxs)("div",{className:"user-form-section",children:[(0,c.jsxs)("div",{className:"user-form-section-header",children:[(0,c.jsx)("div",{className:"user-form-section-icon",children:(0,c.jsx)("i",{className:"bi bi-building"})}),(0,c.jsx)("span",{className:"user-form-section-title",children:"Organization & Role"})]}),(0,c.jsxs)("div",{className:"user-form-grid",children:[(0,c.jsxs)("div",{className:"user-form-group",children:[(0,c.jsxs)("label",{className:"user-form-label",children:[(0,c.jsx)("i",{className:"bi bi-diagram-3"}),P("divisionLabel")," ",(0,c.jsx)("span",{className:"required",children:"*"})]}),(0,c.jsxs)("div",{className:"user-input-wrapper",children:[(0,c.jsx)("i",{className:"bi bi-diagram-3 user-input-icon"}),(0,c.jsxs)("select",{name:"division",className:"user-form-select",value:b.division,onChange:R,required:!0,children:[(0,c.jsx)("option",{value:"",children:P("selectDivision")}),f.map(e=>(0,c.jsx)("option",{value:e.name,children:e.name},e._id||e.id||e.name))]})]})]}),(0,c.jsxs)("div",{className:"user-form-group",children:[(0,c.jsxs)("label",{className:"user-form-label",children:[(0,c.jsx)("i",{className:"bi bi-shield-check"}),P("roleLabel")," ",(0,c.jsx)("span",{className:"required",children:"*"})]}),(0,c.jsxs)("div",{className:"user-input-wrapper",children:[(0,c.jsx)("i",{className:"bi bi-shield-check user-input-icon"}),(0,c.jsxs)("select",{name:"role",className:"user-form-select",value:b.role,onChange:R,required:!0,children:[(0,c.jsx)("option",{value:"",children:"-- Choose a role --"}),A.map(e=>(0,c.jsxs)("option",{value:e.value,children:[e.label," - ",e.description||"No description"]},e.value))]})]})]})]}),(0,c.jsx)("div",{className:"user-form-grid single",style:{marginTop:"20px"},children:(0,c.jsxs)("div",{className:"user-form-group",children:[(0,c.jsxs)("label",{className:"user-form-label",children:[(0,c.jsx)("i",{className:"bi bi-collection"}),P("sectionLabel")]}),(0,c.jsxs)("div",{className:"user-input-wrapper",children:[(0,c.jsx)("i",{className:"bi bi-collection user-input-icon"}),(0,c.jsxs)("select",{name:"section",className:"user-form-select",value:b.section,onChange:R,disabled:!b.division,children:[(0,c.jsx)("option",{value:"",children:b.division?0===w.length?"No sections available":P("selectSection"):"Select a division first"}),w.map(e=>(0,c.jsx)("option",{value:e.name,children:M(e.name)},e._id||e.id||e.name))]})]})]})}),b.section&&I.length>0&&(0,c.jsx)("div",{className:"user-form-grid single",style:{marginTop:"20px"},children:(0,c.jsxs)("div",{className:"user-form-group",children:[(0,c.jsxs)("label",{className:"user-form-label",children:[(0,c.jsx)("i",{className:"bi bi-diagram-3"}),"Sub-Section"]}),(0,c.jsxs)("div",{className:"user-input-wrapper",children:[(0,c.jsx)("i",{className:"bi bi-diagram-3 user-input-icon"}),(0,c.jsxs)("select",{name:"subsection",className:"user-form-select",value:b.subsection,onChange:R,children:[(0,c.jsx)("option",{value:"",children:"Select Sub-Section (Optional)"}),I.map(e=>(0,c.jsx)("option",{value:e.code,children:e.name},e._id||e.id))]})]})]})})]}),(0,c.jsxs)("div",{className:"user-form-section",children:[(0,c.jsxs)("div",{className:"user-form-section-header",children:[(0,c.jsx)("div",{className:"user-form-section-icon",children:(0,c.jsx)("i",{className:"bi bi-shield-lock"})}),(0,c.jsx)("span",{className:"user-form-section-title",children:"Security"})]}),(0,c.jsxs)("div",{className:"user-form-grid",children:[(0,c.jsxs)("div",{className:"user-form-group",children:[(0,c.jsxs)("label",{className:"user-form-label",children:[(0,c.jsx)("i",{className:"bi bi-key"}),P("passwordLabel")," ",!v&&(0,c.jsx)("span",{className:"required",children:"*"})]}),(0,c.jsxs)("div",{className:"user-input-wrapper",children:[(0,c.jsx)("i",{className:"bi bi-lock user-input-icon"}),(0,c.jsx)("input",{type:"password",name:"password",className:"user-form-input",value:b.password,onChange:R,placeholder:v?"Leave blank to keep current":"Enter password",required:!v,minLength:"1"})]})]}),(0,c.jsxs)("div",{className:"user-form-group",children:[(0,c.jsxs)("label",{className:"user-form-label",children:[(0,c.jsx)("i",{className:"bi bi-key-fill"}),P("confirmPasswordLabel")," ",!v&&(0,c.jsx)("span",{className:"required",children:"*"})]}),(0,c.jsxs)("div",{className:"user-input-wrapper",children:[(0,c.jsx)("i",{className:"bi bi-lock-fill user-input-icon"}),(0,c.jsx)("input",{type:"password",name:"confirmPassword",className:"user-form-input",value:b.confirmPassword,onChange:R,placeholder:v?"Leave blank to keep current":"Confirm password",required:!v,minLength:"1"})]})]})]})]})]}),(0,c.jsxs)("div",{className:"user-modal-footer",children:[(0,c.jsxs)("button",{type:"button",className:"user-btn user-btn-cancel",onClick:()=>h(!1),children:[(0,c.jsx)("i",{className:"bi bi-x-circle"}),P("cancel")]}),(0,c.jsxs)("button",{type:"submit",className:"user-btn user-btn-submit",disabled:!$&&!v,title:$||v?"":"You do not have permission to add users",children:[(0,c.jsx)("i",{className:"bi "+(v?"bi-check-circle-fill":"bi-plus-circle-fill")}),P(v?"updateUser":$?"addUser":"noPermissionAddUser")]})]})]})]})})]}):(0,c.jsxs)("div",{className:"user-management",children:[(0,c.jsx)(l.A,{title:P("userManagement"),subtitle:"User access denied",icon:"bi-people"}),(0,c.jsx)("div",{className:"professional-card",children:(0,c.jsx)("div",{className:"no-data",children:(0,c.jsx)("p",{children:P("noPermissionViewUsers")})})})]})}}}]);
//# sourceMappingURL=723.5422c8fc.chunk.js.map