{"version":3,"file":"static/js/12.aefe2e0a.chunk.js","mappings":"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","sources":["components/dashboard/RoleAccessManagement.jsx","components/common/ModernAlert.jsx"],"sourcesContent":["\r\nimport React, { useState, useEffect, useContext } from 'react';\r\nimport { Form } from 'react-bootstrap';\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport { showModernAlert } from '../common/ModernAlert';\r\nimport RoleManagement from './RoleManagement';\r\nimport './RoleAccessManagement.css';\r\nimport PageHeader from './PageHeader';\r\n\r\nconst RoleAccessManagement = ({ onBack }) => {\r\n  const { user, hasPermission } = useContext(AuthContext);\r\n  const isSuperAdmin = user?.role === 'super_admin';\r\n\r\n  const [roles, setRoles] = useState([]);\r\n  const [permissionCatalog, setPermissionCatalog] = useState([]);\r\n  const [selectedRole, setSelectedRole] = useState('');\r\n  const [formData, setFormData] = useState({});\r\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\r\n  const [showConfirm, setShowConfirm] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showRoleManagement, setShowRoleManagement] = useState(false);\r\n  const [isRefreshing, setIsRefreshing] = useState(false);\r\n  const [savingToggles, setSavingToggles] = useState({}); // keyed by `${category}_${id}`\r\n  const isSavingAny = Object.keys(savingToggles || {}).length > 0;\r\n\r\n  useEffect(() => {\r\n    fetchRoles();\r\n    fetchPermissionCatalog();\r\n\r\n    // Listen for role updates from Role Management component\r\n    const handleRoleAdded = () => {\r\n      fetchRoles(true); // Refresh roles when a new role is added\r\n    };\r\n\r\n    const handleRoleUpdated = () => {\r\n      fetchRoles(true); // Refresh roles when a role is updated\r\n    };\r\n\r\n    const handleRoleDeleted = () => {\r\n      fetchRoles(true); // Refresh roles when a role is deleted\r\n      setSelectedRole(''); // Clear selection if current role was deleted\r\n    };\r\n\r\n    // Add event listeners\r\n    window.addEventListener('roleAdded', handleRoleAdded);\r\n    window.addEventListener('roleUpdated', handleRoleUpdated);\r\n    window.addEventListener('roleDeleted', handleRoleDeleted);\r\n\r\n    // Cleanup event listeners\r\n    return () => {\r\n      window.removeEventListener('roleAdded', handleRoleAdded);\r\n      window.removeEventListener('roleUpdated', handleRoleUpdated);\r\n      window.removeEventListener('roleDeleted', handleRoleDeleted);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (selectedRole) {\r\n      const role = roles.find(r => r.value === selectedRole);\r\n      // Map legacy permissions: if 'subsections' contains transfer/recall but 'transfer_recall' is empty,\r\n      // migrate those flags into the 'transfer_recall' category for UI consumption (no DB migration).\r\n      const perms = role?.permissions || {};\r\n      const mapped = { ...perms };\r\n      if (perms.subsections && (perms.subsections.transfer || perms.subsections.recall) && !perms.transfer_recall) {\r\n        mapped.transfer_recall = {\r\n          transfer: !!perms.subsections.transfer,\r\n          recall: !!perms.subsections.recall\r\n        };\r\n      }\r\n      setFormData(mapped);\r\n    }\r\n  }, [selectedRole, roles]);\r\n\r\n  // Auto-refresh roles every 30 seconds when component is active.\r\n  // Do NOT auto-refresh while a role is selected or while the user is actively saving toggles,\r\n  // to avoid interrupting the user's current edits.\r\n  useEffect(() => {\r\n    // Only refresh when on Role Access Management view and user is not interacting\r\n    if (!showRoleManagement && !selectedRole && !isSavingAny) {\r\n      const interval = setInterval(() => {\r\n        fetchRoles();\r\n      }, 30000); // Refresh every 30 seconds\r\n\r\n      return () => clearInterval(interval);\r\n    }\r\n    // If conditions not met, ensure any previous interval is cleared by returning noop\r\n    return () => {};\r\n  }, [showRoleManagement, selectedRole, isSavingAny]);\r\n\r\n  // Permission checks\r\n  // Permission checks\r\n  const hasViewRolesPermission = () => {\r\n    if (isSuperAdmin) return true;\r\n    // Check multiple possible keys where view-roles might be stored\r\n    return (\r\n      hasPermission('role_management.view_roles') ||\r\n      hasPermission('role_management.view') ||\r\n      hasPermission('view_roles') ||\r\n      hasPermission('roles.read') ||\r\n      hasPermission('roles.view')\r\n    );\r\n  };\r\n\r\n  const hasRoleReadPermission = () => hasViewRolesPermission();\r\n\r\n  // Allow users who have explicit permission-management update rights\r\n  // to modify role permissions as well (in addition to roles.update).\r\n  const hasRoleUpdatePermission = () => isSuperAdmin || hasPermission('update_role') || hasPermission('roles.update') || hasPermission('permission_management.manage_permission');\r\n\r\n  const hasRoleManageReadPermission = () => hasViewRolesPermission();\r\n\r\n  // Fetch roles from backend\r\n  const fetchRoles = async (showRefreshIndicator = false) => {\r\n    try {\r\n      if (showRefreshIndicator) setIsRefreshing(true);\r\n      setLoading(true);\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch('http://localhost:5000/api/roles', {\r\n        headers: {\r\n          ...(token ? { 'Authorization': `Bearer ${token}` } : {})\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setRoles(data.data || []);\r\n      } else {\r\n        console.error('Failed to fetch roles');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching roles:', error);\r\n    } finally {\r\n      setLoading(false);\r\n      if (showRefreshIndicator) {\r\n        setTimeout(() => setIsRefreshing(false), 500); // Show indicator for 500ms\r\n      }\r\n    }\r\n  };\r\n\r\n  // Fetch permission catalog\r\n  const fetchPermissionCatalog = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch('http://localhost:5000/api/permissions/catalog', {\r\n        headers: {\r\n          ...(token ? { 'Authorization': `Bearer ${token}` } : {})\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setPermissionCatalog(data.data || []);\r\n      } else {\r\n        console.error('Failed to fetch permission catalog');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching permission catalog:', error);\r\n    }\r\n  };\r\n\r\n  // Stats\r\n  const visiblePermissionCatalog = (() => {\r\n    const baseMapped = permissionCatalog.map(cat => {\r\n      if (cat.category === 'divisions' || cat.category === 'sections' || cat.category === 'employees') {\r\n        // Only show the 'read' permission for divisions and sections (view only)\r\n        return { ...cat, permissions: (cat.permissions || []).filter(p => p.id === 'read') };\r\n      }\r\n      if (cat.category === 'reports') {\r\n        // Define explicit report subsections and actions as requested.\r\n        // These are the only subsections shown in the Report Management card.\r\n        return {\r\n          ...cat,\r\n          permissions: [\r\n            { id: 'attendance_generate', name: 'Attendance Report - Generate Report' },\r\n            { id: 'attendance_download', name: 'Attendance Report - Download Report' },\r\n            { id: 'audit_generate', name: 'Audit Report - Generate Report' },\r\n            { id: 'meal_generate', name: 'Meal Report - Generate Report' },\r\n            { id: 'view_reports', name: 'View Reports' }\r\n          ]\r\n        };\r\n      }\r\n      if (cat.category === 'settings') {\r\n        // Explicit system settings subsections (profile update moved to users)\r\n        return {\r\n          ...cat,\r\n          permissions: [\r\n            { id: 'settings_view', name: 'View Settings' },\r\n            { id: 'settings_general', name: 'Change General Settings' },\r\n            { id: 'settings_appearance', name: 'Change Appearance' },\r\n            { id: 'settings_security', name: 'Change Security' }\r\n          ]\r\n        };\r\n      }\r\n      if (cat.category === 'subsections') {\r\n        // For subsections, only show create/read/update/delete (no transfer/recall here)\r\n        return { ...cat, permissions: (cat.permissions || []).filter(p => ['create', 'read', 'update', 'delete'].includes(p.id)) };\r\n      }\r\n      if (cat.category === 'transfer_recall') {\r\n        // Transfer & Recall card only shows transfer and recall actions\r\n        return { ...cat, permissions: (cat.permissions || []).filter(p => ['transfer', 'recall'].includes(p.id)) };\r\n      }\r\n      return cat;\r\n    });\r\n\r\n    // If backend doesn't expose 'subsections' yet, append a default category\r\n    const base = baseMapped.slice();\r\n    const hasSubsections = base.some(c => c.category === 'subsections');\r\n    if (!hasSubsections) {\r\n      base.push({\r\n        category: 'subsections',\r\n        name: 'Sub-Section Management',\r\n        permissions: [\r\n          { id: 'create', name: 'Create Sub-Sections' },\r\n          { id: 'read', name: 'View Sub-Sections' },\r\n          { id: 'update', name: 'Update Sub-Sections' },\r\n          { id: 'delete', name: 'Delete Sub-Sections' }\r\n        ]\r\n      });\r\n    }\r\n\r\n    // Add Transfer & Recall card fallback if backend doesn't expose it\r\n    const hasTransferRecall = base.some(c => c.category === 'transfer_recall');\r\n    if (!hasTransferRecall) {\r\n      base.push({\r\n        category: 'transfer_recall',\r\n        name: 'Transfer & Recall Management',\r\n        permissions: [\r\n          { id: 'transfer', name: 'Transfer Employee to Sub-Section' },\r\n          { id: 'recall', name: 'Recall Transferred Employee' }\r\n        ]\r\n      });\r\n    }\r\n\r\n    // Ensure 'sections' and 'employees' are adjacent so they appear on the same row\r\n    const sectionsIndex = base.findIndex(c => c.category === 'sections');\r\n    const employeesIndex = base.findIndex(c => c.category === 'employees');\r\n    if (sectionsIndex !== -1 && employeesIndex !== -1 && Math.abs(sectionsIndex - employeesIndex) !== 1) {\r\n      // Pull out employees and insert right after sections\r\n      const emp = base.splice(employeesIndex, 1)[0];\r\n      const insertAt = base.findIndex(c => c.category === 'sections') + 1;\r\n      base.splice(insertAt, 0, emp);\r\n    }\r\n\r\n    // Remove Attendance Management card entirely per request\r\n    // Also remove any existing legacy 'roles' card so we can replace it\r\n    // with two separate cards: Role Management and Permission Management\r\n    const filtered = base.filter(c => c.category !== 'attendance' && c.category !== 'roles');\r\n\r\n    // Append new Role Management and Permission Management cards\r\n    const hasRoleManagement = filtered.some(c => c.category === 'role_management');\r\n    if (!hasRoleManagement) {\r\n      filtered.push({\r\n        category: 'role_management',\r\n        name: 'Role Management',\r\n        permissions: [\r\n          { id: 'create_role', name: 'Create Role' },\r\n          { id: 'update_role', name: 'Update Role' },\r\n          { id: 'delete_role', name: 'Delete Role' },\r\n          { id: 'view_roles', name: 'View Roles' }\r\n        ]\r\n      });\r\n    }\r\n\r\n    const hasPermissionManagement = filtered.some(c => c.category === 'permission_management');\r\n    if (!hasPermissionManagement) {\r\n      filtered.push({\r\n        category: 'permission_management',\r\n        name: 'Permission Management',\r\n        permissions: [\r\n          { id: 'manage_permission', name: 'Manage Permission' }\r\n        ]\r\n      });\r\n    }\r\n\r\n    return filtered;\r\n  })();\r\n\r\n  const getTotalAvailablePermissions = () =>\r\n    visiblePermissionCatalog.reduce((sum, cat) => sum + (cat.permissions?.length || 0), 0);\r\n\r\n  const getTotalEnabledPermissions = () => {\r\n    let enabled = 0;\r\n    visiblePermissionCatalog.forEach(cat => {\r\n      const perms = cat.permissions || [];\r\n      perms.forEach(p => {\r\n        if (formData[cat.category]?.[p.id]) enabled++;\r\n      });\r\n    });\r\n    return enabled;\r\n  };\r\n\r\n  // Helper functions for better UX\r\n  const getPermissionIcon = (category) => {\r\n    const icons = {\r\n      users: 'bi-people-fill',\r\n      attendance: 'bi-clock-fill',\r\n      reports: 'bi-bar-chart-fill',\r\n      divisions: 'bi-building-fill',\r\n      sections: 'bi-diagram-3-fill',\r\n      subsections: 'bi-list-check',\r\n      transfer_recall: 'bi-arrow-left-right',\r\n      roles: 'bi-shield-fill-check',\r\n      role_management: 'bi-people-fill',\r\n      permission_management: 'bi-key-fill',\r\n      settings: 'bi-gear-fill',\r\n      employees: 'bi-person-badge-fill'\r\n    };\r\n    return icons[category] || 'bi-gear-fill';\r\n  };\r\n\r\n  const getPermissionDescription = (category) => {\r\n    const descriptions = {\r\n      users: 'Manage user accounts, profiles, and authentication settings',\r\n      attendance: 'Track, monitor, and manage employee attendance records',\r\n      reports: 'Generate, view, and manage various system reports',\r\n      divisions: 'Create and manage organizational divisions and departments',\r\n      sections: 'Organize and manage different sections within divisions',\r\n      subsections: 'Create and manage sub-sections within sections',\r\n      transfer_recall: 'Manage transferring and recalling employees to and from sub-sections',\r\n      roles: 'Define user roles and assign permission levels',\r\n      role_management: 'Create, update, delete and view roles',\r\n      permission_management: 'Manage the permission catalog and assignments',\r\n      settings: 'Configure system-wide settings and preferences',\r\n      employees: 'Manage employee information and employment records'\r\n    };\r\n    return descriptions[category] || 'Manage related system features and data';\r\n  };\r\n\r\n  const getPermissionDetailDescription = (permissionId, category) => {\r\n    const descriptions = {\r\n      create: `Add new ${category === 'users' ? 'user accounts' : category === 'employees' ? 'employee records' : category === 'subsections' ? 'sub-section' : category}`,\r\n      read: category === 'reports'\r\n        ? 'Download and export existing reports'\r\n        : `View and browse existing ${category === 'users' ? 'user information' : category === 'employees' ? 'employee data' : category === 'subsections' ? 'sub-section' : category}`,\r\n      update: `Edit and modify existing ${category === 'users' ? 'user details' : category === 'employees' ? 'employee information' : category === 'subsections' ? 'sub-section' : category}`,\r\n      delete: `Remove and delete ${category === 'users' ? 'user accounts' : category === 'employees' ? 'employee records' : category === 'subsections' ? 'sub-section' : category}`,\r\n      transfer: `Transfer employee to ${category === 'subsections' || category === 'transfer_recall' ? 'sub-section' : 'that module'}`,\r\n      recall: `Recall transferred employees from ${category === 'subsections' || category === 'transfer_recall' ? 'sub-section' : 'that module'}`,\r\n      manage: `Full administrative access to ${category} management`,\r\n\r\n      // Report-specific permissions (new ids)\r\n      attendance_generate: 'Generate attendance reports for selected date ranges and filters',\r\n      attendance_download: 'Download/export attendance reports (CSV, PDF) for distribution',\r\n      audit_generate: 'Generate system audit reports showing activity and changes',\r\n      meal_generate: 'Generate meal reports for employee meal tracking',\r\n      view_reports: 'Browse and view available reports and their metadata',\r\n\r\n      // Settings-specific permissions\r\n      settings_general: 'Change general system settings (timezone, locale, defaults)',\r\n      settings_appearance: 'Change appearance options (theme, layout, branding)',\r\n      settings_security: 'Change security settings (password policies, 2FA, session rules)'\r\n      ,\r\n      settings_view: 'View system settings and read configuration without editing'\r\n    };\r\n    // Role / Permission management details\r\n    descriptions.create_role = 'Create new roles that can be assigned to users';\r\n    descriptions.update_role = 'Modify existing role details and assigned permissions';\r\n    descriptions.delete_role = 'Delete roles that are no longer needed';\r\n    descriptions.view_roles = 'View list of roles and their basic details';\r\n    descriptions.manage_permission = 'Manage the permission catalog and assignments (view and update)';\r\n    return descriptions[permissionId] || `Perform ${permissionId} operations`;\r\n  };\r\n\r\n\r\n  // Handlers\r\n  const handleRoleSelect = (e) => {\r\n    setSelectedRole(e.target.value);\r\n  };\r\n\r\n  const handlePermissionChange = async (category, id) => {\r\n    if (!hasRoleUpdatePermission()) return;\r\n    if (!selectedRole) return;\r\n\r\n    const roleObj = roles.find(r => r.value === selectedRole);\r\n    if (!roleObj) return;\r\n\r\n    const key = `${category}_${id}`;\r\n    const oldVal = !!formData[category]?.[id];\r\n\r\n    // Optimistic UI update\r\n    // Special handling: master switches act as a master. If they are being turned off,\r\n    // also clear other related permissions in the UI immediately.\r\n    if (category === 'settings' && id === 'settings_view' && oldVal === true) {\r\n      // user is unchecking settings_view -> clear other settings permissions\r\n      const settingsPerms = (visiblePermissionCatalog.find(c => c.category === 'settings')?.permissions) || [];\r\n      const cleared = {};\r\n      settingsPerms.forEach(p => {\r\n        cleared[p.id] = false;\r\n      });\r\n      setFormData(prev => ({ ...prev, [category]: { ...(prev[category] || {}), ...cleared } }));\r\n    } else if (category === 'subsections' && id === 'read' && oldVal === true) {\r\n      // user is unchecking subsections.read -> clear other subsection permissions\r\n      const subsPerms = (visiblePermissionCatalog.find(c => c.category === 'subsections')?.permissions) || [];\r\n      const cleared = {};\r\n      subsPerms.forEach(p => {\r\n        cleared[p.id] = false;\r\n      });\r\n      setFormData(prev => ({ ...prev, [category]: { ...(prev[category] || {}), ...cleared } }));\r\n    } else if (category === 'users' && id === 'read' && oldVal === true) {\r\n      // user is unchecking users.read -> clear other user permissions (create/update/delete)\r\n      const userPerms = (visiblePermissionCatalog.find(c => c.category === 'users')?.permissions) || [];\r\n      const cleared = {};\r\n      userPerms.forEach(p => {\r\n        cleared[p.id] = false;\r\n      });\r\n      setFormData(prev => ({ ...prev, [category]: { ...(prev[category] || {}), ...cleared } }));\r\n    } else if (category === 'reports' && id === 'view_reports' && oldVal === true) {\r\n      // user is unchecking view_reports -> clear all other report permissions\r\n      const reportPerms = (visiblePermissionCatalog.find(c => c.category === 'reports')?.permissions) || [];\r\n      const cleared = {};\r\n      reportPerms.forEach(p => {\r\n        cleared[p.id] = false;\r\n      });\r\n      setFormData(prev => ({ ...prev, [category]: { ...(prev[category] || {}), ...cleared } }));\r\n    } else if (category === 'reports' && id !== 'view_reports' && !oldVal === true) {\r\n      // user is trying to enable a report permission (not view_reports)\r\n      // Check if view_reports is enabled, if not, prevent the change\r\n      const hasViewReports = !!formData[category]?.['view_reports'];\r\n      if (!hasViewReports) {\r\n        // Show error message and don't allow the change\r\n        showModernAlert({\r\n          type: 'warning',\r\n          title: 'Prerequisite Required',\r\n          message: 'Cannot enable report permissions without \"View Reports\" permission. Please enable \"View Reports\" first.',\r\n          duration: 4000\r\n        });\r\n        return; // Don't proceed with the change\r\n      }\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [category]: {\r\n          ...prev[category],\r\n          [id]: !oldVal\r\n        }\r\n      }));\r\n    } else if (category === 'role_management' && id === 'view_roles' && oldVal === true) {\r\n      // user is unchecking view_roles -> clear other role permissions\r\n      const rolePerms = (visiblePermissionCatalog.find(c => c.category === 'role_management')?.permissions) || [];\r\n      const cleared = {};\r\n      rolePerms.forEach(p => {\r\n        cleared[p.id] = false;\r\n      });\r\n      setFormData(prev => ({ ...prev, [category]: { ...(prev[category] || {}), ...cleared } }));\r\n    } else if (category === 'role_management' && id !== 'view_roles' && !oldVal === true) {\r\n      // user is trying to enable a role permission (not view_roles)\r\n      // Check if view_roles is enabled, if not, prevent the change\r\n      const hasViewRoles = !!formData[category]?.['view_roles'];\r\n      if (!hasViewRoles) {\r\n        showModernAlert({\r\n          type: 'warning',\r\n          title: 'Prerequisite Required',\r\n          message: 'Cannot enable role-management permissions without \"View Roles\" permission. Please enable \"View Roles\" first.',\r\n          duration: 4000\r\n        });\r\n        return;\r\n      }\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [category]: {\r\n          ...prev[category],\r\n          [id]: !oldVal\r\n        }\r\n      }));\r\n    } else {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [category]: {\r\n          ...prev[category],\r\n          [id]: !oldVal\r\n        }\r\n      }));\r\n    }\r\n\r\n    // Mark this toggle as saving\r\n    setSavingToggles(s => ({ ...s, [key]: true }));\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      // Merge existing role permissions and apply the change\r\n      const mergedPermissions = { ...(roleObj.permissions || {}) };\r\n      mergedPermissions[category] = { ...(mergedPermissions[category] || {}) };\r\n\r\n      // If toggling a master permission off, clear other related permissions in the payload\r\n      if (category === 'settings' && id === 'settings_view' && oldVal === true) {\r\n        const settingsPerms = (visiblePermissionCatalog.find(c => c.category === 'settings')?.permissions) || [];\r\n        mergedPermissions[category] = mergedPermissions[category] || {};\r\n        settingsPerms.forEach(p => {\r\n          mergedPermissions[category][p.id] = false;\r\n        });\r\n      } else if (category === 'subsections' && id === 'read' && oldVal === true) {\r\n        const subsPerms = (visiblePermissionCatalog.find(c => c.category === 'subsections')?.permissions) || [];\r\n        mergedPermissions[category] = mergedPermissions[category] || {};\r\n        subsPerms.forEach(p => {\r\n          mergedPermissions[category][p.id] = false;\r\n        });\r\n      } else if (category === 'users' && id === 'read' && oldVal === true) {\r\n        const userPerms = (visiblePermissionCatalog.find(c => c.category === 'users')?.permissions) || [];\r\n        mergedPermissions[category] = mergedPermissions[category] || {};\r\n        userPerms.forEach(p => {\r\n          mergedPermissions[category][p.id] = false;\r\n        });\r\n      } else if (category === 'reports' && id === 'view_reports' && oldVal === true) {\r\n        const reportPerms = (visiblePermissionCatalog.find(c => c.category === 'reports')?.permissions) || [];\r\n        mergedPermissions[category] = mergedPermissions[category] || {};\r\n        reportPerms.forEach(p => {\r\n          mergedPermissions[category][p.id] = false;\r\n        });\r\n      } else if (category === 'role_management' && id === 'view_roles' && oldVal === true) {\r\n        const rolePerms = (visiblePermissionCatalog.find(c => c.category === 'role_management')?.permissions) || [];\r\n        mergedPermissions[category] = mergedPermissions[category] || {};\r\n        rolePerms.forEach(p => {\r\n          mergedPermissions[category][p.id] = false;\r\n        });\r\n      } else {\r\n        mergedPermissions[category][id] = !oldVal;\r\n      }\r\n\r\n      const response = await fetch(`http://localhost:5000/api/permissions/roles/${roleObj._id}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...(token ? { 'Authorization': `Bearer ${token}` } : {})\r\n        },\r\n        body: JSON.stringify({ permissions: mergedPermissions })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        // Revert optimistic update on failure\r\n        setFormData(prev => ({\r\n          ...prev,\r\n          [category]: {\r\n            ...prev[category],\r\n            [id]: oldVal\r\n          }\r\n        }));\r\n        console.error('Failed to update permission toggle', await response.text());\r\n      } else {\r\n        // Update local roles list to reflect backend change\r\n        const data = await response.json().catch(() => ({}));\r\n        if (data && data.data) {\r\n          setRoles(prev => prev.map(r => (r._id === roleObj._id ? data.data : r)));\r\n          // Notify other components about permission change\r\n          window.dispatchEvent(new CustomEvent('permissionsChanged'));\r\n        }\r\n      }\r\n    } catch (err) {\r\n      // Revert optimistic update on error\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [category]: {\r\n          ...prev[category],\r\n          [id]: oldVal\r\n        }\r\n      }));\r\n      console.error('Error updating permission toggle:', err);\r\n    } finally {\r\n      setSavingToggles(s => {\r\n        const copy = { ...s };\r\n        delete copy[key];\r\n        return copy;\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSelectAll = () => {\r\n    const allEnabled = getTotalEnabledPermissions() !== getTotalAvailablePermissions();\r\n    const updated = { ...formData };\r\n    visiblePermissionCatalog.forEach(cat => {\r\n      updated[cat.category] = updated[cat.category] || {};\r\n      cat.permissions.forEach(p => {\r\n        updated[cat.category][p.id] = allEnabled;\r\n      });\r\n    });\r\n    setFormData(updated);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setShowConfirm(false);\r\n    const roleObj = roles.find(r => r.value === selectedRole);\r\n    if (!roleObj) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      // Preserve any permissions that are not shown in the UI (hidden permissions)\r\n      const mergedPermissions = { ...(roleObj.permissions || {}) };\r\n      Object.keys(formData).forEach(cat => {\r\n        mergedPermissions[cat] = { ...mergedPermissions[cat], ...formData[cat] };\r\n      });\r\n\r\n      await fetch(`http://localhost:5000/api/permissions/roles/${roleObj._id}`, {\r\n        method: 'PUT',\r\n        headers: { \r\n          'Content-Type': 'application/json',\r\n          ...(token ? { 'Authorization': `Bearer ${token}` } : {})\r\n        },\r\n        body: JSON.stringify({ permissions: mergedPermissions })\r\n      });\r\n      // Refresh local roles to reflect the change\r\n      await fetchRoles();\r\n      // Notify other parts of the app (AuthContext will poll/refresh current user)\r\n      window.dispatchEvent(new CustomEvent('permissionsChanged'));\r\n      setShowSuccessModal(true);\r\n    } catch (error) {\r\n      console.error('Error saving permissions:', error);\r\n      // On failure, try to re-sync\r\n      try { await fetchRoles(); } catch (err) { console.error('Error refreshing roles after failed save:', err); }\r\n    }\r\n  };\r\n\r\n  const openConfirm = (e) => { \r\n    e.preventDefault(); \r\n    setShowConfirm(true); \r\n  };\r\n\r\n  const confirmAndSave = async () => {\r\n    await handleSave();\r\n  };\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n\r\n  return (\r\n    <div className=\"role-access-wrapper\">\r\n      {/* Professional Section Header with Logo */}\r\n      <PageHeader\r\n        title=\"Role Access Management\"\r\n        subtitle=\"Configure permissions and access levels for each role\"\r\n        icon=\"bi-people-fill\"\r\n        onBack={onBack}\r\n        actions={\r\n          <button\r\n            className=\"btn-manage-roles\"\r\n            onClick={() => {\r\n              if (!hasViewRolesPermission()) return;\r\n              // Use the Dashboard's global navigate event to switch to the Role Management page\r\n              window.dispatchEvent(new CustomEvent('navigateTo', { detail: 'role-management' }));\r\n            }}\r\n            disabled={!hasViewRolesPermission()}\r\n            title={!hasViewRolesPermission() ? \"You need 'view_roles' or 'roles.read' access to manage roles\" : \"Manage Roles\"}\r\n          >\r\n            <i className=\"bi bi-gear\" style={{ marginRight: '6px', fontSize: '1.1rem' }}></i> Manage Roles\r\n          </button>\r\n        }\r\n      />\r\n          {hasRoleReadPermission() ? (\r\n            <>\r\n              <div className=\"stats-section\">\r\n                <div className=\"stats-item\">\r\n                  <span className=\"stats-number\">{roles.length}</span>\r\n                  <span className=\"stats-label\">Available Roles</span>\r\n                </div>\r\n                <div className=\"stats-item\">\r\n                  <span className=\"stats-number\">{getTotalAvailablePermissions()}</span>\r\n                  <span className=\"stats-label\">Available Permissions</span>\r\n                </div>\r\n                {selectedRole && (\r\n                  <div className=\"stats-item\">\r\n                    <span className=\"stats-number\">{getTotalEnabledPermissions()}</span>\r\n                    <span className=\"stats-label\">Granted Permissions</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"form-section\">\r\n                <label htmlFor=\"role\" className=\"form-label-modern\">\r\n                  <i className=\"bi bi-person-gear text-primary mr-2\"></i>Select Role to Manage\r\n                  {isRefreshing && <span className=\"refresh-indicator ml-2\"> Updating...</span>}\r\n                </label>\r\n                <Form.Select \r\n                  name=\"role\" \r\n                  id=\"role\" \r\n                  className=\"form-control-modern\" \r\n                  value={selectedRole}\r\n                  onChange={handleRoleSelect}\r\n                  disabled={!hasRoleUpdatePermission() || isRefreshing}\r\n                  title={!hasRoleUpdatePermission() ? 'You need \"Update Role Permissions\" access to change role selection' : ''}\r\n                >\r\n                  <option value=\"\">-- Choose a role to configure --</option>\r\n                  {roles.map(role => (\r\n                    <option key={role.value} value={role.value}>\r\n                      {role.label} - {role.description || 'No description'}\r\n                    </option>\r\n                  ))}\r\n                </Form.Select>\r\n                {selectedRole && (\r\n                  <small className=\"text-muted mt-2 d-block\">\r\n                    <i className=\"bi bi-info-circle mr-1\"></i>\r\n                    This will update permissions for users with the role: {roles.find(r => r.value === selectedRole)?.label || selectedRole}\r\n                  </small>\r\n                )}\r\n                {!hasRoleUpdatePermission() && (\r\n                  <div className=\"alert alert-warning mt-3\">\r\n                    <i className=\"bi bi-lock-fill mr-2\"></i>\r\n                    You have view-only access. To modify role permissions, you need the \"Update Role Permissions\" access.\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {selectedRole && (\r\n                <div className=\"permissions-container\">\r\n                  <div className=\"permissions-header\">\r\n                    <div className=\"permissions-title\">\r\n                      <h4>Configure Permissions for <span className=\"role-highlight\">{roles.find(r => r.value === selectedRole)?.label || selectedRole}</span></h4>\r\n                      <p className=\"permissions-subtitle\">Grant or revoke access to different system modules and features</p>\r\n                    </div>\r\n                    <div className=\"permissions-actions\">\r\n                      <button className=\"btn-toggle-all\" onClick={handleSelectAll}>\r\n                        <i className={`bi ${getTotalEnabledPermissions() === getTotalAvailablePermissions() ? 'bi-check-square' : 'bi-square'}`}></i>\r\n                        {getTotalEnabledPermissions() === getTotalAvailablePermissions() ? 'Unselect All' : 'Select All'}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"permissions-grid\">\r\n                    {visiblePermissionCatalog.map(category => (\r\n                      <div key={category.category} className=\"permission-card\">\r\n                        <div className=\"permission-card-header\">\r\n                          <div className=\"permission-icon\">\r\n                            <i className={getPermissionIcon(category.category)}></i>\r\n                          </div>\r\n                          <div className=\"permission-card-title\">\r\n                            <h5>{category.name}</h5>\r\n                            <p>{getPermissionDescription(category.category)}</p>\r\n                          </div>\r\n                          <div className=\"permission-status\">\r\n                            <span className=\"enabled-count\">\r\n                              {category.permissions.filter(p => formData[category.category]?.[p.id]).length}\r\n                            </span>\r\n                            <span className=\"total-count\">/{category.permissions.length}</span>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"permission-card-body\">\r\n                          {category.permissions.map(permission => {\r\n                            const isChecked = formData[category.category]?.[permission.id] || false;\r\n                            const toggleKey = `${category.category}_${permission.id}`;\r\n                            return (\r\n                              <div key={`${category.category}_${permission.id}`} className={`permission-toggle ${isChecked ? 'active' : ''}`}>\r\n                                <label className=\"permission-switch\">\r\n                                        <input\r\n                                          type=\"checkbox\"\r\n                                          checked={isChecked}\r\n                                          onChange={() => handlePermissionChange(category.category, permission.id)}\r\n                                          disabled={\r\n                                            !hasRoleUpdatePermission() ||\r\n                                            !!savingToggles[toggleKey] ||\r\n                                            // For settings: require 'settings_view' to be enabled before other settings can be toggled\r\n                                            (category.category === 'settings' && permission.id !== 'settings_view' && !formData?.settings?.settings_view) ||\r\n                                            // For subsections: require 'read' (view) before other subsection permissions can be toggled\r\n                                            (category.category === 'subsections' && permission.id !== 'read' && !formData?.subsections?.read) ||\r\n                                            // For users: require 'read' (view) before other user permissions can be toggled\r\n                                            (category.category === 'users' && permission.id !== 'read' && !formData?.users?.read) ||\r\n                                            // For role_management: require 'view_roles' before other role-management permissions can be toggled\r\n                                            (category.category === 'role_management' && permission.id !== 'view_roles' && !formData?.role_management?.view_roles)\r\n                                          }\r\n                                          title={\r\n                                            `${permission.name} - ${getPermissionDetailDescription(permission.id, category.category)}` +\r\n                                            (category.category === 'settings' && permission.id !== 'settings_view' && !formData?.settings?.settings_view ? '  Requires \"View Settings\" permission' : '') +\r\n                                            (category.category === 'subsections' && permission.id !== 'read' && !formData?.subsections?.read ? '  Requires \"View Sub-Sections\" permission' : '') +\r\n                                            (category.category === 'users' && permission.id !== 'read' && !formData?.users?.read ? '  Requires \"View Users\" permission' : '') +\r\n                                            (category.category === 'role_management' && permission.id !== 'view_roles' && !formData?.role_management?.view_roles ? '  Requires \"View Roles\" permission' : '')\r\n                                          }\r\n                                        />\r\n                                  <span className=\"slider\"></span>\r\n                                </label>\r\n                                <div className=\"permission-info\">\r\n                                  <span className=\"permission-name\">{permission.name}</span>\r\n                                  {savingToggles[toggleKey] && (\r\n                                    <span className=\"save-indicator ml-2\" title=\"Saving...\"></span>\r\n                                  )}\r\n                                  <span className=\"permission-desc\">{getPermissionDetailDescription(permission.id, category.category)}</span>\r\n                                </div>\r\n                              </div>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n\r\n                  <div className=\"permissions-footer\">\r\n                    <div className=\"permission-summary\">\r\n                      <div className=\"summary-stat\">\r\n                        <span className=\"stat-number\">{getTotalEnabledPermissions()}</span>\r\n                        <span className=\"stat-label\">permissions granted</span>\r\n                      </div>\r\n                      <div className=\"summary-stat\">\r\n                        <span className=\"stat-number\">{getTotalAvailablePermissions() - getTotalEnabledPermissions()}</span>\r\n                        <span className=\"stat-label\">permissions restricted</span>\r\n                      </div>\r\n                    </div>\r\n                    <button className=\"btn-save-permissions\" onClick={openConfirm} disabled={!hasRoleUpdatePermission() || isSavingAny}>\r\n                      <i className=\"bi bi-shield-check\"></i>\r\n                      {isSavingAny ? 'Applying...' : 'Save Permission Changes'}\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </>\r\n          ) : (\r\n            <div className=\"alert alert-warning mt-4\">\r\n              <i className=\"bi bi-lock-fill mr-2\"></i>\r\n              You do not have permission to view role access management. Contact a Super Admin for \"roles.read\" access.\r\n            </div>\r\n            )}\r\n\r\n      {/* Confirm Modal */}\r\n      {showConfirm && (\r\n        <div className=\"modal-overlay confirm-overlay\" onClick={() => setShowConfirm(false)}>\r\n          <div className=\"modal-content confirm-modal\" onClick={e => e.stopPropagation()}>\r\n            <div className=\"modal-header\">\r\n              <h4 className=\"confirm-title\">Confirm Save</h4>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <p>Are you sure you want to save these permission changes for <strong>{roles.find(r => r.value === selectedRole)?.label || selectedRole}</strong>?</p>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button className=\"btn-save-modern btn-secondary btn-confirm-cancel\" onClick={() => setShowConfirm(false)}>\r\n                Cancel\r\n              </button>\r\n              <button className=\"btn-save-modern btn-success btn-confirm-confirm\" onClick={confirmAndSave}>\r\n                Yes, Save\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Success Modal */}\r\n      {showSuccessModal && (\r\n        <div className=\"modal-overlay\" style={{ backgroundColor: 'rgba(0, 0, 0, 0.5)', zIndex: 9999 }}>\r\n          <div className=\"modal-content success-modal-content\" onClick={e => e.stopPropagation()} style={{ maxWidth: '400px', textAlign: 'center', border: '3px solid #2575fc', borderRadius: '15px', background: 'linear-gradient(135deg, #f8f9fa, #e9ecef)', boxShadow: '0 10px 30px rgba(37,117,252,0.15)' }}>\r\n            <div style={{ padding: '30px' }}>\r\n              <div style={{ fontSize: '48px', color: '#2575fc', marginBottom: '18px' }}>\r\n                <i className=\"bi bi-check-circle-fill\"></i>\r\n              </div>\r\n              <h2 style={{ color: '#2575fc', marginBottom: '12px', fontWeight: 'bold' }}>\r\n                Success!\r\n              </h2>\r\n              <p style={{ fontSize: '15px', color: '#495057', marginBottom: '18px', lineHeight: '1.5' }}>\r\n                Permissions updated for <strong>{roles.find(r => r.value === selectedRole)?.label || selectedRole}</strong>.\r\n              </p>\r\n              <button className=\"btn-save-modern btn-success\" onClick={() => setShowSuccessModal(false)} style={{ padding: '8px 24px', fontSize: '15px', fontWeight: 'bold' }}>\r\n                <i className=\"bi bi-check2\"></i> OK\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RoleAccessManagement;\r\n","import './ModernAlert.css';\r\n\r\n/**\r\n * Modern Alert/Notification System\r\n * Replaces basic alert() with beautiful, animated notifications\r\n * \r\n * Usage:\r\n * import { showModernAlert, showConfirmDialog } from './ModernAlert';\r\n * \r\n * showModernAlert({\r\n *   type: 'success',\r\n *   title: 'Success!',\r\n *   message: 'User created successfully',\r\n *   duration: 3000\r\n * });\r\n * \r\n * const confirmed = await showConfirmDialog({\r\n *   title: 'Delete User',\r\n *   message: 'Are you sure you want to delete this user?',\r\n *   confirmText: 'Delete',\r\n *   cancelText: 'Cancel',\r\n *   type: 'danger'\r\n * });\r\n */\r\n\r\nlet alertContainer = null;\r\n\r\n// Create alert container if it doesn't exist\r\nconst getAlertContainer = () => {\r\n  if (!alertContainer) {\r\n    alertContainer = document.createElement('div');\r\n    alertContainer.id = 'modern-alert-container';\r\n    alertContainer.className = 'modern-alert-container';\r\n    document.body.appendChild(alertContainer);\r\n  }\r\n  return alertContainer;\r\n};\r\n\r\n// Generate unique ID\r\nconst generateId = () => `alert-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n\r\n// Icons for different alert types\r\nconst getIcon = (type) => {\r\n  const icons = {\r\n    success: 'bi-check-circle-fill',\r\n    error: 'bi-x-circle-fill',\r\n    warning: 'bi-exclamation-triangle-fill',\r\n    info: 'bi-info-circle-fill',\r\n    question: 'bi-question-circle-fill'\r\n  };\r\n  return icons[type] || icons.info;\r\n};\r\n\r\n/**\r\n * Show a modern alert notification\r\n * @param {Object} options - Alert options\r\n * @param {string} options.type - Alert type: 'success', 'error', 'warning', 'info'\r\n * @param {string} options.title - Alert title\r\n * @param {string} options.message - Alert message\r\n * @param {number} options.duration - Duration in ms (default: 3000, 0 for persistent)\r\n * @param {boolean} options.showConfetti - Show confetti animation (success only)\r\n */\r\nexport const showModernAlert = ({\r\n  type = 'info',\r\n  title = '',\r\n  message = '',\r\n  duration = 3000,\r\n  showConfetti = false\r\n}) => {\r\n  const container = getAlertContainer();\r\n  const alertId = generateId();\r\n  \r\n  const alertEl = document.createElement('div');\r\n  alertEl.id = alertId;\r\n  alertEl.className = `modern-alert modern-alert-${type} modern-alert-enter`;\r\n  \r\n  alertEl.innerHTML = `\r\n    <div class=\"modern-alert-content\">\r\n      <div class=\"modern-alert-icon\">\r\n        <i class=\"bi ${getIcon(type)}\"></i>\r\n      </div>\r\n      <div class=\"modern-alert-body\">\r\n        ${title ? `<div class=\"modern-alert-title\">${title}</div>` : ''}\r\n        <div class=\"modern-alert-message\">${message}</div>\r\n      </div>\r\n      <button class=\"modern-alert-close\" onclick=\"this.closest('.modern-alert').remove()\">\r\n        <i class=\"bi bi-x\"></i>\r\n      </button>\r\n    </div>\r\n    <div class=\"modern-alert-progress\"></div>\r\n  `;\r\n  \r\n  container.appendChild(alertEl);\r\n  \r\n  // Trigger animation\r\n  setTimeout(() => {\r\n    alertEl.classList.remove('modern-alert-enter');\r\n    alertEl.classList.add('modern-alert-active');\r\n  }, 10);\r\n  \r\n  // Show confetti for success\r\n  if (showConfetti && type === 'success') {\r\n    triggerConfetti();\r\n  }\r\n  \r\n  // Auto remove after duration\r\n  if (duration > 0) {\r\n    const progressBar = alertEl.querySelector('.modern-alert-progress');\r\n    if (progressBar) {\r\n      progressBar.style.animationDuration = `${duration}ms`;\r\n    }\r\n    \r\n    setTimeout(() => {\r\n      removeAlert(alertId);\r\n    }, duration);\r\n  }\r\n  \r\n  return alertId;\r\n};\r\n\r\n/**\r\n * Show a confirmation dialog\r\n * @param {Object} options - Dialog options\r\n * @returns {Promise<boolean>} - True if confirmed, false if cancelled\r\n */\r\nexport const showConfirmDialog = ({\r\n  title = 'Confirm',\r\n  message = 'Are you sure?',\r\n  confirmText = 'Confirm',\r\n  cancelText = 'Cancel',\r\n  type = 'warning', // 'warning', 'danger', 'info'\r\n  showIcon = true\r\n}) => {\r\n  return new Promise((resolve) => {\r\n    const container = getAlertContainer();\r\n    const dialogId = generateId();\r\n    \r\n    const overlay = document.createElement('div');\r\n    overlay.id = dialogId;\r\n    overlay.className = 'modern-dialog-overlay modern-dialog-enter';\r\n    \r\n    overlay.innerHTML = `\r\n      <div class=\"modern-dialog modern-dialog-${type}\">\r\n        <div class=\"modern-dialog-content\">\r\n          ${showIcon ? `\r\n            <div class=\"modern-dialog-icon\">\r\n              <i class=\"bi ${getIcon(type === 'danger' ? 'error' : type)}\"></i>\r\n            </div>\r\n          ` : ''}\r\n          <div class=\"modern-dialog-body\">\r\n            <h3 class=\"modern-dialog-title\">${title}</h3>\r\n            <p class=\"modern-dialog-message\">${message}</p>\r\n          </div>\r\n        </div>\r\n        <div class=\"modern-dialog-footer\">\r\n          <button class=\"modern-btn modern-btn-cancel\" data-action=\"cancel\">\r\n            <i class=\"bi bi-x-circle\"></i>\r\n            ${cancelText}\r\n          </button>\r\n          <button class=\"modern-btn modern-btn-confirm modern-btn-${type}\" data-action=\"confirm\">\r\n            <i class=\"bi bi-check-circle\"></i>\r\n            ${confirmText}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    `;\r\n    \r\n    container.appendChild(overlay);\r\n    \r\n    // Trigger animation\r\n    setTimeout(() => {\r\n      overlay.classList.remove('modern-dialog-enter');\r\n      overlay.classList.add('modern-dialog-active');\r\n    }, 10);\r\n    \r\n    // Handle button clicks\r\n    overlay.addEventListener('click', (e) => {\r\n      if (e.target.closest('[data-action]')) {\r\n        const action = e.target.closest('[data-action]').dataset.action;\r\n        removeDialog(dialogId);\r\n        resolve(action === 'confirm');\r\n      } else if (e.target === overlay) {\r\n        // Click outside to cancel\r\n        removeDialog(dialogId);\r\n        resolve(false);\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\n/**\r\n * Show a loading dialog\r\n * @param {string} message - Loading message\r\n * @returns {string} - Dialog ID for later removal\r\n */\r\nexport const showLoadingDialog = (message = 'Processing...') => {\r\n  const container = getAlertContainer();\r\n  const dialogId = generateId();\r\n  \r\n  const overlay = document.createElement('div');\r\n  overlay.id = dialogId;\r\n  overlay.className = 'modern-dialog-overlay modern-dialog-enter';\r\n  \r\n  overlay.innerHTML = `\r\n    <div class=\"modern-dialog modern-dialog-loading\">\r\n      <div class=\"modern-dialog-content\">\r\n        <div class=\"modern-loading-spinner\">\r\n          <div class=\"spinner-border text-primary\" role=\"status\">\r\n            <span class=\"visually-hidden\">Loading...</span>\r\n          </div>\r\n        </div>\r\n        <p class=\"modern-dialog-message\">${message}</p>\r\n      </div>\r\n    </div>\r\n  `;\r\n  \r\n  container.appendChild(overlay);\r\n  \r\n  setTimeout(() => {\r\n    overlay.classList.remove('modern-dialog-enter');\r\n    overlay.classList.add('modern-dialog-active');\r\n  }, 10);\r\n  \r\n  return dialogId;\r\n};\r\n\r\n/**\r\n * Remove a specific alert\r\n */\r\nconst removeAlert = (alertId) => {\r\n  const alert = document.getElementById(alertId);\r\n  if (alert) {\r\n    alert.classList.remove('modern-alert-active');\r\n    alert.classList.add('modern-alert-exit');\r\n    setTimeout(() => {\r\n      alert.remove();\r\n    }, 300);\r\n  }\r\n};\r\n\r\n/**\r\n * Remove a specific dialog\r\n */\r\nconst removeDialog = (dialogId) => {\r\n  const dialog = document.getElementById(dialogId);\r\n  if (dialog) {\r\n    dialog.classList.remove('modern-dialog-active');\r\n    dialog.classList.add('modern-dialog-exit');\r\n    setTimeout(() => {\r\n      dialog.remove();\r\n    }, 300);\r\n  }\r\n};\r\n\r\n/**\r\n * Close a loading dialog\r\n */\r\nexport const closeLoadingDialog = (dialogId) => {\r\n  removeDialog(dialogId);\r\n};\r\n\r\n/**\r\n * Confetti animation for success\r\n */\r\nconst triggerConfetti = () => {\r\n  const confettiCount = 50;\r\n  const container = document.body;\r\n  \r\n  for (let i = 0; i < confettiCount; i++) {\r\n    const confetti = document.createElement('div');\r\n    confetti.className = 'confetti';\r\n    confetti.style.left = `${Math.random() * 100}%`;\r\n    confetti.style.animationDelay = `${Math.random() * 0.5}s`;\r\n    confetti.style.backgroundColor = getRandomColor();\r\n    container.appendChild(confetti);\r\n    \r\n    setTimeout(() => confetti.remove(), 3000);\r\n  }\r\n};\r\n\r\nconst getRandomColor = () => {\r\n  const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#6c5ce7', '#a29bfe', '#fd79a8'];\r\n  return colors[Math.floor(Math.random() * colors.length)];\r\n};\r\n\r\n"],"names":["_ref","_roles$find","_roles$find2","_roles$find3","_roles$find4","onBack","user","hasPermission","useContext","AuthContext","isSuperAdmin","role","roles","setRoles","useState","permissionCatalog","setPermissionCatalog","selectedRole","setSelectedRole","formData","setFormData","showSuccessModal","setShowSuccessModal","showConfirm","setShowConfirm","loading","setLoading","showRoleManagement","setShowRoleManagement","isRefreshing","setIsRefreshing","savingToggles","setSavingToggles","isSavingAny","Object","keys","length","useEffect","fetchRoles","fetchPermissionCatalog","handleRoleAdded","handleRoleUpdated","handleRoleDeleted","window","addEventListener","removeEventListener","find","r","value","perms","permissions","mapped","subsections","transfer","recall","transfer_recall","interval","setInterval","clearInterval","hasViewRolesPermission","hasRoleUpdatePermission","async","showRefreshIndicator","arguments","undefined","token","localStorage","getItem","response","fetch","headers","ok","data","json","console","error","setTimeout","visiblePermissionCatalog","base","map","cat","category","filter","p","id","name","includes","slice","some","c","push","sectionsIndex","findIndex","employeesIndex","Math","abs","emp","splice","insertAt","filtered","getTotalAvailablePermissions","reduce","sum","_cat$permissions","getTotalEnabledPermissions","enabled","forEach","_formData$cat$categor","getPermissionIcon","users","attendance","reports","divisions","sections","role_management","permission_management","settings","employees","getPermissionDescription","getPermissionDetailDescription","permissionId","descriptions","create","read","update","delete","manage","attendance_generate","attendance_download","audit_generate","meal_generate","view_reports","settings_general","settings_appearance","settings_security","settings_view","_jsx","children","_jsxs","className","PageHeader","title","subtitle","icon","actions","onClick","dispatchEvent","CustomEvent","detail","disabled","style","marginRight","fontSize","_Fragment","htmlFor","Form","Select","onChange","e","target","label","description","handleSelectAll","allEnabled","updated","_formData$category$ca","permission","_formData$category$ca2","_formData$settings","_formData$subsections","_formData$users","_formData$role_manage","_formData$settings2","_formData$subsections2","_formData$users2","_formData$role_manage2","isChecked","toggleKey","type","checked","_formData$category","roleObj","key","oldVal","_visiblePermissionCat","settingsPerms","cleared","prev","_visiblePermissionCat2","subsPerms","_visiblePermissionCat3","userPerms","_visiblePermissionCat4","reportPerms","_formData$category2","showModernAlert","message","duration","_visiblePermissionCat5","rolePerms","_formData$category3","s","mergedPermissions","_visiblePermissionCat6","_visiblePermissionCat7","_visiblePermissionCat8","_visiblePermissionCat9","_visiblePermissionCat0","_id","method","body","JSON","stringify","catch","text","err","copy","handlePermissionChange","view_roles","preventDefault","stopPropagation","handleSave","backgroundColor","zIndex","maxWidth","textAlign","border","borderRadius","background","boxShadow","padding","color","marginBottom","fontWeight","lineHeight","alertContainer","getAlertContainer","document","createElement","appendChild","generateId","Date","now","random","toString","substr","getIcon","icons","success","warning","info","question","showConfetti","container","alertId","alertEl","innerHTML","classList","remove","add","triggerConfetti","progressBar","querySelector","animationDuration","removeAlert","showConfirmDialog","_ref2","confirmText","cancelText","showIcon","Promise","resolve","dialogId","overlay","closest","action","dataset","removeDialog","alert","getElementById","dialog","i","confetti","left","animationDelay","getRandomColor","colors","floor"],"sourceRoot":""}