"use strict";(self.webpackChunktime_attendance_frontend=self.webpackChunktime_attendance_frontend||[]).push([[481],{83:(e,t,n)=>{n.d(t,{A:()=>o});n(43);var i=n(769),a=n(579);const o=e=>{let{title:t,subtitle:n,icon:o="bi-folder",actions:l,onBack:s}=e;return(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsxs)("button",{className:"back-arrow-btn",onClick:s,title:"Back to Dashboard",style:{marginBottom:"12px",background:"transparent",color:"#0f172a",border:"1px solid rgba(15,23,42,0.08)",width:"auto",padding:"8px 12px"},children:[(0,a.jsx)("i",{className:"bi bi-arrow-left"}),"\xa0",(0,a.jsx)("span",{style:{fontWeight:600},children:"Back"})]}),(0,a.jsxs)("div",{className:"page-header-banner",children:[(0,a.jsxs)("div",{className:"page-header-content",children:[(0,a.jsxs)("div",{className:"page-header-left",children:[(0,a.jsx)("div",{className:"page-header-icon",children:(0,a.jsx)("i",{className:`bi ${o}`})}),(0,a.jsxs)("div",{className:"page-header-text",children:[(0,a.jsx)("h1",{children:t}),n&&(0,a.jsx)("p",{children:n})]})]}),(0,a.jsxs)("div",{className:"page-header-right",children:[l&&(0,a.jsx)("div",{className:"page-header-actions",children:l}),(0,a.jsx)("div",{className:"page-header-logo",children:(0,a.jsx)("img",{src:i,alt:"Company Logo"})})]})]}),(0,a.jsxs)("div",{className:"page-header-decoration",children:[(0,a.jsx)("div",{className:"decoration-circle decoration-circle-1"}),(0,a.jsx)("div",{className:"decoration-circle decoration-circle-2"}),(0,a.jsx)("div",{className:"decoration-circle decoration-circle-3"})]})]})]})}},347:()=>{},481:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var i=n(43),a=n(715),o=(n(347),n(579));const l=(0,i.forwardRef)((e,t)=>{var n,a,l,s,r,d,p,c,m,h;let{reportData:u,getHeaders:g,formatRow:x,reportType:y,dateRange:f}=e;console.log("GroupReport - reportData:",{hasData:!!u,dataLength:null===u||void 0===u||null===(n=u.data)||void 0===n?void 0:n.length,hasDates:!(null===u||void 0===u||!u.dates),datesLength:null===u||void 0===u||null===(a=u.dates)||void 0===a?void 0:a.length,sampleEmployee:null===u||void 0===u||null===(l=u.data)||void 0===l?void 0:l[0],sampleDailyAttendance:null===u||void 0===u||null===(s=u.data)||void 0===s||null===(r=s[0])||void 0===r?void 0:r.dailyAttendance,firstDateKey:null===u||void 0===u||null===(d=u.dates)||void 0===d?void 0:d[0],firstDateData:null===u||void 0===u||null===(p=u.data)||void 0===p||null===(c=p[0])||void 0===c||null===(m=c.dailyAttendance)||void 0===m?void 0:m[null===u||void 0===u||null===(h=u.dates)||void 0===h?void 0:h[0]]}),(0,i.useImperativeHandle)(t,()=>({print:()=>{if(!u||!Array.isArray(u.data)||0===u.data.length)return void alert("No data to print.");const e=g(),t="attendance"===y?"History Transaction Report":"Meal Consumption Report",n="attendance"===y?"All Granted(ID & FP) Records":"All Meal Records",i=[];let a=Array.isArray(u.dates)&&u.dates.length>0?u.dates:[];if(0===a.length){const e=new Set;u.data.forEach(t=>{Array.isArray(t.punches)&&t.punches.forEach(t=>e.add(t.date||t.punchDate||t.date_)),t.dailyAttendance&&Object.keys(t.dailyAttendance).forEach(t=>e.add(t))}),a=Array.from(e).sort((e,t)=>new Date(e)-new Date(t))}a.forEach(e=>{u.data.forEach(t=>{if(Array.isArray(t.punches)&&t.punches.length)t.punches.filter(t=>String(t.date||t.punchDate||t.date_)===String(e)).forEach((n,a)=>{const o=n&&(n.scan_type||n.type||n.direction)?n.scan_type||n.type||n.direction:a%2===0?"IN":"OUT";i.push({employee_ID:t.employeeId||t.employee_ID||t.emp_no||t.empNo,employee_name:t.employeeName||t.employee_name||t.name,date_:e,time_:n.time||n.punchTime||n.time_||"",scan_type:o})});else if(t.dailyAttendance&&t.dailyAttendance[e]){const n=t.dailyAttendance[e];Array.isArray(n)&&n.length?n.forEach((n,a)=>{const o=n&&(n.scan_type||n.type||n.direction)?n.scan_type||n.type||n.direction:a%2===0?"IN":"OUT";i.push({employee_ID:t.employeeId||t.employee_ID||t.emp_no||t.empNo,employee_name:t.employeeName||t.employee_name||t.name,date_:e,time_:n.time||n.time_||"",scan_type:o,eventDescription:n.eventDescription||""})}):Array.isArray(n.punches)&&n.punches.length?n.punches.forEach((n,a)=>{const o=n&&(n.scan_type||n.type||n.direction)?n.scan_type||n.type||n.direction:a%2===0?"IN":"OUT";i.push({employee_ID:t.employeeId||t.employee_ID||t.emp_no||t.empNo,employee_name:t.employeeName||t.employee_name||t.name,date_:e,time_:n.time||n.time_||"",scan_type:o})}):(n.checkIn&&i.push({employee_ID:t.employeeId||t.employee_ID||t.emp_no||t.empNo,employee_name:t.employeeName||t.employee_name||t.name,date_:e,time_:n.checkIn,scan_type:"IN"}),n.checkOut&&i.push({employee_ID:t.employeeId||t.employee_ID||t.emp_no||t.empNo,employee_name:t.employeeName||t.employee_name||t.name,date_:e,time_:n.checkOut,scan_type:"OUT"}))}})}),i.sort((e,t)=>{const n=new Date(e.date_||""),i=new Date(t.date_||"");if(isNaN(n.getTime())||isNaN(i.getTime())){if((e.date_||"")<(t.date_||""))return-1;if((e.date_||"")>(t.date_||""))return 1}else{if(n<i)return-1;if(n>i)return 1}const a=String(e.employee_ID||""),o=String(t.employee_ID||"");if(a<o)return-1;if(a>o)return 1;const l=e.time_||"",s=t.time_||"";if(l<s)return-1;if(l>s)return 1;const r="IN"===(e.scan_type||"").toUpperCase(),d="IN"===(t.scan_type||"").toUpperCase();return r&&!d?-1:!r&&d?1:0});const o=i.map(e=>{const t={...e},n=new Date(e.date_);return t._punchDateKey=isNaN(n.getTime())?e.date_:n.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"2-digit"}).replace(/\//g,"-"),t}),l=Math.max(1,29),s=[];let r=[],d=null,p=null,c=0;o.forEach(e=>{const t=e._punchDateKey||e.date_||"";p!==t&&(p=t,r.push(`<tr style="background: #dfe7ff;"><td colspan="7" style="font-weight: 700; font-size: 11px; color: #000; text-align: left; padding: 10px 14px; border: 1px solid #0a0a0aff;">Date: ${t}</td></tr>`),c++,d=null);const n=x(e),i=`${e.employee_ID||e.employeeId||e.emp_no||e.empNo||""}||${t}`;d===i?(n.length>0&&(n[0]=""),n.length>1&&(n[1]=""),n.length>2&&(n[2]=""),n.length>3&&(n[3]="")):d=i,r.push(`<tr>${n.map((e,t)=>`<td style="border: 1px solid #000; padding: 4px 6px; text-align: left; font-size: 11px; white-space: pre-line;">${0===t?"<strong>"+e+"</strong>":e}</td>`).join("")}</tr>`),c++,c>=l&&r.length>0&&(s.push(r.slice()),r=[],c=0,d=null)}),r.length>0&&s.push(r.slice());const m=s.length||1,h=`<!DOCTYPE html><html><head><meta charset="utf-8"/><title>${t}</title><style>\n        body{font-family:'Courier New',monospace;font-size:11px;margin:20px;padding:24px 24px 0 24px}\n        table{width:100%;border-collapse:collapse;margin-bottom:20px}\n  th,td{border:0.5px solid #000;padding:4px 6px;text-align:left}\n  th{background:#f5f5f5;font-weight:bold;font-size:12px}\n        td{font-size:11px;white-space:pre-line}\n        @media print{@page{margin:0.5in;size:landscape}body{margin:0}thead{display:table-header-group!important}@page{margin-top:0;margin-bottom:0;margin-left:0;margin-right:0}body::before,body::after{display:none!important}}\n      </style></head><body>${s.map((i,a)=>{return o=i,`\n        <div class="common-header" style="page-break-before: ${(l=a+1)>1?"always":"auto"}; width:100%;">\n          <div class="report-header" style="padding:8px 0; margin-bottom:6px;">\n            <div class="header-content" style="max-width:1200px; margin:0 auto; padding:0 12px; text-align:left; display:flex; justify-content:space-between; align-items:flex-start;">\n              <div style="max-width:70%;">\n                <h1 style="margin:0; display:flex; align-items:center; gap:8px; font-family: 'Courier New', monospace; font-size:14px;">${t}</h1>\n                <div class="header-subtitle" style="font-size:11px; margin-top:4px;"><strong>${n}</strong></div>\n                <div style="height:8px">&nbsp;</div>\n                <div class="date-range" style="margin-top:6px; font-size:11px;"><strong>Date From :</strong> ${f.startDate} <strong>To :</strong> ${f.endDate}</div>\n              </div>\n              <div style="text-align:left; font-size:11px;" class="print-meta">\n                <div style="font-size:11px">Printed Date : ${(new Date).toLocaleDateString()}</div>\n                <div style="font-size:11px">Printed Time : ${(new Date).toLocaleTimeString()}</div>\n                <div style="font-size:11px">Page ${l} of ${m}</div>\n              </div>\n            </div>\n          </div>\n          <div class="header-content" style="max-width:1200px; margin:0 auto; padding:0 12px;">\n            <table style="width:100%; border-collapse: collapse;">\n              <thead>\n                <tr>${e.map(e=>`<th style="font-size:12px; padding:4px 2px; border:0.5px solid #000; text-align:left;">${e}</th>`).join("")}</tr>\n              </thead>\n              <tbody>\n                ${o.join("")}\n              </tbody>\n            </table>\n          </div>\n          ${l===m?'\n            <div style="margin-top: 60px; width: 100%;">\n              <table style="width:100%; border-collapse: collapse; border: none;">\n                <tbody>\n                  <tr>\n                    <td style="width:15%; vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;">Date</td>\n                    <td style="width:35%; vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;"><span style="display:inline-block; font-family: \'Courier New\', monospace; font-size:9px; letter-spacing:1px; line-height:1;">....................</span></td>\n                    <td style="width:15%; vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;">Date</td>\n                    <td style="width:35%; vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;"><span style="display:inline-block; font-family: \'Courier New\', monospace; font-size:9px; letter-spacing:1px; line-height:1;">....................</span></td>\n                  </tr>\n                  <tr>\n                    <td style="vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;">Authorized Signature 1</td>\n                    <td style="vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;"><span style="display:inline-block; font-family: \'Courier New\', monospace; font-size:9px; letter-spacing:1px; line-height:1;">....................</span></td>\n                    <td style="vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;">Authorized Signature 2</td>\n                    <td style="vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;"><span style="display:inline-block; font-family: \'Courier New\', monospace; font-size:9px; letter-spacing:1px; line-height:1;">....................</span></td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          ':""}\n        </div>`;var o,l}).join("")}</body></html>`,b=window.open("","_blank","width=900,height=700");b?(b.document.open(),b.document.write(h),b.document.close(),setTimeout(()=>{b.focus(),b.print()},500)):alert("Pop-up blocked! Please allow pop-ups for this site to print.")}}));const b=g(),v=[];if(u&&Array.isArray(u.data)){const e=[];let t=Array.isArray(u.dates)&&u.dates.length>0?u.dates:[];if(0===t.length){const e=new Set;u.data.forEach(t=>{Array.isArray(t.punches)&&t.punches.forEach(t=>e.add(t.date||t.punchDate||t.date_)),t.dailyAttendance&&Object.keys(t.dailyAttendance).forEach(t=>e.add(t))}),t=Array.from(e).sort((e,t)=>new Date(e)-new Date(t))}t.forEach(t=>{u.data.forEach(n=>{if(Array.isArray(n.punches)&&n.punches.length)n.punches.filter(e=>String(e.date||e.punchDate||e.date_)===String(t)).forEach((i,a)=>{const o=i&&(i.scan_type||i.type||i.direction)?i.scan_type||i.type||i.direction:a%2===0?"IN":"OUT";e.push({employee_ID:n.employeeId||n.employee_ID||n.emp_no||n.empNo,employee_name:n.employeeName||n.employee_name||n.name,date_:t,time_:i.time||i.punchTime||i.time_||"",scan_type:o})});else if(n.dailyAttendance&&n.dailyAttendance[t]){const i=n.dailyAttendance[t];Array.isArray(i)&&i.length?i.forEach((i,a)=>{const o=i&&(i.scan_type||i.type||i.direction)?i.scan_type||i.type||i.direction:a%2===0?"IN":"OUT";e.push({employee_ID:n.employeeId||n.employee_ID||n.emp_no||n.empNo,employee_name:n.employeeName||n.employee_name||n.name,date_:t,time_:i.time||i.time_||"",scan_type:o,eventDescription:i.eventDescription||""})}):Array.isArray(i.punches)&&i.punches.length?i.punches.forEach((i,a)=>{const o=i&&(i.scan_type||i.type||i.direction)?i.scan_type||i.type||i.direction:a%2===0?"IN":"OUT";e.push({employee_ID:n.employeeId||n.employee_ID||n.emp_no||n.empNo,employee_name:n.employeeName||n.employee_name||n.name,date_:t,time_:i.time||i.time_||"",scan_type:o})}):(i.checkIn&&e.push({employee_ID:n.employeeId||n.employee_ID||n.emp_no||n.empNo,employee_name:n.employeeName||n.employee_name||n.name,date_:t,time_:i.checkIn,scan_type:"IN"}),i.checkOut&&e.push({employee_ID:n.employeeId||n.employee_ID||n.emp_no||n.empNo,employee_name:n.employeeName||n.employee_name||n.name,date_:t,time_:i.checkOut,scan_type:"OUT"}))}})}),e.sort((e,t)=>{const n=new Date(e.date_||""),i=new Date(t.date_||"");if(isNaN(n.getTime())||isNaN(i.getTime())){if((e.date_||"")<(t.date_||""))return-1;if((e.date_||"")>(t.date_||""))return 1}else{if(n<i)return-1;if(n>i)return 1}const a=String(e.employee_ID||""),o=String(t.employee_ID||"");if(a<o)return-1;if(a>o)return 1;const l=e.time_||"",s=t.time_||"";if(l<s)return-1;if(l>s)return 1;const r="IN"===(e.scan_type||"").toUpperCase(),d="IN"===(t.scan_type||"").toUpperCase();return r&&!d?-1:!r&&d?1:0});let n=null,i=null,a=0;for(let l=0;l<e.length;l++){const t=e[l],s=t.date_||"";i!==s&&(v.push((0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:7,style:{background:"#dfe7ff",fontWeight:700,fontSize:"11px",color:"#000",textAlign:"left",padding:"10px 14px",border:"1px solid #c7d2e8"},children:`Date: ${new Date(s).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"2-digit"}).replace(/\//g,"-")}`})},`date-header-${s}`)),i=s,n=null,a++);const r=x(t),d=`${t.employee_ID||t.employeeId||""}||${s}`;n===d?(r.length>0&&(r[0]=""),r.length>1&&(r[1]=""),r.length>2&&(r[2]=""),r.length>3&&(r[3]="")):n=d,v.push((0,o.jsx)("tr",{children:r.map((e,t)=>(0,o.jsx)("td",{style:{whiteSpace:"pre-line",textAlign:"left",fontSize:"11px",padding:"4px 6px",verticalAlign:"middle",border:"1px solid #dee2e6"},children:0===t?(0,o.jsx)("strong",{children:e}):e},t))},`row-${l}`)),a++}}return(0,o.jsx)("div",{children:(0,o.jsxs)("table",{className:"table table-striped",style:{width:"100%",borderCollapse:"collapse"},children:[(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{children:b.map((e,t)=>(0,o.jsx)("th",{style:{fontSize:"12px",background:"#f5f5f5",fontWeight:"bold",padding:"4px 2px",border:"0.5px solid #dee2e6",textAlign:"left"},children:e},t))})}),(0,o.jsx)("tbody",{children:u&&Array.isArray(u.data)&&0!==u.data.length?v:(0,o.jsx)("tr",{children:(0,o.jsxs)("td",{colSpan:7,style:{textAlign:"center",padding:"40px",color:"#666",fontSize:"14px"},children:[(0,o.jsx)("div",{style:{width:"30px",height:"30px",border:"3px solid #f3f3f3",borderTop:"3px solid #007bff",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 15px"}}),"Loading attendance records..."]})})})]})})}),s=(0,i.forwardRef)((e,t)=>{let{reportData:n,getHeaders:a,formatRow:l,reportType:s,dateRange:r,employeeInfo:d}=e;(0,i.useImperativeHandle)(t,()=>({print:()=>{if(!n||!Array.isArray(n.data)||0===n.data.length)return void alert("No data to print.");const e=a(),t=new Set(["emp no","emp name","meal-pkt-mny"].map(e=>e.toLowerCase())),i=e.map((e,n)=>t.has(String(e||"").trim().toLowerCase())?-1:n).filter(e=>e>=0),o=[];let p=Array.isArray(n.dates)&&n.dates.length>0?n.dates:[];if(0===p.length){const e=new Set;n.data.forEach(t=>{(t.date_||t.punchDate||t.date)&&e.add(t.date_||t.punchDate||t.date)}),p=Array.from(e).sort((e,t)=>new Date(e)-new Date(t))}p.forEach(e=>{n.data.forEach(t=>{if(Array.isArray(t.punches)&&t.punches.length)return void t.punches.forEach(n=>{const i=n.date||n.date_||t.date||t.punchDate||e;String(i)===String(e)&&o.push({employee_ID:t.employee_ID||t.employeeId||"",employee_name:t.employee_name||t.employeeName||"",date_:e,time_:n.time||n.time_||n.punchTime||"",scan_type:(n.scan_type||n.status||n.type||"").toString()})});if(t.dailyAttendance&&t.dailyAttendance[e]){const n=t.dailyAttendance[e];return void(Array.isArray(n)&&n.length?n.forEach(n=>o.push({employee_ID:t.employee_ID||t.employeeId||"",employee_name:t.employee_name||t.employeeName||"",date_:e,time_:n.time||n.time_||n.punchTime||"",scan_type:(n.scan_type||n.status||n.type||"").toString()})):(n.checkIn&&o.push({employee_ID:t.employee_ID||t.employeeId||"",employee_name:t.employee_name||t.employeeName||"",date_:e,time_:n.checkIn,scan_type:"IN"}),n.checkOut&&o.push({employee_ID:t.employee_ID||t.employeeId||"",employee_name:t.employee_name||t.employeeName||"",date_:e,time_:n.checkOut,scan_type:"OUT"})))}const n=t.date_||t.punchDate||t.date;if(String(n)===String(e)){const n=t.scan_type||t.type||t.direction||"";o.push({employee_ID:t.employee_ID||t.employeeId||"",employee_name:t.employee_name||t.employeeName||"",date_:e,time_:t.time_||t.time||t.punchTime||"",scan_type:n})}})}),o.sort((e,t)=>{const n=new Date(e.date_||""),i=new Date(t.date_||"");if(isNaN(n.getTime())||isNaN(i.getTime())){if((e.date_||"")<(t.date_||""))return-1;if((e.date_||"")>(t.date_||""))return 1}else{if(n<i)return-1;if(n>i)return 1}const a=String(e.employee_ID||""),o=String(t.employee_ID||"");if(a<o)return-1;if(a>o)return 1;const l=e.time_||"",s=t.time_||"";if(l<s)return-1;if(l>s)return 1;const r="IN"===(e.scan_type||"").toUpperCase(),d="IN"===(t.scan_type||"").toUpperCase();return r&&!d?-1:!r&&d?1:0});const c=o.map(e=>{const t={...e},n=new Date(e.date_);return t._punchDateKey=isNaN(n.getTime())?e.date_:n.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"2-digit"}).replace(/\//g,"-"),t}),m=[];let h=[],u=null,g=null,x=0;c.forEach(e=>{const t=e._punchDateKey||e.date_||"";g!==t&&(g=t,u=null);const n=l(e),a=`${e.employee_ID||e.employeeId||e.emp_no||e.empNo||""}||${t}`;u===a?(n.length>0&&(n[0]=""),n.length>1&&(n[1]=""),n.length>2&&(n[2]=""),n.length>3&&(n[3]="")):u=a,h.push(`<tr>${i.map((e,t)=>{const i=void 0!==n[e]?n[e]:"";return`<td style="border: 1px solid #000; padding: 4px 6px; text-align: left; font-size: 11px; white-space: pre-line;">${0===t?"<strong>"+i+"</strong>":i}</td>`}).join("")}</tr>`),x++,x>=28&&h.length>0&&(m.push(h.slice()),h=[],x=0,u=null)}),h.length>0&&m.push(h.slice());const y=m.length||1,f=(null===d||void 0===d?void 0:d.employee_id)||(null===d||void 0===d?void 0:d.employee_ID)||(null===d||void 0===d?void 0:d.employeeId)||(null===d||void 0===d?void 0:d.employeeNo)||(null===d||void 0===d?void 0:d.emp_no)||(null===d||void 0===d?void 0:d.empNo)||(null===n||void 0===n?void 0:n.data)&&n.data[0]&&(n.data[0].employee_id||n.data[0].employee_ID||n.data[0].employeeId||n.data[0].emp_no||n.data[0].empNo||"")||"",b=(null===d||void 0===d?void 0:d.name)||(null===d||void 0===d?void 0:d.employee_name)||(null===d||void 0===d?void 0:d.employeeName)||(null===n||void 0===n?void 0:n.data)&&n.data[0]&&(n.data[0].employee_name||n.data[0].employeeName||n.data[0].name||"")||"",v="attendance"===s?"History Transaction Report":"Meal Consumption Report",_="attendance"===s?"All Granted(ID & FP) Records":"All Meal Records";const j=`<!DOCTYPE html><html><head><meta charset="utf-8"/><title>${v}</title><style>\n        body{font-family:'Courier New',monospace;font-size:11px;margin:20px;padding:24px 24px 0 24px}\n        table{width:100%;border-collapse:collapse;margin-bottom:20px}\n  th,td{border:0.5px solid #000;padding:4px 6px;text-align:left}\n  th{background:#f5f5f5;font-weight:bold;font-size:12px}\n        td{font-size:11px;white-space:pre-line}\n        @media print{@page{margin:0.5in;size:landscape}body{margin:0}thead{display:table-header-group!important}@page{margin-top:0;margin-bottom:0;margin-left:0;margin-right:0}body::before,body::after{display:none!important}}\n      </style></head><body>${m.map((t,n)=>function(t,n){const a=n===y;return`\n          <div class="common-header" style="page-break-before: ${n>1?"always":"auto"}; width:100%;">\n            <div class="report-header" style="padding:8px 0; margin-bottom:6px;">\n              <div class="header-content" style="max-width:1200px; margin:0 auto; padding:0; text-align:left; display:flex; justify-content:space-between; align-items:flex-start;">\n                <div style="max-width:70%;">\n                  <h1 style="margin:0; display:flex; align-items:center; gap:8px; font-family: 'Courier New', monospace; font-size:14px;">${v}</h1>\n                  <div class="header-subtitle" style="font-size:11px; margin-top:4px;"><strong>${_}</strong></div>\n                  <div style="height:8px">&nbsp;</div>\n                  <table style="margin-bottom:12px; border-collapse:collapse; border: none;">\n                    <tr><td style="vertical-align: top; padding-right: 8px; font-weight: bold; width: 90px; border: none;">Emp No :</td><td style="vertical-align: top; border: none;">${f}</td></tr>\n                    <tr><td style="vertical-align: top; padding-right: 8px; font-weight: bold; border: none;">Emp Name :</td><td style="vertical-align: top; border: none;">${b}</td></tr>\n                    <tr><td style="vertical-align: top; padding-right: 8px; font-weight: bold; border: none;">Date From :</td><td style="vertical-align: top; border: none;">${r.startDate} &nbsp; To : &nbsp; ${r.endDate}</td></tr>\n                  </table>\n                </div>\n                <div style="text-align:left; font-size:11px;" class="print-meta">\n                  <div style="font-size:11px">Printed Date : ${(new Date).toLocaleDateString()}</div>\n                  <div style="font-size:11px">Printed Time : ${(new Date).toLocaleTimeString()}</div>\n                  <div style="font-size:11px">Page ${n} of ${y}</div>\n                </div>\n              </div>\n            </div>\n            <div class="header-content" style="max-width:1200px; margin:0 auto; padding:0;">\n              <table style="width:100%; border-collapse: collapse;">\n                <thead><tr>${i.map(t=>`<th style="font-size:12px; padding:4px 2px; border:0.5px solid #000; text-align:left;">${e[t]}</th>`).join("")}</tr></thead>\n                <tbody>${t.join("")}</tbody>\n              </table>\n            </div>\n            ${a?'\n              <div style="margin-top: 60px; width: 100%;">\n                <table style="width:100%; border-collapse: collapse; border: none;">\n                  <tbody>\n                    <tr>\n                      <td style="width:15%; vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;">Date</td>\n                      <td style="width:35%; vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;"><span style="display:inline-block; font-family: \'Courier New\', monospace; font-size:9px; letter-spacing:1px; line-height:1;">....................</span></td>\n                      <td style="width:15%; vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;">Date</td>\n                      <td style="width:35%; vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;"><span style="display:inline-block; font-family: \'Courier New\', monospace; font-size:9px; letter-spacing:1px; line-height:1;">....................</span></td>\n                    </tr>\n                    <tr>\n                      <td style="vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;">Authorized Signature 1</td>\n                      <td style="vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;"><span style="display:inline-block; font-family: \'Courier New\', monospace; font-size:9px; letter-spacing:1px; line-height:1;">....................</span></td>\n                      <td style="vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;">Authorized Signature 2</td>\n                      <td style="vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;"><span style="display:inline-block; font-family: \'Courier New\', monospace; font-size:9px; letter-spacing:1px; line-height:1;">....................</span></td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            ':""}\n          </div>\n        `}(t,n+1)).join("")}</body></html>`,D=window.open(" ","","width=900,height=700");D.document.open(),D.document.write(j),D.document.close(),D.focus(),D.print(),D.close()}}));const p=a(),c=new Set(["emp no","emp name","meal-pkt-mny"].map(e=>e.toLowerCase())),m=p.map((e,t)=>c.has(String(e||"").trim().toLowerCase())?-1:t).filter(e=>e>=0),h=[];if(n&&Array.isArray(n.data)){const e=[];let t=Array.isArray(n.dates)&&n.dates.length>0?n.dates:[];if(0===t.length){const e=new Set;n.data.forEach(t=>{(t.date_||t.punchDate||t.date)&&e.add(t.date_||t.punchDate||t.date)}),t=Array.from(e).sort((e,t)=>new Date(e)-new Date(t))}t.forEach(t=>{n.data.forEach(n=>{if(Array.isArray(n.punches)&&n.punches.length)return void n.punches.forEach(i=>{const a=i.date||i.date_||n.date||n.punchDate||t;String(a)===String(t)&&e.push({employee_ID:n.employee_ID||n.employeeId||"",employee_name:n.employee_name||n.employeeName||"",date_:t,time_:i.time||i.time_||i.punchTime||"",scan_type:(i.scan_type||i.status||i.type||"").toString()})});if(n.dailyAttendance&&n.dailyAttendance[t]){const i=n.dailyAttendance[t];return void(Array.isArray(i)&&i.length?i.forEach(i=>e.push({employee_ID:n.employee_ID||n.employeeId||"",employee_name:n.employee_name||n.employeeName||"",date_:t,time_:i.time||i.time_||i.punchTime||"",scan_type:(i.scan_type||i.status||i.type||"").toString()})):(i.checkIn&&e.push({employee_ID:n.employee_ID||n.employeeId||"",employee_name:n.employee_name||n.employeeName||"",date_:t,time_:i.checkIn,scan_type:"IN"}),i.checkOut&&e.push({employee_ID:n.employee_ID||n.employeeId||"",employee_name:n.employee_name||n.employeeName||"",date_:t,time_:i.checkOut,scan_type:"OUT"})))}const i=n.date_||n.punchDate||n.date;if(String(i)===String(t)){const i=n.scan_type||n.type||n.direction||"";e.push({employee_ID:n.employee_ID||n.employeeId||"",employee_name:n.employee_name||n.employeeName||"",date_:t,time_:n.time_||n.time||n.punchTime||"",scan_type:i})}})}),e.sort((e,t)=>{const n=new Date(e.date_||""),i=new Date(t.date_||"");if(isNaN(n.getTime())||isNaN(i.getTime())){if((e.date_||"")<(t.date_||""))return-1;if((e.date_||"")>(t.date_||""))return 1}else{if(n<i)return-1;if(n>i)return 1}const a=String(e.employee_ID||""),o=String(t.employee_ID||"");if(a<o)return-1;if(a>o)return 1;const l=e.time_||"",s=t.time_||"";if(l<s)return-1;if(l>s)return 1;const r="IN"===(e.scan_type||"").toUpperCase(),d="IN"===(t.scan_type||"").toUpperCase();return r&&!d?-1:!r&&d?1:0});let i=null,a=null,s=0;for(let n=0;n<e.length;n++){const t=e[n],r=t.date_||"";a!==r&&(a=r,i=null);const d=l(t),p=`${t.employee_ID||t.employeeId||""}||${r}`;i===p?(d.length>0&&(d[0]=""),d.length>1&&(d[1]=""),d.length>2&&(d[2]=""),d.length>3&&(d[3]="")):i=p,h.push((0,o.jsx)("tr",{children:m.map((e,t)=>{const n=void 0!==d[e]?d[e]:"";return(0,o.jsx)("td",{style:{whiteSpace:"pre-line",fontSize:"11px",padding:"4px 6px",border:"1px solid #dee2e6"},children:0===t?(0,o.jsx)("strong",{children:n}):n},t)})},`row-${n}`)),s++}}return(0,o.jsx)("div",{children:(0,o.jsxs)("table",{className:"table table-striped",style:{width:"100%",borderCollapse:"collapse"},children:[(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{children:m.map((e,t)=>(0,o.jsx)("th",{style:{fontSize:"12px",background:"#f5f5f5",fontWeight:"bold",padding:"4px 2px",border:"0.5px solid #dee2e6",textAlign:"left"},children:p[e]},t))})}),(0,o.jsx)("tbody",{children:h})]})})}),r=e=>{let{reportData:t}=e;const[n,a]=(0,i.useState)({});if((0,i.useEffect)(()=>{if(t&&t.data){const e={};t.data.forEach((t,n)=>{e[n]=!0}),a(e)}},[t]),!t||!t.data||0===t.data.length)return(0,o.jsx)("div",{className:"no-data-message",children:(0,o.jsx)("p",{children:"No audit records found for the selected criteria."})});const{dateRange:l={},summary:s={},grouping:r="none"}=t;return(0,o.jsxs)("div",{className:"report-container",style:{background:"#ffffff"},children:[(0,o.jsx)("style",{children:"\n        @media print {\n          @page {\n            size: A4;\n            margin: 15mm;\n          }\n          body * { visibility: hidden; }\n          .print-content, .print-content * { visibility: visible; }\n          .print-content { \n            position: absolute; \n            left: 0; \n            top: 0; \n            width: 100%;\n          }\n          .screen-only { display: none !important; }\n          .print-only { display: block !important; }\n          .page-break { page-break-after: always; }\n          .avoid-break { page-break-inside: avoid; }\n          .print-header {\n            text-align: center;\n            margin-bottom: 15px;\n            padding-bottom: 10px;\n            border-bottom: 2px solid #000;\n          }\n          .group-section {\n            margin-bottom: 20px;\n          }\n          .group-header {\n            background-color: #e0e0e0 !important;\n            padding: 8px !important;\n            font-weight: bold;\n            border: 1px solid #000;\n            margin-top: 10px;\n          }\n          table {\n            width: 100%;\n            border-collapse: collapse;\n            font-size: 10px;\n          }\n          th, td {\n            border: 1px solid #000;\n            padding: 6px;\n            text-align: left;\n          }\n          th {\n            background-color: #f5f5f5 !important;\n            font-weight: bold;\n          }\n          /* Fit more rows per page */\n          tr {\n            line-height: 1.2;\n          }\n        }\n        @media screen {\n          .print-only { display: none !important; }\n        }\n      "}),(0,o.jsxs)("div",{className:"print-only print-content",children:[(0,o.jsxs)("div",{className:"print-header",children:[(0,o.jsx)("h1",{style:{margin:0,fontSize:"18px",fontWeight:"bold",color:"#000"},children:"designation"===r?"SLPA DESIGNATION WISE AUDIT REPORT":"punch"===r?"SLPA PUNCH TYPE AUDIT REPORT":"SLPA AUDIT REPORT"}),(0,o.jsxs)("div",{style:{fontSize:"11px",color:"#000",marginTop:"8px"},children:[(0,o.jsx)("strong",{children:"Division:"})," ",s.divisionFilter||"All"," |",(0,o.jsx)("strong",{children:" Section:"})," ",s.sectionFilter||"All",s.subSectionFilter&&"All"!==s.subSectionFilter&&(0,o.jsxs)(o.Fragment,{children:[" | ",(0,o.jsx)("strong",{children:"Sub Section:"})," ",s.subSectionFilter]})]}),(0,o.jsxs)("div",{style:{fontSize:"10px",color:"#666",marginTop:"5px"},children:["Total Employees: ",s.totalEmployees||0," | Total Groups: ",s.totalGroups||0," | Generated: ",(new Date).toLocaleString()]})]}),t.data.map((e,n)=>{var i;return(0,o.jsxs)("div",{className:"group-section",children:[(0,o.jsxs)("div",{className:"group-header",style:{backgroundColor:"#e0e0e0",padding:"8px",fontWeight:"bold",border:"1px solid #000",marginTop:"10px",fontSize:"12px"},children:[e.groupName," - ",e.count," Employee",1!==e.count?"s":""]}),(e.employees||[]).length>0&&null!==(i=e.employees[0])&&void 0!==i&&i.eventDate?(0,o.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",marginTop:"5px"},children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{width:"15%",padding:"6px",border:"1px solid #000",backgroundColor:"#f5f5f5",fontWeight:"bold"},children:"Employee ID"}),(0,o.jsx)("th",{style:{width:"30%",padding:"6px",border:"1px solid #000",backgroundColor:"#f5f5f5",fontWeight:"bold"},children:"Employee Name"}),(0,o.jsx)("th",{style:{width:"25%",padding:"6px",border:"1px solid #000",backgroundColor:"#f5f5f5",fontWeight:"bold"},children:"Designation"}),(0,o.jsx)("th",{style:{width:"15%",padding:"6px",border:"1px solid #000",backgroundColor:"#f5f5f5",fontWeight:"bold"},children:"Date"}),(0,o.jsx)("th",{style:{width:"15%",padding:"6px",border:"1px solid #000",backgroundColor:"#f5f5f5",fontWeight:"bold"},children:"Time"})]})}),(0,o.jsx)("tbody",{children:(e.employees||[]).map((e,t)=>(0,o.jsxs)("tr",{className:t%30===29?"avoid-break":"",children:[(0,o.jsx)("td",{style:{padding:"6px",border:"1px solid #000",fontFamily:"monospace"},children:e.employeeId}),(0,o.jsx)("td",{style:{padding:"6px",border:"1px solid #000"},children:e.employeeName}),(0,o.jsx)("td",{style:{padding:"6px",border:"1px solid #000"},children:e.designation}),(0,o.jsx)("td",{style:{padding:"6px",border:"1px solid #000"},children:e.eventDate}),(0,o.jsx)("td",{style:{padding:"6px",border:"1px solid #000",fontFamily:"monospace"},children:e.eventTime})]},t))})]}):(0,o.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",marginTop:"5px"},children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{width:"12%",padding:"6px",border:"1px solid #000",backgroundColor:"#f5f5f5",fontWeight:"bold"},children:"Employee ID"}),(0,o.jsx)("th",{style:{width:"38%",padding:"6px",border:"1px solid #000",backgroundColor:"#f5f5f5",fontWeight:"bold"},children:"Employee Name"}),(0,o.jsx)("th",{style:{width:"35%",padding:"6px",border:"1px solid #000",backgroundColor:"#f5f5f5",fontWeight:"bold"},children:"Designation"}),(0,o.jsx)("th",{style:{width:"15%",padding:"6px",border:"1px solid #000",backgroundColor:"#f5f5f5",fontWeight:"bold",textAlign:"center"},children:"Division"})]})}),(0,o.jsx)("tbody",{children:(e.employees||[]).map((e,t)=>(0,o.jsxs)("tr",{className:t%30===29?"avoid-break":"",children:[(0,o.jsx)("td",{style:{padding:"6px",border:"1px solid #000",fontFamily:"monospace"},children:e.employeeId}),(0,o.jsx)("td",{style:{padding:"6px",border:"1px solid #000"},children:e.employeeName}),(0,o.jsx)("td",{style:{padding:"6px",border:"1px solid #000"},children:e.designation}),(0,o.jsx)("td",{style:{padding:"6px",border:"1px solid #000",fontSize:"9px"},children:e.divisionName||s.divisionFilter||"-"})]},t))})]}),n>0&&(n+1)%2===0&&n<t.data.length-1&&(0,o.jsx)("div",{className:"page-break"})]},n)}),(0,o.jsxs)("div",{style:{marginTop:"30px",paddingTop:"10px",borderTop:"1px solid #999",fontSize:"9px",textAlign:"center",color:"#666"},children:[(0,o.jsx)("p",{style:{margin:"5px 0"},children:"This is a computer-generated report from SLPA Time & Attendance System"}),(0,o.jsxs)("p",{style:{margin:"5px 0"},children:["Page count optimized for cost-effective printing | Report Date: ",(new Date).toLocaleDateString()]})]})]}),(0,o.jsxs)("div",{className:"screen-only",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"20px 24px",borderRadius:"8px 8px 0 0"},children:[(0,o.jsx)("h2",{style:{margin:0,fontSize:"24px",fontWeight:"bold"},children:"designation"===r?"SLPA Designation Wise Audit Report":"punch"===r?"SLPA Punch Type Audit Report":"SLPA Audit Report"}),(0,o.jsx)("p",{style:{margin:"8px 0 0 0",opacity:.9,fontSize:"14px"},children:l.from&&"N/A"!==l.from?`${l.from} to ${l.to}`:"All Employees"})]}),(0,o.jsxs)("div",{className:"screen-only",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",padding:"24px",background:"#f8f9fa"},children:[(0,o.jsxs)("div",{style:{background:"white",padding:"16px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,o.jsx)("div",{style:{fontSize:"14px",color:"#6c757d",marginBottom:"4px"},children:"Total Issues"}),(0,o.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#dc3545"},children:s.totalRecords||0})]}),(0,o.jsxs)("div",{style:{background:"white",padding:"16px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,o.jsx)("div",{style:{fontSize:"14px",color:"#6c757d",marginBottom:"4px"},children:"Affected Employees"}),(0,o.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#fd7e14"},children:s.totalEmployees||0})]}),(0,o.jsxs)("div",{style:{background:"white",padding:"16px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,o.jsx)("div",{style:{fontSize:"14px",color:"#6c757d",marginBottom:"4px"},children:"Report Groups"}),(0,o.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#0dcaf0"},children:s.totalGroups||0})]}),(0,o.jsxs)("div",{style:{background:"white",padding:"16px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,o.jsx)("div",{style:{fontSize:"14px",color:"#6c757d",marginBottom:"4px"},children:"Grouping Method"}),(0,o.jsx)("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#6610f2",textTransform:"capitalize"},children:s.groupingMethod||"None"})]})]}),(0,o.jsx)("div",{className:"screen-only",style:{padding:"16px 24px",background:"#e9ecef",borderTop:"1px solid #dee2e6"},children:(0,o.jsxs)("div",{style:{display:"flex",gap:"24px",flexWrap:"wrap",fontSize:"14px"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"Division:"})," ",s.divisionFilter||"All"]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"Section:"})," ",s.sectionFilter||"All"]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"Sub Section:"})," ",s.subSectionFilter||"All"]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"Time Period:"})," ",s.timePeriod||"Custom"]})]})}),(0,o.jsxs)("div",{className:"report-content",style:{padding:"24px"},children:[(0,o.jsxs)("h3",{className:"screen-only",style:{marginBottom:"16px",color:"#495057"},children:[(0,o.jsx)("i",{className:"bi bi-table"})," ","designation"===r?"Employees by Designation":"punch"===r?"Attendance Records by Punch Type":"Detailed Audit Records"]}),t.data.map((e,t)=>(0,o.jsxs)("div",{style:{marginBottom:"24px",border:"1px solid #dee2e6",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[(0,o.jsxs)("div",{onClick:()=>(e=>{a(t=>({...t,[e]:!t[e]}))})(t),style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",color:"white",padding:"16px 20px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{style:{margin:0,fontSize:"18px",fontWeight:"bold"},children:e.groupName}),(0,o.jsxs)("div",{style:{fontSize:"13px",opacity:.9,marginTop:"4px"},children:[e.count," ","designation"===r?"employees":"records"," | ",e.totalIssues||e.count," total issues"]})]}),(0,o.jsx)("div",{style:{fontSize:"20px"},children:n[t]?"\u25bc":"\u25b6"})]}),n[t]&&(0,o.jsx)("div",{style:{background:"white"},children:"designation"===r?(0,o.jsxs)("table",{className:"audit-table",style:{width:"100%",borderCollapse:"collapse",border:"1px solid #000"},children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{style:{background:"#f8f9fa"},children:[(0,o.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #000",width:"20%"},children:"Employee ID"}),(0,o.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #000",width:"50%"},children:"Employee Name"}),(0,o.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #000",width:"30%"},children:"Designation"})]})}),(0,o.jsx)("tbody",{children:(e.employees||[]).map((e,t)=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{style:{padding:"12px",fontFamily:"monospace",border:"1px solid #000"},children:e.employeeId}),(0,o.jsx)("td",{style:{padding:"12px",fontWeight:"500",border:"1px solid #000"},children:e.employeeName}),(0,o.jsx)("td",{style:{padding:"12px",border:"1px solid #000"},children:e.designation})]},t))})]}):"punch"===r?(0,o.jsxs)("table",{className:"audit-table",style:{width:"100%",borderCollapse:"collapse",border:"1px solid #000"},children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{style:{background:"#f8f9fa"},children:[(0,o.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #000",width:"15%"},children:"Employee ID"}),(0,o.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #000",width:"30%"},children:"Employee Name"}),(0,o.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #000",width:"25%"},children:"Designation"}),(0,o.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #000",width:"15%"},children:"Date"}),(0,o.jsx)("th",{style:{padding:"12px",textAlign:"left",border:"1px solid #000",width:"15%"},children:"Time"})]})}),(0,o.jsx)("tbody",{children:(e.employees||[]).map((e,t)=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{style:{padding:"12px",fontFamily:"monospace",border:"1px solid #000"},children:e.employeeId}),(0,o.jsx)("td",{style:{padding:"12px",fontWeight:"500",border:"1px solid #000"},children:e.employeeName}),(0,o.jsx)("td",{style:{padding:"12px",border:"1px solid #000"},children:e.designation}),(0,o.jsx)("td",{style:{padding:"12px",border:"1px solid #000"},children:e.eventDate}),(0,o.jsx)("td",{style:{padding:"12px",fontFamily:"monospace",border:"1px solid #000"},children:e.eventTime})]},t))})]}):(0,o.jsxs)("table",{className:"audit-table",style:{width:"100%",borderCollapse:"collapse"},children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{style:{background:"#f8f9fa"},children:[(0,o.jsx)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Employee ID"}),(0,o.jsx)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Employee Name"}),(0,o.jsx)("th",{style:{padding:"12px",textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Designation"}),(0,o.jsx)("th",{style:{padding:"12px",textAlign:"center",borderBottom:"2px solid #dee2e6"},children:"Issues"})]})}),(0,o.jsx)("tbody",{children:(e.employees||[]).map((e,t)=>(0,o.jsxs)("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[(0,o.jsx)("td",{style:{padding:"12px",fontFamily:"monospace"},children:e.employeeId}),(0,o.jsx)("td",{style:{padding:"12px",fontWeight:"500"},children:e.employeeName}),(0,o.jsx)("td",{style:{padding:"12px"},children:e.designation}),(0,o.jsx)("td",{style:{padding:"12px",textAlign:"center"},children:(0,o.jsx)("span",{style:{backgroundColor:"#dc3545",color:"white",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},children:e.issueCount})})]},t))})]})})]},t))]}),(0,o.jsxs)("div",{style:{padding:"16px 24px",background:"#f8f9fa",borderTop:"1px solid #dee2e6",textAlign:"center",fontSize:"13px",color:"#6c757d"},children:[(0,o.jsxs)("p",{style:{margin:"4px 0"},children:["Generated on ",(new Date).toLocaleString()]}),(0,o.jsx)("p",{style:{margin:"4px 0",fontStyle:"italic"},children:"Note: This report shows employees who marked ON (F1) at least once but did not mark OFF (F4)."})]})]})};var d=n(477),p=n(83);const c=e=>{var t,n,c,m,h;let{onBack:u,initialEmployeeId:g=null}=e;const{t:x}=(0,d.ok)(),y="http://10.70.4.186:5000/api",f=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,[b,v]=(0,i.useState)("report"),[_,j]=(0,i.useState)("attendance"),[D,w]=(0,i.useState)("individual"),[S,N]=(0,i.useState)("none"),[I,A]=(0,i.useState)("none"),[k,C]=(0,i.useState)(g||"");(0,i.useEffect)(()=>{g&&(C(g),w("individual"),setTimeout(()=>{const e=document.querySelector('input[placeholder*="Employee"]');e&&(e.focus(),e.scrollIntoView({behavior:"smooth",block:"center"}))},300))},[g]);const[T,E]=(0,i.useState)("all"),[z,R]=(0,i.useState)("all"),[F,M]=(0,i.useState)([]),[L,$]=(0,i.useState)([]),[O,W]=(0,i.useState)([]),[P,B]=(0,i.useState)([]),[U,Y]=(0,i.useState)("all"),[G,q]=(0,i.useState)(new Date),[V,J]=(0,i.useState)(new Date),[H,K]=(0,i.useState)(!1),[Q,X]=(0,i.useState)("start"),[Z,ee]=(0,i.useState)(0),[te,ne]=(0,i.useState)(null);(0,i.useEffect)(()=>{if("all"===T)$(O),R("all"),B([]),Y("all");else{const e=O.filter(e=>{const t=String(e.division_code||e.division_id||e.divisionId||e.DIVISION_ID||"");let n=String(T);return n.startsWith("mysql_div_")&&(n=n.replace("mysql_div_","")),t===n});console.log(`\ud83d\udd0d Filtered ${e.length} sections for division ${T}`),e.length>0&&console.log("Sample sections:",e.slice(0,3).map(e=>({id:e._id,name:e.name,division_id:e.division_id}))),$(e),R("all"),B([]),Y("all")}},[T,O]),(0,i.useEffect)(()=>{z&&"all"!==z&&"all"!==T?Be(z):(B([]),Y("all"))},[z,T]);const[ie,ae]=(0,i.useState)({startDate:"",endDate:""}),[oe,le]=(0,i.useState)("date-range"),[se,re]=(0,i.useState)("date"),[de,pe]=(0,i.useState)("date"),[ce,me]=(0,i.useState)((new Date).getFullYear()),[he,ue]=(0,i.useState)((new Date).getMonth()),[ge,xe]=(0,i.useState)(!1),[ye,fe]=(0,i.useState)(null),[be,ve]=(0,i.useState)(""),[_e,je]=(0,i.useState)(null),[De]=(0,i.useState)(""),we=(0,i.useRef)(!1),Se=(0,i.useRef)(!1),Ne=(0,i.useRef)(null),Ie=(0,i.useRef)(null),Ae=(0,i.useMemo)(()=>{if(!ye||!Array.isArray(ye.data))return[];const e=(De||"").trim().toLowerCase();return e?ye.data.filter(t=>{const n=String(t.employee_id||t.employee_ID||t.employeeId||t.emp_no||t.empNo||"").toLowerCase(),i=String(t.employee_name||t.employeeName||t.name||"").toLowerCase();return n.includes(e)||i.includes(e)}):ye.data},[ye,De]),ke=(0,i.useMemo)(()=>{if(!ye||!Array.isArray(ye.data))return[];const e=[];return ye.data.forEach(t=>{const n=t.employeeId||t.employee_ID||t.emp_no||t.empNo||t.EMP_NUMBER||t.EMP_NO||"",i=t.employeeName||t.employee_name||t.name||t.FULLNAME||"";if(Array.isArray(t.punches)&&t.punches.length)return void t.punches.forEach(t=>{const a=t.date||t.punchDate||t.date_||t.day||"";e.push({employee_ID:String(n),employee_name:i,date_:a,time_:t.time||t.time_||t.punchTime||"",scan_type:(t.scan_type||t.status||t.type||"").toString()})});if(t.dailyAttendance&&"object"===typeof t.dailyAttendance)return void Object.entries(t.dailyAttendance).forEach(t=>{let[a,o]=t;Array.isArray(o)&&o.length?o.forEach(t=>e.push({employee_ID:String(n),employee_name:i,date_:a,time_:t.time||t.time_||t.punchTime||"",scan_type:(t.scan_type||t.status||t.type||"").toString()})):o&&"object"===typeof o&&(o.checkIn&&e.push({employee_ID:String(n),employee_name:i,date_:a,time_:o.checkIn,scan_type:"IN"}),o.checkOut&&e.push({employee_ID:String(n),employee_name:i,date_:a,time_:o.checkOut,scan_type:"OUT"}))});const a=t.date_||t.punchDate||t.date;a&&e.push({employee_ID:String(t.employee_ID||t.employeeId||n),employee_name:t.employee_name||t.employeeName||i,date_:a,time_:t.time_||t.time||t.punchTime||"",scan_type:(t.scan_type||t.status||t.type||"").toString()})}),e.sort((e,t)=>{const n=new Date(e.date_||""),i=new Date(t.date_||"");if(isNaN(n.getTime())||isNaN(i.getTime())){if((e.date_||"")<(t.date_||""))return-1;if((e.date_||"")>(t.date_||""))return 1}else{if(n<i)return-1;if(n>i)return 1}const a=String(e.employee_ID||""),o=String(t.employee_ID||"");if(a<o)return-1;if(a>o)return 1;const l=e.time_||"",s=t.time_||"";if(l<s)return-1;if(l>s)return 1;const r="IN"===(e.scan_type||"").toUpperCase(),d="IN"===(t.scan_type||"").toUpperCase();return r&&!d?-1:!r&&d?1:0}),e},[ye]),Ce=(0,i.useMemo)(()=>{if(!ye)return ye;if("individual"===D&&k){const e=String(k),t=ke.filter(t=>String(t.employee_ID)===e),n=Array.from(new Set(t.map(e=>e.date_))).sort((e,t)=>new Date(e)-new Date(t));return{reportType:"individual",dateRange:ye.dateRange||ye.dates||{},dates:n,data:t}}return ye?{...ye,data:Ae}:ye},[ke,ye,D,k,Ae]),Te="individual"===D?Ce:ye?{...ye,data:Ae}:ye,Ee=e=>{if(!e&&0!==e)return"";if("string"===typeof e)return e;try{const t=new Date(e);if(!isNaN(t.getTime()))return t.toLocaleTimeString("en-GB",{hour12:!1})}catch(t){}return String(e)},ze=(0,a.A)("reports","create"),Re=(0,a.A)("reports","attendance_generate"),Fe=(0,a.A)("reports","attendance_download"),Me=(0,a.A)("reports","audit_generate"),Le=(0,a.A)("reports","meal_generate"),$e=(0,a.A)("reports","view_reports"),Oe=e=>!!$e&&("attendance"===e?!(!Re&&!ze):"audit"===e?!(!Me&&!ze):"meal"===e?!(!Le&&!ze):!!ze);(0,i.useEffect)(()=>{We(),Pe();const e=f(new Date);ae({startDate:e,endDate:e}),me((new Date).getFullYear()),ue((new Date).getMonth())},[]),(0,i.useEffect)(()=>{if("none"===S)return;const e=new Date;let t,n;switch(S){case"daily":default:t=n=f(e);break;case"weekly":const i=e.getDay(),a=new Date(e);a.setDate(e.getDate()-i),t=f(a),n=f(e);break;case"monthly":const o=new Date(e.getFullYear(),e.getMonth(),1);t=f(o),n=f(e);break;case"annually":const l=new Date(e.getFullYear(),0,1);t=f(l),n=f(e)}ae({startDate:t,endDate:n})},[S]),(0,i.useEffect)(()=>{"group"===D&&C("")},[D]),(0,i.useEffect)(()=>{"audit"===_&&w("group")},[_]),(0,i.useEffect)(()=>{if(!Oe(_)){const e=["attendance","audit","meal"].filter(e=>Oe(e));e.length>0&&j(e[0])}},[Re,Me,Le,$e,_]),(0,i.useEffect)(()=>{R("all"),Y("all")},[T]),(0,i.useEffect)(()=>{Y("all")},[z,T]),(0,i.useEffect)(()=>{if(T&&"all"!==T)return;if(!F||0===F.length)return;if(we.current)return;const e=F.find(e=>{const t=String(e.code||e.DIVISION_CODE||"").toLowerCase(),n=String(e.name||e.DIVISION_NAME||"").toLowerCase();return"is"===t||n.includes("information systems")||n.includes("information system")});e&&(E(e._id||e.id),we.current=!0,Se.current=!1)},[F,T]),(0,i.useEffect)(()=>{if(!L||0===L.length)return;if(z&&"all"!==z)return;if(Se.current)return;const e=L.find(e=>{const t=String(e.code||e.section_code||e.SECTION_CODE||"").toLowerCase(),n=String(e.name||e.section_name||e.SECTION_NAME||"").toLowerCase();return"is"===t||n.includes("information systems")||n.includes("information system")||n.includes("(is)")});e&&(R(e._id||e.id||e.section_id),Se.current=!0)},[L,z]);const We=async()=>{try{const e=localStorage.getItem("token");console.log("\ud83d\udce5 Fetching divisions from MySQL data...");const t=await fetch(`${y}/mysql-data/divisions?includeEmployeeCount=true`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json();let n=[];Array.isArray(e)?n=e:e.data&&Array.isArray(e.data)&&(n=e.data);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[],n=new Set;return e.forEach(e=>{var i,a,o,l,s,r,d,p,c,m,h,u,g,x,y,f,b,v,_,j;const D=String(null!==(i=null!==(a=null!==(o=null!==(l=null!==(s=null!==(r=e._id)&&void 0!==r?r:e.id)&&void 0!==s?s:e.DIVISION_ID)&&void 0!==l?l:e.code)&&void 0!==o?o:e.hie_code)&&void 0!==a?a:e.DIVISION_CODE)&&void 0!==i?i:"");D&&(n.has(D)||(n.add(D),t.push({_id:D,id:D,code:String(null!==(d=null!==(p=null!==(c=null!==(m=null!==(h=e.code)&&void 0!==h?h:e.DIVISION_CODE)&&void 0!==m?m:e.hie_code)&&void 0!==c?c:e._id)&&void 0!==p?p:e.id)&&void 0!==d?d:D),name:null!==(u=null!==(g=null!==(x=null!==(y=e.name)&&void 0!==y?y:e.DIVISION_NAME)&&void 0!==x?x:e.hie_name)&&void 0!==g?g:e.hie_relationship)&&void 0!==u?u:"Unknown Division",hie_code:null!==(f=e.hie_code)&&void 0!==f?f:e.code,hie_name:null!==(b=e.hie_name)&&void 0!==b?b:e.name,def_level:null!==(v=e.def_level)&&void 0!==v?v:e.DEF_LEVEL,hie_relationship:e.hie_relationship,isActive:null===(_=null!==(j=e.isActive)&&void 0!==j?j:e.active)||void 0===_||_})))}),t.sort((e,t)=>e.name.localeCompare(t.name))}(n);console.log(`\u2705 Loaded ${i.length} divisions from MySQL data`),M(i)}else console.error("Failed to fetch divisions:",t.status),M([])}catch(e){console.error("Error fetching divisions:",e),M([])}},Pe=async()=>{try{const e=localStorage.getItem("token");console.log("\ud83d\udce5 Fetching sections from MySQL data...");const t=await fetch(`${y}/mysql-data/sections`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json();let n=[];Array.isArray(e)?n=e:e.data&&Array.isArray(e.data)?n=e.data:e.sections&&Array.isArray(e.sections)&&(n=e.sections);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[],n=new Set;return e.forEach(e=>{var i,a,o,l,s,r,d,p,c,m,h,u,g,x,y,f,b,v,_,j,D,w,S,N,I,A,k,C;const T=String(null!==(i=null!==(a=null!==(o=null!==(l=null!==(s=null!==(r=null!==(d=e._id)&&void 0!==d?d:e.id)&&void 0!==r?r:e.SECTION_ID)&&void 0!==s?s:e.code)&&void 0!==l?l:e.hie_code)&&void 0!==o?o:e.SECTION_CODE)&&void 0!==a?a:e.section_code)&&void 0!==i?i:"");if(!T)return;if(n.has(T))return;n.add(T);const E=String(null!==(p=null!==(c=null!==(m=null!==(h=null!==(u=null!==(g=e.division_code)&&void 0!==g?g:e.division_id)&&void 0!==u?u:e.DIVISION_ID)&&void 0!==h?h:e.division_code)&&void 0!==m?m:e.DIVISION_CODE)&&void 0!==c?c:e.hie_relationship)&&void 0!==p?p:"");t.push({_id:T,id:T,code:String(null!==(x=null!==(y=null!==(f=null!==(b=e.code)&&void 0!==b?b:e.SECTION_CODE)&&void 0!==f?f:e.hie_code)&&void 0!==y?y:e.section_code)&&void 0!==x?x:T),name:null!==(v=null!==(_=null!==(j=null!==(D=e.name)&&void 0!==D?D:e.section_name)&&void 0!==j?j:e.SECTION_NAME)&&void 0!==_?_:e.hie_relationship)&&void 0!==v?v:`Section ${T}`,division_code:E||"",division_id:E||"",divisionId:E||"",DIVISION_ID:E||"",divisionCode:String(null!==(w=null!==(S=e.division_code)&&void 0!==S?S:e.DIVISION_CODE)&&void 0!==w?w:""),divisionName:null!==(N=null!==(I=e.division_name)&&void 0!==I?I:e.DIVISION_NAME)&&void 0!==N?N:"",def_level:null!==(A=e.def_level)&&void 0!==A?A:e.DEF_LEVEL,isActive:null===(k=null!==(C=e.isActive)&&void 0!==C?C:e.active)||void 0===k||k})}),t.sort((e,t)=>e.name.localeCompare(t.name))}(n);console.log(`\u2705 Loaded ${i.length} sections from MySQL data`),console.log("Sample sections with division_id:",i.slice(0,3).map(e=>({id:e.id,name:e.name,divisionId:e.divisionId,divisionCode:e.divisionCode}))),W(i)}else console.error("Failed to fetch sections:",t.status),W([])}catch(e){console.error("Error fetching sections:",e),W([])}},Be=async e=>{try{const t=localStorage.getItem("token");let n=e;"string"===typeof e&&e.startsWith("mysql_sec_")&&(n=e.replace("mysql_sec_","")),console.log(`\ud83d\udce5 Fetching sub sections for section: ${e} (clean: ${n})`);const i=await fetch(`${y}/mysql-subsections?sectionId=${encodeURIComponent(n)}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(i.ok){const t=await i.json();let n=[];Array.isArray(t)?n=t:t.data&&Array.isArray(t.data)&&(n=t.data),console.log(`\u2705 Loaded ${n.length} sub sections for section ${e}`),B(n)}else console.error("Failed to fetch sub sections:",i.status),B([])}catch(t){console.error("Error fetching sub sections:",t),B([])}},Ue=()=>{ye&&ye.data&&0!==ye.data.length?"attendance"!==_||Fe?"audit"===_?window.print():"group"===D?Ne.current&&"function"===typeof Ne.current.print?Ne.current.print():alert("Group report print not available."):Ie.current&&"function"===typeof Ie.current.print?Ie.current.print():alert("Individual report print not available."):ve("You do not have permission to download/print attendance reports"):alert("No data to print. Please generate a report first.")},Ye=()=>"meal"===_?["Emp No","Emp Name","Division","Section","Date","Meal Packet","Meal Money"]:("group"===D&&(null===ye||void 0===ye||ye.reportType),["Emp No","Emp Name","Meal-Pkt-Mny","Punch Date","Punch Time","Function","Event Description"]),Ge=e=>{if("meal"===_)return[e.employeeId||"",e.employeeName||"",e.division||"N/A",e.section||"N/A",e.date||"",e.mealPacket||"No",e.mealMoney||"No"];if("group"===D&&"group"===(null===ye||void 0===ye?void 0:ye.reportType)){var t,n;const i=e.date_?new Date(e.date_):e.punchDate?new Date(e.punchDate):null,a=i&&!isNaN(i.getTime())?i.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"2-digit"}).replace(/\//g,"-")+" "+i.toLocaleDateString("en-US",{weekday:"short"}):e.punchDate||e.date_||"",o="IN"===(null===(t=e.scan_type)||void 0===t?void 0:t.toUpperCase())?"F1-0":"F4-0",l=("IN"===(null===(n=e.scan_type)||void 0===n?void 0:n.toUpperCase())?"ON":"OFF")+"Granted(ID & F tally plan COM0002)";return[e.employee_ID||e.employeeId||e.emp_no||e.empNo||"",e.employee_name||e.employeeName||e.name||"Unknown","I",a,Ee(e.time_||e.time||e.punchTime||""),o,l]}{var i,a;const t=new Date(e.date_),n=t.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"2-digit"}).replace(/\//g,"-")+" "+t.toLocaleDateString("en-US",{weekday:"short"}),o="IN"===(null===(i=e.scan_type)||void 0===i?void 0:i.toUpperCase())?"F1-0":"F4-0",l=("IN"===(null===(a=e.scan_type)||void 0===a?void 0:a.toUpperCase())?"ON":"OFF")+"Granted(ID & F tally plan COM0002)";return[e.employee_ID||e.employeeId,e.employee_name||e.employeeName||"Unknown","I",n,Ee(e.time_),o,l]}},qe=e=>{const t=(e=>{const t=e.getFullYear(),n=e.getMonth();return new Date(t,n+1,0).getDate()})(e),n=(e=>{const t=e.getFullYear(),n=e.getMonth();return new Date(t,n,1).getDay()})(e),i=[];for(let a=0;a<n;a++)i.push(null);for(let a=1;a<=t;a++)i.push(a);return i},Ve=(e,t)=>{if(!e)return;const n=t.getFullYear(),i=t.getMonth();if(!ie.startDate||"start"===Q){let t;t="month"===se?new Date(n,i,1):"year"===se?new Date(n,0,1):new Date(n,i,e);const a=f(t);return ae({startDate:a,endDate:a}),q(new Date(t.getFullYear(),t.getMonth(),1)),void X("end")}if("end"===Q){let t;t="month"===de?new Date(n,i+1,0):"year"===de?new Date(n,11,31):new Date(n,i,e);const a=f(t);a<ie.startDate?ae({startDate:a,endDate:ie.startDate}):a===ie.startDate?ae({startDate:a,endDate:a}):ae({...ie,endDate:a}),J(new Date(t.getFullYear(),t.getMonth(),1)),X("start")}};return(0,o.jsxs)("div",{className:"report-generation",children:[(0,o.jsx)(p.A,{title:"Report Generation Center",subtitle:"Generate attendance, audit, and meal reports",icon:"bi-graph-up-arrow",onBack:u}),(0,o.jsx)("div",{className:"report-form-container",children:(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),ve(""),Oe(_))if(ie.startDate&&ie.endDate)if("meal"===_||"individual"!==D||k){xe(!0),K(!0),fe(null),setTimeout(()=>{ye||fe({data:[],dates:[],reportType:"group"===D?"group":"individual",summary:{totalEmployees:0,totalRecords:0}})},100);try{const e=localStorage.getItem("token");let r,d,p="",c={};if("attendance"===_){if(p=`${y}/reports/mysql/attendance`,c={report_type:D,from_date:ie.startDate,to_date:ie.endDate,time_period:S,grouping:I},"individual"===D)c.employee_id=k;else if("group"===D){if("all"!==U&&"all"!==z){const e=P.find(e=>(e._id||e.id||e.sub_section_id)===U);var t,n;if(e)c.sub_section_id=e.sub_section_id||e.id||e._id||U,c.section_id="",c.division_id="",console.log("Selected sub section details:",{sub_section_db_id:c.sub_section_id,sub_section_name:(null===(t=e.subSection)||void 0===t?void 0:t.sub_hie_name)||(null===(n=e.subSection)||void 0===n?void 0:n.name)||e.sub_name||e.sub_code||e.sub_section_name||e.name||"",full_sub_section:e})}else if("all"!==z){const e=L.find(e=>(e._id||e.id||e.section_id||e.code)===z);e&&(c.section_id=e.code||e.hie_code||e.section_code||e.section_id||e.id||"",c.division_id=e.divisionCode||e.division_code||e.division_id||e.divisionId||"",console.log("\ud83c\udfaf Selected section details:",{section_id:z,section_code:c.section_id,division_code:c.division_id,full_section:e}))}else if("all"!==T){const e=F.find(e=>(e._id||e.id)===T);e&&(c.division_id=e.code||e.hie_code||e.division_id||e.id||"",c.section_id="",console.log("\ud83c\udfaf Selected division with all sections:",{division_id:T,division_code:c.division_id,section_filter:"All Sections",full_division:e}))}else c.division_id="",c.section_id="";console.log("Sending group report filters:",{division_name:c.division_id,section_name:c.section_id,sub_section_id:c.sub_section_id});const i=await(async(e,t)=>{try{let n="";if(e.sub_section_id?n=`${y}/mysql-subsections/transferred/${encodeURIComponent(e.sub_section_id)}`:e.section_id?n=`${y}/mysql-data/employees?sectionCode=${encodeURIComponent(e.section_id)}&limit=1000`:e.division_id&&(n=`${y}/mysql-data/employees?divisionCode=${encodeURIComponent(e.division_id)}&limit=1000`),!n)return null;const i=await fetch(n,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!i.ok)return null;const a=await i.json();let o=[];return Array.isArray(a)?o=a:a.data&&Array.isArray(a.data)?o=a.data:a.data&&a.data.data&&Array.isArray(a.data.data)&&(o=a.data.data),o}catch(n){return console.warn("Error fetching filtered employees preview:",n),null}})(c,e);if(Array.isArray(i)){if(console.log(`\u2705 Found ${i.length} employees matching filters`),0===i.length)return ve("No employees found for selected filters. Please check your division/section/sub-section selection."),void xe(!1);c.preview_employee_count=i.length}else console.warn("Failed to verify filtered employees (preview unavailable)")}}else if("audit"===_){if(!ie.startDate||!ie.endDate)return ve("Audit reports require both start and end dates. Please select dates."),void xe(!1);if(p=`${y}/reports/mysql/audit`,c={from_date:ie.startDate,to_date:ie.endDate,time_period:S,grouping:I},"all"!==U&&"all"!==z){const e=P.find(e=>(e._id||e.id)===U);var i,a,o,l;if(e)c.sub_section_id=U,c.section_id=(null===(i=e.parentSection)||void 0===i?void 0:i.hie_name)||e.section_name||"",c.division_id=(null===(a=e.parentDivision)||void 0===a?void 0:a.division_name)||e.division_name||"",console.log("\ud83d\udd0d Audit sub section filter:",{sub_section_db_id:U,sub_section_name:(null===(o=e.subSection)||void 0===o?void 0:o.sub_hie_name)||(null===(l=e.subSection)||void 0===l?void 0:l.name)||e.sub_name||e.sub_code||"",section_id:c.section_id,division_id:c.division_id,selectedSubSection:e})}else if("all"!==z){const e=L.find(e=>(e._id||e.id||e.section_id)===z);e&&(c.section_id=e.name||e.section_name||"",c.division_id=e.divisionName||e.division_name||"",console.log("\ud83d\udd0d Audit section filter:",{section_id:c.section_id,division_id:c.division_id,selectedSection:e}))}else if("all"!==T){const e=F.find(e=>(e._id||e.id)===T);e&&(c.division_id=e.hie_name||e.name||"",console.log("\ud83d\udd0d Audit division filter:",{division_id:c.division_id,selectedDivision:e})),c.section_id=""}else c.division_id="",c.section_id="";console.log("\ud83d\udd0d Sending audit report request:",{from_date:c.from_date,to_date:c.to_date,grouping:c.grouping,division_id:c.division_id,section_id:c.section_id})}else if("meal"===_){if(p=`${y}/reports/mysql/meal`,c={from_date:ie.startDate,to_date:ie.endDate,division_id:"",section_id:"",sub_section_id:""},T&&"all"!==T){const e=F.find(e=>(e._id||e.id)===T);e&&(c.division_id=e.hie_name||e.name||"")}if(z&&"all"!==z){const e=L.find(e=>(e._id||e.id)===z);e&&(c.section_id=e.hie_name||e.name||"")}U&&"all"!==U&&(c.sub_section_id=U),console.log("\ud83c\udf7d\ufe0f Meal Report Payload (Group Scope):",c)}"attendance"===_||"audit"===_||"meal"===_?(console.log("\ud83d\udce4 Sending request to:",p),console.log("\ud83d\udce4 Request payload:",JSON.stringify(c,null,2)),r=await fetch(p,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(c)})):r=await fetch(p,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});try{d=await r.json(),console.log("\ud83d\udce5 Response status:",r.status),console.log("\ud83d\udce5 Response data:",JSON.stringify(d,null,2))}catch(s){return console.error("\u274c JSON parse error:",s),ve("Invalid response from server."),void fe(null)}if(!r.ok)return console.error("\u274c Response not OK:",r.status,d.message),ve(d.message||`HTTP error! status: ${r.status}`),void fe(null);const m=Array.isArray(d.data)?d.data:Array.isArray(d)?d:[];if(console.log("\ud83d\udcca Report array length:",m.length),console.log("\ud83d\udcca Data success flag:",d.success),console.log("\ud83d\udcca Sample data (first 2 items):",m.slice(0,2)),d.success&&m.length>0||!d.hasOwnProperty("success")&&m.length>0){const e=m,t=Math.max(10,Math.floor(e.length/20));let n=0;const i=()=>{const a=Math.min(n+t,e.length),o=e.slice(0,a),l={...d,data:o};"group"===D&&"group"===d.reportType&&(l.reportType="group",l.employees=o),fe(l),n=a,n<e.length?setTimeout(i,100):xe(!1)};i()}else 0===m.length?(console.warn("\u26a0\ufe0f No records found in response"),console.log("Response details:",{success:d.success,message:d.message,summary:d.summary,employees:d.employees}),ve("No records found for the selected criteria."),fe({...d,data:[]})):(console.error("\u274c Report generation failed:",d.message),ve(d.message||"Failed to generate report"),fe(null))}catch(r){console.error("Error generating report:",r),ve(r.message||"Failed to generate report. Please try again."),fe(null)}finally{xe(!1)}}else ve("Please enter an employee ID for individual reports");else ve("Please select both start and end dates");else ve("You do not have permission to generate this type of report")},className:"config-form",children:[(0,o.jsxs)("div",{className:"simple-form-layout",children:[(0,o.jsx)("div",{className:"form-section-group",children:(0,o.jsxs)("div",{className:"form-row",children:[(0,o.jsxs)("div",{className:"form-field",children:[(0,o.jsxs)("label",{htmlFor:"reportType",children:[(0,o.jsx)("i",{className:"bi bi-file-earmark-text"}),"Report Type"]}),(0,o.jsxs)("select",{id:"reportType",value:_,onChange:e=>j(e.target.value),className:"form-control",children:[Oe("attendance")&&(0,o.jsx)("option",{value:"attendance",children:"Attendance Report"}),Oe("audit")&&(0,o.jsx)("option",{value:"audit",children:"Audit Report"}),Oe("meal")&&(0,o.jsx)("option",{value:"meal",children:"Meal Report"})]})]}),(0,o.jsxs)("div",{className:"form-field",children:[(0,o.jsxs)("label",{htmlFor:"reportScope",children:[(0,o.jsx)("i",{className:"bi bi-people"}),"Report Scope"]}),(0,o.jsxs)("select",{id:"reportScope",value:D,onChange:e=>w(e.target.value),className:"form-control",disabled:"audit"===_,children:[(0,o.jsx)("option",{value:"individual",children:"Individual Report"}),(0,o.jsx)("option",{value:"group",children:"Group Report"})]})]})]})}),(0,o.jsxs)("div",{className:"form-section-group",children:["individual"===D&&"meal"!==_&&(0,o.jsx)("div",{className:"form-row",children:(0,o.jsxs)("div",{className:"form-field full-width",children:[(0,o.jsxs)("label",{htmlFor:"employeeId",children:[(0,o.jsx)("i",{className:"bi bi-person-badge"}),x("employeeIdLabel")]}),(0,o.jsx)("input",{type:"text",id:"employeeId",value:k,onChange:e=>C(e.target.value),className:"form-control",placeholder:x("enterEmployeeId"),required:"individual"===D})]})}),"individual"!==D&&(0,o.jsxs)("div",{className:"form-row",children:[(0,o.jsxs)("div",{className:"form-field",children:[(0,o.jsxs)("label",{htmlFor:"divisionId",children:[(0,o.jsx)("i",{className:"bi bi-building"}),x("divisionLabel")]}),(0,o.jsxs)("select",{id:"divisionId",value:T,onChange:e=>E(e.target.value),className:"form-control",children:[(0,o.jsx)("option",{value:"all",children:x("allDivisionsLabel")}),(Array.isArray(F)?F:[]).map(e=>(0,o.jsx)("option",{value:e._id||e.id,children:e.name||e.division_name},e._id||e.id))]})]}),(0,o.jsxs)("div",{className:"form-field",children:[(0,o.jsxs)("label",{htmlFor:"sectionId",children:[(0,o.jsx)("i",{className:"bi bi-diagram-3"}),x("sectionLabel")]}),(0,o.jsxs)("select",{id:"sectionId",value:z,onChange:e=>R(e.target.value),className:"form-control",disabled:"all"===T,children:[(0,o.jsx)("option",{value:"all",children:x("allSectionsLabel")}),"all"!==T&&(Array.isArray(L)?L:[]).map(e=>(0,o.jsx)("option",{value:e._id||e.id,children:e.name||e.section_name},e._id||e.id))]})]}),(0,o.jsxs)("div",{className:"form-field",children:[(0,o.jsxs)("label",{htmlFor:"subSectionId",children:[(0,o.jsx)("i",{className:"bi bi-diagram-2"}),x("subSectionLabel")]}),(0,o.jsxs)("select",{id:"subSectionId",value:U,onChange:e=>Y(e.target.value),className:"form-control",disabled:"all"===z||"all"===T,children:[(0,o.jsx)("option",{value:"all",children:x("allSubSectionsLabel")}),"all"!==z&&"all"!==T&&(Array.isArray(P)?P:[]).map(e=>{var t,n,i;const a=(null===(t=e.subSection)||void 0===t?void 0:t.sub_hie_name)||(null===(n=e.subSection)||void 0===n?void 0:n.name)||(null===(i=e.subSection)||void 0===i?void 0:i.hie_name)||e.sub_name||e.sub_hie_name||e.sub_section_name||e.sub_code||"Unnamed";return(0,o.jsx)("option",{value:e._id||e.id,children:a},e._id||e.id)})]})]})]}),"group"===D&&"attendance"!==_&&"meal"!==_&&(0,o.jsxs)("div",{className:"form-row",children:[(0,o.jsxs)("div",{className:"form-field",children:[(0,o.jsxs)("label",{htmlFor:"reportGrouping",children:[(0,o.jsx)("i",{className:"bi bi-collection"}),"Group By"]}),(0,o.jsxs)("select",{id:"reportGrouping",value:I,onChange:e=>A(e.target.value),className:"form-control",children:[(0,o.jsx)("option",{value:"none",children:"None"}),(0,o.jsx)("option",{value:"designation",children:"Designation Wise"}),(0,o.jsx)("option",{value:"punch",children:"F1-0 (Punch Type)"})]})]}),"designation"!==I&&(0,o.jsxs)("div",{className:"form-field",children:[(0,o.jsxs)("label",{htmlFor:"timePeriod",children:[(0,o.jsx)("i",{className:"bi bi-calendar-range"}),"Time Period"]}),(0,o.jsxs)("select",{id:"timePeriod",value:S,onChange:e=>N(e.target.value),className:"form-control",children:[(0,o.jsx)("option",{value:"none",children:"None"}),(0,o.jsx)("option",{value:"daily",children:"Daily"}),(0,o.jsx)("option",{value:"weekly",children:"Weekly"}),(0,o.jsx)("option",{value:"monthly",children:"Monthly"}),(0,o.jsx)("option",{value:"annually",children:"Annually"})]})]})]})]}),"audit"===_||"designation"!==I?(0,o.jsx)("div",{className:"form-section-group date-range-section",children:(0,o.jsxs)("div",{style:{padding:"20px",background:"#fff",borderRadius:"10px",border:"1px solid #e2e8f0",boxShadow:"0 2px 8px rgba(0,0,0,0.06)"},children:[(0,o.jsxs)("div",{style:{marginBottom:20,display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:16},children:[(0,o.jsx)("h3",{style:{margin:0,fontSize:16,fontWeight:600,color:"#334155"},children:"Select Dates"}),(0,o.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontSize:12,fontWeight:500,color:"#64748b",marginBottom:4},children:"From"}),(0,o.jsx)("input",{type:"date",value:ie.startDate,onChange:e=>ae(t=>({...t,startDate:e.target.value})),style:{padding:"8px 10px",borderRadius:6,border:"1px solid #e2e8f0",fontSize:14,background:"#fff"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontSize:12,fontWeight:500,color:"#64748b",marginBottom:4},children:"To"}),(0,o.jsx)("input",{type:"date",value:ie.endDate,onChange:e=>ae(t=>({...t,endDate:e.target.value})),style:{padding:"8px 10px",borderRadius:6,border:"1px solid #e2e8f0",fontSize:14,background:"#fff"}})]})]})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:20},children:[(0,o.jsx)("div",{style:{minWidth:120,borderRight:"1px solid #e2e8f0",paddingRight:16},children:[{label:"Custom",action:()=>{}},{label:"Today",action:()=>{const e=f(new Date);ae({startDate:e,endDate:e})}},{label:"Yesterday",action:()=>{const e=new Date;e.setDate(e.getDate()-1);const t=f(e);ae({startDate:t,endDate:t})}},{label:"This Week",action:()=>{const e=new Date,t=e.getDate()-e.getDay(),n=new Date(e.setDate(t));ae({startDate:f(n),endDate:f(new Date)})}},{label:"Last Week",action:()=>{const e=new Date,t=e.getDate()-e.getDay()-7,n=new Date(e.setDate(t)),i=new Date(e.setDate(t+6));ae({startDate:f(n),endDate:f(i)})}},{label:"This Month",action:()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0);ae({startDate:f(t),endDate:f(n)})}},{label:"Last Month",action:()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth()-1,1),n=new Date(e.getFullYear(),e.getMonth(),0);ae({startDate:f(t),endDate:f(n)})}},{label:"This Year",action:()=>{const e=(new Date).getFullYear();ae({startDate:`${e}-01-01`,endDate:`${e}-12-31`})}},{label:"Last Year",action:()=>{const e=(new Date).getFullYear()-1;ae({startDate:`${e}-01-01`,endDate:`${e}-12-31`})}}].map((e,t)=>(0,o.jsx)("button",{type:"button",onClick:e.action,style:{display:"block",width:"100%",padding:"8px 12px",marginBottom:4,textAlign:"left",background:0===t?"#f0f9ff":"transparent",border:"none",borderRadius:6,fontSize:14,fontWeight:0===t?600:500,color:"#334155",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="#f0f9ff",onMouseLeave:e=>e.currentTarget.style.background=0===t?"#f0f9ff":"transparent",children:e.label},t))}),(0,o.jsxs)("div",{style:{flex:1,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:20},children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[(0,o.jsx)("button",{type:"button",onClick:()=>q(new Date(G.setMonth(G.getMonth()-1))),style:{border:"none",background:"transparent",cursor:"pointer",fontSize:18},children:"\u2039"}),(0,o.jsx)("span",{style:{fontSize:14,fontWeight:600,color:"#334155"},children:G.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,o.jsx)("button",{type:"button",onClick:()=>q(new Date(G.setMonth(G.getMonth()+1))),style:{border:"none",background:"transparent",cursor:"pointer",fontSize:18},children:"\u203a"})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:4,textAlign:"center"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,o.jsx)("div",{style:{fontSize:11,fontWeight:600,color:"#64748b",padding:"4px 0"},children:e},e)),qe(G).map((e,t)=>{const n=e?f(new Date(G.getFullYear(),G.getMonth(),e)):null,i=n&&(ie.startDate===n||ie.endDate===n),a=n&&ie.startDate&&ie.endDate&&n>=ie.startDate&&n<=ie.endDate;return(0,o.jsx)("div",{onClick:()=>e&&Ve(e,G),style:{padding:"6px",borderRadius:6,fontSize:13,cursor:e?"pointer":"default",background:i?"#0ea5e9":a?"#e0f2fe":"transparent",color:i?"#fff":e?"#334155":"#cbd5e1",fontWeight:i?600:400},children:e||""},t)})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[(0,o.jsx)("button",{type:"button",onClick:()=>J(new Date(V.setMonth(V.getMonth()-1))),style:{border:"none",background:"transparent",cursor:"pointer",fontSize:18},children:"\u2039"}),(0,o.jsx)("span",{style:{fontSize:14,fontWeight:600,color:"#334155"},children:V.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,o.jsx)("button",{type:"button",onClick:()=>J(new Date(V.setMonth(V.getMonth()+1))),style:{border:"none",background:"transparent",cursor:"pointer",fontSize:18},children:"\u203a"})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:4,textAlign:"center"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,o.jsx)("div",{style:{fontSize:11,fontWeight:600,color:"#64748b",padding:"4px 0"},children:e},e)),qe(V).map((e,t)=>{const n=e?f(new Date(V.getFullYear(),V.getMonth(),e)):null,i=n&&(ie.startDate===n||ie.endDate===n),a=n&&ie.startDate&&ie.endDate&&n>=ie.startDate&&n<=ie.endDate;return(0,o.jsx)("div",{onClick:()=>e&&Ve(e,V),style:{padding:"6px",borderRadius:6,fontSize:13,cursor:e?"pointer":"default",background:i?"#0ea5e9":a?"#e0f2fe":"transparent",color:i?"#fff":e?"#334155":"#cbd5e1",fontWeight:i?600:400},children:e||""},t)})]})]})]})]}),(0,o.jsxs)("div",{style:{marginTop:20,display:"flex",justifyContent:"flex-end",gap:12,paddingTop:16,borderTop:"1px solid #e2e8f0"},children:[(0,o.jsx)("button",{type:"button",onClick:()=>ae({startDate:"",endDate:""}),style:{padding:"8px 20px",borderRadius:6,border:"1px solid #e2e8f0",background:"#fff",fontSize:14,fontWeight:500,cursor:"pointer",color:"#334155"},children:"Cancel"}),(0,o.jsx)("button",{type:"submit",disabled:ge||!Oe(_),style:{padding:"10px 24px",borderRadius:6,border:"none",background:ge?"#94a3b8":"#14b8a6",fontSize:14,fontWeight:600,cursor:ge?"not-allowed":"pointer",color:"#fff",display:"flex",alignItems:"center",gap:8},children:ge?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("i",{className:"bi bi-hourglass-split spin"}),"Generating..."]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("i",{className:"bi bi-play-circle"}),"Apply and Generate"]})})]}),(0,o.jsx)("input",{type:"hidden",id:"startDate",value:ie.startDate,required:!0}),(0,o.jsx)("input",{type:"hidden",id:"endDate",value:ie.endDate,required:!0})]})}):null,(0,o.jsxs)("div",{className:"dual-calendar-container",style:{display:"none",marginTop:"24px",gap:"24px",marginBottom:"20px",padding:"16px 20px",background:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0",flexWrap:"wrap",alignItems:"flex-end"},children:[(0,o.jsxs)("div",{style:{flex:"1",minWidth:"220px"},children:[(0,o.jsxs)("label",{style:{display:"block",fontSize:"13px",fontWeight:600,color:"#475569",marginBottom:"6px"},children:[(0,o.jsx)("i",{className:"bi bi-calendar-event",style:{marginRight:"6px"}}),"Start Date"]}),(0,o.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:6},children:[(0,o.jsx)("button",{type:"button",className:"btn btn-sm "+("date"===se?"active":""),onClick:()=>re("date"),style:{padding:"6px 10px",borderRadius:8,border:"date"===se?"2px solid #2563eb":"1px solid #e2e8f0",background:"date"===se?"#eef2ff":"#fff",cursor:"pointer"},children:"Date"}),(0,o.jsx)("button",{type:"button",className:"btn btn-sm "+("month"===se?"active":""),onClick:()=>re("month"),style:{padding:"6px 10px",borderRadius:8,border:"month"===se?"2px solid #2563eb":"1px solid #e2e8f0",background:"month"===se?"#eef2ff":"#fff",cursor:"pointer"},children:"Month"}),(0,o.jsx)("button",{type:"button",className:"btn btn-sm "+("year"===se?"active":""),onClick:()=>re("year"),style:{padding:"6px 10px",borderRadius:8,border:"year"===se?"2px solid #2563eb":"1px solid #e2e8f0",background:"year"===se?"#eef2ff":"#fff",cursor:"pointer"},children:"Year"})]}),(0,o.jsxs)("div",{style:{fontSize:12,color:"#6b7280",marginBottom:8},children:["Choose how to select the Start value: ",(0,o.jsx)("strong",{children:"Date"})," (exact day), ",(0,o.jsx)("strong",{children:"Month"})," (entire month), or ",(0,o.jsx)("strong",{children:"Year"})," (entire year)."]}),"date"===se&&(0,o.jsx)("input",{type:"date",value:ie.startDate,onChange:e=>ae(t=>({...t,startDate:e.target.value})),style:{width:"100%",padding:"10px 14px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",fontWeight:500,color:"#1e293b",background:"#fff",cursor:"pointer"}}),"month"===se&&(0,o.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,o.jsxs)("select",{value:new Date(ie.startDate||new Date).getMonth(),onChange:e=>{const t=parseInt(e.target.value,10),n=new Date(ie.startDate||new Date).getFullYear(),i=new Date(n,t,1),a=f(i);q(i),ae(e=>({...e,startDate:a,endDate:e.endDate&&e.endDate<a?a:e.endDate}))},style:{flex:1,padding:"10px 12px",borderRadius:"8px",border:"2px solid #e2e8f0",background:"#fff"},children:[(0,o.jsx)("option",{value:0,children:"January"}),(0,o.jsx)("option",{value:1,children:"February"}),(0,o.jsx)("option",{value:2,children:"March"}),(0,o.jsx)("option",{value:3,children:"April"}),(0,o.jsx)("option",{value:4,children:"May"}),(0,o.jsx)("option",{value:5,children:"June"}),(0,o.jsx)("option",{value:6,children:"July"}),(0,o.jsx)("option",{value:7,children:"August"}),(0,o.jsx)("option",{value:8,children:"September"}),(0,o.jsx)("option",{value:9,children:"October"}),(0,o.jsx)("option",{value:10,children:"November"}),(0,o.jsx)("option",{value:11,children:"December"})]}),(0,o.jsx)("select",{value:new Date(ie.startDate||new Date).getFullYear(),onChange:e=>{const t=parseInt(e.target.value,10),n=new Date(ie.startDate||new Date).getMonth(),i=new Date(t,n,1),a=f(i);q(i),ae(e=>({...e,startDate:a,endDate:e.endDate&&e.endDate<a?a:e.endDate}))},style:{width:"110px",padding:"10px 12px",borderRadius:"8px",border:"2px solid #e2e8f0",background:"#fff"},children:Array.from({length:10},(e,t)=>(new Date).getFullYear()-5+t).map(e=>(0,o.jsx)("option",{value:e,children:e},e))})]}),"year"===se&&(0,o.jsx)("select",{value:new Date(ie.startDate||new Date).getFullYear(),onChange:e=>{const t=parseInt(e.target.value,10),n=new Date(t,0,1),i=f(n);ae(e=>({...e,startDate:i,endDate:e.endDate&&e.endDate<i?i:e.endDate}))},style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"2px solid #e2e8f0",background:"#fff"},children:Array.from({length:10},(e,t)=>(new Date).getFullYear()-5+t).map(e=>(0,o.jsx)("option",{value:e,children:e},e))})]}),(0,o.jsxs)("div",{style:{flex:"1",minWidth:"220px"},children:[(0,o.jsxs)("label",{style:{display:"block",fontSize:"13px",fontWeight:600,color:"#475569",marginBottom:"6px"},children:[(0,o.jsx)("i",{className:"bi bi-calendar-event",style:{marginRight:"6px"}}),"End Date"]}),(0,o.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:6},children:[(0,o.jsx)("button",{type:"button",className:"btn btn-sm "+("date"===de?"active":""),onClick:()=>pe("date"),style:{padding:"6px 10px",borderRadius:8,border:"date"===de?"2px solid #2563eb":"1px solid #e2e8f0",background:"date"===de?"#eef2ff":"#fff",cursor:"pointer"},children:"Date"}),(0,o.jsx)("button",{type:"button",className:"btn btn-sm "+("month"===de?"active":""),onClick:()=>pe("month"),style:{padding:"6px 10px",borderRadius:8,border:"month"===de?"2px solid #2563eb":"1px solid #e2e8f0",background:"month"===de?"#eef2ff":"#fff",cursor:"pointer"},children:"Month"}),(0,o.jsx)("button",{type:"button",className:"btn btn-sm "+("year"===de?"active":""),onClick:()=>pe("year"),style:{padding:"6px 10px",borderRadius:8,border:"year"===de?"2px solid #2563eb":"1px solid #e2e8f0",background:"year"===de?"#eef2ff":"#fff",cursor:"pointer"},children:"Year"})]}),(0,o.jsxs)("div",{style:{fontSize:12,color:"#6b7280",marginBottom:8},children:["Choose how to select the End value: ",(0,o.jsx)("strong",{children:"Date"})," (exact day), ",(0,o.jsx)("strong",{children:"Month"})," (entire month), or ",(0,o.jsx)("strong",{children:"Year"})," (entire year)."]}),"date"===de&&(0,o.jsx)("input",{type:"date",value:ie.endDate,onChange:e=>ae(t=>({...t,endDate:e.target.value})),style:{width:"100%",padding:"10px 14px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",fontWeight:500,color:"#1e293b",background:"#fff",cursor:"pointer"}}),"month"===de&&(0,o.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,o.jsxs)("select",{value:new Date(ie.endDate||new Date).getMonth(),onChange:e=>{const t=parseInt(e.target.value,10),n=new Date(ie.endDate||new Date).getFullYear(),i=new Date(n,t+1,0),a=f(i);J(i),ae(e=>({...e,endDate:a,startDate:e.startDate&&e.startDate>a?a:e.startDate}))},style:{flex:1,padding:"10px 12px",borderRadius:"8px",border:"2px solid #e2e8f0",background:"#fff"},children:[(0,o.jsx)("option",{value:0,children:"January"}),(0,o.jsx)("option",{value:1,children:"February"}),(0,o.jsx)("option",{value:2,children:"March"}),(0,o.jsx)("option",{value:3,children:"April"}),(0,o.jsx)("option",{value:4,children:"May"}),(0,o.jsx)("option",{value:5,children:"June"}),(0,o.jsx)("option",{value:6,children:"July"}),(0,o.jsx)("option",{value:7,children:"August"}),(0,o.jsx)("option",{value:8,children:"September"}),(0,o.jsx)("option",{value:9,children:"October"}),(0,o.jsx)("option",{value:10,children:"November"}),(0,o.jsx)("option",{value:11,children:"December"})]}),(0,o.jsx)("select",{value:new Date(ie.endDate||new Date).getFullYear(),onChange:e=>{const t=parseInt(e.target.value,10),n=new Date(ie.endDate||new Date).getMonth(),i=new Date(t,n+1,0),a=f(i);J(i),ae(e=>({...e,endDate:a,startDate:e.startDate&&e.startDate>a?a:e.startDate}))},style:{width:"110px",padding:"10px 12px",borderRadius:"8px",border:"2px solid #e2e8f0",background:"#fff"},children:Array.from({length:10},(e,t)=>(new Date).getFullYear()-5+t).map(e=>(0,o.jsx)("option",{value:e,children:e},e))})]}),"year"===de&&(0,o.jsx)("select",{value:new Date(ie.endDate||new Date).getFullYear(),onChange:e=>{const t=parseInt(e.target.value,10),n=new Date(t,11,31);ae(e=>({...e,endDate:f(n)}))},style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"2px solid #e2e8f0",background:"#fff"},children:Array.from({length:10},(e,t)=>(new Date).getFullYear()-5+t).map(e=>(0,o.jsx)("option",{value:e,children:e},e))})]}),(0,o.jsxs)("div",{style:{flex:"1",minWidth:"280px"},children:[(0,o.jsxs)("label",{style:{display:"block",fontSize:"13px",fontWeight:600,color:"#475569",marginBottom:"6px"},children:[(0,o.jsx)("i",{className:"bi bi-calendar-month",style:{marginRight:"6px"}}),"Quick Month/Year"]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,o.jsxs)("select",{value:new Date(ie.startDate||new Date).getMonth(),onChange:e=>{const t=parseInt(e.target.value),n=new Date(ie.startDate||new Date).getFullYear(),i=new Date(n,t,1),a=new Date(n,t+1,0);ae({startDate:i.toISOString().split("T")[0],endDate:a.toISOString().split("T")[0]})},style:{flex:"1",padding:"10px 12px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",fontWeight:500,color:"#1e293b",background:"#fff",cursor:"pointer"},children:[(0,o.jsx)("option",{value:0,children:"January"}),(0,o.jsx)("option",{value:1,children:"February"}),(0,o.jsx)("option",{value:2,children:"March"}),(0,o.jsx)("option",{value:3,children:"April"}),(0,o.jsx)("option",{value:4,children:"May"}),(0,o.jsx)("option",{value:5,children:"June"}),(0,o.jsx)("option",{value:6,children:"July"}),(0,o.jsx)("option",{value:7,children:"August"}),(0,o.jsx)("option",{value:8,children:"September"}),(0,o.jsx)("option",{value:9,children:"October"}),(0,o.jsx)("option",{value:10,children:"November"}),(0,o.jsx)("option",{value:11,children:"December"})]}),(0,o.jsx)("select",{value:new Date(ie.startDate||new Date).getFullYear(),onChange:e=>{const t=parseInt(e.target.value),n=new Date(ie.startDate||new Date).getMonth(),i=new Date(t,n,1),a=new Date(t,n+1,0);ae({startDate:i.toISOString().split("T")[0],endDate:a.toISOString().split("T")[0]})},style:{width:"100px",padding:"10px 12px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",fontWeight:500,color:"#1e293b",background:"#fff",cursor:"pointer"},children:Array.from({length:10},(e,t)=>(new Date).getFullYear()-5+t).map(e=>(0,o.jsx)("option",{value:e,children:e},e))})]})]})]}),(0,o.jsx)("input",{type:"hidden",id:"startDate",value:ie.startDate,required:!0}),(0,o.jsx)("input",{type:"hidden",id:"endDate",value:ie.endDate,required:!0})]}),(0,o.jsx)("div",{className:"form-actions",style:{marginTop:"2rem",display:"none",justifyContent:"center"},children:(0,o.jsx)("button",{type:"submit",disabled:ge||!Oe(_),className:"btn btn-primary btn-generate",children:ge?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("i",{className:"bi bi-hourglass-split spin"}),"Generating..."]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("i",{className:"bi bi-play-circle"}),"Generate Report"]})})}),(0,o.jsx)("div",{style:{display:"none"},children:(0,o.jsxs)("div",{className:"form-grid",style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",gap:"16px",alignItems:"end"},children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsxs)("label",{htmlFor:"reportType-old",children:[(0,o.jsx)("i",{className:"bi bi-file-earmark-text"}),x("reportTypeLabel")]}),(0,o.jsxs)("select",{id:"reportType-old",value:_,onChange:e=>j(e.target.value),className:"form-control",children:[(0,o.jsx)("option",{value:"attendance",children:x("attendanceReport")}),(0,o.jsx)("option",{value:"audit",children:x("auditReport")})]})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsxs)("label",{htmlFor:"reportScope",children:[(0,o.jsx)("i",{className:"bi bi-people"}),x("reportScopeLabel")]}),(0,o.jsxs)("select",{id:"reportScope",value:D,onChange:e=>w(e.target.value),className:"form-control",disabled:"audit"===_,title:"audit"===_?x("auditReport")+" "+x("groupReport"):x("reportScopeLabel"),children:[(0,o.jsx)("option",{value:"individual",children:x("individualReport")}),(0,o.jsx)("option",{value:"group",children:x("groupReport")})]})]}),"group"===D&&"attendance"!==_&&"meal"!==_&&(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsxs)("label",{htmlFor:"reportGrouping",children:[(0,o.jsx)("i",{className:"bi bi-collection"}),"Group By"]}),(0,o.jsxs)("select",{id:"reportGrouping",value:I,onChange:e=>A(e.target.value),className:"form-control",children:[(0,o.jsx)("option",{value:"none",children:"None"}),(0,o.jsx)("option",{value:"designation",children:"Designation Wise"}),(0,o.jsx)("option",{value:"punch",children:"F1-0 (Punch Type)"})]})]}),"individual"===D&&"meal"!==_&&(0,o.jsxs)("div",{className:"form-group",style:{gridColumn:"span 1"},children:[(0,o.jsxs)("label",{htmlFor:"employeeId",children:[(0,o.jsx)("i",{className:"bi bi-person-badge"}),x("employeeIdLabel")]}),(0,o.jsx)("input",{type:"text",id:"employeeId",value:k,onChange:e=>C(e.target.value),className:"form-control",placeholder:x("enterEmployeeId"),required:"individual"===D,title:x("enterEmployeeId")})]}),("group"===D||"meal"===_)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"form-group",style:{gridColumn:"span 1"},children:[(0,o.jsxs)("label",{htmlFor:"divisionId",children:[(0,o.jsx)("i",{className:"bi bi-building"}),x("divisionLabel")]}),(0,o.jsxs)("select",{id:"divisionId",value:T,onChange:e=>E(e.target.value),className:"form-control",disabled:"individual"===D&&"meal"!==_,style:{cursor:"individual"===D&&"meal"!==_?"not-allowed":"pointer"},children:[(0,o.jsx)("option",{value:"all",children:x("allDivisionsLabel")}),(Array.isArray(F)?F:[]).map(e=>(0,o.jsx)("option",{value:e._id||e.id,children:e.name||e.division_name},e._id||e.id))]})]}),(0,o.jsxs)("div",{className:"form-group",style:{gridColumn:"span 1"},children:[(0,o.jsxs)("label",{htmlFor:"sectionId",children:[(0,o.jsx)("i",{className:"bi bi-diagram-3"}),x("sectionLabel")]}),(0,o.jsxs)("select",{id:"sectionId",value:z,onChange:e=>R(e.target.value),className:"form-control",disabled:"meal"!==_&&("individual"===D||"all"===T),style:{cursor:"meal"===_?"pointer":"individual"===D||"all"===T?"not-allowed":"pointer"},title:"meal"===_?"Select a section":"all"===T?"All Divisions selected - Section must be All":"Select a section",children:[(0,o.jsx)("option",{value:"all",children:x("allSectionsLabel")}),("meal"===_||"all"!==T)&&(Array.isArray(L)?L:[]).map(e=>(0,o.jsx)("option",{value:e._id||e.id,children:e.name||e.section_name},e._id||e.id))]})]}),(0,o.jsxs)("div",{className:"form-group",style:{gridColumn:"span 1"},children:[(0,o.jsxs)("label",{htmlFor:"subSectionId",children:[(0,o.jsx)("i",{className:"bi bi-diagram-2"}),x("subSectionLabel")]}),(0,o.jsxs)("select",{id:"subSectionId",value:U,onChange:e=>Y(e.target.value),className:"form-control",disabled:"meal"!==_&&("group"!==D||"all"===z||"all"===T),style:{cursor:"meal"===_?"pointer":"group"!==D||"all"===z||"all"===T?"not-allowed":"pointer"},title:"meal"===_?"Select a sub section (optional)":"all"===T?"All Divisions selected - Sub Section must be All":"all"===z?"Please select a section first":"Select a sub section",children:[(0,o.jsx)("option",{value:"all",children:x("all"===T?"allSubSectionsLabel":"all"===z?"selectSectionFirst":"allSubSectionsLabel")}),("meal"===_||"all"!==z&&"all"!==T)&&(Array.isArray(P)?P:[]).map(e=>{var t,n,i,a,l;return(0,o.jsx)("option",{value:e._id||e.id,children:(null===(t=e.subSection)||void 0===t?void 0:t.sub_hie_name)||(null===(n=e.subSection)||void 0===n?void 0:n.name)||(null===(i=e.subSection)||void 0===i?void 0:i.hie_name)||(null===(a=e.subSection)||void 0===a?void 0:a.sub_hie_code)||(null===(l=e.subSection)||void 0===l?void 0:l.code)||"Unnamed"},e._id||e.id)})]})]}),"designation"!==I&&"attendance"!==_&&"meal"!==_&&(0,o.jsxs)("div",{className:"form-group",style:{gridColumn:"span 1"},children:[(0,o.jsxs)("label",{htmlFor:"timePeriod",children:[(0,o.jsx)("i",{className:"bi bi-calendar-range"}),"Time Period"]}),(0,o.jsxs)("select",{id:"timePeriod",value:S,onChange:e=>N(e.target.value),className:"form-control",children:[(0,o.jsx)("option",{value:"none",children:"None"}),(0,o.jsx)("option",{value:"daily",children:"Daily"}),(0,o.jsx)("option",{value:"weekly",children:"Weekly"}),(0,o.jsx)("option",{value:"monthly",children:"Monthly"}),(0,o.jsx)("option",{value:"annually",children:"Annually"})]})]})]}),"designation"!==I&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsxs)("label",{htmlFor:"startDate",children:[(0,o.jsx)("i",{className:"bi bi-calendar3"}),"Start Date"]}),(0,o.jsx)("input",{type:"date",id:"startDate",value:ie.startDate,onChange:e=>ae({...ie,startDate:e.target.value}),className:"form-control",required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsxs)("label",{htmlFor:"endDate",children:[(0,o.jsx)("i",{className:"bi bi-calendar3"}),"End Date"]}),(0,o.jsx)("input",{type:"date",id:"endDate",value:ie.endDate,onChange:e=>ae({...ie,endDate:e.target.value}),className:"form-control",required:!0})]})]})]})}),k&&_e&&(0,o.jsx)("div",{style:{margin:"24px 0",display:"flex",justifyContent:"center"},children:(0,o.jsxs)("div",{style:{background:"#fff",border:"1px solid #e6eefc",padding:"12px 18px",borderRadius:10,boxShadow:"0 2px 8px rgba(102,126,234,0.06)",minWidth:360},children:[(0,o.jsx)("div",{style:{fontWeight:700,marginBottom:6},children:_e.FULLNAME||_e.FULL_NAME||_e.CALLING_NAME||_e.name||_e.employee_name||""}),(0,o.jsxs)("div",{style:{display:"flex",gap:12,fontSize:14},children:[(0,o.jsxs)("div",{children:["Emp No: ",(0,o.jsx)("b",{children:_e.EMP_NUMBER||_e.employee_id||_e.employeeId||_e._id})]}),(0,o.jsxs)("div",{children:["Division: ",(0,o.jsx)("b",{children:_e.DIVISION_NAME||(null===(t=_e.division)||void 0===t?void 0:t.name)||""})]}),(0,o.jsxs)("div",{children:["Section: ",(0,o.jsx)("b",{children:_e.SECTION_NAME||(null===(n=_e.section)||void 0===n?void 0:n.name)||""})]})]})]})}),k&&!_e&&ye&&ye.data&&0===ye.data.length&&(0,o.jsx)("div",{style:{margin:"8px 0 18px",display:"flex",justifyContent:"center"},children:(0,o.jsx)("div",{style:{background:"#fff6f6",border:"1px solid #fde2e2",padding:"10px 14px",borderRadius:8,color:"#c53030",minWidth:360,textAlign:"center"},children:"No employee found with the entered ID."})})]})}),be&&(0,o.jsxs)("div",{className:"error-message",children:[(0,o.jsx)("i",{className:"bi bi-exclamation-triangle"}),x("noDataFoundText")&&be&&be.includes("No records")?x("noDataFoundText"):be]}),H&&(0,o.jsx)("div",{className:"report-modal-overlay",onClick:()=>K(!1),children:(0,o.jsxs)("div",{className:"report-modal-content",onClick:e=>e.stopPropagation(),children:[(0,o.jsx)("button",{className:"report-modal-close",onClick:()=>K(!1),children:(0,o.jsx)("i",{className:"bi bi-x-lg"})}),(0,o.jsxs)("div",{className:"report-results",children:[(0,o.jsx)("div",{className:"results-header",children:(0,o.jsxs)("div",{className:"filter-summary attractive-summary-card",style:{background:"#fff",border:"1px solid #e0e0e0",borderRadius:"8px",padding:"18px 28px 16px 28px",color:"#222",fontFamily:"Segoe UI, Arial, sans-serif",fontSize:"1.05rem",margin:"0 auto 18px auto",boxShadow:"0 2px 8px 0 rgba(80,80,120,0.06)",maxWidth:"98vw",fontWeight:500},children:[(0,o.jsx)("div",{style:{fontWeight:800,fontSize:"1.25rem",marginBottom:10,letterSpacing:"0.2px"},children:"Report Filter Summary"}),(0,o.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"32px 48px",marginBottom:6},children:[(0,o.jsxs)("span",{children:["Type: ",(0,o.jsx)("b",{children:"attendance"===_?"Attendance Report":"audit"===_?"Audit Report":"Meal Report"})]}),(0,o.jsxs)("span",{children:["Scope: ",(0,o.jsx)("b",{children:"group"===D?"Group":"Individual"})]}),"individual"===D&&(0,o.jsxs)("span",{children:["Employee ID: ",(0,o.jsx)("b",{children:k||_e&&(_e.employee_id||_e.id)||"N/A"})]}),"group"===D&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("span",{children:["Division: ",(0,o.jsx)("b",{children:"all"===T?"All":(null===(c=F.find(e=>e._id===T||e.id===T))||void 0===c?void 0:c.name)||T})]}),(0,o.jsxs)("span",{children:["Section: ",(0,o.jsx)("b",{children:"all"===z?"All":(null===(m=L.find(e=>e._id===z||e.id===z))||void 0===m?void 0:m.name)||z})]})]})]}),(0,o.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"32px 48px",borderTop:"1px solid #eee",paddingTop:8},children:[(0,o.jsxs)("span",{children:["Date Range: ",(0,o.jsxs)("b",{children:[ie.startDate," to ",ie.endDate]})]}),(0,o.jsxs)("span",{children:["group"===(null===ye||void 0===ye?void 0:ye.reportType)?"Employees Found:":"Records Found:",(0,o.jsx)("b",{children:(null===ye||void 0===ye||null===(h=ye.data)||void 0===h?void 0:h.length)||0}),ge&&(0,o.jsx)("span",{style:{color:"#007bff",marginLeft:"8px"},children:"(Loading...)"})]}),(0,o.jsxs)("span",{style:{color:"#666",fontWeight:400,fontSize:"0.98rem",marginLeft:"auto"},children:["Generated at ",(new Date).toLocaleString()]})]}),"meal"===_&&(null===ye||void 0===ye?void 0:ye.summary)&&(0,o.jsxs)("div",{style:{borderTop:"1px solid #eee",paddingTop:12,marginTop:10},children:[(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px",marginBottom:"12px"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"14px 18px",backgroundColor:"#f0f9ff",borderRadius:"8px",border:"1px solid #bfdbfe"},children:[(0,o.jsx)("i",{className:"bi bi-basket-fill",style:{fontSize:"1.6rem",color:"#0284c7"}}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.85rem",color:"#64748b",marginBottom:"2px"},children:"Meal Packets Only"}),(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#0284c7"},children:ye.summary.totalMealPacketEmployees||0})]})]}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"14px 18px",backgroundColor:"#fef3c7",borderRadius:"8px",border:"1px solid #fcd34d"},children:[(0,o.jsx)("i",{className:"bi bi-cash-coin",style:{fontSize:"1.6rem",color:"#d97706"}}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.85rem",color:"#78716c",marginBottom:"2px"},children:"Meal Money Only"}),(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#d97706"},children:ye.summary.totalMealMoneyEmployees||0})]})]}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"14px 18px",backgroundColor:"#f3e8ff",borderRadius:"8px",border:"1px solid #d8b4fe"},children:[(0,o.jsx)("i",{className:"bi bi-award-fill",style:{fontSize:"1.6rem",color:"#9333ea"}}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:"2px"},children:"Both Types"}),(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#9333ea"},children:ye.summary.totalBothTypesEmployees||0})]})]}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"14px 18px",backgroundColor:"#dcfce7",borderRadius:"8px",border:"1px solid #86efac"},children:[(0,o.jsx)("i",{className:"bi bi-people-fill",style:{fontSize:"1.6rem",color:"#15803d"}}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.85rem",color:"#64748b",marginBottom:"2px"},children:"Total Unique Employees"}),(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#15803d"},children:ye.summary.totalEmployees||0})]})]})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",padding:"8px",backgroundColor:"#f8fafc",borderRadius:"6px",fontSize:"0.9rem",color:"#64748b"},children:[(0,o.jsx)("i",{className:"bi bi-info-circle",style:{marginRight:"6px"}}),"Total meal records processed: ",(0,o.jsx)("b",{style:{marginLeft:"4px",color:"#475569"},children:ye.summary.totalMealRecords||0})]})]})]})}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"18px",marginBottom:"8px"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",fontWeight:600,fontSize:"1.15rem"},children:[(0,o.jsx)("i",{className:"bi bi-table",style:{marginRight:10,marginLeft:12,fontSize:"1.2rem"}}),"Data Preview"]}),"audit"!==_&&(0,o.jsxs)("div",{className:"action-group",style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,o.jsxs)("span",{style:{fontWeight:600,fontSize:"1.15rem",display:"flex",alignItems:"center",marginLeft:12},children:[(0,o.jsx)("i",{className:"bi bi-download",style:{marginRight:6,fontSize:"1.2rem"}}),"Export Options"]}),"attendance"!==_||Fe?(0,o.jsxs)("button",{onClick:()=>(e=>{const t=Te;t&&t.data&&0!==t.data.length?"pdf"===e&&Ue():ve("No data to export. Please generate a report first or adjust search filters.")})("pdf"),className:"btn btn-outline-primary",style:{marginLeft:8,marginRight:18,display:"flex",alignItems:"center",fontWeight:500,fontSize:"1rem"},children:[(0,o.jsx)("i",{className:"bi bi-file-earmark-pdf",style:{marginRight:5,fontSize:"1.1rem"}}),"Print PDF"]}):(0,o.jsxs)("button",{disabled:!0,title:"You do not have permission to download this report",className:"btn btn-outline-secondary",style:{marginLeft:8,marginRight:18,display:"flex",alignItems:"center",fontWeight:500,fontSize:"1rem",opacity:.7},children:[(0,o.jsx)("i",{className:"bi bi-file-earmark-pdf",style:{marginRight:5,fontSize:"1.1rem"}}),"Print PDF"]})]})]}),(0,o.jsx)("div",{className:"data-preview",children:(0,o.jsx)("div",{className:"table-responsive",children:"audit"===_?(0,o.jsx)(r,{reportData:ye||{data:[]}}):"group"===D?(0,o.jsx)(l,{ref:Ne,reportData:ye||{data:[],dates:[],reportType:"group"},getHeaders:Ye,formatRow:Ge,reportType:_,dateRange:ie}):(0,o.jsx)(s,{ref:Ie,reportData:ye||{data:[]},getHeaders:Ye,formatRow:Ge,reportType:_,dateRange:ie,employeeInfo:_e})})})]})]})}),!ge&&H&&!ye&&(0,o.jsx)("div",{className:"report-modal-overlay",onClick:()=>K(!1),children:(0,o.jsxs)("div",{className:"report-modal-content",onClick:e=>e.stopPropagation(),children:[(0,o.jsx)("button",{className:"report-modal-close",onClick:()=>K(!1),children:(0,o.jsx)("i",{className:"bi bi-x-lg"})}),(0,o.jsx)("div",{className:"report-results",children:(0,o.jsxs)("div",{className:"empty-state",children:[(0,o.jsx)("div",{className:"empty-icon",children:(0,o.jsx)("i",{className:"bi bi-file-earmark-bar-graph"})}),(0,o.jsx)("h4",{className:"empty-title",children:x("readyToGenerateTitle")}),(0,o.jsx)("p",{className:"empty-text",children:x("readyToGenerateText")})]})})]})})]})}}}]);
//# sourceMappingURL=481.93ed2604.chunk.js.map