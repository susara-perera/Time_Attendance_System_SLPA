{"version":3,"file":"static/js/481.93ed2604.chunk.js","mappings":"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","sources":["components/dashboard/PageHeader.jsx","components/dashboard/GroupReport.jsx","components/dashboard/IndividualReport.jsx","components/dashboard/AuditReport.jsx","components/dashboard/ReportGeneration.jsx"],"sourcesContent":["import React from 'react';\r\nimport './PageHeader.css';\r\nimport logo from '../../assets/logo.jpg';\r\n\r\n/**\r\n * Reusable Page Header Component with Logo\r\n * @param {string} title - The page title\r\n * @param {string} subtitle - The page subtitle/description\r\n * @param {string} icon - Bootstrap icon class (e.g., \"bi-building\")\r\n * @param {React.ReactNode} actions - Optional action buttons\r\n * @param {function} onBack - Optional back navigation function\r\n */\r\nconst PageHeader = ({ title, subtitle, icon = 'bi-folder', actions, onBack }) => {\r\n  return (\r\n    <>\r\n      {onBack && (\r\n        <button \r\n          className=\"back-arrow-btn\"\r\n          onClick={onBack}\r\n          title=\"Back to Dashboard\"\r\n          style={{ marginBottom: '12px', background: 'transparent', color: '#0f172a', border: '1px solid rgba(15,23,42,0.08)', width: 'auto', padding: '8px 12px' }}\r\n        >\r\n          <i className=\"bi bi-arrow-left\"></i>&nbsp;<span style={{ fontWeight: 600 }}>Back</span>\r\n        </button>\r\n      )}\r\n      <div className=\"page-header-banner\">\r\n        <div className=\"page-header-content\">\r\n          <div className=\"page-header-left\">\r\n            <div className=\"page-header-icon\">\r\n              <i className={`bi ${icon}`}></i>\r\n            </div>\r\n            <div className=\"page-header-text\">\r\n              <h1>{title}</h1>\r\n              {subtitle && <p>{subtitle}</p>}\r\n            </div>\r\n          </div>\r\n        <div className=\"page-header-right\">\r\n          {actions && <div className=\"page-header-actions\">{actions}</div>}\r\n          <div className=\"page-header-logo\">\r\n            <img src={logo} alt=\"Company Logo\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Decorative Elements */}\r\n      <div className=\"page-header-decoration\">\r\n        <div className=\"decoration-circle decoration-circle-1\"></div>\r\n        <div className=\"decoration-circle decoration-circle-2\"></div>\r\n        <div className=\"decoration-circle decoration-circle-3\"></div>\r\n      </div>\r\n    </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PageHeader;\r\n","import React, { forwardRef, useImperativeHandle } from 'react';\r\n\r\nconst GroupReport = forwardRef(({ reportData, getHeaders, formatRow, reportType, dateRange }, ref) => {\r\n  // Debug: Log what data we received\r\n  console.log('GroupReport - reportData:', {\r\n    hasData: !!reportData,\r\n    dataLength: reportData?.data?.length,\r\n    hasDates: !!reportData?.dates,\r\n    datesLength: reportData?.dates?.length,\r\n    sampleEmployee: reportData?.data?.[0],\r\n    sampleDailyAttendance: reportData?.data?.[0]?.dailyAttendance,\r\n    firstDateKey: reportData?.dates?.[0],\r\n    firstDateData: reportData?.data?.[0]?.dailyAttendance?.[reportData?.dates?.[0]]\r\n  });\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    print: () => {\r\n      if (!reportData || !Array.isArray(reportData.data) || reportData.data.length === 0) {\r\n        alert('No data to print.');\r\n        return;\r\n      }\r\n      const headers = getHeaders();\r\n      // (old flat rows building removed  we now build `punches` and `sortedRecords` below)\r\n\r\n      const reportTitle = reportType === 'attendance' ? 'History Transaction Report' : 'Meal Consumption Report';\r\n      const subtitle = reportType === 'attendance' ? 'All Granted(ID & FP) Records' : 'All Meal Records';\r\n\r\n      // Build flat punches and sort (date, emp, time, IN before OUT)\r\n      const punches = [];\r\n      // Determine date order: prefer reportData.dates if present\r\n      let dateOrder = Array.isArray(reportData.dates) && reportData.dates.length > 0 ? reportData.dates : [];\r\n      if (dateOrder.length === 0) {\r\n        const dateSet = new Set();\r\n        reportData.data.forEach(emp => {\r\n          if (Array.isArray(emp.punches)) emp.punches.forEach(p => dateSet.add(p.date || p.punchDate || p.date_));\r\n          if (emp.dailyAttendance) Object.keys(emp.dailyAttendance).forEach(k => dateSet.add(k));\r\n        });\r\n        dateOrder = Array.from(dateSet).sort((a,b) => new Date(a)-new Date(b));\r\n      }\r\n\r\n      // Create punches in date-first order\r\n      dateOrder.forEach(date => {\r\n        reportData.data.forEach(emp => {\r\n          if (Array.isArray(emp.punches) && emp.punches.length) {\r\n            emp.punches.filter(p => String(p.date || p.punchDate || p.date_) === String(date)).forEach((p, pIndex) => {\r\n              const inferredType = (p && (p.scan_type || p.type || p.direction)) ? (p.scan_type || p.type || p.direction) : (pIndex % 2 === 0 ? 'IN' : 'OUT');\r\n              punches.push({\r\n                employee_ID: emp.employeeId || emp.employee_ID || emp.emp_no || emp.empNo,\r\n                employee_name: emp.employeeName || emp.employee_name || emp.name,\r\n                date_: date,\r\n                time_: p.time || p.punchTime || p.time_ || '',\r\n                scan_type: inferredType\r\n              });\r\n            });\r\n          } else if (emp.dailyAttendance && emp.dailyAttendance[date]) {\r\n            const dayData = emp.dailyAttendance[date];\r\n            // Check if dayData is directly an array (backend returns it this way)\r\n            if (Array.isArray(dayData) && dayData.length) {\r\n              dayData.forEach((p, pIndex) => {\r\n                const inferredType = (p && (p.scan_type || p.type || p.direction)) ? (p.scan_type || p.type || p.direction) : (pIndex % 2 === 0 ? 'IN' : 'OUT');\r\n                punches.push({ \r\n                  employee_ID: emp.employeeId || emp.employee_ID || emp.emp_no || emp.empNo, \r\n                  employee_name: emp.employeeName || emp.employee_name || emp.name, \r\n                  date_: date, \r\n                  time_: p.time || p.time_ || '', \r\n                  scan_type: inferredType,\r\n                  eventDescription: p.eventDescription || ''\r\n                });\r\n              });\r\n            } else if (Array.isArray(dayData.punches) && dayData.punches.length) {\r\n              dayData.punches.forEach((p, pIndex) => {\r\n                const inferredType = (p && (p.scan_type || p.type || p.direction)) ? (p.scan_type || p.type || p.direction) : (pIndex % 2 === 0 ? 'IN' : 'OUT');\r\n                punches.push({ employee_ID: emp.employeeId || emp.employee_ID || emp.emp_no || emp.empNo, employee_name: emp.employeeName || emp.employee_name || emp.name, date_: date, time_: p.time || p.time_ || '', scan_type: inferredType });\r\n              });\r\n            } else {\r\n              if (dayData.checkIn) punches.push({ employee_ID: emp.employeeId || emp.employee_ID || emp.emp_no || emp.empNo, employee_name: emp.employeeName || emp.employee_name || emp.name, date_: date, time_: dayData.checkIn, scan_type: 'IN' });\r\n              if (dayData.checkOut) punches.push({ employee_ID: emp.employeeId || emp.employee_ID || emp.emp_no || emp.empNo, employee_name: emp.employeeName || emp.employee_name || emp.name, date_: date, time_: dayData.checkOut, scan_type: 'OUT' });\r\n            }\r\n          }\r\n        });\r\n      });\r\n\r\n      // Sort punches\r\n      punches.sort((a,b)=>{\r\n        const da = new Date(a.date_|| ''); const db = new Date(b.date_|| '');\r\n        if (!isNaN(da.getTime()) && !isNaN(db.getTime())) { if (da < db) return -1; if (da > db) return 1; }\r\n        else { if ((a.date_||'') < (b.date_||'')) return -1; if ((a.date_||'') > (b.date_||'')) return 1; }\r\n        const empA = String(a.employee_ID||''); const empB = String(b.employee_ID||''); if (empA < empB) return -1; if (empA > empB) return 1;\r\n        const ta = a.time_||''; const tb = b.time_||''; if (ta < tb) return -1; if (ta > tb) return 1;\r\n        const aIsIn = (a.scan_type||'').toUpperCase() === 'IN'; const bIsIn = (b.scan_type||'').toUpperCase() === 'IN'; if (aIsIn && !bIsIn) return -1; if (!aIsIn && bIsIn) return 1; return 0;\r\n      });\r\n\r\n      // Build sortedRecords with display punch date key\r\n      const sortedRecords = punches.map(p => {\r\n        const rec = { ...p };\r\n        const punchDate = new Date(p.date_);\r\n        rec._punchDateKey = !isNaN(punchDate.getTime()) ? punchDate.toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: '2-digit' }).replace(/\\//g, '-') : p.date_;\r\n        return rec;\r\n      });\r\n\r\n      // Build pages with date headers and duplicate suppression; start new page on date change\r\n  // Reserve a couple of record rows at the bottom of each printed page for spacing/signature\r\n  const PAGE_RECORDS = 31; // visual target per page including reserved rows\r\n  const RESERVED_ROWS = 2; // number of empty record slots to leave at bottom of each page\r\n  const ROWS_PER_PAGE = Math.max(1, PAGE_RECORDS - RESERVED_ROWS);\r\n      const pages = [];\r\n      let currentPage = []; let lastKey = null; let lastDateHeader = null; let currentCount = 0;\r\n      const pushPage = () => { if (currentPage.length>0) { pages.push(currentPage.slice()); currentPage=[]; currentCount=0; lastKey=null; } };\r\n\r\n      sortedRecords.forEach(record => {\r\n        const dateHeader = record._punchDateKey || (record.date_ || '');\r\n        if (lastDateHeader !== dateHeader) {\r\n          lastDateHeader = dateHeader;\r\n          // inject date header row (highlighted to match preview) without forcing a page break\r\n          currentPage.push(`<tr style=\"background: #dfe7ff;\"><td colspan=\"7\" style=\"font-weight: 700; font-size: 11px; color: #000; text-align: left; padding: 10px 14px; border: 1px solid #0a0a0aff;\">Date: ${dateHeader}</td></tr>`);\r\n          currentCount++; lastKey = null;\r\n        }\r\n\r\n        const row = formatRow(record);\r\n        const empIdVal = record.employee_ID || record.employeeId || record.emp_no || record.empNo || '';\r\n        const dateVal = dateHeader;\r\n        const key = `${empIdVal}||${dateVal}`;\r\n        if (lastKey === key) {\r\n          if (row.length>0) row[0]=''; if (row.length>1) row[1]=''; if (row.length>2) row[2]=''; if (row.length>3) row[3]='';\r\n        } else lastKey = key;\r\n\r\n        currentPage.push(`<tr>${row.map((cell,ci)=>`<td style=\"border: 1px solid #000; padding: 4px 6px; text-align: left; font-size: 11px; white-space: pre-line;\">${ci===0?'<strong>'+cell+'</strong>':cell}</td>`).join('')}</tr>`);\r\n        currentCount++;\r\n        if (currentCount >= ROWS_PER_PAGE) pushPage();\r\n      });\r\n      if (currentPage.length>0) pages.push(currentPage.slice());\r\n      const totalPages = pages.length || 1;\r\n\r\n      const renderPage = (pageRows, pageNum) => `\r\n        <div class=\"common-header\" style=\"page-break-before: ${pageNum > 1 ? 'always' : 'auto'}; width:100%;\">\r\n          <div class=\"report-header\" style=\"padding:8px 0; margin-bottom:6px;\">\r\n            <div class=\"header-content\" style=\"max-width:1200px; margin:0 auto; padding:0 12px; text-align:left; display:flex; justify-content:space-between; align-items:flex-start;\">\r\n              <div style=\"max-width:70%;\">\r\n                <h1 style=\"margin:0; display:flex; align-items:center; gap:8px; font-family: 'Courier New', monospace; font-size:14px;\">${reportTitle}</h1>\r\n                <div class=\"header-subtitle\" style=\"font-size:11px; margin-top:4px;\"><strong>${subtitle}</strong></div>\r\n                <div style=\"height:8px\">&nbsp;</div>\r\n                <div class=\"date-range\" style=\"margin-top:6px; font-size:11px;\"><strong>Date From :</strong> ${dateRange.startDate} <strong>To :</strong> ${dateRange.endDate}</div>\r\n              </div>\r\n              <div style=\"text-align:left; font-size:11px;\" class=\"print-meta\">\r\n                <div style=\"font-size:11px\">Printed Date : ${new Date().toLocaleDateString()}</div>\r\n                <div style=\"font-size:11px\">Printed Time : ${new Date().toLocaleTimeString()}</div>\r\n                <div style=\"font-size:11px\">Page ${pageNum} of ${totalPages}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"header-content\" style=\"max-width:1200px; margin:0 auto; padding:0 12px;\">\r\n            <table style=\"width:100%; border-collapse: collapse;\">\r\n              <thead>\r\n                <tr>${headers.map(h=>`<th style=\"font-size:12px; padding:4px 2px; border:0.5px solid #000; text-align:left;\">${h}</th>`).join('')}</tr>\r\n              </thead>\r\n              <tbody>\r\n                ${pageRows.join('')}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          ${pageNum === totalPages ? `\r\n            <div style=\"margin-top: 60px; width: 100%;\">\r\n              <table style=\"width:100%; border-collapse: collapse; border: none;\">\r\n                <tbody>\r\n                  <tr>\r\n                    <td style=\"width:15%; vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;\">Date</td>\r\n                    <td style=\"width:35%; vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;\"><span style=\"display:inline-block; font-family: 'Courier New', monospace; font-size:9px; letter-spacing:1px; line-height:1;\">....................</span></td>\r\n                    <td style=\"width:15%; vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;\">Date</td>\r\n                    <td style=\"width:35%; vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;\"><span style=\"display:inline-block; font-family: 'Courier New', monospace; font-size:9px; letter-spacing:1px; line-height:1;\">....................</span></td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td style=\"vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;\">Authorized Signature 1</td>\r\n                    <td style=\"vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;\"><span style=\"display:inline-block; font-family: 'Courier New', monospace; font-size:9px; letter-spacing:1px; line-height:1;\">....................</span></td>\r\n                    <td style=\"vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;\">Authorized Signature 2</td>\r\n                    <td style=\"vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;\"><span style=\"display:inline-block; font-family: 'Courier New', monospace; font-size:9px; letter-spacing:1px; line-height:1;\">....................</span></td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          ` : ''}\r\n        </div>`;\r\n\r\n      const html = `<!DOCTYPE html><html><head><meta charset=\"utf-8\"/><title>${reportTitle}</title><style>\r\n        body{font-family:'Courier New',monospace;font-size:11px;margin:20px;padding:24px 24px 0 24px}\r\n        table{width:100%;border-collapse:collapse;margin-bottom:20px}\r\n  th,td{border:0.5px solid #000;padding:4px 6px;text-align:left}\r\n  th{background:#f5f5f5;font-weight:bold;font-size:12px}\r\n        td{font-size:11px;white-space:pre-line}\r\n        @media print{@page{margin:0.5in;size:landscape}body{margin:0}thead{display:table-header-group!important}@page{margin-top:0;margin-bottom:0;margin-left:0;margin-right:0}body::before,body::after{display:none!important}}\r\n      </style></head><body>${pages.map((p,idx)=>renderPage(p, idx+1)).join('')}</body></html>`;\r\n\r\n      const w = window.open('', '_blank', 'width=900,height=700');\r\n      if (!w) {\r\n        alert('Pop-up blocked! Please allow pop-ups for this site to print.');\r\n        return;\r\n      }\r\n      w.document.open();\r\n      w.document.write(html);\r\n      w.document.close();\r\n      \r\n      // Wait for content to load before triggering print dialog\r\n      // The print dialog allows user to \"Save as PDF\" as destination\r\n      setTimeout(() => {\r\n        w.focus();\r\n        w.print();\r\n        // Note: Window will stay open so user can review or re-print\r\n      }, 500);\r\n    }\r\n  }));\r\n\r\n  // preview rendering: build punches, sort, inject date headers and suppress duplicate Emp/Name/Date\r\n  const headers = getHeaders();\r\n  const previewElements = [];\r\n  if (reportData && Array.isArray(reportData.data)) {\r\n    // build punches in date-first order\r\n    const punches = [];\r\n    let dateOrder = Array.isArray(reportData.dates) && reportData.dates.length > 0 ? reportData.dates : [];\r\n    if (dateOrder.length === 0) {\r\n      const dateSet = new Set();\r\n      reportData.data.forEach(emp => {\r\n        if (Array.isArray(emp.punches)) emp.punches.forEach(p => dateSet.add(p.date || p.punchDate || p.date_));\r\n        if (emp.dailyAttendance) Object.keys(emp.dailyAttendance).forEach(k => dateSet.add(k));\r\n      });\r\n      dateOrder = Array.from(dateSet).sort((a,b) => new Date(a)-new Date(b));\r\n    }\r\n\r\n    dateOrder.forEach(date => {\r\n      reportData.data.forEach(emp => {\r\n        if (Array.isArray(emp.punches) && emp.punches.length) {\r\n          emp.punches.filter(p => String(p.date || p.punchDate || p.date_) === String(date)).forEach((p, pIndex) => {\r\n            const inferredType = (p && (p.scan_type || p.type || p.direction)) ? (p.scan_type || p.type || p.direction) : (pIndex % 2 === 0 ? 'IN' : 'OUT');\r\n            punches.push({ employee_ID: emp.employeeId || emp.employee_ID || emp.emp_no || emp.empNo, employee_name: emp.employeeName || emp.employee_name || emp.name, date_: date, time_: p.time || p.punchTime || p.time_ || '', scan_type: inferredType });\r\n          });\r\n        } else if (emp.dailyAttendance && emp.dailyAttendance[date]) {\r\n          const dayData = emp.dailyAttendance[date];\r\n          // Check if dayData is directly an array (backend returns it this way)\r\n          if (Array.isArray(dayData) && dayData.length) {\r\n            dayData.forEach((p, pIndex) => {\r\n              const inferredType = (p && (p.scan_type || p.type || p.direction)) ? (p.scan_type || p.type || p.direction) : (pIndex % 2 === 0 ? 'IN' : 'OUT');\r\n              punches.push({ \r\n                employee_ID: emp.employeeId || emp.employee_ID || emp.emp_no || emp.empNo, \r\n                employee_name: emp.employeeName || emp.employee_name || emp.name, \r\n                date_: date, \r\n                time_: p.time || p.time_ || '', \r\n                scan_type: inferredType,\r\n                eventDescription: p.eventDescription || ''\r\n              });\r\n            });\r\n          } else if (Array.isArray(dayData.punches) && dayData.punches.length) {\r\n            dayData.punches.forEach((p, pIndex) => {\r\n              const inferredType = (p && (p.scan_type || p.type || p.direction)) ? (p.scan_type || p.type || p.direction) : (pIndex % 2 === 0 ? 'IN' : 'OUT');\r\n              punches.push({ employee_ID: emp.employeeId || emp.employee_ID || emp.emp_no || emp.empNo, employee_name: emp.employeeName || emp.employee_name || emp.name, date_: date, time_: p.time || p.time_ || '', scan_type: inferredType });\r\n            });\r\n          } else {\r\n            if (dayData.checkIn) punches.push({ employee_ID: emp.employeeId || emp.employee_ID || emp.emp_no || emp.empNo, employee_name: emp.employeeName || emp.employee_name || emp.name, date_: date, time_: dayData.checkIn, scan_type: 'IN' });\r\n            if (dayData.checkOut) punches.push({ employee_ID: emp.employeeId || emp.employee_ID || emp.emp_no || emp.empNo, employee_name: emp.employeeName || emp.employee_name || emp.name, date_: date, time_: dayData.checkOut, scan_type: 'OUT' });\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n    // sort punches\r\n    punches.sort((a,b) => {\r\n      const da = new Date(a.date_||''); const db = new Date(b.date_||'');\r\n      if (!isNaN(da.getTime()) && !isNaN(db.getTime())) { if (da < db) return -1; if (da > db) return 1; } else { if ((a.date_||'') < (b.date_||'')) return -1; if ((a.date_||'') > (b.date_||'')) return 1; }\r\n      const empA = String(a.employee_ID||''); const empB = String(b.employee_ID||''); if (empA < empB) return -1; if (empA > empB) return 1;\r\n      const ta = a.time_||''; const tb = b.time_||''; if (ta < tb) return -1; if (ta > tb) return 1;\r\n      const aIsIn = (a.scan_type||'').toUpperCase() === 'IN'; const bIsIn = (b.scan_type||'').toUpperCase() === 'IN'; if (aIsIn && !bIsIn) return -1; if (!aIsIn && bIsIn) return 1; return 0;\r\n    });\r\n\r\n    // build preview elements: inject date headers and suppress duplicates, show all records\r\n    let lastKey = null; let lastDateSeen = null; let displayCount = 0;\r\n    for (let i = 0; i < punches.length; i++) {\r\n      const p = punches[i];\r\n      const dateVal = p.date_ || '';\r\n      if (lastDateSeen !== dateVal) {\r\n        // insert date header row  apply background to TD to prevent Bootstrap row striping from hiding it\r\n        previewElements.push(\r\n          <tr key={`date-header-${dateVal}`}>\r\n            <td colSpan={7} style={{ background: '#dfe7ff', fontWeight: 700, fontSize: '11px', color: '#000', textAlign: 'left', padding: '10px 14px', border: '1px solid #c7d2e8' }}>\r\n              {`Date: ${new Date(dateVal).toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: '2-digit' }).replace(/\\//g, '-')}`}\r\n            </td>\r\n          </tr>\r\n        );\r\n        lastDateSeen = dateVal; lastKey = null; displayCount++;\r\n      }\r\n\r\n      const row = formatRow(p);\r\n      const empIdVal = p.employee_ID || p.employeeId || '';\r\n      const key = `${empIdVal}||${dateVal}`;\r\n      if (lastKey === key) {\r\n        if (row.length > 0) row[0] = '';\r\n        if (row.length > 1) row[1] = '';\r\n        if (row.length > 2) row[2] = '';\r\n        if (row.length > 3) row[3] = '';\r\n      } else {\r\n        lastKey = key;\r\n      }\r\n\r\n      previewElements.push(\r\n        <tr key={`row-${i}`}>\r\n          {row.map((cell, ci) => (\r\n            <td key={ci} style={{ whiteSpace: 'pre-line', textAlign: 'left', fontSize: '11px', padding: '4px 6px', verticalAlign: 'middle', border: '1px solid #dee2e6' }}>\r\n              {ci === 0 ? <strong>{cell}</strong> : cell}\r\n            </td>\r\n          ))}\r\n        </tr>\r\n      );\r\n      displayCount++;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <table className=\"table table-striped\" style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n        <thead>\r\n          <tr>{headers.map((h, i) => (<th key={i} style={{ fontSize: '12px', background: '#f5f5f5', fontWeight: 'bold', padding: '4px 2px', border: '0.5px solid #dee2e6', textAlign: 'left' }}>{h}</th>))}</tr>\r\n        </thead>\r\n        <tbody>\r\n          {!reportData || !Array.isArray(reportData.data) || reportData.data.length === 0 ? (\r\n            <tr>\r\n              <td colSpan={7} style={{ textAlign: 'center', padding: '40px', color: '#666', fontSize: '14px' }}>\r\n                <div style={{\r\n                  width: '30px',\r\n                  height: '30px',\r\n                  border: '3px solid #f3f3f3',\r\n                  borderTop: '3px solid #007bff',\r\n                  borderRadius: '50%',\r\n                  animation: 'spin 1s linear infinite',\r\n                  margin: '0 auto 15px'\r\n                }}></div>\r\n                Loading attendance records...\r\n              </td>\r\n            </tr>\r\n          ) : (\r\n            previewElements\r\n          )}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default GroupReport;\r\n","import React, { forwardRef, useImperativeHandle } from 'react';\r\n\r\nconst IndividualReport = forwardRef(({ reportData, getHeaders, formatRow, reportType, dateRange, employeeInfo }, ref) => {\r\n  useImperativeHandle(ref, () => ({\r\n    print: () => {\r\n      if (!reportData || !Array.isArray(reportData.data) || reportData.data.length === 0) {\r\n        alert('No data to print.');\r\n        return;\r\n      }\r\n  const headers = getHeaders();\r\n  // For individual report drop these columns (case-insensitive)\r\n  const _dropSet = new Set(['emp no','emp name','meal-pkt-mny'].map(s=>s.toLowerCase()));\r\n  const keepIndices = headers.map((h,i)=> _dropSet.has(String(h||'').trim().toLowerCase()) ? -1 : i).filter(i=>i>=0);\r\n      // Build punches from reportData similar to GroupReport logic\r\n      const punches = [];\r\n      // prefer reportData.dates if present\r\n      let dateOrder = Array.isArray(reportData.dates) && reportData.dates.length > 0 ? reportData.dates : [];\r\n      if (dateOrder.length === 0) {\r\n        const dateSet = new Set();\r\n        reportData.data.forEach(r => {\r\n          if (r.date_ || r.punchDate || r.date) dateSet.add(r.date_ || r.punchDate || r.date);\r\n        });\r\n        dateOrder = Array.from(dateSet).sort((a,b) => new Date(a)-new Date(b));\r\n      }\r\n\r\n      dateOrder.forEach(date => {\r\n        reportData.data.forEach(r => {\r\n          // 1) raw punches array\r\n          if (Array.isArray(r.punches) && r.punches.length) {\r\n            r.punches.forEach(p => {\r\n              const pDate = p.date || p.date_ || r.date || r.punchDate || date;\r\n              if (String(pDate) !== String(date)) return;\r\n              punches.push({\r\n                employee_ID: r.employee_ID || r.employeeId || '',\r\n                employee_name: r.employee_name || r.employeeName || '',\r\n                date_: date,\r\n                time_: p.time || p.time_ || p.punchTime || '',\r\n                scan_type: (p.scan_type || p.status || p.type || '').toString()\r\n              });\r\n            });\r\n            return;\r\n          }\r\n\r\n          // 2) dailyAttendance keyed data\r\n          if (r.dailyAttendance && r.dailyAttendance[date]) {\r\n            const dayData = r.dailyAttendance[date];\r\n            if (Array.isArray(dayData) && dayData.length) {\r\n              dayData.forEach(p => punches.push({ employee_ID: r.employee_ID || r.employeeId || '', employee_name: r.employee_name || r.employeeName || '', date_: date, time_: p.time || p.time_ || p.punchTime || '', scan_type: (p.scan_type || p.status || p.type || '').toString() }));\r\n            } else {\r\n              if (dayData.checkIn) punches.push({ employee_ID: r.employee_ID || r.employeeId || '', employee_name: r.employee_name || r.employeeName || '', date_: date, time_: dayData.checkIn, scan_type: 'IN' });\r\n              if (dayData.checkOut) punches.push({ employee_ID: r.employee_ID || r.employeeId || '', employee_name: r.employee_name || r.employeeName || '', date_: date, time_: dayData.checkOut, scan_type: 'OUT' });\r\n            }\r\n            return;\r\n          }\r\n\r\n          // 3) fallback to flat record\r\n          const recDate = r.date_ || r.punchDate || r.date;\r\n          if (String(recDate) === String(date)) {\r\n            const inferredType = r.scan_type || r.type || r.direction || '';\r\n            punches.push({ employee_ID: r.employee_ID || r.employeeId || '', employee_name: r.employee_name || r.employeeName || '', date_: date, time_: r.time_ || r.time || r.punchTime || '', scan_type: inferredType });\r\n          }\r\n        });\r\n      });\r\n\r\n      // sort punches (date, employee, time, IN before OUT)\r\n      punches.sort((a,b)=>{\r\n        const da = new Date(a.date_||''); const db = new Date(b.date_||''); if (!isNaN(da.getTime()) && !isNaN(db.getTime())){ if (da<db) return -1; if (da>db) return 1;} else { if ((a.date_||'')<(b.date_||'')) return -1; if ((a.date_||'')>(b.date_||'')) return 1; }\r\n        const empA = String(a.employee_ID||''); const empB = String(b.employee_ID||''); if (empA<empB) return -1; if (empA>empB) return 1;\r\n        const ta = a.time_||''; const tb = b.time_||''; if (ta<tb) return -1; if (ta>tb) return 1;\r\n        const aIsIn = (a.scan_type||'').toUpperCase() === 'IN'; const bIsIn = (b.scan_type||'').toUpperCase() === 'IN'; if (aIsIn && !bIsIn) return -1; if (!aIsIn && bIsIn) return 1; return 0;\r\n      });\r\n\r\n      const sortedRecords = punches.map(p => {\r\n        const rec = { ...p };\r\n        const punchDate = new Date(p.date_);\r\n        rec._punchDateKey = !isNaN(punchDate.getTime()) ? punchDate.toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: '2-digit' }).replace(/\\//g, '-') : p.date_;\r\n        return rec;\r\n      });\r\n\r\n  // Build pages with date headers and duplicate suppression\r\n  // Set per-page data rows to 25 as requested\r\n  const ROWS_PER_PAGE = 28; // exact number of data rows to show per printed page (individual reports)\r\n      const pages = []; let currentPage = []; let lastKey = null; let lastDateHeader = null; let currentCount = 0;\r\n      const pushPage = ()=>{ if (currentPage.length>0){ pages.push(currentPage.slice()); currentPage=[]; currentCount=0; lastKey=null; } };\r\n      sortedRecords.forEach(record => {\r\n        const dateHeader = record._punchDateKey || (record.date_ || '');\r\n        // Individual reports should NOT include per-date bars; just track date for duplicate suppression\r\n        if (lastDateHeader !== dateHeader) { lastDateHeader = dateHeader; lastKey = null; }\r\n        const row = formatRow(record);\r\n        const empIdVal = record.employee_ID || record.employeeId || record.emp_no || record.empNo || '';\r\n        const dateVal = dateHeader; const key = `${empIdVal}||${dateVal}`;\r\n        if (lastKey === key) { if (row.length>0) row[0]=''; if (row.length>1) row[1]=''; if (row.length>2) row[2]=''; if (row.length>3) row[3]=''; } else lastKey = key;\r\n  currentPage.push(`<tr>${keepIndices.map((origI,colIdx)=>{ const cell = (row[origI]!==undefined?row[origI]:''); return `<td style=\"border: 1px solid #000; padding: 4px 6px; text-align: left; font-size: 11px; white-space: pre-line;\">${colIdx===0?'<strong>'+cell+'</strong>':cell}</td>`; }).join('')}</tr>`);\r\n        currentCount++; if (currentCount >= ROWS_PER_PAGE) pushPage();\r\n      }); if (currentPage.length>0) pages.push(currentPage.slice()); const totalPages = pages.length || 1;\r\n\r\n      // Resolve employee number/name robustly (check common keys, then fall back to first data record)\r\n      const empNo = employeeInfo?.employee_id\r\n        || employeeInfo?.employee_ID\r\n        || employeeInfo?.employeeId\r\n        || employeeInfo?.employeeNo\r\n        || employeeInfo?.emp_no\r\n        || employeeInfo?.empNo\r\n        || (reportData?.data && reportData.data[0] && (reportData.data[0].employee_id || reportData.data[0].employee_ID || reportData.data[0].employeeId || reportData.data[0].emp_no || reportData.data[0].empNo || ''))\r\n        || '';\r\n\r\n      const empName = employeeInfo?.name\r\n        || employeeInfo?.employee_name\r\n        || employeeInfo?.employeeName\r\n        || (reportData?.data && reportData.data[0] && (reportData.data[0].employee_name || reportData.data[0].employeeName || reportData.data[0].name || ''))\r\n        || '';\r\n\r\n      const reportTitle = reportType === 'attendance' ? 'History Transaction Report' : 'Meal Consumption Report';\r\n      const subtitle = reportType === 'attendance' ? 'All Granted(ID & FP) Records' : 'All Meal Records';\r\n\r\n      function renderPage(pageRows, pageNum){\r\n        const isLastPage = pageNum === totalPages;\r\n        return `\r\n          <div class=\"common-header\" style=\"page-break-before: ${pageNum > 1 ? 'always' : 'auto'}; width:100%;\">\r\n            <div class=\"report-header\" style=\"padding:8px 0; margin-bottom:6px;\">\r\n              <div class=\"header-content\" style=\"max-width:1200px; margin:0 auto; padding:0; text-align:left; display:flex; justify-content:space-between; align-items:flex-start;\">\r\n                <div style=\"max-width:70%;\">\r\n                  <h1 style=\"margin:0; display:flex; align-items:center; gap:8px; font-family: 'Courier New', monospace; font-size:14px;\">${reportTitle}</h1>\r\n                  <div class=\"header-subtitle\" style=\"font-size:11px; margin-top:4px;\"><strong>${subtitle}</strong></div>\r\n                  <div style=\"height:8px\">&nbsp;</div>\r\n                  <table style=\"margin-bottom:12px; border-collapse:collapse; border: none;\">\r\n                    <tr><td style=\"vertical-align: top; padding-right: 8px; font-weight: bold; width: 90px; border: none;\">Emp No :</td><td style=\"vertical-align: top; border: none;\">${empNo}</td></tr>\r\n                    <tr><td style=\"vertical-align: top; padding-right: 8px; font-weight: bold; border: none;\">Emp Name :</td><td style=\"vertical-align: top; border: none;\">${empName}</td></tr>\r\n                    <tr><td style=\"vertical-align: top; padding-right: 8px; font-weight: bold; border: none;\">Date From :</td><td style=\"vertical-align: top; border: none;\">${dateRange.startDate} &nbsp; To : &nbsp; ${dateRange.endDate}</td></tr>\r\n                  </table>\r\n                </div>\r\n                <div style=\"text-align:left; font-size:11px;\" class=\"print-meta\">\r\n                  <div style=\"font-size:11px\">Printed Date : ${new Date().toLocaleDateString()}</div>\r\n                  <div style=\"font-size:11px\">Printed Time : ${new Date().toLocaleTimeString()}</div>\r\n                  <div style=\"font-size:11px\">Page ${pageNum} of ${totalPages}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"header-content\" style=\"max-width:1200px; margin:0 auto; padding:0;\">\r\n              <table style=\"width:100%; border-collapse: collapse;\">\r\n                <thead><tr>${keepIndices.map(i=>`<th style=\"font-size:12px; padding:4px 2px; border:0.5px solid #000; text-align:left;\">${headers[i]}</th>`).join('')}</tr></thead>\r\n                <tbody>${pageRows.join('')}</tbody>\r\n              </table>\r\n            </div>\r\n            ${isLastPage ? `\r\n              <div style=\"margin-top: 60px; width: 100%;\">\r\n                <table style=\"width:100%; border-collapse: collapse; border: none;\">\r\n                  <tbody>\r\n                    <tr>\r\n                      <td style=\"width:15%; vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;\">Date</td>\r\n                      <td style=\"width:35%; vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;\"><span style=\"display:inline-block; font-family: 'Courier New', monospace; font-size:9px; letter-spacing:1px; line-height:1;\">....................</span></td>\r\n                      <td style=\"width:15%; vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;\">Date</td>\r\n                      <td style=\"width:35%; vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;\"><span style=\"display:inline-block; font-family: 'Courier New', monospace; font-size:9px; letter-spacing:1px; line-height:1;\">....................</span></td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td style=\"vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;\">Authorized Signature 1</td>\r\n                      <td style=\"vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;\"><span style=\"display:inline-block; font-family: 'Courier New', monospace; font-size:9px; letter-spacing:1px; line-height:1;\">....................</span></td>\r\n                      <td style=\"vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;\">Authorized Signature 2</td>\r\n                      <td style=\"vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;\"><span style=\"display:inline-block; font-family: 'Courier New', monospace; font-size:9px; letter-spacing:1px; line-height:1;\">....................</span></td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            ` : ''}\r\n          </div>\r\n        `;\r\n      }\r\n\r\n      const html = `<!DOCTYPE html><html><head><meta charset=\"utf-8\"/><title>${reportTitle}</title><style>\r\n        body{font-family:'Courier New',monospace;font-size:11px;margin:20px;padding:24px 24px 0 24px}\r\n        table{width:100%;border-collapse:collapse;margin-bottom:20px}\r\n  th,td{border:0.5px solid #000;padding:4px 6px;text-align:left}\r\n  th{background:#f5f5f5;font-weight:bold;font-size:12px}\r\n        td{font-size:11px;white-space:pre-line}\r\n        @media print{@page{margin:0.5in;size:landscape}body{margin:0}thead{display:table-header-group!important}@page{margin-top:0;margin-bottom:0;margin-left:0;margin-right:0}body::before,body::after{display:none!important}}\r\n      </style></head><body>${pages.map((p,idx)=>renderPage(p, idx+1)).join('')}</body></html>`;\r\n\r\n      const w = window.open(' ', '', 'width=900,height=700');\r\n      w.document.open(); w.document.write(html); w.document.close(); w.focus(); w.print(); w.close();\r\n    }\r\n  }));\r\n\r\n  // preview rendering: build punches, inject date headers and suppress duplicates (show all records)\r\n  const headers = getHeaders();\r\n  const _dropSetPreview = new Set(['emp no','emp name','meal-pkt-mny'].map(s=>s.toLowerCase()));\r\n  const previewKeepIndices = headers.map((h,i)=> _dropSetPreview.has(String(h||'').trim().toLowerCase()) ? -1 : i).filter(i=>i>=0);\r\n  const previewElements = [];\r\n  if (reportData && Array.isArray(reportData.data)) {\r\n    // build punches similar to print\r\n    const punches = [];\r\n    let dateOrder = Array.isArray(reportData.dates) && reportData.dates.length > 0 ? reportData.dates : [];\r\n    if (dateOrder.length === 0) {\r\n      const dateSet = new Set();\r\n      reportData.data.forEach(r => {\r\n        if (r.date_ || r.punchDate || r.date) dateSet.add(r.date_ || r.punchDate || r.date);\r\n      });\r\n      dateOrder = Array.from(dateSet).sort((a,b) => new Date(a)-new Date(b));\r\n    }\r\n    dateOrder.forEach(date => {\r\n      reportData.data.forEach(r => {\r\n        // 1) raw punches array\r\n        if (Array.isArray(r.punches) && r.punches.length) {\r\n          r.punches.forEach(p => {\r\n            const pDate = p.date || p.date_ || r.date || r.punchDate || date;\r\n            if (String(pDate) !== String(date)) return;\r\n            punches.push({ employee_ID: r.employee_ID || r.employeeId || '', employee_name: r.employee_name || r.employeeName || '', date_: date, time_: p.time || p.time_ || p.punchTime || '', scan_type: (p.scan_type || p.status || p.type || '').toString() });\r\n          });\r\n          return;\r\n        }\r\n\r\n        // 2) dailyAttendance keyed data\r\n        if (r.dailyAttendance && r.dailyAttendance[date]) {\r\n          const dayData = r.dailyAttendance[date];\r\n          if (Array.isArray(dayData) && dayData.length) {\r\n            dayData.forEach(p => punches.push({ employee_ID: r.employee_ID || r.employeeId || '', employee_name: r.employee_name || r.employeeName || '', date_: date, time_: p.time || p.time_ || p.punchTime || '', scan_type: (p.scan_type || p.status || p.type || '').toString() }));\r\n          } else {\r\n            if (dayData.checkIn) punches.push({ employee_ID: r.employee_ID || r.employeeId || '', employee_name: r.employee_name || r.employeeName || '', date_: date, time_: dayData.checkIn, scan_type: 'IN' });\r\n            if (dayData.checkOut) punches.push({ employee_ID: r.employee_ID || r.employeeId || '', employee_name: r.employee_name || r.employeeName || '', date_: date, time_: dayData.checkOut, scan_type: 'OUT' });\r\n          }\r\n          return;\r\n        }\r\n\r\n        // 3) fallback to flat record\r\n        const recDate = r.date_ || r.punchDate || r.date;\r\n        if (String(recDate) === String(date)) {\r\n          const inferredType = r.scan_type || r.type || r.direction || '';\r\n          punches.push({ employee_ID: r.employee_ID || r.employeeId || '', employee_name: r.employee_name || r.employeeName || '', date_: date, time_: r.time_ || r.time || r.punchTime || '', scan_type: inferredType });\r\n        }\r\n      });\r\n    });\r\n\r\n    punches.sort((a,b)=>{\r\n      const da = new Date(a.date_||''); const db = new Date(b.date_||''); if (!isNaN(da.getTime()) && !isNaN(db.getTime())){ if (da<db) return -1; if (da>db) return 1;} else { if ((a.date_||'')<(b.date_||'')) return -1; if ((a.date_||'')>(b.date_||'')) return 1; }\r\n      const empA = String(a.employee_ID||''); const empB = String(b.employee_ID||''); if (empA<empB) return -1; if (empA>empB) return 1; const ta = a.time_||''; const tb = b.time_||''; if (ta<tb) return -1; if (ta>tb) return 1; const aIsIn = (a.scan_type||'').toUpperCase() === 'IN'; const bIsIn = (b.scan_type||'').toUpperCase() === 'IN'; if (aIsIn && !bIsIn) return -1; if (!aIsIn && bIsIn) return 1; return 0;\r\n    });\r\n\r\n    let lastKey = null; let lastDateSeen = null; let displayCount = 0;\r\n    for (let i=0;i<punches.length;i++) {\r\n      const p = punches[i];\r\n      const dateVal = p.date_ || '';\r\n      if (lastDateSeen !== dateVal) {\r\n        // Skip inserting a visual date bar for individual preview; just reset duplicate suppression keys\r\n        lastDateSeen = dateVal; lastKey = null; \r\n      }\r\n      const row = formatRow(p);\r\n      const empIdVal = p.employee_ID || p.employeeId || '';\r\n      const key = `${empIdVal}||${dateVal}`;\r\n      if (lastKey === key) { if (row.length>0) row[0]=''; if (row.length>1) row[1]=''; if (row.length>2) row[2]=''; if (row.length>3) row[3]= ''; } else lastKey = key;\r\n      previewElements.push(\r\n        <tr key={`row-${i}`}>\r\n          {previewKeepIndices.map((origI,ci)=>{ const cell = row[origI]!==undefined? row[origI] : ''; return (<td key={ci} style={{whiteSpace:'pre-line', fontSize: '11px', padding: '4px 6px', border: '1px solid #dee2e6'}}>{ci===0? <strong>{cell}</strong> : cell}</td>); })}\r\n        </tr>\r\n      );\r\n      displayCount++;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <table className=\"table table-striped\" style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n        <thead>\r\n          <tr>{previewKeepIndices.map((i,idx)=>(<th key={idx} style={{ fontSize: '12px', background: '#f5f5f5', fontWeight: 'bold', padding: '4px 2px', border: '0.5px solid #dee2e6', textAlign: 'left' }}>{headers[i]}</th>))}</tr>\r\n        </thead>\r\n        <tbody>\r\n          {previewElements}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default IndividualReport;\r\n","import React, { useState, useEffect } from 'react';\r\nimport './GroupReport.css'; // Reuse same styling\r\n\r\nconst AuditReport = ({ reportData }) => {\r\n  const [expandedGroups, setExpandedGroups] = useState({});\r\n\r\n  // Auto-expand all groups on load\r\n  useEffect(() => {\r\n    if (reportData && reportData.data) {\r\n      const allExpanded = {};\r\n      reportData.data.forEach((_, index) => {\r\n        allExpanded[index] = true;\r\n      });\r\n      setExpandedGroups(allExpanded);\r\n    }\r\n  }, [reportData]);\r\n\r\n  if (!reportData || !reportData.data || reportData.data.length === 0) {\r\n    return (\r\n      <div className=\"no-data-message\">\r\n        <p>No audit records found for the selected criteria.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const { dateRange = {}, summary = {}, grouping = 'none' } = reportData;\r\n\r\n  const toggleGroup = (groupIndex) => {\r\n    setExpandedGroups(prev => ({\r\n      ...prev,\r\n      [groupIndex]: !prev[groupIndex]\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"report-container\" style={{ background: '#ffffff' }}>\r\n      {/* Print Styles - Optimized for full details with cost-effective pagination */}\r\n      <style>{`\r\n        @media print {\r\n          @page {\r\n            size: A4;\r\n            margin: 15mm;\r\n          }\r\n          body * { visibility: hidden; }\r\n          .print-content, .print-content * { visibility: visible; }\r\n          .print-content { \r\n            position: absolute; \r\n            left: 0; \r\n            top: 0; \r\n            width: 100%;\r\n          }\r\n          .screen-only { display: none !important; }\r\n          .print-only { display: block !important; }\r\n          .page-break { page-break-after: always; }\r\n          .avoid-break { page-break-inside: avoid; }\r\n          .print-header {\r\n            text-align: center;\r\n            margin-bottom: 15px;\r\n            padding-bottom: 10px;\r\n            border-bottom: 2px solid #000;\r\n          }\r\n          .group-section {\r\n            margin-bottom: 20px;\r\n          }\r\n          .group-header {\r\n            background-color: #e0e0e0 !important;\r\n            padding: 8px !important;\r\n            font-weight: bold;\r\n            border: 1px solid #000;\r\n            margin-top: 10px;\r\n          }\r\n          table {\r\n            width: 100%;\r\n            border-collapse: collapse;\r\n            font-size: 10px;\r\n          }\r\n          th, td {\r\n            border: 1px solid #000;\r\n            padding: 6px;\r\n            text-align: left;\r\n          }\r\n          th {\r\n            background-color: #f5f5f5 !important;\r\n            font-weight: bold;\r\n          }\r\n          /* Fit more rows per page */\r\n          tr {\r\n            line-height: 1.2;\r\n          }\r\n        }\r\n        @media screen {\r\n          .print-only { display: none !important; }\r\n        }\r\n      `}</style>\r\n\r\n      {/* Print Content - Full details with proper pagination */}\r\n      <div className=\"print-only print-content\">\r\n        <div className=\"print-header\">\r\n          <h1 style={{ margin: 0, fontSize: '18px', fontWeight: 'bold', color: '#000' }}>\r\n            {grouping === 'designation' ? 'SLPA DESIGNATION WISE AUDIT REPORT' : \r\n             grouping === 'punch' ? 'SLPA PUNCH TYPE AUDIT REPORT' : \r\n             'SLPA AUDIT REPORT'}\r\n          </h1>\r\n          <div style={{ fontSize: '11px', color: '#000', marginTop: '8px' }}>\r\n            <strong>Division:</strong> {summary.divisionFilter || 'All'} | \r\n            <strong> Section:</strong> {summary.sectionFilter || 'All'}\r\n            {summary.subSectionFilter && summary.subSectionFilter !== 'All' && (\r\n              <> | <strong>Sub Section:</strong> {summary.subSectionFilter}</>\r\n            )}\r\n          </div>\r\n          <div style={{ fontSize: '10px', color: '#666', marginTop: '5px' }}>\r\n            Total Employees: {summary.totalEmployees || 0} | \r\n            Total Groups: {summary.totalGroups || 0} | \r\n            Generated: {new Date().toLocaleString()}\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Print Data Tables - Each group with all details */}\r\n        {reportData.data.map((group, groupIndex) => (\r\n          <div key={groupIndex} className=\"group-section\">\r\n            <div className=\"group-header\" style={{ backgroundColor: '#e0e0e0', padding: '8px', fontWeight: 'bold', border: '1px solid #000', marginTop: '10px', fontSize: '12px' }}>\r\n              {group.groupName} - {group.count} Employee{group.count !== 1 ? 's' : ''}\r\n            </div>\r\n            {/* Conditional table: Punch-wise (5 cols) vs Designation-wise (4 cols) */}\r\n            {(group.employees || []).length > 0 && group.employees[0]?.eventDate ? (\r\n              // Punch-wise grouping table with Date and Time\r\n              <table style={{ width: '100%', borderCollapse: 'collapse', fontSize: '10px', marginTop: '5px' }}>\r\n                <thead>\r\n                  <tr>\r\n                    <th style={{ width: '15%', padding: '6px', border: '1px solid #000', backgroundColor: '#f5f5f5', fontWeight: 'bold' }}>Employee ID</th>\r\n                    <th style={{ width: '30%', padding: '6px', border: '1px solid #000', backgroundColor: '#f5f5f5', fontWeight: 'bold' }}>Employee Name</th>\r\n                    <th style={{ width: '25%', padding: '6px', border: '1px solid #000', backgroundColor: '#f5f5f5', fontWeight: 'bold' }}>Designation</th>\r\n                    <th style={{ width: '15%', padding: '6px', border: '1px solid #000', backgroundColor: '#f5f5f5', fontWeight: 'bold' }}>Date</th>\r\n                    <th style={{ width: '15%', padding: '6px', border: '1px solid #000', backgroundColor: '#f5f5f5', fontWeight: 'bold' }}>Time</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {(group.employees || []).map((emp, empIndex) => (\r\n                    <tr key={empIndex} className={empIndex % 30 === 29 ? 'avoid-break' : ''}>\r\n                      <td style={{ padding: '6px', border: '1px solid #000', fontFamily: 'monospace' }}>{emp.employeeId}</td>\r\n                      <td style={{ padding: '6px', border: '1px solid #000' }}>{emp.employeeName}</td>\r\n                      <td style={{ padding: '6px', border: '1px solid #000' }}>{emp.designation}</td>\r\n                      <td style={{ padding: '6px', border: '1px solid #000' }}>{emp.eventDate}</td>\r\n                      <td style={{ padding: '6px', border: '1px solid #000', fontFamily: 'monospace' }}>{emp.eventTime}</td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            ) : (\r\n              // Designation-wise grouping table (original 4 columns)\r\n              <table style={{ width: '100%', borderCollapse: 'collapse', fontSize: '10px', marginTop: '5px' }}>\r\n                <thead>\r\n                  <tr>\r\n                    <th style={{ width: '12%', padding: '6px', border: '1px solid #000', backgroundColor: '#f5f5f5', fontWeight: 'bold' }}>Employee ID</th>\r\n                    <th style={{ width: '38%', padding: '6px', border: '1px solid #000', backgroundColor: '#f5f5f5', fontWeight: 'bold' }}>Employee Name</th>\r\n                    <th style={{ width: '35%', padding: '6px', border: '1px solid #000', backgroundColor: '#f5f5f5', fontWeight: 'bold' }}>Designation</th>\r\n                    <th style={{ width: '15%', padding: '6px', border: '1px solid #000', backgroundColor: '#f5f5f5', fontWeight: 'bold', textAlign: 'center' }}>Division</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {(group.employees || []).map((emp, empIndex) => (\r\n                    <tr key={empIndex} className={empIndex % 30 === 29 ? 'avoid-break' : ''}>\r\n                      <td style={{ padding: '6px', border: '1px solid #000', fontFamily: 'monospace' }}>{emp.employeeId}</td>\r\n                      <td style={{ padding: '6px', border: '1px solid #000' }}>{emp.employeeName}</td>\r\n                      <td style={{ padding: '6px', border: '1px solid #000' }}>{emp.designation}</td>\r\n                      <td style={{ padding: '6px', border: '1px solid #000', fontSize: '9px' }}>{emp.divisionName || summary.divisionFilter || '-'}</td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            )}\r\n            {/* Add page break after every 2 groups to optimize pages */}\r\n            {groupIndex > 0 && (groupIndex + 1) % 2 === 0 && groupIndex < reportData.data.length - 1 && (\r\n              <div className=\"page-break\"></div>\r\n            )}\r\n          </div>\r\n        ))}\r\n        \r\n        {/* Footer on last page */}\r\n        <div style={{ marginTop: '30px', paddingTop: '10px', borderTop: '1px solid #999', fontSize: '9px', textAlign: 'center', color: '#666' }}>\r\n          <p style={{ margin: '5px 0' }}>\r\n            This is a computer-generated report from SLPA Time & Attendance System\r\n          </p>\r\n          <p style={{ margin: '5px 0' }}>\r\n            Page count optimized for cost-effective printing | Report Date: {new Date().toLocaleDateString()}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Screen Header - Simple Title */}\r\n      <div className=\"screen-only\" style={{ \r\n        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n        color: 'white',\r\n        padding: '20px 24px',\r\n        borderRadius: '8px 8px 0 0'\r\n      }}>\r\n        <h2 style={{ margin: 0, fontSize: '24px', fontWeight: 'bold' }}>\r\n          {grouping === 'designation' ? 'SLPA Designation Wise Audit Report' : \r\n           grouping === 'punch' ? 'SLPA Punch Type Audit Report' : \r\n           'SLPA Audit Report'}\r\n        </h2>\r\n        <p style={{ margin: '8px 0 0 0', opacity: 0.9, fontSize: '14px' }}>\r\n          {dateRange.from && dateRange.from !== 'N/A' ? `${dateRange.from} to ${dateRange.to}` : 'All Employees'}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Summary Cards - Screen Only */}\r\n      <div className=\"screen-only\" style={{ \r\n        display: 'grid', \r\n        gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', \r\n        gap: '16px', \r\n        padding: '24px',\r\n        background: '#f8f9fa'\r\n      }}>\r\n        <div style={{ background: 'white', padding: '16px', borderRadius: '8px', boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }}>\r\n          <div style={{ fontSize: '14px', color: '#6c757d', marginBottom: '4px' }}>Total Issues</div>\r\n          <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#dc3545' }}>{summary.totalRecords || 0}</div>\r\n        </div>\r\n        <div style={{ background: 'white', padding: '16px', borderRadius: '8px', boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }}>\r\n          <div style={{ fontSize: '14px', color: '#6c757d', marginBottom: '4px' }}>Affected Employees</div>\r\n          <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#fd7e14' }}>{summary.totalEmployees || 0}</div>\r\n        </div>\r\n        <div style={{ background: 'white', padding: '16px', borderRadius: '8px', boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }}>\r\n          <div style={{ fontSize: '14px', color: '#6c757d', marginBottom: '4px' }}>Report Groups</div>\r\n          <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#0dcaf0' }}>{summary.totalGroups || 0}</div>\r\n        </div>\r\n        <div style={{ background: 'white', padding: '16px', borderRadius: '8px', boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }}>\r\n          <div style={{ fontSize: '14px', color: '#6c757d', marginBottom: '4px' }}>Grouping Method</div>\r\n          <div style={{ fontSize: '18px', fontWeight: 'bold', color: '#6610f2', textTransform: 'capitalize' }}>\r\n            {summary.groupingMethod || 'None'}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filter Information - Screen Only */}\r\n      <div className=\"screen-only\" style={{ padding: '16px 24px', background: '#e9ecef', borderTop: '1px solid #dee2e6' }}>\r\n        <div style={{ display: 'flex', gap: '24px', flexWrap: 'wrap', fontSize: '14px' }}>\r\n          <div><strong>Division:</strong> {summary.divisionFilter || 'All'}</div>\r\n          <div><strong>Section:</strong> {summary.sectionFilter || 'All'}</div>\r\n          <div><strong>Sub Section:</strong> {summary.subSectionFilter || 'All'}</div>\r\n          <div><strong>Time Period:</strong> {summary.timePeriod || 'Custom'}</div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Detailed Records by Group */}\r\n      <div className=\"report-content\" style={{ padding: '24px' }}>\r\n        <h3 className=\"screen-only\" style={{ marginBottom: '16px', color: '#495057' }}>\r\n          <i className=\"bi bi-table\"></i> {grouping === 'designation' ? 'Employees by Designation' : \r\n                                            grouping === 'punch' ? 'Attendance Records by Punch Type' : \r\n                                            'Detailed Audit Records'}\r\n        </h3>\r\n        \r\n        {reportData.data.map((group, groupIndex) => (\r\n          <div key={groupIndex} style={{ \r\n            marginBottom: '24px', \r\n            border: '1px solid #dee2e6', \r\n            borderRadius: '8px',\r\n            overflow: 'hidden',\r\n            boxShadow: '0 2px 4px rgba(0,0,0,0.05)'\r\n          }}>\r\n            <div \r\n              onClick={() => toggleGroup(groupIndex)}\r\n              style={{ \r\n                background: 'linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)',\r\n                color: 'white',\r\n                padding: '16px 20px',\r\n                cursor: 'pointer',\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'center'\r\n              }}\r\n            >\r\n              <div>\r\n                <h4 style={{ margin: 0, fontSize: '18px', fontWeight: 'bold' }}>\r\n                  {group.groupName}\r\n                </h4>\r\n                <div style={{ fontSize: '13px', opacity: 0.9, marginTop: '4px' }}>\r\n                  {group.count} {grouping === 'designation' ? 'employees' : 'records'} | {group.totalIssues || group.count} total issues\r\n                </div>\r\n              </div>\r\n              <div style={{ fontSize: '20px' }}>\r\n                {expandedGroups[groupIndex] ? '' : ''}\r\n              </div>\r\n            </div>\r\n            \r\n            {expandedGroups[groupIndex] && (\r\n              <div style={{ background: 'white' }}>\r\n                {grouping === 'designation' ? (\r\n                  // Simplified table for designation-wise (Employee ID, Name, Designation only)\r\n                  <table className=\"audit-table\" style={{ width: '100%', borderCollapse: 'collapse', border: '1px solid #000' }}>\r\n                    <thead>\r\n                      <tr style={{ background: '#f8f9fa' }}>\r\n                        <th style={{ padding: '12px', textAlign: 'left', border: '1px solid #000', width: '20%' }}>Employee ID</th>\r\n                        <th style={{ padding: '12px', textAlign: 'left', border: '1px solid #000', width: '50%' }}>Employee Name</th>\r\n                        <th style={{ padding: '12px', textAlign: 'left', border: '1px solid #000', width: '30%' }}>Designation</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {(group.employees || []).map((emp, empIndex) => (\r\n                        <tr key={empIndex}>\r\n                          <td style={{ padding: '12px', fontFamily: 'monospace', border: '1px solid #000' }}>{emp.employeeId}</td>\r\n                          <td style={{ padding: '12px', fontWeight: '500', border: '1px solid #000' }}>{emp.employeeName}</td>\r\n                          <td style={{ padding: '12px', border: '1px solid #000' }}>{emp.designation}</td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                ) : grouping === 'punch' ? (\r\n                  // Professional audit table for punch-wise (ID, Name, Designation, Date, Time)\r\n                  <table className=\"audit-table\" style={{ width: '100%', borderCollapse: 'collapse', border: '1px solid #000' }}>\r\n                    <thead>\r\n                      <tr style={{ background: '#f8f9fa' }}>\r\n                        <th style={{ padding: '12px', textAlign: 'left', border: '1px solid #000', width: '15%' }}>Employee ID</th>\r\n                        <th style={{ padding: '12px', textAlign: 'left', border: '1px solid #000', width: '30%' }}>Employee Name</th>\r\n                        <th style={{ padding: '12px', textAlign: 'left', border: '1px solid #000', width: '25%' }}>Designation</th>\r\n                        <th style={{ padding: '12px', textAlign: 'left', border: '1px solid #000', width: '15%' }}>Date</th>\r\n                        <th style={{ padding: '12px', textAlign: 'left', border: '1px solid #000', width: '15%' }}>Time</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {(group.employees || []).map((emp, empIndex) => (\r\n                        <tr key={empIndex}>\r\n                          <td style={{ padding: '12px', fontFamily: 'monospace', border: '1px solid #000' }}>{emp.employeeId}</td>\r\n                          <td style={{ padding: '12px', fontWeight: '500', border: '1px solid #000' }}>{emp.employeeName}</td>\r\n                          <td style={{ padding: '12px', border: '1px solid #000' }}>{emp.designation}</td>\r\n                          <td style={{ padding: '12px', border: '1px solid #000' }}>{emp.eventDate}</td>\r\n                          <td style={{ padding: '12px', fontFamily: 'monospace', border: '1px solid #000' }}>{emp.eventTime}</td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                ) : (\r\n                  // No grouping - simple list\r\n                  <table className=\"audit-table\" style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                    <thead>\r\n                      <tr style={{ background: '#f8f9fa' }}>\r\n                        <th style={{ padding: '12px', textAlign: 'left', borderBottom: '2px solid #dee2e6' }}>Employee ID</th>\r\n                        <th style={{ padding: '12px', textAlign: 'left', borderBottom: '2px solid #dee2e6' }}>Employee Name</th>\r\n                        <th style={{ padding: '12px', textAlign: 'left', borderBottom: '2px solid #dee2e6' }}>Designation</th>\r\n                        <th style={{ padding: '12px', textAlign: 'center', borderBottom: '2px solid #dee2e6' }}>Issues</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {(group.employees || []).map((emp, empIndex) => (\r\n                        <tr key={empIndex} style={{ borderBottom: '1px solid #dee2e6' }}>\r\n                          <td style={{ padding: '12px', fontFamily: 'monospace' }}>{emp.employeeId}</td>\r\n                          <td style={{ padding: '12px', fontWeight: '500' }}>{emp.employeeName}</td>\r\n                          <td style={{ padding: '12px' }}>{emp.designation}</td>\r\n                          <td style={{ padding: '12px', textAlign: 'center' }}>\r\n                            <span style={{\r\n                              backgroundColor: '#dc3545',\r\n                              color: 'white',\r\n                              padding: '4px 12px',\r\n                              borderRadius: '12px',\r\n                              fontSize: '12px',\r\n                              fontWeight: 'bold'\r\n                            }}>\r\n                              {emp.issueCount}\r\n                            </span>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Footer */}\r\n      <div style={{ \r\n        padding: '16px 24px', \r\n        background: '#f8f9fa', \r\n        borderTop: '1px solid #dee2e6',\r\n        textAlign: 'center',\r\n        fontSize: '13px',\r\n        color: '#6c757d'\r\n      }}>\r\n        <p style={{ margin: '4px 0' }}>Generated on {new Date().toLocaleString()}</p>\r\n        <p style={{ margin: '4px 0', fontStyle: 'italic' }}>\r\n          Note: This report shows employees who marked ON (F1) at least once but did not mark OFF (F4).\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuditReport;\r\n","import React, { useState, useEffect, useRef, useMemo } from 'react';\r\nimport usePermission from '../../hooks/usePermission';\r\nimport './ReportGeneration.css';\r\nimport GroupReport from './GroupReport';\r\nimport IndividualReport from './IndividualReport';\r\nimport AuditReport from './AuditReport';\r\nimport { useLanguage } from '../../context/LanguageContext';\r\nimport PageHeader from './PageHeader';\r\n\r\nconst ReportGeneration = ({ onBack, initialEmployeeId = null }) => {\r\n  const { t } = useLanguage();\r\n  const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n  \r\n  // Helper function to format date without timezone issues\r\n  const formatDateToYYYYMMDD = (date) => {\r\n    const year = date.getFullYear();\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    return `${year}-${month}-${day}`;\r\n  };\r\n  const [activeStep, setActiveStep] = useState('report');\r\n  const [reportType, setReportType] = useState('attendance');\r\n  const [reportScope, setReportScope] = useState('individual');\r\n  const [timePeriod, setTimePeriod] = useState('none');\r\n  const [reportGrouping, setReportGrouping] = useState('none');\r\n  const [employeeId, setEmployeeId] = useState(initialEmployeeId || '');\r\n  \r\n  // Set employee ID when initialEmployeeId prop changes\r\n  useEffect(() => {\r\n    if (initialEmployeeId) {\r\n      setEmployeeId(initialEmployeeId);\r\n      setReportScope('individual');\r\n      // Auto-scroll to employee ID field\r\n      setTimeout(() => {\r\n        const empField = document.querySelector('input[placeholder*=\"Employee\"]');\r\n        if (empField) {\r\n          empField.focus();\r\n          empField.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n        }\r\n      }, 300);\r\n    }\r\n  }, [initialEmployeeId]);\r\n  const [divisionId, setDivisionId] = useState('all');\r\n  const [sectionId, setSectionId] = useState('all');\r\n  const [divisions, setDivisions] = useState([]);\r\n  const [sections, setSections] = useState([]);\r\n  const [allSections, setAllSections] = useState([]);\r\n  const [subSections, setSubSections] = useState([]);\r\n  const [subSectionId, setSubSectionId] = useState('all');\r\n  const [currentMonth, setCurrentMonth] = useState(new Date());\r\n  const [endMonth, setEndMonth] = useState(new Date());\r\n  const [showReportModal, setShowReportModal] = useState(false);\r\n  const [calendarSelectMode, setCalendarSelectMode] = useState('start'); // 'start' or 'end'\r\n  const [lastClickTime, setLastClickTime] = useState(0);\r\n  const [lastClickedDay, setLastClickedDay] = useState(null);\r\n  \r\n  // Filter sections for selected division (client-side filtering like EmployeeManagement)\r\n  useEffect(() => {\r\n    if (divisionId === 'all') {\r\n      setSections(allSections);\r\n      setSectionId('all');\r\n      setSubSections([]);\r\n      setSubSectionId('all');\r\n    } else {\r\n      // Filter sections by matching divisionId (MySQL sync uses division_code field)\r\n      const sectionsForDivision = allSections.filter(section => {\r\n        const sectionDivId = String(section.division_code || section.division_id || section.divisionId || section.DIVISION_ID || '');\r\n        let selectedDivId = String(divisionId);\r\n        \r\n        // Handle MySQL sync ID prefix if present (from getHrisDivisions)\r\n        if (selectedDivId.startsWith('mysql_div_')) {\r\n          selectedDivId = selectedDivId.replace('mysql_div_', '');\r\n        }\r\n        \r\n        return sectionDivId === selectedDivId;\r\n      });\r\n      \r\n      console.log(` Filtered ${sectionsForDivision.length} sections for division ${divisionId}`);\r\n      if (sectionsForDivision.length > 0) {\r\n        console.log('Sample sections:', sectionsForDivision.slice(0, 3).map(s => ({\r\n          id: s._id,\r\n          name: s.name,\r\n          division_id: s.division_id\r\n        })));\r\n      }\r\n      \r\n      setSections(sectionsForDivision);\r\n      setSectionId('all'); // Reset section when division changes\r\n      setSubSections([]);\r\n      setSubSectionId('all');\r\n    }\r\n  }, [divisionId, allSections]);\r\n  \r\n  // Fetch subsections when section changes\r\n  useEffect(() => {\r\n    if (sectionId && sectionId !== 'all' && divisionId !== 'all') {\r\n      fetchSubSections(sectionId);\r\n    } else {\r\n      setSubSections([]);\r\n      setSubSectionId('all');\r\n    }\r\n  }, [sectionId, divisionId]);\r\n  const [dateRange, setDateRange] = useState({\r\n    startDate: '',\r\n    endDate: ''\r\n  });\r\n  \r\n  // Selection mode: 'single-date' | 'date-range' | 'single-month' | 'single-year'\r\n  const [selectionMode, setSelectionMode] = useState('date-range');\r\n  \r\n  // Start/End mode for date picker: 'date' | 'month' | 'year'\r\n  const [startMode, setStartMode] = useState('date');\r\n  const [endMode, setEndMode] = useState('date');\r\n  \r\n  // For single-month: selected year and month\r\n  const [selectedYear, setSelectedYear] = useState(new Date().getFullYear());\r\n  const [selectedMonth, setSelectedMonth] = useState(new Date().getMonth());\r\n  const [loading, setLoading] = useState(false);\r\n  const [reportData, setReportData] = useState(null);\r\n  const [error, setError] = useState('');\r\n  const [employeeInfo, setEmployeeInfo] = useState(null);\r\n  const [searchQuery] = useState('');\r\n  const autoSelectedDivisionRef = useRef(false);\r\n  const autoSelectedSectionRef = useRef(false);\r\n  const groupReportRef = useRef(null);\r\n  const individualReportRef = useRef(null);\r\n\r\n  // Compute filtered data when user types in search box (employee id or name)\r\n  const filteredData = useMemo(() => {\r\n    if (!reportData || !Array.isArray(reportData.data)) return [];\r\n    const q = (searchQuery || '').trim().toLowerCase();\r\n    if (!q) return reportData.data;\r\n    return reportData.data.filter(item => {\r\n      const empId = String(item.employee_id || item.employee_ID || item.employeeId || item.emp_no || item.empNo || '').toLowerCase();\r\n      const empName = String(item.employee_name || item.employeeName || item.name || '').toLowerCase();\r\n      return empId.includes(q) || empName.includes(q);\r\n    });\r\n  }, [reportData, searchQuery]);\r\n\r\n  // Flatten punches (group-style) to a uniform punch array so individual reports can reuse same data\r\nconst flattenedPunches = useMemo(() => {\r\n  if (!reportData || !Array.isArray(reportData.data)) return [];\r\n  const punches = [];\r\n\r\n  // Two main shapes: group-shaped (employees with dailyAttendance/punches) or flat punch rows\r\n  reportData.data.forEach(emp => {\r\n    // If this looks like an employee record with dailyAttendance or punches\r\n    const empId = emp.employeeId || emp.employee_ID || emp.emp_no || emp.empNo || emp.EMP_NUMBER || emp.EMP_NO || '';\r\n    const empName = emp.employeeName || emp.employee_name || emp.name || emp.FULLNAME || '';\r\n\r\n    // 1) raw punches array on employee\r\n    if (Array.isArray(emp.punches) && emp.punches.length) {\r\n      emp.punches.forEach(p => {\r\n        const d = p.date || p.punchDate || p.date_ || p.day || '';\r\n        punches.push({\r\n          employee_ID: String(empId),\r\n          employee_name: empName,\r\n          date_: d,\r\n          time_: p.time || p.time_ || p.punchTime || '',\r\n          scan_type: (p.scan_type || p.status || p.type || '').toString()\r\n        });\r\n      });\r\n      return; // continue to next emp\r\n    }\r\n\r\n    // 2) dailyAttendance object per employee\r\n    if (emp.dailyAttendance && typeof emp.dailyAttendance === 'object') {\r\n      Object.entries(emp.dailyAttendance).forEach(([date, dayData]) => {\r\n        if (Array.isArray(dayData) && dayData.length) {\r\n          dayData.forEach(p => punches.push({ employee_ID: String(empId), employee_name: empName, date_: date, time_: p.time || p.time_ || p.punchTime || '', scan_type: (p.scan_type || p.status || p.type || '').toString() }));\r\n        } else if (dayData && typeof dayData === 'object') {\r\n          if (dayData.checkIn) punches.push({ employee_ID: String(empId), employee_name: empName, date_: date, time_: dayData.checkIn, scan_type: 'IN' });\r\n          if (dayData.checkOut) punches.push({ employee_ID: String(empId), employee_name: empName, date_: date, time_: dayData.checkOut, scan_type: 'OUT' });\r\n        }\r\n      });\r\n      return;\r\n    }\r\n\r\n    // 3) fallback: if this element itself is a punch row (flat list)\r\n    const recDate = emp.date_ || emp.punchDate || emp.date;\r\n    if (recDate) {\r\n      punches.push({ employee_ID: String(emp.employee_ID || emp.employeeId || empId), employee_name: emp.employee_name || emp.employeeName || empName, date_: recDate, time_: emp.time_ || emp.time || emp.punchTime || '', scan_type: (emp.scan_type || emp.status || emp.type || '').toString() });\r\n    }\r\n  });\r\n\r\n  // Sort same as group logic\r\n  punches.sort((a,b) => {\r\n    const da = new Date(a.date_||''); const db = new Date(b.date_||'');\r\n    if (!isNaN(da.getTime()) && !isNaN(db.getTime())) { if (da < db) return -1; if (da > db) return 1; } else { if ((a.date_||'') < (b.date_||'')) return -1; if ((a.date_||'') > (b.date_||'')) return 1; }\r\n    const empA = String(a.employee_ID||''); const empB = String(b.employee_ID||''); if (empA < empB) return -1; if (empA > empB) return 1;\r\n    const ta = a.time_||''; const tb = b.time_||''; if (ta < tb) return -1; if (ta > tb) return 1;\r\n    const aIsIn = (a.scan_type||'').toUpperCase() === 'IN'; const bIsIn = (b.scan_type||'').toUpperCase() === 'IN'; if (aIsIn && !bIsIn) return -1; if (!aIsIn && bIsIn) return 1; return 0;\r\n  });\r\n\r\n  return punches;\r\n}, [reportData]);\r\n\r\n// For individual scope, produce a reportData-like object containing only the selected employee's punches\r\nconst individualFlatReportData = useMemo(() => {\r\n  if (!reportData) return reportData;\r\n  if (reportScope === 'individual' && employeeId) {\r\n    const empIdStr = String(employeeId);\r\n    const data = flattenedPunches.filter(p => String(p.employee_ID) === empIdStr);\r\n    // Build dates array for headers and pagination\r\n    const dates = Array.from(new Set(data.map(d => d.date_))).sort((a,b)=> new Date(a)-new Date(b));\r\n    return { reportType: 'individual', dateRange: reportData.dateRange || reportData.dates || {}, dates, data };\r\n  }\r\n  return reportData ? { ...reportData, data: filteredData } : reportData;\r\n}, [flattenedPunches, reportData, reportScope, employeeId, filteredData]);\r\n\r\n// Final report data passed to components (group uses filteredReportData, individual uses individualFlatReportData)\r\nconst filteredReportData = reportScope === 'individual' ? individualFlatReportData : (reportData ? { ...reportData, data: filteredData } : reportData);\r\n  // Helpers: normalize backend data (same as EmployeeManagement.jsx)\r\n  const normalizeDivisions = (data = []) => {\r\n    const out = [];\r\n    const seen = new Set();\r\n    data.forEach((d) => {\r\n      const id = String(d._id ?? d.id ?? d.DIVISION_ID ?? d.code ?? d.hie_code ?? d.DIVISION_CODE ?? '');\r\n      if (!id) return;\r\n      if (seen.has(id)) return;\r\n      seen.add(id);\r\n      out.push({\r\n        _id: id,\r\n        id,\r\n        code: String(d.code ?? d.DIVISION_CODE ?? d.hie_code ?? d._id ?? d.id ?? id),\r\n        name: d.name ?? d.DIVISION_NAME ?? d.hie_name ?? d.hie_relationship ?? 'Unknown Division',\r\n        hie_code: d.hie_code ?? d.code,\r\n        hie_name: d.hie_name ?? d.name,\r\n        def_level: d.def_level ?? d.DEF_LEVEL,\r\n        hie_relationship: d.hie_relationship,\r\n        isActive: d.isActive ?? d.active ?? true,\r\n      });\r\n    });\r\n    return out.sort((a, b) => a.name.localeCompare(b.name));\r\n  };\r\n\r\n  const normalizeSections = (data = []) => {\r\n    const out = [];\r\n    const seen = new Set();\r\n    data.forEach((s) => {\r\n      const id = String(s._id ?? s.id ?? s.SECTION_ID ?? s.code ?? s.hie_code ?? s.SECTION_CODE ?? s.section_code ?? '');\r\n      if (!id) return;\r\n      if (seen.has(id)) return;\r\n      seen.add(id);\r\n      // MySQL sync returns division_code, not division_id\r\n      const divisionId = String(s.division_code ?? s.division_id ?? s.DIVISION_ID ?? s.division_code ?? s.DIVISION_CODE ?? s.hie_relationship ?? '');\r\n      out.push({\r\n        _id: id,\r\n        id,\r\n        code: String(s.code ?? s.SECTION_CODE ?? s.hie_code ?? s.section_code ?? id),\r\n        name: s.name ?? s.section_name ?? s.SECTION_NAME ?? s.hie_relationship ?? `Section ${id}`,\r\n        division_code: divisionId || '',  // Primary field from MySQL sync\r\n        division_id: divisionId || '',\r\n        divisionId: divisionId || '',\r\n        DIVISION_ID: divisionId || '',\r\n        divisionCode: String(s.division_code ?? s.DIVISION_CODE ?? ''),\r\n        divisionName: s.division_name ?? s.DIVISION_NAME ?? '',\r\n        def_level: s.def_level ?? s.DEF_LEVEL,\r\n        isActive: s.isActive ?? s.active ?? true,\r\n      });\r\n    });\r\n    return out.sort((a, b) => a.name.localeCompare(b.name));\r\n  };\r\n\r\n  // Return DB-provided time strings unchanged. If a Date or ISO string is provided, format to HH:mm:ss.\r\n  const ensureSeconds = (timeVal) => {\r\n    if (!timeVal && timeVal !== 0) return '';\r\n    if (typeof timeVal === 'string') return timeVal;\r\n    try {\r\n      const d = new Date(timeVal);\r\n      if (!isNaN(d.getTime())) {\r\n        return d.toLocaleTimeString('en-GB', { hour12: false });\r\n      }\r\n    } catch (e) {\r\n      // fallback\r\n    }\r\n    return String(timeVal);\r\n  };\r\n\r\n  // permission checks\r\n  // Granular report permissions\r\n  const canGenerateFallback = usePermission('reports', 'create'); // legacy fallback\r\n  const canGenerateAttendance = usePermission('reports', 'attendance_generate');\r\n  const canDownloadAttendance = usePermission('reports', 'attendance_download');\r\n  const canGenerateAudit = usePermission('reports', 'audit_generate');\r\n  const canGenerateMeal = usePermission('reports', 'meal_generate');\r\n  const canViewReports = usePermission('reports', 'view_reports');\r\n\r\n  const hasGeneratePermissionForType = (type) => {\r\n    // Require view_reports permission AND specific generate permission\r\n    if (!canViewReports) return false;\r\n    \r\n    if (type === 'attendance') return !!(canGenerateAttendance || canGenerateFallback);\r\n    if (type === 'audit') return !!(canGenerateAudit || canGenerateFallback);\r\n    if (type === 'meal') return !!(canGenerateMeal || canGenerateFallback);\r\n    return !!canGenerateFallback;\r\n  };\r\n\r\n  // Fetch divisions and sections on component mount\r\n  useEffect(() => {\r\n    fetchDivisions();\r\n    fetchAllSections();\r\n    \r\n    // Set default date range to today\r\n    const today = formatDateToYYYYMMDD(new Date());\r\n    setDateRange({\r\n      startDate: today,\r\n      endDate: today\r\n    });\r\n    setSelectedYear(new Date().getFullYear());\r\n    setSelectedMonth(new Date().getMonth());\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // Update date range based on time period selection\r\n  useEffect(() => {\r\n    // Don't auto-update dates when 'none' is selected\r\n    if (timePeriod === 'none') {\r\n      return;\r\n    }\r\n\r\n    const today = new Date();\r\n    let startDate, endDate;\r\n\r\n    switch (timePeriod) {\r\n      case 'daily':\r\n        startDate = endDate = formatDateToYYYYMMDD(today);\r\n        break;\r\n      \r\n      case 'weekly':\r\n        // Start of current week (Sunday)\r\n        const dayOfWeek = today.getDay();\r\n        const startOfWeek = new Date(today);\r\n        startOfWeek.setDate(today.getDate() - dayOfWeek);\r\n        startDate = formatDateToYYYYMMDD(startOfWeek);\r\n        endDate = formatDateToYYYYMMDD(today);\r\n        break;\r\n      \r\n      case 'monthly':\r\n        // Start of current month\r\n        const startOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);\r\n        startDate = formatDateToYYYYMMDD(startOfMonth);\r\n        endDate = formatDateToYYYYMMDD(today);\r\n        break;\r\n      \r\n      case 'annually':\r\n        // Start of current year\r\n        const startOfYear = new Date(today.getFullYear(), 0, 1);\r\n        startDate = formatDateToYYYYMMDD(startOfYear);\r\n        endDate = formatDateToYYYYMMDD(today);\r\n        break;\r\n      \r\n      default:\r\n        startDate = endDate = formatDateToYYYYMMDD(today);\r\n    }\r\n\r\n    setDateRange({ startDate, endDate });\r\n  }, [timePeriod]);\r\n\r\n  // When scope changes to group, clear and block employeeId\r\n  useEffect(() => {\r\n    if (reportScope === 'group') {\r\n      setEmployeeId('');\r\n    }\r\n  }, [reportScope]);\r\n\r\n  // When report type changes to audit, automatically set scope to group\r\n  useEffect(() => {\r\n    if (reportType === 'audit') {\r\n      setReportScope('group');\r\n    }\r\n  }, [reportType]);\r\n\r\n  // Ensure selected report type is allowed based on permissions\r\n  useEffect(() => {\r\n    if (!hasGeneratePermissionForType(reportType)) {\r\n      // Find the first allowed report type\r\n      const allowedTypes = ['attendance', 'audit', 'meal'].filter(type => hasGeneratePermissionForType(type));\r\n      if (allowedTypes.length > 0) {\r\n        setReportType(allowedTypes[0]);\r\n      }\r\n    }\r\n  }, [canGenerateAttendance, canGenerateAudit, canGenerateMeal, canViewReports, reportType]);\r\n\r\n  // When division changes, reset section and sub-section\r\n  useEffect(() => {\r\n    if (divisionId === 'all') {\r\n      setSectionId('all');\r\n      setSubSectionId('all');\r\n    } else {\r\n      // Keep section selection if valid, otherwise reset\r\n      setSectionId('all');\r\n      setSubSectionId('all');\r\n    }\r\n  }, [divisionId]);\r\n\r\n  // When section changes, reset sub-section\r\n  useEffect(() => {\r\n    if (sectionId === 'all' || divisionId === 'all') {\r\n      setSubSectionId('all');\r\n    } else {\r\n      setSubSectionId('all');\r\n    }\r\n  }, [sectionId, divisionId]);\r\n\r\n  // Note: Section filtering is now handled by the useEffect above (client-side filtering)\r\n\r\n  // Auto-select default division 'IS' (Information Systems) when available\r\n  useEffect(() => {\r\n    if (divisionId && divisionId !== 'all') return; // don't override user's choice\r\n    if (!divisions || divisions.length === 0) return;\r\n    if (autoSelectedDivisionRef.current) return;\r\n\r\n    const target = divisions.find(d => {\r\n      const code = String(d.code || d.DIVISION_CODE || '').toLowerCase();\r\n      const name = String(d.name || d.DIVISION_NAME || '').toLowerCase();\r\n      return code === 'is' || name.includes('information systems') || name.includes('information system');\r\n    });\r\n\r\n    if (target) {\r\n      setDivisionId(target._id || target.id);\r\n      autoSelectedDivisionRef.current = true;\r\n      // allow section auto-select to run after sections for this division are loaded\r\n      autoSelectedSectionRef.current = false;\r\n    }\r\n  }, [divisions, divisionId]);\r\n\r\n  // Auto-select an IS section when sections are loaded for the selected division\r\n  useEffect(() => {\r\n    if (!sections || sections.length === 0) return;\r\n    if (sectionId && sectionId !== 'all') return; // don't override user's choice\r\n    if (autoSelectedSectionRef.current) return;\r\n\r\n    const sec = sections.find(s => {\r\n      const code = String(s.code || s.section_code || s.SECTION_CODE || '').toLowerCase();\r\n      const name = String(s.name || s.section_name || s.SECTION_NAME || '').toLowerCase();\r\n      return code === 'is' || name.includes('information systems') || name.includes('information system') || name.includes('(is)');\r\n    });\r\n\r\n    if (sec) {\r\n      setSectionId(sec._id || sec.id || sec.section_id);\r\n      autoSelectedSectionRef.current = true;\r\n    }\r\n  }, [sections, sectionId]);\r\n\r\n  const fetchDivisions = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      console.log(' Fetching divisions from MySQL data...');\r\n      \r\n      const response = await fetch(`${API_BASE_URL}/mysql-data/divisions?includeEmployeeCount=true`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        let divisionsArray = [];\r\n        if (Array.isArray(data)) {\r\n          divisionsArray = data;\r\n        } else if (data.data && Array.isArray(data.data)) {\r\n          divisionsArray = data.data;\r\n        }\r\n\r\n        // Use normalizeDivisions helper (same as EmployeeManagement)\r\n        const normalized = normalizeDivisions(divisionsArray);\r\n        console.log(` Loaded ${normalized.length} divisions from MySQL data`);\r\n        setDivisions(normalized);\r\n      } else {\r\n        console.error('Failed to fetch divisions:', response.status);\r\n        setDivisions([]);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching divisions:', err);\r\n      setDivisions([]);\r\n    }\r\n  };\r\n\r\n  const fetchAllSections = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      console.log(' Fetching sections from MySQL data...');\r\n      \r\n      const response = await fetch(`${API_BASE_URL}/mysql-data/sections`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        // Handle different response formats\r\n        let sectionsArray = [];\r\n        if (Array.isArray(data)) {\r\n          sectionsArray = data;\r\n        } else if (data.data && Array.isArray(data.data)) {\r\n          sectionsArray = data.data;\r\n        } else if (data.sections && Array.isArray(data.sections)) {\r\n          sectionsArray = data.sections;\r\n        }\r\n\r\n        // Use normalizeSections helper (same as EmployeeManagement)\r\n        const normalized = normalizeSections(sectionsArray);\r\n        console.log(` Loaded ${normalized.length} sections from MySQL data`);\r\n        console.log('Sample sections with division_id:', normalized.slice(0, 3).map(s => ({\r\n          id: s.id,\r\n          name: s.name,\r\n          divisionId: s.divisionId,\r\n          divisionCode: s.divisionCode\r\n        })));\r\n        setAllSections(normalized);\r\n      } else {\r\n        console.error('Failed to fetch sections:', response.status);\r\n        setAllSections([]);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching sections:', err);\r\n      setAllSections([]);\r\n    }\r\n  };\r\n\r\n  const fetchSubSections = async (sectionId) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      // Strip 'mysql_sec_' prefix if present to get the actual code\r\n      let cleanSectionId = sectionId;\r\n      if (typeof sectionId === 'string' && sectionId.startsWith('mysql_sec_')) {\r\n        cleanSectionId = sectionId.replace('mysql_sec_', '');\r\n      }\r\n\r\n      console.log(` Fetching sub sections for section: ${sectionId} (clean: ${cleanSectionId})`);\r\n      \r\n      const response = await fetch(`${API_BASE_URL}/mysql-subsections?sectionId=${encodeURIComponent(cleanSectionId)}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        let subSectionsArray = [];\r\n        if (Array.isArray(data)) {\r\n          subSectionsArray = data;\r\n        } else if (data.data && Array.isArray(data.data)) {\r\n          subSectionsArray = data.data;\r\n        }\r\n\r\n        console.log(` Loaded ${subSectionsArray.length} sub sections for section ${sectionId}`);\r\n        setSubSections(subSectionsArray);\r\n      } else {\r\n        console.error('Failed to fetch sub sections:', response.status);\r\n        setSubSections([]);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching sub sections:', err);\r\n      setSubSections([]);\r\n    }\r\n  };\r\n\r\n  // Fetch a small preview list of employees matching the filters (used to validate group filters)\r\n  const fetchFilteredEmployeesPreview = async (payload, token) => {\r\n    try {\r\n      let employeesUrl = '';\r\n      if (payload.sub_section_id) {\r\n        employeesUrl = `${API_BASE_URL}/mysql-subsections/transferred/${encodeURIComponent(payload.sub_section_id)}`;\r\n      } else if (payload.section_id) {\r\n        employeesUrl = `${API_BASE_URL}/mysql-data/employees?sectionCode=${encodeURIComponent(payload.section_id)}&limit=1000`;\r\n      } else if (payload.division_id) {\r\n        employeesUrl = `${API_BASE_URL}/mysql-data/employees?divisionCode=${encodeURIComponent(payload.division_id)}&limit=1000`;\r\n      }\r\n\r\n      if (!employeesUrl) return null;\r\n\r\n      const resp = await fetch(employeesUrl, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (!resp.ok) return null;\r\n      const data = await resp.json();\r\n      let arr = [];\r\n      if (Array.isArray(data)) arr = data;\r\n      else if (data.data && Array.isArray(data.data)) arr = data.data;\r\n      else if (data.data && data.data.data && Array.isArray(data.data.data)) arr = data.data.data;\r\n      return arr;\r\n    } catch (err) {\r\n      console.warn('Error fetching filtered employees preview:', err);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    \r\n    if (!hasGeneratePermissionForType(reportType)) {\r\n      setError('You do not have permission to generate this type of report');\r\n      return;\r\n    }\r\n\r\n    if (!dateRange.startDate || !dateRange.endDate) {\r\n      setError('Please select both start and end dates');\r\n      return;\r\n    }\r\n\r\n    // Only validate employee ID for individual scope reports (not for meal reports)\r\n    if (reportType !== 'meal' && reportScope === 'individual' && !employeeId) {\r\n      setError('Please enter an employee ID for individual reports');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    // Show the report modal immediately with loading state\r\n    setShowReportModal(true);\r\n    setReportData(null); // Clear previous data\r\n    \r\n    // Show empty report structure immediately\r\n    setTimeout(() => {\r\n      if (!reportData) {\r\n        setReportData({ \r\n          data: [], \r\n          dates: [], \r\n          reportType: reportScope === 'group' ? 'group' : 'individual',\r\n          summary: { totalEmployees: 0, totalRecords: 0 }\r\n        });\r\n      }\r\n    }, 100);\r\n    \r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      let apiUrl = '';\r\n      let payload = {};\r\n\r\n      if (reportType === 'attendance') {\r\n        // Use MySQL API for attendance reports\r\n        apiUrl = `${API_BASE_URL}/reports/mysql/attendance`;\r\n        payload = {\r\n          report_type: reportScope,\r\n          from_date: dateRange.startDate,\r\n          to_date: dateRange.endDate,\r\n          time_period: timePeriod,\r\n          grouping: reportGrouping\r\n        };\r\n        if (reportScope === 'individual') {\r\n          payload.employee_id = employeeId;\r\n        } else if (reportScope === 'group') {\r\n          // For group reports, derive concrete identifiers expected by the backend (emp_index_list uses\r\n          // division_id=HIE_CODE, section_id=HIE_CODE, sub_section_id=sub_sections.id)\r\n          if (subSectionId !== 'all' && sectionId !== 'all') {\r\n            const selectedSubSection = subSections.find(ss => (ss._id || ss.id || ss.sub_section_id) === subSectionId);\r\n            if (selectedSubSection) {\r\n              // Use the database id for sub sections (this matches emp_index_list.sub_section_id)\r\n              payload.sub_section_id = selectedSubSection.sub_section_id || selectedSubSection.id || selectedSubSection._id || subSectionId;\r\n              // Clear section/division to include transferred employees across sections/divisions\r\n              payload.section_id = '';\r\n              payload.division_id = '';\r\n\r\n              console.log('Selected sub section details:', {\r\n                sub_section_db_id: payload.sub_section_id,\r\n                sub_section_name: selectedSubSection.subSection?.sub_hie_name || selectedSubSection.subSection?.name || selectedSubSection.sub_name || selectedSubSection.sub_code || selectedSubSection.sub_section_name || selectedSubSection.name || '',\r\n                full_sub_section: selectedSubSection\r\n              });\r\n            }\r\n          } else if (sectionId !== 'all') {\r\n            const selectedSection = sections.find(s => (s._id || s.id || s.section_id || s.code) === sectionId);\r\n            if (selectedSection) {\r\n              // For emp_index_list we use HIE_CODE for section_id\r\n              payload.section_id = selectedSection.code || selectedSection.hie_code || selectedSection.section_code || selectedSection.section_id || selectedSection.id || '';\r\n              // Division may be a code as well\r\n              payload.division_id = selectedSection.divisionCode || selectedSection.division_code || selectedSection.division_id || selectedSection.divisionId || '';\r\n\r\n              console.log(' Selected section details:', {\r\n                section_id: sectionId,\r\n                section_code: payload.section_id,\r\n                division_code: payload.division_id,\r\n                full_section: selectedSection\r\n              });\r\n            }\r\n          } else if (divisionId !== 'all') {\r\n            const selectedDivision = divisions.find(d => (d._id || d.id) === divisionId);\r\n            if (selectedDivision) {\r\n              // Use the division HIE code as division_id\r\n              payload.division_id = selectedDivision.code || selectedDivision.hie_code || selectedDivision.division_id || selectedDivision.id || '';\r\n              payload.section_id = '';\r\n\r\n              console.log(' Selected division with all sections:', {\r\n                division_id: divisionId,\r\n                division_code: payload.division_id,\r\n                section_filter: 'All Sections',\r\n                full_division: selectedDivision\r\n              });\r\n            }\r\n          } else {\r\n            payload.division_id = '';\r\n            payload.section_id = '';\r\n          }\r\n\r\n          console.log('Sending group report filters:', {\r\n            division_name: payload.division_id,\r\n            section_name: payload.section_id,\r\n            sub_section_id: payload.sub_section_id\r\n          });\r\n\r\n          // Verify filtered employees for group report (preview)\r\n          const empPreview = await fetchFilteredEmployeesPreview(payload, token);\r\n          if (Array.isArray(empPreview)) {\r\n            console.log(` Found ${empPreview.length} employees matching filters`);\r\n            if (empPreview.length === 0) {\r\n              setError('No employees found for selected filters. Please check your division/section/sub-section selection.');\r\n              setLoading(false);\r\n              return;\r\n            }\r\n            payload.preview_employee_count = empPreview.length;\r\n          } else {\r\n            console.warn('Failed to verify filtered employees (preview unavailable)');\r\n          }\r\n        }\r\n      } else if (reportType === 'audit') {\r\n        // Validate dates for audit report\r\n        if (!dateRange.startDate || !dateRange.endDate) {\r\n          setError('Audit reports require both start and end dates. Please select dates.');\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        // Use MySQL API for audit reports\r\n        apiUrl = `${API_BASE_URL}/reports/mysql/audit`;\r\n        payload = {\r\n          from_date: dateRange.startDate,\r\n          to_date: dateRange.endDate,\r\n          time_period: timePeriod,\r\n          grouping: reportGrouping\r\n        };\r\n        \r\n        // Audit reports always use group scope with division/section filtering\r\n        if (subSectionId !== 'all' && sectionId !== 'all') {\r\n          // If sub section is selected, send the database ID for querying transfers\r\n          const selectedSubSection = subSections.find(ss => (ss._id || ss.id) === subSectionId);\r\n          if (selectedSubSection) {\r\n            // Send the actual database ID (not the name) for querying subsection_transfers table\r\n            payload.sub_section_id = subSectionId;\r\n            payload.section_id = selectedSubSection.parentSection?.hie_name || selectedSubSection.section_name || '';\r\n            payload.division_id = selectedSubSection.parentDivision?.division_name || selectedSubSection.division_name || '';\r\n            console.log(' Audit sub section filter:', {\r\n              sub_section_db_id: subSectionId,\r\n              sub_section_name: selectedSubSection.subSection?.sub_hie_name || selectedSubSection.subSection?.name || selectedSubSection.sub_name || selectedSubSection.sub_code || '',\r\n              section_id: payload.section_id,\r\n              division_id: payload.division_id,\r\n              selectedSubSection\r\n            });\r\n          }\r\n        } else if (sectionId !== 'all') {\r\n          const selectedSection = sections.find(s => (s._id || s.id || s.section_id) === sectionId);\r\n          if (selectedSection) {\r\n            payload.section_id = selectedSection.name || selectedSection.section_name || '';\r\n            payload.division_id = selectedSection.divisionName || selectedSection.division_name || '';\r\n            console.log(' Audit section filter:', {\r\n              section_id: payload.section_id,\r\n              division_id: payload.division_id,\r\n              selectedSection\r\n            });\r\n          }\r\n        } else if (divisionId !== 'all') {\r\n          const selectedDivision = divisions.find(d => (d._id || d.id) === divisionId);\r\n          if (selectedDivision) {\r\n            payload.division_id = selectedDivision.hie_name || selectedDivision.name || '';\r\n            console.log(' Audit division filter:', {\r\n              division_id: payload.division_id,\r\n              selectedDivision\r\n            });\r\n          }\r\n          payload.section_id = '';\r\n        } else {\r\n          payload.division_id = '';\r\n          payload.section_id = '';\r\n        }\r\n        \r\n        console.log(' Sending audit report request:', {\r\n          from_date: payload.from_date,\r\n          to_date: payload.to_date,\r\n          grouping: payload.grouping,\r\n          division_id: payload.division_id,\r\n          section_id: payload.section_id\r\n        });\r\n      } else if (reportType === 'meal') {\r\n        // Use MySQL API for meal reports from attendance table (GROUP SCOPE ONLY)\r\n        apiUrl = `${API_BASE_URL}/reports/mysql/meal`;\r\n        \r\n        // Prepare payload for group meal report\r\n        payload = {\r\n          from_date: dateRange.startDate,\r\n          to_date: dateRange.endDate,\r\n          division_id: '',\r\n          section_id: '',\r\n          sub_section_id: ''\r\n        };\r\n\r\n        // Set division/section filters\r\n        if (divisionId && divisionId !== 'all') {\r\n          const selectedDivision = divisions.find(d => (d._id || d.id) === divisionId);\r\n          if (selectedDivision) {\r\n            payload.division_id = selectedDivision.hie_name || selectedDivision.name || '';\r\n          }\r\n        }\r\n        \r\n        if (sectionId && sectionId !== 'all') {\r\n          const selectedSection = sections.find(s => (s._id || s.id) === sectionId);\r\n          if (selectedSection) {\r\n            payload.section_id = selectedSection.hie_name || selectedSection.name || '';\r\n          }\r\n        }\r\n\r\n        if (subSectionId && subSectionId !== 'all') {\r\n          payload.sub_section_id = subSectionId;\r\n        }\r\n        \r\n        console.log(' Meal Report Payload (Group Scope):', payload);\r\n      }\r\n\r\n      let response;\r\n      if (reportType === 'attendance' || reportType === 'audit' || reportType === 'meal') {\r\n        console.log(' Sending request to:', apiUrl);\r\n        console.log(' Request payload:', JSON.stringify(payload, null, 2));\r\n        \r\n        response = await fetch(apiUrl, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify(payload)\r\n        });\r\n      } else {\r\n        response = await fetch(apiUrl, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n      }\r\n\r\n      let data;\r\n      try {\r\n        data = await response.json();\r\n        console.log(' Response status:', response.status);\r\n        console.log(' Response data:', JSON.stringify(data, null, 2));\r\n      } catch (jsonErr) {\r\n        console.error(' JSON parse error:', jsonErr);\r\n        setError('Invalid response from server.');\r\n        setReportData(null);\r\n        return;\r\n      }\r\n\r\n      if (!response.ok) {\r\n        console.error(' Response not OK:', response.status, data.message);\r\n        setError(data.message || `HTTP error! status: ${response.status}`);\r\n        setReportData(null);\r\n        return;\r\n      }\r\n\r\n      // Handle response format\r\n      const reportArray = Array.isArray(data.data) ? data.data : Array.isArray(data) ? data : [];\r\n      console.log(' Report array length:', reportArray.length);\r\n      console.log(' Data success flag:', data.success);\r\n      console.log(' Sample data (first 2 items):', reportArray.slice(0, 2));\r\n      \r\n      if ((data.success && reportArray.length > 0) || (!data.hasOwnProperty('success') && reportArray.length > 0)) {\r\n        // Simulate real-time loading by updating data in chunks\r\n        const fullData = reportArray;\r\n        const chunkSize = Math.max(10, Math.floor(fullData.length / 20)); // Show data in chunks\r\n        let currentIndex = 0;\r\n        \r\n        const loadDataChunk = () => {\r\n          const nextIndex = Math.min(currentIndex + chunkSize, fullData.length);\r\n          const chunkData = fullData.slice(0, nextIndex);\r\n          \r\n          const processedData = {\r\n            ...data,\r\n            data: chunkData\r\n          };\r\n          \r\n          // If this is a group report, add the reportType for frontend handling\r\n          if (reportScope === 'group' && data.reportType === 'group') {\r\n            processedData.reportType = 'group';\r\n            processedData.employees = chunkData; // For backward compatibility\r\n          }\r\n          \r\n          setReportData(processedData);\r\n          \r\n          currentIndex = nextIndex;\r\n          \r\n          if (currentIndex < fullData.length) {\r\n            // Load next chunk after a small delay\r\n            setTimeout(loadDataChunk, 100);\r\n          } else {\r\n            // All data loaded\r\n            setLoading(false);\r\n          }\r\n        };\r\n        \r\n        // Start loading data chunks\r\n        loadDataChunk();\r\n      } else if (reportArray.length === 0) {\r\n        console.warn(' No records found in response');\r\n        console.log('Response details:', {\r\n          success: data.success,\r\n          message: data.message,\r\n          summary: data.summary,\r\n          employees: data.employees\r\n        });\r\n        setError('No records found for the selected criteria.');\r\n        setReportData({ ...data, data: [] });\r\n      } else {\r\n        console.error(' Report generation failed:', data.message);\r\n        setError(data.message || 'Failed to generate report');\r\n        setReportData(null);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error generating report:', err);\r\n      setError(err.message || 'Failed to generate report. Please try again.');\r\n      setReportData(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const exportReport = (format) => {\r\n    const dataToExport = filteredReportData;\r\n    if (!dataToExport || !dataToExport.data || dataToExport.data.length === 0) {\r\n      setError('No data to export. Please generate a report first or adjust search filters.');\r\n      return;\r\n    }\r\n    if (format === 'pdf') {\r\n      handlePrint();\r\n    }\r\n  };\r\n\r\n  const handlePrint = () => {\r\n    if (!reportData || !reportData.data || reportData.data.length === 0) {\r\n      alert('No data to print. Please generate a report first.');\r\n      return;\r\n    }\r\n    // Check download/print permission for attendance reports\r\n    if (reportType === 'attendance' && !canDownloadAttendance) {\r\n      setError('You do not have permission to download/print attendance reports');\r\n      return;\r\n    }\r\n    if (reportType === 'audit') {\r\n      // Simple print for audit report\r\n      window.print();\r\n    } else if (reportScope === 'group') {\r\n      if (groupReportRef.current && typeof groupReportRef.current.print === 'function') {\r\n        groupReportRef.current.print();\r\n      } else {\r\n        alert('Group report print not available.');\r\n      }\r\n    } else {\r\n      if (individualReportRef.current && typeof individualReportRef.current.print === 'function') {\r\n        individualReportRef.current.print();\r\n      } else {\r\n        alert('Individual report print not available.');\r\n      }\r\n    }\r\n  };\r\n\r\n  const getHeaders = () => {\r\n    if (reportType === 'meal') {\r\n      // Meal report headers matching the MySQL attendance table structure\r\n      return ['Emp No', 'Emp Name', 'Division', 'Section', 'Date', 'Meal Packet', 'Meal Money'];\r\n    } else if (reportScope === 'group' && reportData?.reportType === 'group') {\r\n        // For group scope we want a flat punch-list style table similar to individual reports.\r\n        return ['Emp No', 'Emp Name', 'Meal-Pkt-Mny', 'Punch Date', 'Punch Time', 'Function', 'Event Description'];\r\n    } else {\r\n      // Individual attendance report headers to match your reference exactly\r\n      return ['Emp No', 'Emp Name', 'Meal-Pkt-Mny', 'Punch Date', 'Punch Time', 'Function', 'Event Description'];\r\n    }\r\n  };\r\n\r\n  // formatRow returns an array of cell values for a single punch/record\r\n  // If called with an attendance 'punch' object, it returns the standard row.\r\n  const formatRow = (record) => {\r\n    if (reportType === 'meal') {\r\n      // Format meal report row from attendance table\r\n      return [\r\n        record.employeeId || '',\r\n        record.employeeName || '',\r\n        record.division || 'N/A',\r\n        record.section || 'N/A',\r\n        record.date || '',\r\n        record.mealPacket || 'No',\r\n        record.mealMoney || 'No'\r\n      ];\r\n    } else if (reportScope === 'group' && reportData?.reportType === 'group') {\r\n      // For group reports we may be formatting individual punch records.\r\n      // The incoming `record` in the group-preview mapping will be a punch-like object\r\n      // if we transformed the server response earlier. We expect fields similar to individual records.\r\n      // Format: Emp No, Emp Name, Meal-Pkt-Mny, Punch Date, Punch Time, Function, Event Description\r\n      const punchDateObj = record.date_ ? new Date(record.date_) : (record.punchDate ? new Date(record.punchDate) : null);\r\n      const formattedDate = punchDateObj && !isNaN(punchDateObj.getTime())\r\n        ? (punchDateObj.toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: '2-digit' }).replace(/\\//g, '-') + ' ' + punchDateObj.toLocaleDateString('en-US', { weekday: 'short' }))\r\n        : (record.punchDate || record.date_ || '');\r\n\r\n      const functionCode = record.scan_type?.toUpperCase() === 'IN' ? 'F1-0' : 'F4-0';\r\n      const eventDescription = `${record.scan_type?.toUpperCase() === 'IN' ? 'ON' : 'OFF'}Granted(ID & F tally plan COM0002)`;\r\n\r\n      return [\r\n        record.employee_ID || record.employeeId || record.emp_no || record.empNo || '',\r\n        record.employee_name || record.employeeName || record.name || 'Unknown',\r\n        'I',\r\n        formattedDate,\r\n        ensureSeconds(record.time_ || record.time || record.punchTime || ''),\r\n        functionCode,\r\n        eventDescription\r\n      ];\r\n    } else {\r\n      // Individual attendance report format to match your reference exactly\r\n      // Format: Emp No, Emp Name, Meal-Pkt-Mny, Punch Date, Punch Time, Function, Event Description\r\n      \r\n      // Format the punch date as \"DD-MMM-YY Day\" like \"19-Aug-25 Tue\"\r\n      const punchDate = new Date(record.date_);\r\n      const formattedDate = punchDate.toLocaleDateString('en-GB', {\r\n        day: '2-digit',\r\n        month: 'short',\r\n        year: '2-digit'\r\n      }).replace(/\\//g, '-') + ' ' + punchDate.toLocaleDateString('en-US', { weekday: 'short' });\r\n      \r\n      // Determine function code based on scan type\r\n      const functionCode = record.scan_type?.toUpperCase() === 'IN' ? 'F1-0' : 'F4-0';\r\n      \r\n      // Format event description like your reference\r\n      const eventDescription = `${record.scan_type?.toUpperCase() === 'IN' ? 'ON' : 'OFF'}Granted(ID & F tally plan COM0002)`;\r\n      \r\n      return [\r\n        record.employee_ID || record.employeeId, // Emp No\r\n        record.employee_name || record.employeeName || 'Unknown', // Emp Name\r\n        'I', // Meal-Pkt-Mny (always \"I\" for attendance records as shown in your reference)\r\n        formattedDate, // Punch Date\r\n  ensureSeconds(record.time_), // Punch Time\r\n        functionCode, // Function\r\n        eventDescription // Event Description\r\n      ];\r\n    }\r\n  };\r\n\r\n  // Unused function - kept for future use\r\n  // const printReport = () => {\r\n  //   if (!reportData || !reportData.data || reportData.data.length === 0) {\r\n  //     alert('No data to print. Please generate a report first.');\r\n  //     return;\r\n  //   }\r\n  //   \r\n  //   // Create a new window for printing with formatted content, avoid about:blank in URL\r\n  //   const printWindow = window.open(' ', '', 'width=900,height=700');\r\n  //   const printContent = generatePrintContent();\r\n  //   printWindow.document.open();\r\n  //   printWindow.document.write(printContent);\r\n  //   printWindow.document.close();\r\n  //   printWindow.focus();\r\n  //   printWindow.print();\r\n  //   printWindow.close();\r\n  // };\r\n\r\n  // eslint-disable-next-line no-unused-vars\r\n  const generatePrintContent = () => {\r\n    const reportTitle = reportType === 'attendance' ? 'History Transaction Report' : 'Meal Consumption Report';\r\n    // const subtitle = reportType === 'attendance' ? 'All Granted(ID & FP) Records' : 'All Meal Records';\r\n    \r\n    let employeeHeader = '';\r\n    if (reportScope === 'individual' && (employeeInfo || employeeId)) {\r\n      const empNoVal = (employeeInfo && (employeeInfo.employee_id || employeeInfo.employee_ID)) || employeeId || '';\r\n      const empNameVal = (employeeInfo && (employeeInfo.name || employeeInfo.employee_name || employeeInfo.employeeName)) || '';\r\n      employeeHeader = `\r\n        <table style=\"margin-bottom: 12px; border-collapse: collapse;\">\r\n          <tr>\r\n            <td style=\"vertical-align: top; padding-right: 8px; font-weight: bold; width: 90px;\">Emp No :</td>\r\n            <td style=\"vertical-align: top;\">${empNoVal}</td>\r\n          </tr>\r\n          <tr>\r\n            <td style=\"vertical-align: top; padding-right: 8px; font-weight: bold;\">Emp Name :</td>\r\n            <td style=\"vertical-align: top;\">${empNameVal}</td>\r\n          </tr>\r\n          <tr>\r\n            <td style=\"vertical-align: top; padding-right: 8px; font-weight: bold;\">Date From :</td>\r\n            <td style=\"vertical-align: top;\">${dateRange.startDate} &nbsp; To : &nbsp; ${dateRange.endDate}</td>\r\n          </tr>\r\n        </table>\r\n      `;\r\n    }\r\n\r\n  const headers = getHeaders();\r\n  // Rows per printed page. Use a sensible default for individual reports and keep\r\n  // a larger capacity for group reports. Make the individual value easy to tweak.\r\n  const INDIVIDUAL_ROWS_PER_PAGE = 40; // increased to show more records per individual printed page\r\n  const GROUP_ROWS_PER_PAGE = 32;\r\n  const rowsPerPage = reportScope === 'individual' ? INDIVIDUAL_ROWS_PER_PAGE : GROUP_ROWS_PER_PAGE;\r\n  // Build flattened punches array (date-first) so print matches the group preview\r\n  const punches = [];\r\n  // Determine date order and flatten depending on report shape\r\n  let dateOrder = [];\r\n\r\n  if (Array.isArray(reportData.dates) && reportData.dates.length > 0) {\r\n    dateOrder = reportData.dates;\r\n  } else if (reportScope === 'individual') {\r\n    // reportData.data for individual reports is expected to be a flat array of punch/record objects.\r\n    // Collect unique dates from those records and build punches directly.\r\n    const dateSet = new Set();\r\n    (Array.isArray(reportData.data) ? reportData.data : []).forEach(p => {\r\n      const d = p.date || p.punchDate || p.date_;\r\n      if (d) dateSet.add(d);\r\n    });\r\n    dateOrder = Array.from(dateSet).sort((a, b) => new Date(a) - new Date(b));\r\n\r\n    // For each date, push all punches that belong to that date\r\n    dateOrder.forEach(date => {\r\n      (Array.isArray(reportData.data) ? reportData.data : []).forEach(p => {\r\n        const pd = p.date || p.punchDate || p.date_;\r\n        if (String(pd) !== String(date)) return;\r\n        const inferredType = (p && (p.scan_type || p.type || p.direction))\r\n          ? (p.scan_type || p.type || p.direction)\r\n          : 'IN';\r\n        punches.push({\r\n          employee_ID: p.employee_ID || p.employeeId || p.emp_no || p.empNo || '',\r\n          employee_name: p.employee_name || p.employeeName || p.name || '',\r\n          date_: date,\r\n          time_: p.time || p.punchTime || p.time_ || (typeof p === 'string' ? p : ''),\r\n          scan_type: inferredType\r\n        });\r\n      });\r\n    });\r\n  } else {\r\n    // Group-shaped report: each element is an employee with punches/dailyAttendance\r\n    const dateSet = new Set();\r\n    reportData.data.forEach(emp => {\r\n      if (Array.isArray(emp.punches)) {\r\n        emp.punches.forEach(p => {\r\n          const d = p.date || p.punchDate || p.date_;\r\n          if (d) dateSet.add(d);\r\n        });\r\n      }\r\n      if (emp.dailyAttendance) {\r\n        Object.keys(emp.dailyAttendance).forEach(k => dateSet.add(k));\r\n      }\r\n    });\r\n    dateOrder = Array.from(dateSet).sort((a, b) => new Date(a) - new Date(b));\r\n\r\n    dateOrder.forEach(date => {\r\n      reportData.data.forEach(emp => {\r\n        if (Array.isArray(emp.punches) && emp.punches.length > 0) {\r\n          const dayPunches = emp.punches.filter(p => {\r\n            const pd = p.date || p.punchDate || p.date_;\r\n            return String(pd) === String(date);\r\n          });\r\n          dayPunches.forEach((p, pIndex) => {\r\n            const inferredType = (p && (p.scan_type || p.type || p.direction))\r\n              ? (p.scan_type || p.type || p.direction)\r\n              : (pIndex % 2 === 0 ? 'IN' : 'OUT');\r\n            punches.push({\r\n              employee_ID: emp.employeeId || emp.employee_ID || emp.emp_no || emp.empNo,\r\n              employee_name: emp.employeeName || emp.employee_name || emp.name,\r\n              date_: date,\r\n              time_: p.time || p.punchTime || p.time_ || (typeof p === 'string' ? p : ''),\r\n              scan_type: inferredType\r\n            });\r\n          });\r\n        } else if (emp.dailyAttendance && emp.dailyAttendance[date]) {\r\n          const dayData = emp.dailyAttendance[date];\r\n          if (Array.isArray(dayData.punches) && dayData.punches.length > 0) {\r\n            dayData.punches.forEach((p, pIndex) => {\r\n              const inferredType = (p && (p.scan_type || p.type || p.direction))\r\n                ? (p.scan_type || p.type || p.direction)\r\n                : (pIndex % 2 === 0 ? 'IN' : 'OUT');\r\n              punches.push({\r\n                employee_ID: emp.employeeId || emp.employee_ID || emp.emp_no || emp.empNo,\r\n                employee_name: emp.employeeName || emp.employee_name || emp.name,\r\n                date_: date,\r\n                time_: p.time || (typeof p === 'string' ? p : ''),\r\n                scan_type: inferredType\r\n              });\r\n            });\r\n          } else {\r\n            if (dayData.checkIn) {\r\n              punches.push({\r\n                employee_ID: emp.employeeId || emp.employee_ID || emp.emp_no || emp.empNo,\r\n                employee_name: emp.employeeName || emp.employee_name || emp.name,\r\n                date_: date,\r\n                time_: dayData.checkIn,\r\n                scan_type: 'IN'\r\n              });\r\n            }\r\n            if (dayData.checkOut) {\r\n              punches.push({\r\n                employee_ID: emp.employeeId || emp.employee_ID || emp.emp_no || emp.empNo,\r\n                employee_name: emp.employeeName || emp.employee_name || emp.name,\r\n                date_: date,\r\n                time_: dayData.checkOut,\r\n                scan_type: 'OUT'\r\n              });\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // Sort punches by date, employee, time, with IN before OUT for ties\r\n  punches.sort((a, b) => {\r\n    const da = new Date(a.date_ || '');\r\n    const db = new Date(b.date_ || '');\r\n    if (!isNaN(da.getTime()) && !isNaN(db.getTime())) {\r\n      if (da < db) return -1;\r\n      if (da > db) return 1;\r\n    } else {\r\n      if ((a.date_ || '') < (b.date_ || '')) return -1;\r\n      if ((a.date_ || '') > (b.date_ || '')) return 1;\r\n    }\r\n    const empA = String(a.employee_ID || '');\r\n    const empB = String(b.employee_ID || '');\r\n    if (empA < empB) return -1;\r\n    if (empA > empB) return 1;\r\n    const ta = a.time_ || '';\r\n    const tb = b.time_ || '';\r\n    if (ta < tb) return -1;\r\n    if (ta > tb) return 1;\r\n    const aIsIn = (a.scan_type || '').toUpperCase() === 'IN';\r\n    const bIsIn = (b.scan_type || '').toUpperCase() === 'IN';\r\n    if (aIsIn && !bIsIn) return -1;\r\n    if (!aIsIn && bIsIn) return 1;\r\n    return 0;\r\n  });\r\n\r\n  // Build sortedRecords compatible with later print rendering\r\n  const sortedRecords = punches.map((p, idx) => {\r\n    const rec = { ...p };\r\n    // build human readable punch date key used for display grouping\r\n    const punchDate = new Date(p.date_);\r\n    rec._punchDateKey = !isNaN(punchDate.getTime())\r\n      ? (punchDate.toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: '2-digit' }).replace(/\\//g, '-') + ' ' + punchDate.toLocaleDateString('en-US', { weekday: 'short' }))\r\n      : p.date_;\r\n    return rec;\r\n  });\r\n\r\n  // For print, suppress duplicate Emp/Name/Meal-Pkt-Mny/Punch Date similar to preview\r\n  // Build pages so every new date starts on a fresh page\r\n  const pages = (() => {\r\n    const pagesOut = [];\r\n  let currentPage = [];\r\n  let lastKey = null; // empId|date\r\n  let lastDateHeader = null;\r\n  let currentCount = 0;\r\n  // For individual reports, count distinct dates per page (user requested 8 dates/page)\r\n  let currentDateCount = 0;\r\n\r\n    const pushPage = () => {\r\n      if (currentPage.length > 0) {\r\n        pagesOut.push(currentPage.slice());\r\n        currentPage = [];\r\n        currentCount = 0;\r\n        lastKey = null; // reset duplicate suppression at page boundary\r\n      }\r\n    };\r\n\r\n    sortedRecords.forEach(record => {\r\n      const dateHeader = record._punchDateKey || (record.date_ || '');\r\n      // If date changed, insert a date header. For group reports we ensure the header\r\n      // sits at the top of a new page; for individual reports we just inject the header\r\n      // without forcing a page break.\r\n      if (lastDateHeader !== dateHeader) {\r\n        lastDateHeader = dateHeader;\r\n        if ((reportScope === 'group' || reportData.reportType === 'group') && currentCount > 0) {\r\n          // finish current page and start a new one so date header sits at top (group only)\r\n          pushPage();\r\n        }\r\n        // inject date header row on the current page\r\n        currentPage.push(`<tr style=\"background: #e9ecef;\"><td colspan=\"7\" style=\"font-weight: bold; font-size: 11px; text-align: left; padding: 8px 12px; border: 1px solid #000;\">Date: ${dateHeader}</td></tr>`);\r\n        currentCount++;\r\n        // If individual report, increment the distinct date counter and check page limit\r\n        if (reportScope === 'individual') {\r\n          currentDateCount++;\r\n        }\r\n        lastKey = null; // reset duplicate suppression when date header changes\r\n      }\r\n\r\n      const row = formatRow(record);\r\n      const empIdVal = record.employee_ID || record.employeeId || record.emp_no || record.empNo || '';\r\n      const dateVal = dateHeader;\r\n      const key = `${empIdVal}||${dateVal}`;\r\n      if (lastKey === key) {\r\n        if (row.length > 0) row[0] = '';\r\n        if (row.length > 1) row[1] = '';\r\n        if (row.length > 2) row[2] = '';\r\n        if (row.length > 3) row[3] = '';\r\n      } else {\r\n        lastKey = key;\r\n      }\r\n\r\n  currentPage.push(`<tr>${row.map((cell, ci) => `<td style=\"border: 1px solid #000; padding: 4px 6px; text-align: left; font-size: 10px; white-space: pre-line;\">${ci === 0 ? '<strong>' + cell + '</strong>' : cell}</td>`).join('')}</tr>`);\r\n      currentCount++;\r\n\r\n      // If page capacity reached, push page and continue\r\n      if (reportScope === 'individual') {\r\n        // For individual scope, paginate by distinct date headers: 8 dates per page\r\n        const DATES_PER_PAGE = 8;\r\n        if (currentDateCount >= DATES_PER_PAGE) {\r\n          pushPage();\r\n          currentDateCount = 0;\r\n        }\r\n      } else {\r\n        if (currentCount >= rowsPerPage) {\r\n          pushPage();\r\n        }\r\n      }\r\n    });\r\n\r\n    // push remaining\r\n    if (currentPage.length > 0) pagesOut.push(currentPage.slice());\r\n    return pagesOut;\r\n  })();\r\n  const totalPages = pages.length || 1;\r\n\r\n    // Subtitle for attendance report\r\n    const subtitle = reportType === 'attendance' ? 'All Granted(ID & FP) Records' : 'All Meal Records';\r\n    // Employee info extraction - currently unused but kept for reference\r\n    // if (reportScope === 'individual' && employeeInfo) {\r\n    //   const empNo = employeeInfo.employee_id || employeeInfo.employee_ID || employeeId || '';\r\n    //   const empName = employeeInfo.name || employeeInfo.employee_name || employeeInfo.employeeName || '';\r\n    // } else if (reportData && reportData.data && reportData.data.length > 0) {\r\n    //   // Try to extract from first record for group reports\r\n    //   const first = reportData.data[0];\r\n    //   const empNo =\r\n    //     first.employee_id ||\r\n    //     first.employee_ID ||\r\n    //     first.emp_no ||\r\n    //     first.empNo ||\r\n    //     first.empid ||\r\n    //     first.employeeId ||\r\n    //     '';\r\n    //   const empName =\r\n    //     first.employee_name ||\r\n    //     first.employeeName ||\r\n    //     first.emp_name ||\r\n    //     first.name ||\r\n    //     '';\r\n    // }\r\n\r\n    function renderPage(pageNum) {\r\n  const pageRows = (pages[pageNum - 1] || []).join('');\r\n      // Common header for each page\r\n      // Add signature lines only on the last page\r\n      const isLastPage = pageNum === totalPages;\r\n      return `\r\n        <div class=\"common-header\" style=\"page-break-before: ${pageNum > 1 ? 'always' : 'auto'}; width: 100%;\">\r\n          <!-- Reuse app header markup so printed header matches .report-header styles -->\r\n          <div class=\"report-header\" style=\"padding:8px 0; margin-bottom:6px;\">\r\n            <div class=\"header-content\" style=\"text-align:left; display:flex; justify-content:space-between; align-items:flex-start;\">\r\n              <div style=\"max-width:70%;\">\r\n                <h1 style=\"margin:0; display:flex; align-items:center; gap:8px; font-family: 'Courier New', monospace;\">${reportTitle}</h1>\r\n                <div class=\"header-subtitle\" style=\"font-size:11px; margin-top:4px;\"><strong>${subtitle}</strong></div>\r\n                <!-- spacer to create a blank line between subtitle and date-range -->\r\n                <div style=\"height:8px;\">&nbsp;</div>\r\n                ${reportScope === 'individual' ? (employeeHeader || `<div class=\"date-range\" style=\"margin-top:6px; font-size:11px;\"><strong>Date From :</strong> ${dateRange.startDate} <strong>To :</strong> ${dateRange.endDate}</div>`) : `<div class=\"date-range\" style=\"margin-top:6px; font-size:11px;\"><strong>Date From :</strong> ${dateRange.startDate} <strong>To :</strong> ${dateRange.endDate}</div>`}\r\n              </div>\r\n              <div style=\"text-align:left; font-size:10px;\" class=\"print-meta\">\r\n                <div style=\"font-size:10px;\">Printed Date : ${new Date().toLocaleDateString()}</div>\r\n                <div style=\"font-size:10px;\">Printed Time : ${new Date().toLocaleTimeString()}</div>\r\n                <div style=\"font-size:10px;\">Page ${pageNum} of ${totalPages}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"header-content\" style=\"max-width:1200px; margin:0 auto; padding:0 12px;\">\r\n            <table style=\"width:100%; border-collapse: collapse;\">\r\n              <thead>\r\n                <tr>${headers.map(header => `<th style=\"font-size: 11px; padding: 4px 2px; border: 0.5px solid #000; text-align: left;\">${header === 'Emp No' ? '<strong>' + header + '</strong>' : header}</th>`).join('')}</tr>\r\n              </thead>\r\n              <tbody>\r\n                ${pageRows}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          ${isLastPage ? `\r\n          <div style=\"margin-top: 60px; width: 100%;\">\r\n            <table style=\"width:100%; border-collapse: collapse; border: none;\">\r\n              <tbody>\r\n                <tr>\r\n                  <td style=\"width:15%; vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;\">Date</td>\r\n                  <td style=\"width:35%; vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;\"><span style=\"display:inline-block; font-family: 'Courier New', monospace; font-size:9px; letter-spacing:1px; line-height:1;\">....................</span></td>\r\n                  <td style=\"width:15%; vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;\">Date</td>\r\n                  <td style=\"width:35%; vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;\"><span style=\"display:inline-block; font-family: 'Courier New', monospace; font-size:9px; letter-spacing:1px; line-height:1;\">....................</span></td>\r\n                </tr>\r\n                <tr>\r\n                  <td style=\"vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;\">Authorized Signature 1</td>\r\n                  <td style=\"vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;\"><span style=\"display:inline-block; font-family: 'Courier New', monospace; font-size:9px; letter-spacing:1px; line-height:1;\">....................</span></td>\r\n                  <td style=\"vertical-align: middle; padding:6px 8px; border: none; font-size:11px; white-space: nowrap;\">Authorized Signature 2</td>\r\n                  <td style=\"vertical-align: middle; padding:6px 8px; border: none; white-space: nowrap;\"><span style=\"display:inline-block; font-family: 'Courier New', monospace; font-size:9px; letter-spacing:1px; line-height:1;\">....................</span></td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          ` : ''}\r\n        </div>\r\n      `;\r\n    }\r\n    return `\r\n      <!DOCTYPE html>\r\n      <html>\r\n      <head>\r\n        <title>${reportTitle}</title>\r\n        <style>\r\n          /* Minimal header styles copied from ReportGeneration.css but adjusted for print: white background and black text */\r\n          .report-header { background: #ffffff; padding: 8px 0; margin-bottom: 6px; }\r\n          .header-content { max-width: 1200px; margin: 0 auto; padding: 0 12px; text-align: left; position: relative; z-index: 2; }\r\n          .header-content h1 { font-weight: 700; font-size: 14px; margin: 0; color: #000; }\r\n          .header-subtitle { font-size: 11px; margin-top: 4px; color: #000; }\r\n          .employee-info, .date-range { font-size: 11px; margin-top: 6px; color: #000; }\r\n          .common-header { width: 100%; }\r\n          body { font-family: 'Courier New', monospace; font-size: 11px; margin: 20px; padding: 24px 24px 0 24px; }\r\n          .common-header { width: 100%; }\r\n          .print-header-row { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0; }\r\n          .print-header-left { text-align: left; }\r\n          .print-header-right { text-align: left; font-size: 10px; }\r\n          .report-title { font-weight: bold; font-size: 14px; margin-bottom: 6px; }\r\n          .report-subtitle { font-size: 11px; margin-bottom: 8px; }\r\n          .emp-info { font-size: 11px; margin-bottom: 6px; }\r\n          .date-range { font-size: 11px; margin-bottom: 10px; }\r\n          .print-meta { font-size: 10px; }\r\n          table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }\r\n          th, td { border: 0.5px solid #000; padding: 4px 6px; text-align: left; }\r\n          th { background: #f5f5f5; font-weight: bold; font-size: 11px; }\r\n          td { font-size: 10px; white-space: pre-line; }\r\n          @media print {\r\n            @page { margin: 0.5in; size: landscape; }\r\n            body { margin: 0; }\r\n            table { font-size: 11px; }\r\n            th, td { padding: 2px 4px; }\r\n            thead { display: table-header-group !important; }\r\n            /* Hide browser print header/footer */\r\n            @page {\r\n              margin-top: 0;\r\n              margin-bottom: 0;\r\n              margin-left: 0;\r\n              margin-right: 0;\r\n            }\r\n            body::before, body::after { display: none !important; }\r\n          }\r\n        </style>\r\n      </head>\r\n      <body>\r\n        ${Array.from({length: totalPages}, (_, i) => renderPage(i + 1)).join('')}\r\n      </body>\r\n      </html>\r\n    `;\r\n  };\r\n\r\n  // Calendar helper functions\r\n  const getDaysInMonth = (date) => {\r\n    const year = date.getFullYear();\r\n    const month = date.getMonth();\r\n    return new Date(year, month + 1, 0).getDate();\r\n  };\r\n\r\n  const getFirstDayOfMonth = (date) => {\r\n    const year = date.getFullYear();\r\n    const month = date.getMonth();\r\n    return new Date(year, month, 1).getDay();\r\n  };\r\n\r\n  const generateCalendarDays = (monthDate) => {\r\n    const daysInMonth = getDaysInMonth(monthDate);\r\n    const firstDay = getFirstDayOfMonth(monthDate);\r\n    const days = [];\r\n    \r\n    // Add empty cells for days before the first day of month\r\n    for (let i = 0; i < firstDay; i++) {\r\n      days.push(null);\r\n    }\r\n    \r\n    // Add actual days\r\n    for (let day = 1; day <= daysInMonth; day++) {\r\n      days.push(day);\r\n    }\r\n    \r\n    return days;\r\n  };\r\n\r\n  // Unified calendar date click handler - single click selects the date\r\n  const handleCalendarDateClick = (day, monthDate) => {\r\n    if (!day) return;\r\n\r\n    const year = monthDate.getFullYear();\r\n    const month = monthDate.getMonth();\r\n\r\n    // Determine selected date based on current start/end modes and which side is being selected\r\n    if (!dateRange.startDate || calendarSelectMode === 'start') {\r\n      // Selecting start\r\n      let selectedDate;\r\n      if (startMode === 'month') selectedDate = new Date(year, month, 1);\r\n      else if (startMode === 'year') selectedDate = new Date(year, 0, 1);\r\n      else selectedDate = new Date(year, month, day);\r\n\r\n      const dateStr = formatDateToYYYYMMDD(selectedDate);\r\n      setDateRange({ startDate: dateStr, endDate: dateStr });\r\n      setCurrentMonth(new Date(selectedDate.getFullYear(), selectedDate.getMonth(), 1));\r\n      setCalendarSelectMode('end');\r\n      return;\r\n    }\r\n\r\n    // Selecting end\r\n    if (calendarSelectMode === 'end') {\r\n      let selectedDate;\r\n      if (endMode === 'month') selectedDate = new Date(year, month + 1, 0);\r\n      else if (endMode === 'year') selectedDate = new Date(year, 11, 31);\r\n      else selectedDate = new Date(year, month, day);\r\n\r\n      const dateStr = formatDateToYYYYMMDD(selectedDate);\r\n\r\n      if (dateStr < dateRange.startDate) {\r\n        setDateRange({ startDate: dateStr, endDate: dateRange.startDate });\r\n      } else if (dateStr === dateRange.startDate) {\r\n        setDateRange({ startDate: dateStr, endDate: dateStr });\r\n      } else {\r\n        setDateRange({ ...dateRange, endDate: dateStr });\r\n      }\r\n      setEndMonth(new Date(selectedDate.getFullYear(), selectedDate.getMonth(), 1));\r\n      setCalendarSelectMode('start');\r\n    }\r\n  };\r\n\r\n  const handleStartDateClick = (day) => {\r\n    if (day) {\r\n      const year = currentMonth.getFullYear();\r\n      const month = currentMonth.getMonth();\r\n\r\n      let selectedDate;\r\n      if (startMode === 'month') {\r\n        selectedDate = new Date(year, month, 1);\r\n      } else if (startMode === 'year') {\r\n        selectedDate = new Date(year, 0, 1);\r\n      } else {\r\n        selectedDate = new Date(year, month, day);\r\n      }\r\n\r\n      const dateStr = formatDateToYYYYMMDD(selectedDate);\r\n\r\n      // If end date exists and new start date is after end date, update end date to match\r\n      if (dateRange.endDate && dateStr > dateRange.endDate) {\r\n        setDateRange({ startDate: dateStr, endDate: dateStr });\r\n      } else {\r\n        setDateRange({ ...dateRange, startDate: dateStr });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEndDateClick = (day) => {\r\n    if (day) {\r\n      const year = endMonth.getFullYear();\r\n      const month = endMonth.getMonth();\r\n\r\n      let selectedDate;\r\n      if (endMode === 'month') {\r\n        selectedDate = new Date(year, month + 1, 0); // last day of month\r\n      } else if (endMode === 'year') {\r\n        selectedDate = new Date(year, 11, 31); // end of year\r\n      } else {\r\n        selectedDate = new Date(year, month, day);\r\n      }\r\n\r\n      const dateStr = selectedDate.toISOString().split('T')[0];\r\n\r\n      // If start date exists and new end date is before start date, update start date to match\r\n      if (dateRange.startDate && dateStr < dateRange.startDate) {\r\n        setDateRange({ startDate: dateStr, endDate: dateStr });\r\n      } else {\r\n        setDateRange({ ...dateRange, endDate: dateStr });\r\n      }\r\n    }\r\n  };\r\n\r\n  // Check if a date is the start date\r\n  const isStartDate = (day, monthDate) => {\r\n    if (!day || !dateRange.startDate) return false;\r\n    const year = monthDate.getFullYear();\r\n    const month = monthDate.getMonth();\r\n    const dateStr = formatDateToYYYYMMDD(new Date(year, month, day));\r\n    return dateStr === dateRange.startDate;\r\n  };\r\n\r\n  // Check if a date is the end date\r\n  const isEndDate = (day, monthDate) => {\r\n    if (!day || !dateRange.endDate) return false;\r\n    const year = monthDate.getFullYear();\r\n    const month = monthDate.getMonth();\r\n    const dateStr = formatDateToYYYYMMDD(new Date(year, month, day));\r\n    return dateStr === dateRange.endDate;\r\n  };\r\n\r\n  // Check if date is today\r\n  const isToday = (day, monthDate) => {\r\n    if (!day) return false;\r\n    const today = new Date();\r\n    const year = monthDate.getFullYear();\r\n    const month = monthDate.getMonth();\r\n    return day === today.getDate() && month === today.getMonth() && year === today.getFullYear();\r\n  };\r\n\r\n  const previousMonth = () => {\r\n    setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1, 1));\r\n  };\r\n\r\n  const nextMonth = () => {\r\n    setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1, 1));\r\n  };\r\n\r\n  const previousEndMonth = () => {\r\n    setEndMonth(new Date(endMonth.getFullYear(), endMonth.getMonth() - 1, 1));\r\n  };\r\n\r\n  const nextEndMonth = () => {\r\n    setEndMonth(new Date(endMonth.getFullYear(), endMonth.getMonth() + 1, 1));\r\n  };\r\n\r\n  const isStartDateSelected = (day, monthDate) => {\r\n    if (!day) return false;\r\n    const year = monthDate.getFullYear();\r\n    const month = monthDate.getMonth();\r\n    const dateStr = formatDateToYYYYMMDD(new Date(year, month, day));\r\n    return dateStr === dateRange.startDate;\r\n  };\r\n\r\n  const isEndDateSelected = (day, monthDate) => {\r\n    if (!day) return false;\r\n    const year = monthDate.getFullYear();\r\n    const month = monthDate.getMonth();\r\n    const dateStr = formatDateToYYYYMMDD(new Date(year, month, day));\r\n    return dateStr === dateRange.endDate;\r\n  };\r\n\r\n  const isDateInRange = (day, monthDate) => {\r\n    if (!day || !dateRange.startDate || !dateRange.endDate) return false;\r\n    const year = monthDate.getFullYear();\r\n    const month = monthDate.getMonth();\r\n    const dateStr = formatDateToYYYYMMDD(new Date(year, month, day));\r\n    return dateStr >= dateRange.startDate && dateStr <= dateRange.endDate;\r\n  };\r\n\r\n  const isDateDisabledForStart = (day, monthDate) => {\r\n    if (!day || !dateRange.endDate) return false;\r\n    const year = monthDate.getFullYear();\r\n    const month = monthDate.getMonth();\r\n    const dateStr = formatDateToYYYYMMDD(new Date(year, month, day));\r\n    return dateStr > dateRange.endDate;\r\n  };\r\n\r\n  const isDateDisabledForEnd = (day, monthDate) => {\r\n    if (!day || !dateRange.startDate) return false;\r\n    const year = monthDate.getFullYear();\r\n    const month = monthDate.getMonth();\r\n    const dateStr = formatDateToYYYYMMDD(new Date(year, month, day));\r\n    return dateStr < dateRange.startDate;\r\n  };\r\n\r\n  const steps = [\r\n    { id: 'report', label: 'Report', icon: 'bi-file-earmark-check' },\r\n    { id: 'filters', label: 'Filters', icon: 'bi-funnel' },\r\n    { id: 'dateRange', label: 'Date Range', icon: 'bi-calendar-range' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"report-generation\">\r\n      {/* Header Section with Logo */}\r\n      <PageHeader\r\n        title=\"Report Generation Center\"\r\n        subtitle=\"Generate attendance, audit, and meal reports\"\r\n        icon=\"bi-graph-up-arrow\"\r\n        onBack={onBack}\r\n      />\r\n\r\n      {/* Form Container */}\r\n      <div className=\"report-form-container\">\r\n        <form onSubmit={handleSubmit} className=\"config-form\">\r\n            \r\n            <div className=\"simple-form-layout\">\r\n            \r\n            {/* Section 1: Report Type & Scope */}\r\n            <div className=\"form-section-group\">\r\n              <div className=\"form-row\">\r\n                <div className=\"form-field\">\r\n                  <label htmlFor=\"reportType\">\r\n                    <i className=\"bi bi-file-earmark-text\"></i>\r\n                    Report Type\r\n                  </label>\r\n                  <select\r\n                    id=\"reportType\"\r\n                    value={reportType}\r\n                    onChange={(e) => setReportType(e.target.value)}\r\n                    className=\"form-control\"\r\n                  >\r\n                    {hasGeneratePermissionForType('attendance') && (\r\n                      <option value=\"attendance\">Attendance Report</option>\r\n                    )}\r\n                    {hasGeneratePermissionForType('audit') && (\r\n                      <option value=\"audit\">Audit Report</option>\r\n                    )}\r\n                    {hasGeneratePermissionForType('meal') && (\r\n                      <option value=\"meal\">Meal Report</option>\r\n                    )}\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"form-field\">\r\n                  <label htmlFor=\"reportScope\">\r\n                    <i className=\"bi bi-people\"></i>\r\n                    Report Scope\r\n                  </label>\r\n                  <select\r\n                    id=\"reportScope\"\r\n                    value={reportScope}\r\n                    onChange={(e) => setReportScope(e.target.value)}\r\n                    className=\"form-control\"\r\n                    disabled={reportType === 'audit'}\r\n                  >\r\n                    <option value=\"individual\">Individual Report</option>\r\n                    <option value=\"group\">Group Report</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Section 2: Filters */}\r\n            <div className=\"form-section-group\">\r\n              {/* Employee ID for Individual Scope */}\r\n              {reportScope === 'individual' && reportType !== 'meal' && (\r\n                <div className=\"form-row\">\r\n                  <div className=\"form-field full-width\">\r\n                    <label htmlFor=\"employeeId\">\r\n                      <i className=\"bi bi-person-badge\"></i>\r\n                      {t('employeeIdLabel')}\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      id=\"employeeId\"\r\n                      value={employeeId}\r\n                      onChange={(e) => setEmployeeId(e.target.value)}\r\n                      className=\"form-control\"\r\n                      placeholder={t('enterEmployeeId')}\r\n                      required={reportScope === 'individual'}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Division, Section, Sub-Section - All in one row */}\r\n              {reportScope !== 'individual' && (\r\n                <div className=\"form-row\">\r\n                  <div className=\"form-field\">\r\n                    <label htmlFor=\"divisionId\">\r\n                      <i className=\"bi bi-building\"></i>\r\n                      {t('divisionLabel')}\r\n                    </label>\r\n                    <select\r\n                      id=\"divisionId\"\r\n                      value={divisionId}\r\n                      onChange={(e) => setDivisionId(e.target.value)}\r\n                      className=\"form-control\"\r\n                    >\r\n                      <option value=\"all\">{t('allDivisionsLabel')}</option>\r\n                      {(Array.isArray(divisions) ? divisions : []).map(division => (\r\n                        <option key={division._id || division.id} value={division._id || division.id}>\r\n                          {division.name || division.division_name}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div className=\"form-field\">\r\n                    <label htmlFor=\"sectionId\">\r\n                      <i className=\"bi bi-diagram-3\"></i>\r\n                      {t('sectionLabel')}\r\n                    </label>\r\n                    <select\r\n                      id=\"sectionId\"\r\n                      value={sectionId}\r\n                      onChange={(e) => setSectionId(e.target.value)}\r\n                      className=\"form-control\"\r\n                      disabled={divisionId === 'all'}\r\n                    >\r\n                      <option value=\"all\">{t('allSectionsLabel')}</option>\r\n                      {divisionId !== 'all' && (Array.isArray(sections) ? sections : []).map(section => (\r\n                        <option key={section._id || section.id} value={section._id || section.id}>\r\n                          {section.name || section.section_name}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div className=\"form-field\">\r\n                    <label htmlFor=\"subSectionId\">\r\n                      <i className=\"bi bi-diagram-2\"></i>\r\n                      {t('subSectionLabel')}\r\n                    </label>\r\n                    <select\r\n                      id=\"subSectionId\"\r\n                      value={subSectionId}\r\n                      onChange={e => setSubSectionId(e.target.value)}\r\n                      className=\"form-control\"\r\n                      disabled={sectionId === 'all' || divisionId === 'all'}\r\n                    >\r\n                      <option value=\"all\">{t('allSubSectionsLabel')}</option>\r\n                      {(sectionId !== 'all' && divisionId !== 'all') && (Array.isArray(subSections) ? subSections : []).map(sub => {\r\n                        const subName = sub.subSection?.sub_hie_name || sub.subSection?.name || sub.subSection?.hie_name || sub.sub_name || sub.sub_hie_name || sub.sub_section_name || sub.sub_code || 'Unnamed';\r\n                        return (\r\n                          <option key={sub._id || sub.id} value={sub._id || sub.id}>\r\n                            {subName}\r\n                          </option>\r\n                        );\r\n                      })}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Report Grouping & Time Period */}\r\n              {reportScope === 'group' && reportType !== 'attendance' && reportType !== 'meal' && (\r\n                <div className=\"form-row\">\r\n                  <div className=\"form-field\">\r\n                    <label htmlFor=\"reportGrouping\">\r\n                      <i className=\"bi bi-collection\"></i>\r\n                      Group By\r\n                    </label>\r\n                    <select\r\n                      id=\"reportGrouping\"\r\n                      value={reportGrouping}\r\n                      onChange={(e) => setReportGrouping(e.target.value)}\r\n                      className=\"form-control\"\r\n                    >\r\n                      <option value=\"none\">None</option>\r\n                      <option value=\"designation\">Designation Wise</option>\r\n                      <option value=\"punch\">F1-0 (Punch Type)</option>\r\n                    </select>\r\n                  </div>\r\n\r\n                  {reportGrouping !== 'designation' && (\r\n                    <div className=\"form-field\">\r\n                      <label htmlFor=\"timePeriod\">\r\n                        <i className=\"bi bi-calendar-range\"></i>\r\n                        Time Period\r\n                      </label>\r\n                      <select\r\n                        id=\"timePeriod\"\r\n                        value={timePeriod}\r\n                        onChange={(e) => setTimePeriod(e.target.value)}\r\n                        className=\"form-control\"\r\n                      >\r\n                        <option value=\"none\">None</option>\r\n                        <option value=\"daily\">Daily</option>\r\n                        <option value=\"weekly\">Weekly</option>\r\n                        <option value=\"monthly\">Monthly</option>\r\n                        <option value=\"annually\">Annually</option>\r\n                      </select>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Section 3: Date Selection (Dual Calendar Layout) - ALWAYS REQUIRED FOR AUDIT REPORTS */}\r\n            {reportType === 'audit' || reportGrouping !== 'designation' ? (\r\n              <div className=\"form-section-group date-range-section\">\r\n                <div style={{ padding: '20px', background: '#fff', borderRadius: '10px', border: '1px solid #e2e8f0', boxShadow: '0 2px 8px rgba(0,0,0,0.06)' }}>\r\n                  \r\n                  {/* Header with From/To inputs */}\r\n                  <div style={{ marginBottom: 20, display: 'flex', alignItems: 'center', justifyContent: 'space-between', flexWrap: 'wrap', gap: 16 }}>\r\n                    <h3 style={{ margin: 0, fontSize: 16, fontWeight: 600, color: '#334155' }}>Select Dates</h3>\r\n                    <div style={{ display: 'flex', gap: 12, alignItems: 'center' }}>\r\n                      <div>\r\n                        <label style={{ display: 'block', fontSize: 12, fontWeight: 500, color: '#64748b', marginBottom: 4 }}>From</label>\r\n                        <input \r\n                          type=\"date\" \r\n                          value={dateRange.startDate} \r\n                          onChange={(e) => setDateRange(prev => ({ ...prev, startDate: e.target.value }))}\r\n                          style={{ padding: '8px 10px', borderRadius: 6, border: '1px solid #e2e8f0', fontSize: 14, background: '#fff' }}\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <label style={{ display: 'block', fontSize: 12, fontWeight: 500, color: '#64748b', marginBottom: 4 }}>To</label>\r\n                        <input \r\n                          type=\"date\" \r\n                          value={dateRange.endDate} \r\n                          onChange={(e) => setDateRange(prev => ({ ...prev, endDate: e.target.value }))}\r\n                          style={{ padding: '8px 10px', borderRadius: 6, border: '1px solid #e2e8f0', fontSize: 14, background: '#fff' }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Main Content: Sidebar + Dual Calendars */}\r\n                  <div style={{ display: 'flex', gap: 20 }}>\r\n                    \r\n                    {/* Left Sidebar - Presets */}\r\n                    <div style={{ minWidth: 120, borderRight: '1px solid #e2e8f0', paddingRight: 16 }}>\r\n                      {[\r\n                        { label: 'Custom', action: () => {} },\r\n                        { label: 'Today', action: () => { const t = formatDateToYYYYMMDD(new Date()); setDateRange({ startDate: t, endDate: t }); } },\r\n                        { label: 'Yesterday', action: () => { const y = new Date(); y.setDate(y.getDate() - 1); const d = formatDateToYYYYMMDD(y); setDateRange({ startDate: d, endDate: d }); } },\r\n                        { label: 'This Week', action: () => { const today = new Date(); const first = today.getDate() - today.getDay(); const start = new Date(today.setDate(first)); setDateRange({ startDate: formatDateToYYYYMMDD(start), endDate: formatDateToYYYYMMDD(new Date()) }); } },\r\n                        { label: 'Last Week', action: () => { const today = new Date(); const first = today.getDate() - today.getDay() - 7; const start = new Date(today.setDate(first)); const end = new Date(today.setDate(first + 6)); setDateRange({ startDate: formatDateToYYYYMMDD(start), endDate: formatDateToYYYYMMDD(end) }); } },\r\n                        { label: 'This Month', action: () => { const today = new Date(); const start = new Date(today.getFullYear(), today.getMonth(), 1); const end = new Date(today.getFullYear(), today.getMonth() + 1, 0); setDateRange({ startDate: formatDateToYYYYMMDD(start), endDate: formatDateToYYYYMMDD(end) }); } },\r\n                        { label: 'Last Month', action: () => { const today = new Date(); const start = new Date(today.getFullYear(), today.getMonth() - 1, 1); const end = new Date(today.getFullYear(), today.getMonth(), 0); setDateRange({ startDate: formatDateToYYYYMMDD(start), endDate: formatDateToYYYYMMDD(end) }); } },\r\n                        { label: 'This Year', action: () => { const y = new Date().getFullYear(); setDateRange({ startDate: `${y}-01-01`, endDate: `${y}-12-31` }); } },\r\n                        { label: 'Last Year', action: () => { const y = new Date().getFullYear() - 1; setDateRange({ startDate: `${y}-01-01`, endDate: `${y}-12-31` }); } }\r\n                      ].map((preset, idx) => (\r\n                        <button\r\n                          key={idx}\r\n                          type=\"button\"\r\n                          onClick={preset.action}\r\n                          style={{\r\n                            display: 'block',\r\n                            width: '100%',\r\n                            padding: '8px 12px',\r\n                            marginBottom: 4,\r\n                            textAlign: 'left',\r\n                            background: idx === 0 ? '#f0f9ff' : 'transparent',\r\n                            border: 'none',\r\n                            borderRadius: 6,\r\n                            fontSize: 14,\r\n                            fontWeight: idx === 0 ? 600 : 500,\r\n                            color: '#334155',\r\n                            cursor: 'pointer',\r\n                            transition: 'background 0.2s'\r\n                          }}\r\n                          onMouseEnter={(e) => e.currentTarget.style.background = '#f0f9ff'}\r\n                          onMouseLeave={(e) => e.currentTarget.style.background = idx === 0 ? '#f0f9ff' : 'transparent'}\r\n                        >\r\n                          {preset.label}\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n\r\n                    {/* Right Side - Dual Calendar Views */}\r\n                    <div style={{ flex: 1, display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))', gap: 20 }}>\r\n                      \r\n                      {/* First Calendar */}\r\n                      <div>\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 12 }}>\r\n                          <button type=\"button\" onClick={() => setCurrentMonth(new Date(currentMonth.setMonth(currentMonth.getMonth() - 1)))} style={{ border: 'none', background: 'transparent', cursor: 'pointer', fontSize: 18 }}></button>\r\n                          <span style={{ fontSize: 14, fontWeight: 600, color: '#334155' }}>{currentMonth.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}</span>\r\n                          <button type=\"button\" onClick={() => setCurrentMonth(new Date(currentMonth.setMonth(currentMonth.getMonth() + 1)))} style={{ border: 'none', background: 'transparent', cursor: 'pointer', fontSize: 18 }}></button>\r\n                        </div>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(7, 1fr)', gap: 4, textAlign: 'center' }}>\r\n                          {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (\r\n                            <div key={day} style={{ fontSize: 11, fontWeight: 600, color: '#64748b', padding: '4px 0' }}>{day}</div>\r\n                          ))}\r\n                          {generateCalendarDays(currentMonth).map((day, idx) => {\r\n                            const dayDate = day ? formatDateToYYYYMMDD(new Date(currentMonth.getFullYear(), currentMonth.getMonth(), day)) : null;\r\n                            const isSelected = dayDate && ((dateRange.startDate === dayDate) || (dateRange.endDate === dayDate));\r\n                            const isInRange = dayDate && dateRange.startDate && dateRange.endDate && dayDate >= dateRange.startDate && dayDate <= dateRange.endDate;\r\n                            return (\r\n                              <div\r\n                                key={idx}\r\n                                onClick={() => day && handleCalendarDateClick(day, currentMonth)}\r\n                                style={{\r\n                                  padding: '6px',\r\n                                  borderRadius: 6,\r\n                                  fontSize: 13,\r\n                                  cursor: day ? 'pointer' : 'default',\r\n                                  background: isSelected ? '#0ea5e9' : isInRange ? '#e0f2fe' : 'transparent',\r\n                                  color: isSelected ? '#fff' : day ? '#334155' : '#cbd5e1',\r\n                                  fontWeight: isSelected ? 600 : 400\r\n                                }}\r\n                              >\r\n                                {day || ''}\r\n                              </div>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Second Calendar */}\r\n                      <div>\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 12 }}>\r\n                          <button type=\"button\" onClick={() => setEndMonth(new Date(endMonth.setMonth(endMonth.getMonth() - 1)))} style={{ border: 'none', background: 'transparent', cursor: 'pointer', fontSize: 18 }}></button>\r\n                          <span style={{ fontSize: 14, fontWeight: 600, color: '#334155' }}>{endMonth.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}</span>\r\n                          <button type=\"button\" onClick={() => setEndMonth(new Date(endMonth.setMonth(endMonth.getMonth() + 1)))} style={{ border: 'none', background: 'transparent', cursor: 'pointer', fontSize: 18 }}></button>\r\n                        </div>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(7, 1fr)', gap: 4, textAlign: 'center' }}>\r\n                          {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (\r\n                            <div key={day} style={{ fontSize: 11, fontWeight: 600, color: '#64748b', padding: '4px 0' }}>{day}</div>\r\n                          ))}\r\n                          {generateCalendarDays(endMonth).map((day, idx) => {\r\n                            const dayDate = day ? formatDateToYYYYMMDD(new Date(endMonth.getFullYear(), endMonth.getMonth(), day)) : null;\r\n                            const isSelected = dayDate && ((dateRange.startDate === dayDate) || (dateRange.endDate === dayDate));\r\n                            const isInRange = dayDate && dateRange.startDate && dateRange.endDate && dayDate >= dateRange.startDate && dayDate <= dateRange.endDate;\r\n                            return (\r\n                              <div\r\n                                key={idx}\r\n                                onClick={() => day && handleCalendarDateClick(day, endMonth)}\r\n                                style={{\r\n                                  padding: '6px',\r\n                                  borderRadius: 6,\r\n                                  fontSize: 13,\r\n                                  cursor: day ? 'pointer' : 'default',\r\n                                  background: isSelected ? '#0ea5e9' : isInRange ? '#e0f2fe' : 'transparent',\r\n                                  color: isSelected ? '#fff' : day ? '#334155' : '#cbd5e1',\r\n                                  fontWeight: isSelected ? 600 : 400\r\n                                }}\r\n                              >\r\n                                {day || ''}\r\n                              </div>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Footer - Cancel and Apply buttons */}\r\n                  <div style={{ marginTop: 20, display: 'flex', justifyContent: 'flex-end', gap: 12, paddingTop: 16, borderTop: '1px solid #e2e8f0' }}>\r\n                    <button \r\n                      type=\"button\" \r\n                      onClick={() => setDateRange({ startDate: '', endDate: '' })}\r\n                      style={{ padding: '8px 20px', borderRadius: 6, border: '1px solid #e2e8f0', background: '#fff', fontSize: 14, fontWeight: 500, cursor: 'pointer', color: '#334155' }}\r\n                    >\r\n                      Cancel\r\n                    </button>\r\n                    <button \r\n                      type=\"submit\" \r\n                      disabled={loading || !hasGeneratePermissionForType(reportType)}\r\n                      style={{ padding: '10px 24px', borderRadius: 6, border: 'none', background: loading ? '#94a3b8' : '#14b8a6', fontSize: 14, fontWeight: 600, cursor: loading ? 'not-allowed' : 'pointer', color: '#fff', display: 'flex', alignItems: 'center', gap: 8 }}\r\n                    >\r\n                      {loading ? (\r\n                        <>\r\n                          <i className=\"bi bi-hourglass-split spin\"></i>\r\n                          Generating...\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <i className=\"bi bi-play-circle\"></i>\r\n                          Apply and Generate\r\n                        </>\r\n                      )}\r\n                    </button>\r\n                  </div>\r\n\r\n                  {/* Hidden native date inputs for form validation */}\r\n                  <input type=\"hidden\" id=\"startDate\" value={dateRange.startDate} required />\r\n                  <input type=\"hidden\" id=\"endDate\" value={dateRange.endDate} required />\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n\r\n            {/* Hidden Calendar Widgets - keeping structure but hiding */}\r\n            <div\r\n              className=\"dual-calendar-container\"\r\n              style={{\r\n                display: 'none',\r\n                marginTop: '24px',\r\n                gap: '24px',\r\n                marginBottom: '20px',\r\n                padding: '16px 20px',\r\n                background: '#f8fafc',\r\n                borderRadius: '12px',\r\n                border: '1px solid #e2e8f0',\r\n                flexWrap: 'wrap',\r\n                alignItems: 'flex-end'\r\n              }}\r\n            >\r\n                  {/* Start Date Input with selection modes */}\r\n                  <div style={{ flex: '1', minWidth: '220px' }}>\r\n                    <label style={{ display: 'block', fontSize: '13px', fontWeight: 600, color: '#475569', marginBottom: '6px' }}>\r\n                      <i className=\"bi bi-calendar-event\" style={{ marginRight: '6px' }}></i>Start Date\r\n                    </label>\r\n\r\n                    <div style={{ display: 'flex', gap: 8, marginBottom: 6 }}>\r\n                      <button\r\n                        type=\"button\"\r\n                        className={`btn btn-sm ${startMode === 'date' ? 'active' : ''}`}\r\n                        onClick={() => setStartMode('date')}\r\n                        style={{ padding: '6px 10px', borderRadius: 8, border: startMode === 'date' ? '2px solid #2563eb' : '1px solid #e2e8f0', background: startMode === 'date' ? '#eef2ff' : '#fff', cursor: 'pointer' }}\r\n                      >Date</button>\r\n                      <button\r\n                        type=\"button\"\r\n                        className={`btn btn-sm ${startMode === 'month' ? 'active' : ''}`}\r\n                        onClick={() => setStartMode('month')}\r\n                        style={{ padding: '6px 10px', borderRadius: 8, border: startMode === 'month' ? '2px solid #2563eb' : '1px solid #e2e8f0', background: startMode === 'month' ? '#eef2ff' : '#fff', cursor: 'pointer' }}\r\n                      >Month</button>\r\n                      <button\r\n                        type=\"button\"\r\n                        className={`btn btn-sm ${startMode === 'year' ? 'active' : ''}`}\r\n                        onClick={() => setStartMode('year')}\r\n                        style={{ padding: '6px 10px', borderRadius: 8, border: startMode === 'year' ? '2px solid #2563eb' : '1px solid #e2e8f0', background: startMode === 'year' ? '#eef2ff' : '#fff', cursor: 'pointer' }}\r\n                      >Year</button>\r\n                    </div>\r\n                    <div style={{ fontSize: 12, color: '#6b7280', marginBottom: 8 }}>\r\n                      Choose how to select the Start value: <strong>Date</strong> (exact day), <strong>Month</strong> (entire month), or <strong>Year</strong> (entire year).\r\n                    </div>\r\n\r\n                    {startMode === 'date' && (\r\n                      <input\r\n                        type=\"date\"\r\n                        value={dateRange.startDate}\r\n                        onChange={(e) => setDateRange(prev => ({ ...prev, startDate: e.target.value }))}\r\n                        style={{\r\n                          width: '100%',\r\n                          padding: '10px 14px',\r\n                          borderRadius: '8px',\r\n                          border: '2px solid #e2e8f0',\r\n                          fontSize: '14px',\r\n                          fontWeight: 500,\r\n                          color: '#1e293b',\r\n                          background: '#fff',\r\n                          cursor: 'pointer'\r\n                        }}\r\n                      />\r\n                    )}\r\n\r\n                    {startMode === 'month' && (\r\n                      <div style={{ display: 'flex', gap: 8 }}>\r\n                        <select\r\n                          value={new Date(dateRange.startDate || new Date()).getMonth()}\r\n                          onChange={(e) => {\r\n                            const month = parseInt(e.target.value, 10);\r\n                            const year = new Date(dateRange.startDate || new Date()).getFullYear();\r\n                            const startOfMonth = new Date(year, month, 1);\r\n                            const newStart = formatDateToYYYYMMDD(startOfMonth);\r\n                            setCurrentMonth(startOfMonth);\r\n                            setDateRange(prev => ({\r\n                              ...prev,\r\n                              startDate: newStart,\r\n                              endDate: prev.endDate && prev.endDate < newStart ? newStart : prev.endDate\r\n                            }));\r\n                          }}\r\n                          style={{ flex: 1, padding: '10px 12px', borderRadius: '8px', border: '2px solid #e2e8f0', background: '#fff' }}\r\n                        >\r\n                          <option value={0}>January</option>\r\n                          <option value={1}>February</option>\r\n                          <option value={2}>March</option>\r\n                          <option value={3}>April</option>\r\n                          <option value={4}>May</option>\r\n                          <option value={5}>June</option>\r\n                          <option value={6}>July</option>\r\n                          <option value={7}>August</option>\r\n                          <option value={8}>September</option>\r\n                          <option value={9}>October</option>\r\n                          <option value={10}>November</option>\r\n                          <option value={11}>December</option>\r\n                        </select>\r\n                        <select\r\n                          value={new Date(dateRange.startDate || new Date()).getFullYear()}\r\n                          onChange={(e) => {\r\n                            const year = parseInt(e.target.value, 10);\r\n                            const month = new Date(dateRange.startDate || new Date()).getMonth();\r\n                            const startOfMonth = new Date(year, month, 1);\r\n                            const newStart = formatDateToYYYYMMDD(startOfMonth);\r\n                            setCurrentMonth(startOfMonth);\r\n                            setDateRange(prev => ({\r\n                              ...prev,\r\n                              startDate: newStart,\r\n                              endDate: prev.endDate && prev.endDate < newStart ? newStart : prev.endDate\r\n                            }));\r\n                          }}\r\n                          style={{ width: '110px', padding: '10px 12px', borderRadius: '8px', border: '2px solid #e2e8f0', background: '#fff' }}\r\n                        >\r\n                          {Array.from({ length: 10 }, (_, i) => new Date().getFullYear() - 5 + i).map(y => (\r\n                            <option key={y} value={y}>{y}</option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n                    )}\r\n\r\n                    {startMode === 'year' && (\r\n                      <select\r\n                        value={new Date(dateRange.startDate || new Date()).getFullYear()}\r\n                        onChange={(e) => {\r\n                          const year = parseInt(e.target.value, 10);\r\n                          const startOfYear = new Date(year, 0, 1);\r\n                          const newStart = formatDateToYYYYMMDD(startOfYear);\r\n                          setDateRange(prev => ({\r\n                            ...prev,\r\n                            startDate: newStart,\r\n                            endDate: prev.endDate && prev.endDate < newStart ? newStart : prev.endDate\r\n                          }));\r\n                        }}\r\n                        style={{ width: '100%', padding: '10px 12px', borderRadius: '8px', border: '2px solid #e2e8f0', background: '#fff' }}\r\n                      >\r\n                        {Array.from({ length: 10 }, (_, i) => new Date().getFullYear() - 5 + i).map(y => (\r\n                          <option key={y} value={y}>{y}</option>\r\n                        ))}\r\n                      </select>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* End Date Input with selection modes */}\r\n                  <div style={{ flex: '1', minWidth: '220px' }}>\r\n                    <label style={{ display: 'block', fontSize: '13px', fontWeight: 600, color: '#475569', marginBottom: '6px' }}>\r\n                      <i className=\"bi bi-calendar-event\" style={{ marginRight: '6px' }}></i>End Date\r\n                    </label>\r\n\r\n                    <div style={{ display: 'flex', gap: 8, marginBottom: 6 }}>\r\n                      <button\r\n                        type=\"button\"\r\n                        className={`btn btn-sm ${endMode === 'date' ? 'active' : ''}`}\r\n                        onClick={() => setEndMode('date')}\r\n                        style={{ padding: '6px 10px', borderRadius: 8, border: endMode === 'date' ? '2px solid #2563eb' : '1px solid #e2e8f0', background: endMode === 'date' ? '#eef2ff' : '#fff', cursor: 'pointer' }}\r\n                      >Date</button>\r\n                      <button\r\n                        type=\"button\"\r\n                        className={`btn btn-sm ${endMode === 'month' ? 'active' : ''}`}\r\n                        onClick={() => setEndMode('month')}\r\n                        style={{ padding: '6px 10px', borderRadius: 8, border: endMode === 'month' ? '2px solid #2563eb' : '1px solid #e2e8f0', background: endMode === 'month' ? '#eef2ff' : '#fff', cursor: 'pointer' }}\r\n                      >Month</button>\r\n                      <button\r\n                        type=\"button\"\r\n                        className={`btn btn-sm ${endMode === 'year' ? 'active' : ''}`}\r\n                        onClick={() => setEndMode('year')}\r\n                        style={{ padding: '6px 10px', borderRadius: 8, border: endMode === 'year' ? '2px solid #2563eb' : '1px solid #e2e8f0', background: endMode === 'year' ? '#eef2ff' : '#fff', cursor: 'pointer' }}\r\n                      >Year</button>\r\n                    </div>\r\n                    <div style={{ fontSize: 12, color: '#6b7280', marginBottom: 8 }}>\r\n                      Choose how to select the End value: <strong>Date</strong> (exact day), <strong>Month</strong> (entire month), or <strong>Year</strong> (entire year).\r\n                    </div>\r\n\r\n                    {endMode === 'date' && (\r\n                      <input\r\n                        type=\"date\"\r\n                        value={dateRange.endDate}\r\n                        onChange={(e) => setDateRange(prev => ({ ...prev, endDate: e.target.value }))}\r\n                        style={{\r\n                          width: '100%',\r\n                          padding: '10px 14px',\r\n                          borderRadius: '8px',\r\n                          border: '2px solid #e2e8f0',\r\n                          fontSize: '14px',\r\n                          fontWeight: 500,\r\n                          color: '#1e293b',\r\n                          background: '#fff',\r\n                          cursor: 'pointer'\r\n                        }}\r\n                      />\r\n                    )}\r\n\r\n                    {endMode === 'month' && (\r\n                      <div style={{ display: 'flex', gap: 8 }}>\r\n                        <select\r\n                          value={new Date(dateRange.endDate || new Date()).getMonth()}\r\n                          onChange={(e) => {\r\n                            const month = parseInt(e.target.value, 10);\r\n                            const year = new Date(dateRange.endDate || new Date()).getFullYear();\r\n                            const endOfMonth = new Date(year, month + 1, 0);\r\n                            const newEnd = formatDateToYYYYMMDD(endOfMonth);\r\n                            setEndMonth(endOfMonth);\r\n                            setDateRange(prev => ({ ...prev, endDate: newEnd, startDate: prev.startDate && prev.startDate > newEnd ? newEnd : prev.startDate }));\r\n                          }}\r\n                          style={{ flex: 1, padding: '10px 12px', borderRadius: '8px', border: '2px solid #e2e8f0', background: '#fff' }}\r\n                        >\r\n                          <option value={0}>January</option>\r\n                          <option value={1}>February</option>\r\n                          <option value={2}>March</option>\r\n                          <option value={3}>April</option>\r\n                          <option value={4}>May</option>\r\n                          <option value={5}>June</option>\r\n                          <option value={6}>July</option>\r\n                          <option value={7}>August</option>\r\n                          <option value={8}>September</option>\r\n                          <option value={9}>October</option>\r\n                          <option value={10}>November</option>\r\n                          <option value={11}>December</option>\r\n                        </select>\r\n                        <select\r\n                          value={new Date(dateRange.endDate || new Date()).getFullYear()}\r\n                          onChange={(e) => {\r\n                            const year = parseInt(e.target.value, 10);\r\n                            const month = new Date(dateRange.endDate || new Date()).getMonth();\r\n                            const endOfMonth = new Date(year, month + 1, 0);\r\n                            const newEnd = formatDateToYYYYMMDD(endOfMonth);\r\n                            setEndMonth(endOfMonth);\r\n                            setDateRange(prev => ({ ...prev, endDate: newEnd, startDate: prev.startDate && prev.startDate > newEnd ? newEnd : prev.startDate }));\r\n                          }}\r\n                          style={{ width: '110px', padding: '10px 12px', borderRadius: '8px', border: '2px solid #e2e8f0', background: '#fff' }}\r\n                        >\r\n                          {Array.from({ length: 10 }, (_, i) => new Date().getFullYear() - 5 + i).map(y => (\r\n                            <option key={y} value={y}>{y}</option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n                    )}\r\n\r\n                    {endMode === 'year' && (\r\n                      <select\r\n                        value={new Date(dateRange.endDate || new Date()).getFullYear()}\r\n                        onChange={(e) => {\r\n                          const year = parseInt(e.target.value, 10);\r\n                          const endOfYear = new Date(year, 11, 31);\r\n                          setDateRange(prev => ({ ...prev, endDate: formatDateToYYYYMMDD(endOfYear) }));\r\n                        }}\r\n                        style={{ width: '100%', padding: '10px 12px', borderRadius: '8px', border: '2px solid #e2e8f0', background: '#fff' }}\r\n                      >\r\n                        {Array.from({ length: 10 }, (_, i) => new Date().getFullYear() - 5 + i).map(y => (\r\n                          <option key={y} value={y}>{y}</option>\r\n                        ))}\r\n                      </select>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Month/Year Quick Select */}\r\n                  <div style={{ flex: '1', minWidth: '280px' }}>\r\n                    <label style={{ display: 'block', fontSize: '13px', fontWeight: 600, color: '#475569', marginBottom: '6px' }}>\r\n                      <i className=\"bi bi-calendar-month\" style={{ marginRight: '6px' }}></i>Quick Month/Year\r\n                    </label>\r\n                    <div style={{ display: 'flex', gap: '8px' }}>\r\n                      <select\r\n                        value={new Date(dateRange.startDate || new Date()).getMonth()}\r\n                        onChange={(e) => {\r\n                          const month = parseInt(e.target.value);\r\n                          const year = new Date(dateRange.startDate || new Date()).getFullYear();\r\n                          const startOfMonth = new Date(year, month, 1);\r\n                          const endOfMonth = new Date(year, month + 1, 0);\r\n                          setDateRange({\r\n                            startDate: startOfMonth.toISOString().split('T')[0],\r\n                            endDate: endOfMonth.toISOString().split('T')[0]\r\n                          });\r\n                        }}\r\n                        style={{\r\n                          flex: '1',\r\n                          padding: '10px 12px',\r\n                          borderRadius: '8px',\r\n                          border: '2px solid #e2e8f0',\r\n                          fontSize: '14px',\r\n                          fontWeight: 500,\r\n                          color: '#1e293b',\r\n                          background: '#fff',\r\n                          cursor: 'pointer'\r\n                        }}\r\n                      >\r\n                        <option value={0}>January</option>\r\n                        <option value={1}>February</option>\r\n                        <option value={2}>March</option>\r\n                        <option value={3}>April</option>\r\n                        <option value={4}>May</option>\r\n                        <option value={5}>June</option>\r\n                        <option value={6}>July</option>\r\n                        <option value={7}>August</option>\r\n                        <option value={8}>September</option>\r\n                        <option value={9}>October</option>\r\n                        <option value={10}>November</option>\r\n                        <option value={11}>December</option>\r\n                      </select>\r\n                      <select\r\n                        value={new Date(dateRange.startDate || new Date()).getFullYear()}\r\n                        onChange={(e) => {\r\n                          const year = parseInt(e.target.value);\r\n                          const month = new Date(dateRange.startDate || new Date()).getMonth();\r\n                          const startOfMonth = new Date(year, month, 1);\r\n                          const endOfMonth = new Date(year, month + 1, 0);\r\n                          setDateRange({\r\n                            startDate: startOfMonth.toISOString().split('T')[0],\r\n                            endDate: endOfMonth.toISOString().split('T')[0]\r\n                          });\r\n                        }}\r\n                        style={{\r\n                          width: '100px',\r\n                          padding: '10px 12px',\r\n                          borderRadius: '8px',\r\n                          border: '2px solid #e2e8f0',\r\n                          fontSize: '14px',\r\n                          fontWeight: 500,\r\n                          color: '#1e293b',\r\n                          background: '#fff',\r\n                          cursor: 'pointer'\r\n                        }}\r\n                      >\r\n                        {Array.from({ length: 10 }, (_, i) => new Date().getFullYear() - 5 + i).map(y => (\r\n                          <option key={y} value={y}>{y}</option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n\r\n\r\n                {/* Selection Mode Indicator\r\n                <div className=\"selection-mode-indicator\">\r\n                  <span className={`mode-badge ${calendarSelectMode === 'start' ? 'active' : ''}`}>\r\n                    <i className=\"bi bi-1-circle\"></i> Click date to select\r\n                  </span>\r\n                  <span className={`mode-badge ${calendarSelectMode === 'end' ? 'active' : ''}`}>\r\n                    <i className=\"bi bi-2-circle\"></i> Click another for range\r\n                  </span>\r\n                  <span className=\"hint-text\">\r\n                    <i className=\"bi bi-info-circle\"></i> Single click = one day\r\n                  </span>\r\n                </div> */}\r\n\r\n                {/* Quick Date Selection Buttons */}\r\n                {/* <div className=\"quick-date-buttons enhanced\">\r\n                  <button \r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      const today = new Date().toISOString().split('T')[0];\r\n                      setDateRange({ startDate: today, endDate: today });\r\n                      setCalendarSelectMode('start');\r\n                    }}\r\n                    className={`btn btn-quick ${dateRange.startDate === new Date().toISOString().split('T')[0] && dateRange.endDate === new Date().toISOString().split('T')[0] ? 'active' : ''}`}\r\n                  >\r\n                    <i className=\"bi bi-calendar-day\"></i> Today\r\n                  </button>\r\n                  <button \r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      const today = new Date();\r\n                      const yesterday = new Date(today);\r\n                      yesterday.setDate(today.getDate() - 1);\r\n                      setDateRange({ \r\n                        startDate: yesterday.toISOString().split('T')[0], \r\n                        endDate: yesterday.toISOString().split('T')[0] \r\n                      });\r\n                      setCalendarSelectMode('start');\r\n                    }}\r\n                    className=\"btn btn-quick\"\r\n                  >\r\n                    <i className=\"bi bi-calendar-minus\"></i> Yesterday\r\n                  </button>\r\n                  <button \r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      const today = new Date();\r\n                      const lastWeek = new Date(today);\r\n                      lastWeek.setDate(today.getDate() - 7);\r\n                      setDateRange({ \r\n                        startDate: lastWeek.toISOString().split('T')[0], \r\n                        endDate: today.toISOString().split('T')[0] \r\n                      });\r\n                      setCalendarSelectMode('start');\r\n                    }}\r\n                    className=\"btn btn-quick\"\r\n                  >\r\n                    <i className=\"bi bi-calendar-week\"></i> Last 7 Days\r\n                  </button>\r\n                  <button \r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      const today = new Date();\r\n                      const startOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);\r\n                      setDateRange({ \r\n                        startDate: startOfMonth.toISOString().split('T')[0], \r\n                        endDate: today.toISOString().split('T')[0] \r\n                      });\r\n                      setCalendarSelectMode('start');\r\n                    }}\r\n                    className=\"btn btn-quick\"\r\n                  >\r\n                    <i className=\"bi bi-calendar-month\"></i> This Month\r\n                  </button>\r\n                  <button \r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      const today = new Date();\r\n                      const startOfLastMonth = new Date(today.getFullYear(), today.getMonth() - 1, 1);\r\n                      const endOfLastMonth = new Date(today.getFullYear(), today.getMonth(), 0);\r\n                      setDateRange({ \r\n                        startDate: startOfLastMonth.toISOString().split('T')[0], \r\n                        endDate: endOfLastMonth.toISOString().split('T')[0] \r\n                      });\r\n                      setCalendarSelectMode('start');\r\n                    }}\r\n                    className=\"btn btn-quick\"\r\n                  >\r\n                    <i className=\"bi bi-calendar2-minus\"></i> Last Month\r\n                  </button>\r\n                </div> */}\r\n\r\n                {/* Full Calendar UI */}\r\n                {/* <div className=\"calendar-container\">\r\n                  <div className=\"calendar-widget main-calendar\">\r\n                    <div className=\"calendar-header-controls\">\r\n                      <button type=\"button\" onClick={previousMonth} className=\"calendar-nav-btn\">\r\n                        <i className=\"bi bi-chevron-left\"></i>\r\n                      </button>\r\n                      <div className=\"calendar-month-year\">\r\n                        {currentMonth.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}\r\n                      </div>\r\n                      <button type=\"button\" onClick={nextMonth} className=\"calendar-nav-btn\">\r\n                        <i className=\"bi bi-chevron-right\"></i>\r\n                      </button>\r\n                    </div>\r\n                    \r\n                    <div className=\"calendar-grid\">\r\n                      <div className=\"calendar-weekdays\">\r\n                        <div className=\"calendar-weekday sun\">SUN</div>\r\n                        <div className=\"calendar-weekday\">MON</div>\r\n                        <div className=\"calendar-weekday\">TUE</div>\r\n                        <div className=\"calendar-weekday\">WED</div>\r\n                        <div className=\"calendar-weekday\">THU</div>\r\n                        <div className=\"calendar-weekday\">FRI</div>\r\n                        <div className=\"calendar-weekday sat\">SAT</div>\r\n                      </div>\r\n                      \r\n                      <div className=\"calendar-days\">\r\n                        {generateCalendarDays(currentMonth).map((day, index) => {\r\n                          const dayClasses = [\r\n                            'calendar-day',\r\n                            !day ? 'empty' : '',\r\n                            isStartDate(day, currentMonth) ? 'start-date' : '',\r\n                            isEndDate(day, currentMonth) ? 'end-date' : '',\r\n                            isDateInRange(day, currentMonth) ? 'in-range' : '',\r\n                            isToday(day, currentMonth) ? 'today' : '',\r\n                            (index % 7 === 0) ? 'sunday' : '',\r\n                            (index % 7 === 6) ? 'saturday' : ''\r\n                          ].filter(Boolean).join(' ');\r\n                          \r\n                          return (\r\n                            <div\r\n                              key={index}\r\n                              className={dayClasses}\r\n                              onClick={() => handleCalendarDateClick(day, currentMonth)}\r\n                            >\r\n                              {day && <span className=\"day-number\">{day}</span>}\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div> */}\r\n\r\n                {/* Hidden native date inputs for form validation */}\r\n                <input\r\n                  type=\"hidden\"\r\n                  id=\"startDate\"\r\n                  value={dateRange.startDate}\r\n                  required\r\n                />\r\n                <input\r\n                  type=\"hidden\"\r\n                  id=\"endDate\"\r\n                  value={dateRange.endDate}\r\n                  required\r\n                />\r\n              </div>\r\n            \r\n\r\n            {/* Generate Report Button - Hidden (now combined with Apply button in date selector) */}\r\n            <div className=\"form-actions\" style={{ marginTop: '2rem', display: 'none', justifyContent: 'center' }}>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading || !hasGeneratePermissionForType(reportType)}\r\n                className=\"btn btn-primary btn-generate\"\r\n              >\r\n                {loading ? (\r\n                  <>\r\n                    <i className=\"bi bi-hourglass-split spin\"></i>\r\n                    Generating...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <i className=\"bi bi-play-circle\"></i>\r\n                    Generate Report\r\n                  </>\r\n                )}\r\n              </button>\r\n            </div>\r\n\r\n            {/* Old form structure for reference - will be hidden */}\r\n            <div style={{ display: 'none' }}>\r\n            <div className=\"form-grid\" style={{display: 'grid', gridTemplateColumns: 'repeat(4, minmax(0, 1fr))', gap: '16px', alignItems: 'end'}}>\r\n            {/* Report Type Selection */}\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"reportType-old\">\r\n                <i className=\"bi bi-file-earmark-text\"></i>\r\n                {t('reportTypeLabel')}\r\n              </label>\r\n              <select\r\n                id=\"reportType-old\"\r\n                value={reportType}\r\n                onChange={(e) => setReportType(e.target.value)}\r\n                className=\"form-control\"\r\n              >\r\n                <option value=\"attendance\">{t('attendanceReport')}</option>\r\n                <option value=\"audit\">{t('auditReport')}</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Report Scope Selection */}\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"reportScope\">\r\n                <i className=\"bi bi-people\"></i>\r\n                {t('reportScopeLabel')}\r\n              </label>\r\n              <select\r\n                id=\"reportScope\"\r\n                value={reportScope}\r\n                onChange={(e) => setReportScope(e.target.value)}\r\n                className=\"form-control\"\r\n                disabled={reportType === 'audit'}\r\n                title={reportType === 'audit' ? t('auditReport') + ' ' + t('groupReport') : t('reportScopeLabel')}\r\n              >\r\n                <option value=\"individual\">{t('individualReport')}</option>\r\n                <option value=\"group\">{t('groupReport')}</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Report Grouping - only for group reports (not for attendance or meal) - Next to Report Scope */}\r\n            {reportScope === 'group' && reportType !== 'attendance' && reportType !== 'meal' && (\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"reportGrouping\">\r\n                  <i className=\"bi bi-collection\"></i>\r\n                  Group By\r\n                </label>\r\n                <select\r\n                  id=\"reportGrouping\"\r\n                  value={reportGrouping}\r\n                  onChange={(e) => setReportGrouping(e.target.value)}\r\n                  className=\"form-control\"\r\n                >\r\n                  <option value=\"none\">None</option>\r\n                  <option value=\"designation\">Designation Wise</option>\r\n                  <option value=\"punch\">F1-0 (Punch Type)</option>\r\n                </select>\r\n              </div>\r\n            )}\r\n\r\n            {/* Employee ID - only visible for individual scope and not for meal report */}\r\n            {reportScope === 'individual' && reportType !== 'meal' && (\r\n              <div className=\"form-group\" style={{gridColumn: 'span 1'}}>\r\n                <label htmlFor=\"employeeId\">\r\n                  <i className=\"bi bi-person-badge\"></i>\r\n                  {t('employeeIdLabel')}\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"employeeId\"\r\n                  value={employeeId}\r\n                  onChange={(e) => setEmployeeId(e.target.value)}\r\n                  className=\"form-control\"\r\n                  placeholder={t('enterEmployeeId')}\r\n                  required={reportScope === 'individual'}\r\n                  title={t('enterEmployeeId')}\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {/* Division and Section - only visible for group scope or meal report */}\r\n            {(reportScope === 'group' || reportType === 'meal') && (\r\n              <>\r\n                {/* Division - always visible, disabled for individual scope */}\r\n                <div className=\"form-group\" style={{gridColumn: 'span 1'}}>\r\n                  <label htmlFor=\"divisionId\">\r\n                    <i className=\"bi bi-building\"></i>\r\n                      {t('divisionLabel')}\r\n                  </label>\r\n                  <select\r\n                    id=\"divisionId\"\r\n                    value={divisionId}\r\n                    onChange={(e) => setDivisionId(e.target.value)}\r\n                    className=\"form-control\"\r\n                    disabled={reportScope === 'individual' && reportType !== 'meal'}\r\n                    style={{ cursor: (reportScope === 'individual' && reportType !== 'meal') ? 'not-allowed' : 'pointer' }}\r\n                  >\r\n                    <option value=\"all\">{t('allDivisionsLabel')}</option>\r\n                    {(Array.isArray(divisions) ? divisions : []).map(division => (\r\n                      <option key={division._id || division.id} value={division._id || division.id}>\r\n                        {division.name || division.division_name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Section - always visible, disabled for individual scope (but enabled for meal report) */}\r\n                <div className=\"form-group\" style={{gridColumn: 'span 1'}}>\r\n                  <label htmlFor=\"sectionId\">\r\n                    <i className=\"bi bi-diagram-3\"></i>\r\n                      {t('sectionLabel')}\r\n                  </label>\r\n                  <select\r\n                    id=\"sectionId\"\r\n                    value={sectionId}\r\n                    onChange={(e) => setSectionId(e.target.value)}\r\n                    className=\"form-control\"\r\n                    disabled={reportType === 'meal' ? false : (reportScope === 'individual' || divisionId === 'all')}\r\n                    style={{ cursor: (reportType === 'meal' ? 'pointer' : ((reportScope === 'individual' || divisionId === 'all') ? 'not-allowed' : 'pointer')) }}\r\n                    title={reportType === 'meal' ? 'Select a section' : (divisionId === 'all' ? 'All Divisions selected - Section must be All' : 'Select a section')}\r\n                  >\r\n                    <option value=\"all\">\r\n                      {t('allSectionsLabel')}\r\n                    </option>\r\n                    {(reportType === 'meal' || divisionId !== 'all') && (Array.isArray(sections) ? sections : []).map(section => (\r\n                      <option key={section._id || section.id} value={section._id || section.id}>\r\n                        {section.name || section.section_name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n                {/* Sub Section - only visible for group scope (optional for meal report) */}\r\n                <div className=\"form-group\" style={{gridColumn: 'span 1'}}>\r\n                  <label htmlFor=\"subSectionId\">\r\n                    <i className=\"bi bi-diagram-2\"></i>\r\n                      {t('subSectionLabel')}\r\n                  </label>\r\n                  <select\r\n                    id=\"subSectionId\"\r\n                    value={subSectionId}\r\n                    onChange={e => setSubSectionId(e.target.value)}\r\n                    className=\"form-control\"\r\n                    disabled={reportType === 'meal' ? false : (reportScope !== 'group' || sectionId === 'all' || divisionId === 'all')}\r\n                    style={{ cursor: (reportType === 'meal' ? 'pointer' : ((reportScope !== 'group' || sectionId === 'all' || divisionId === 'all') ? 'not-allowed' : 'pointer')) }}\r\n                    title={reportType === 'meal' ? 'Select a sub section (optional)' : (divisionId === 'all' ? 'All Divisions selected - Sub Section must be All' : sectionId === 'all' ? 'Please select a section first' : 'Select a sub section')}\r\n                  >\r\n                    <option value=\"all\">\r\n                      {divisionId === 'all' ? t('allSubSectionsLabel') : sectionId === 'all' ? t('selectSectionFirst') : t('allSubSectionsLabel')}\r\n                    </option>\r\n                    {(reportType === 'meal' || (sectionId !== 'all' && divisionId !== 'all')) && (Array.isArray(subSections) ? subSections : []).map(sub => (\r\n                      <option key={sub._id || sub.id} value={sub._id || sub.id}>\r\n                        {sub.subSection?.sub_hie_name || sub.subSection?.name || sub.subSection?.hie_name || sub.subSection?.sub_hie_code || sub.subSection?.code || 'Unnamed'}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Time Period Selection - Next to Sub Section - Hidden for Designation grouping, Attendance and Meal reports */}\r\n                {reportGrouping !== 'designation' && reportType !== 'attendance' && reportType !== 'meal' && (\r\n                  <div className=\"form-group\" style={{gridColumn: 'span 1'}}>\r\n                    <label htmlFor=\"timePeriod\">\r\n                      <i className=\"bi bi-calendar-range\"></i>\r\n                      Time Period\r\n                    </label>\r\n                    <select\r\n                      id=\"timePeriod\"\r\n                      value={timePeriod}\r\n                      onChange={(e) => setTimePeriod(e.target.value)}\r\n                      className=\"form-control\"\r\n                    >\r\n                      <option value=\"none\">None</option>\r\n                      <option value=\"daily\">Daily</option>\r\n                      <option value=\"weekly\">Weekly</option>\r\n                      <option value=\"monthly\">Monthly</option>\r\n                      <option value=\"annually\">Annually</option>\r\n                    </select>\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n\r\n            {/* Date Range - Hidden for Designation grouping */}\r\n            {reportGrouping !== 'designation' && (\r\n              <>\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"startDate\">\r\n                    <i className=\"bi bi-calendar3\"></i>\r\n                    Start Date\r\n                  </label>\r\n                  <input\r\n                    type=\"date\"\r\n                    id=\"startDate\"\r\n                    value={dateRange.startDate}\r\n                    onChange={(e) => setDateRange({...dateRange, startDate: e.target.value})}\r\n                    className=\"form-control\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"endDate\">\r\n                    <i className=\"bi bi-calendar3\"></i>\r\n                    End Date\r\n                  </label>\r\n                  <input\r\n                    type=\"date\"\r\n                    id=\"endDate\"\r\n                    value={dateRange.endDate}\r\n                    onChange={(e) => setDateRange({...dateRange, endDate: e.target.value})}\r\n                    className=\"form-control\"\r\n                    required\r\n                  />\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n          </div>\r\n\r\n          {/* Employee info preview (appears when division, section and employee ID are provided) */}\r\n          {employeeId && employeeInfo && (\r\n            <div style={{ margin: '24px 0', display: 'flex', justifyContent: 'center' }}>\r\n              <div style={{ background: '#fff', border: '1px solid #e6eefc', padding: '12px 18px', borderRadius: 10, boxShadow: '0 2px 8px rgba(102,126,234,0.06)', minWidth: 360 }}>\r\n                <div style={{ fontWeight: 700, marginBottom: 6 }}>{employeeInfo.FULLNAME || employeeInfo.FULL_NAME || employeeInfo.CALLING_NAME || employeeInfo.name || employeeInfo.employee_name || ''}</div>\r\n                <div style={{ display: 'flex', gap: 12, fontSize: 14 }}>\r\n                  <div>Emp No: <b>{employeeInfo.EMP_NUMBER || employeeInfo.employee_id || employeeInfo.employeeId || employeeInfo._id}</b></div>\r\n                  <div>Division: <b>{employeeInfo.DIVISION_NAME || employeeInfo.division?.name || ''}</b></div>\r\n                  <div>Section: <b>{employeeInfo.SECTION_NAME || employeeInfo.section?.name || ''}</b></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* If employeeId provided but no match found AND no report data, show warning */}\r\n          {employeeId && !employeeInfo && reportData && reportData.data && reportData.data.length === 0 && (\r\n            <div style={{ margin: '8px 0 18px', display: 'flex', justifyContent: 'center' }}>\r\n              <div style={{ background: '#fff6f6', border: '1px solid #fde2e2', padding: '10px 14px', borderRadius: 8, color: '#c53030', minWidth: 360, textAlign: 'center' }}>\r\n                No employee found with the entered ID.\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n        </form>\r\n      </div>\r\n\r\n      {/* Error Display */}\r\n      {error && (\r\n        <div className=\"error-message\">\r\n          <i className=\"bi bi-exclamation-triangle\"></i>\r\n          {t('noDataFoundText') && error && error.includes('No records') ? t('noDataFoundText') : error}\r\n        </div>\r\n      )}\r\n\r\n      {/* Report Results Modal */}\r\n      {showReportModal && (\r\n        <div className=\"report-modal-overlay\" onClick={() => setShowReportModal(false)}>\r\n          <div className=\"report-modal-content\" onClick={(e) => e.stopPropagation()}>\r\n            <button className=\"report-modal-close\" onClick={() => setShowReportModal(false)}>\r\n              <i className=\"bi bi-x-lg\"></i>\r\n            </button>\r\n            <div className=\"report-results\">\r\n              <div className=\"results-header\">\r\n                <div className=\"filter-summary attractive-summary-card\" style={{\r\n                  background: '#fff',\r\n                  border: '1px solid #e0e0e0',\r\n                  borderRadius: '8px',\r\n                  padding: '18px 28px 16px 28px',\r\n                  color: '#222',\r\n                  fontFamily: 'Segoe UI, Arial, sans-serif',\r\n                  fontSize: '1.05rem',\r\n                  margin: '0 auto 18px auto',\r\n                  boxShadow: '0 2px 8px 0 rgba(80,80,120,0.06)',\r\n                  maxWidth: '98vw',\r\n                  fontWeight: 500\r\n                }}>\r\n                  <div style={{fontWeight: 800, fontSize: '1.25rem', marginBottom: 10, letterSpacing: '0.2px'}}>Report Filter Summary</div>\r\n                  <div style={{display: 'flex', flexWrap: 'wrap', gap: '32px 48px', marginBottom: 6}}>\r\n                    <span>Type: <b>{reportType === 'attendance' ? 'Attendance Report' : reportType === 'audit' ? 'Audit Report' : 'Meal Report'}</b></span>\r\n                    <span>Scope: <b>{reportScope === 'group' ? 'Group' : 'Individual'}</b></span>\r\n                    {reportScope === 'individual' && (\r\n                      <span>Employee ID: <b>{employeeId || (employeeInfo && (employeeInfo.employee_id || employeeInfo.id)) || 'N/A'}</b></span>\r\n                    )}\r\n                    {reportScope === 'group' && (\r\n                      <>\r\n                        <span>Division: <b>{divisionId === 'all' ? 'All' : (divisions.find(d => d._id === divisionId || d.id === divisionId)?.name || divisionId)}</b></span>\r\n                        <span>Section: <b>{sectionId === 'all' ? 'All' : (sections.find(s => s._id === sectionId || s.id === sectionId)?.name || sectionId)}</b></span>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                  <div style={{display: 'flex', flexWrap: 'wrap', gap: '32px 48px', borderTop: '1px solid #eee', paddingTop: 8}}>\r\n                    <span>Date Range: <b>{dateRange.startDate} to {dateRange.endDate}</b></span>\r\n                    <span>\r\n                      {reportData?.reportType === 'group' ? 'Employees Found:' : 'Records Found:'}\r\n                      <b>{reportData?.data?.length || 0}</b>\r\n                      {loading && <span style={{color: '#007bff', marginLeft: '8px'}}>(Loading...)</span>}\r\n                    </span>\r\n                    <span style={{color: '#666', fontWeight: 400, fontSize: '0.98rem', marginLeft: 'auto'}}>Generated at {new Date().toLocaleString()}</span>\r\n                  </div>\r\n                  \r\n                  {/* Meal Report Summary Stats */}\r\n                  {reportType === 'meal' && reportData?.summary && (\r\n                    <div style={{borderTop: '1px solid #eee', paddingTop: 12, marginTop: 10}}>\r\n                      <div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))', gap: '16px', marginBottom: '12px'}}>\r\n                        <div style={{\r\n                          display: 'flex', \r\n                          alignItems: 'center', \r\n                          gap: 12, \r\n                          padding: '14px 18px', \r\n                          backgroundColor: '#f0f9ff', \r\n                          borderRadius: '8px',\r\n                          border: '1px solid #bfdbfe'\r\n                        }}>\r\n                          <i className=\"bi bi-basket-fill\" style={{fontSize: '1.6rem', color: '#0284c7'}}></i>\r\n                          <div>\r\n                            <div style={{fontSize: '0.85rem', color: '#64748b', marginBottom: '2px'}}>Meal Packets Only</div>\r\n                            <div style={{fontSize: '1.5rem', fontWeight: 'bold', color: '#0284c7'}}>{reportData.summary.totalMealPacketEmployees || 0}</div>\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        <div style={{\r\n                          display: 'flex', \r\n                          alignItems: 'center', \r\n                          gap: 12, \r\n                          padding: '14px 18px', \r\n                          backgroundColor: '#fef3c7', \r\n                          borderRadius: '8px',\r\n                          border: '1px solid #fcd34d'\r\n                        }}>\r\n                          <i className=\"bi bi-cash-coin\" style={{fontSize: '1.6rem', color: '#d97706'}}></i>\r\n                          <div>\r\n                            <div style={{fontSize: '0.85rem', color: '#78716c', marginBottom: '2px'}}>Meal Money Only</div>\r\n                            <div style={{fontSize: '1.5rem', fontWeight: 'bold', color: '#d97706'}}>{reportData.summary.totalMealMoneyEmployees || 0}</div>\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        <div style={{\r\n                          display: 'flex', \r\n                          alignItems: 'center', \r\n                          gap: 12, \r\n                          padding: '14px 18px', \r\n                          backgroundColor: '#f3e8ff', \r\n                          borderRadius: '8px',\r\n                          border: '1px solid #d8b4fe'\r\n                        }}>\r\n                          <i className=\"bi bi-award-fill\" style={{fontSize: '1.6rem', color: '#9333ea'}}></i>\r\n                          <div>\r\n                            <div style={{fontSize: '0.85rem', color: '#6b7280', marginBottom: '2px'}}>Both Types</div>\r\n                            <div style={{fontSize: '1.5rem', fontWeight: 'bold', color: '#9333ea'}}>{reportData.summary.totalBothTypesEmployees || 0}</div>\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        <div style={{\r\n                          display: 'flex', \r\n                          alignItems: 'center', \r\n                          gap: 12, \r\n                          padding: '14px 18px', \r\n                          backgroundColor: '#dcfce7', \r\n                          borderRadius: '8px',\r\n                          border: '1px solid #86efac'\r\n                        }}>\r\n                          <i className=\"bi bi-people-fill\" style={{fontSize: '1.6rem', color: '#15803d'}}></i>\r\n                          <div>\r\n                            <div style={{fontSize: '0.85rem', color: '#64748b', marginBottom: '2px'}}>Total Unique Employees</div>\r\n                            <div style={{fontSize: '1.5rem', fontWeight: 'bold', color: '#15803d'}}>{reportData.summary.totalEmployees || 0}</div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div style={{display: 'flex', justifyContent: 'center', padding: '8px', backgroundColor: '#f8fafc', borderRadius: '6px', fontSize: '0.9rem', color: '#64748b'}}>\r\n                        <i className=\"bi bi-info-circle\" style={{marginRight: '6px'}}></i>\r\n                        Total meal records processed: <b style={{marginLeft: '4px', color: '#475569'}}>{reportData.summary.totalMealRecords || 0}</b>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Data Preview Row */}\r\n              <div style={{display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginTop: '18px', marginBottom: '8px'}}>\r\n                <div style={{display: 'flex', alignItems: 'center', fontWeight: 600, fontSize: '1.15rem'}}>\r\n                  <i className=\"bi bi-table\" style={{marginRight: 10, marginLeft: 12, fontSize: '1.2rem'}}></i>\r\n                  Data Preview\r\n                </div>\r\n                {/* Export Options - Only show for non-audit reports */}\r\n                {reportType !== 'audit' && (\r\n                  <div className=\"action-group\" style={{display: 'flex', alignItems: 'center', gap: '12px'}}>\r\n                    <span style={{fontWeight: 600, fontSize: '1.15rem', display: 'flex', alignItems: 'center', marginLeft: 12}}>\r\n                      <i className=\"bi bi-download\" style={{marginRight: 6, fontSize: '1.2rem'}}></i>\r\n                      Export Options\r\n                    </span>\r\n                    {/* Print PDF should be controlled for attendance reports by attendance_download permission */}\r\n                    {!(reportType === 'attendance') || canDownloadAttendance ? (\r\n                      <button\r\n                        onClick={() => exportReport('pdf')}\r\n                        className=\"btn btn-outline-primary\"\r\n                        style={{marginLeft: 8, marginRight: 18, display: 'flex', alignItems: 'center', fontWeight: 500, fontSize: '1rem'}}\r\n                      >\r\n                        <i className=\"bi bi-file-earmark-pdf\" style={{marginRight: 5, fontSize: '1.1rem'}}></i>\r\n                        Print PDF\r\n                      </button>\r\n                    ) : (\r\n                      <button\r\n                        disabled\r\n                        title=\"You do not have permission to download this report\"\r\n                        className=\"btn btn-outline-secondary\"\r\n                        style={{marginLeft: 8, marginRight: 18, display: 'flex', alignItems: 'center', fontWeight: 500, fontSize: '1rem', opacity: 0.7}}\r\n                      >\r\n                        <i className=\"bi bi-file-earmark-pdf\" style={{marginRight: 5, fontSize: '1.1rem'}}></i>\r\n                        Print PDF\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"data-preview\">\r\n                <div className=\"table-responsive\">\r\n                  {reportType === 'audit' ? (\r\n                    <AuditReport\r\n                      reportData={reportData || { data: [] }}\r\n                    />\r\n                  ) : reportScope === 'group' ? (\r\n                    <GroupReport\r\n                      ref={groupReportRef}\r\n                      reportData={reportData || { data: [], dates: [], reportType: 'group' }}\r\n                      getHeaders={getHeaders}\r\n                      formatRow={formatRow}\r\n                      reportType={reportType}\r\n                      dateRange={dateRange}\r\n                    />\r\n                  ) : (\r\n                    <IndividualReport\r\n                      ref={individualReportRef}\r\n                      reportData={reportData || { data: [] }}\r\n                      getHeaders={getHeaders}\r\n                      formatRow={formatRow}\r\n                      reportType={reportType}\r\n                      dateRange={dateRange}\r\n                      employeeInfo={employeeInfo}\r\n                    />\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {!loading && showReportModal && !reportData && (\r\n        <div className=\"report-modal-overlay\" onClick={() => setShowReportModal(false)}>\r\n          <div className=\"report-modal-content\" onClick={(e) => e.stopPropagation()}>\r\n            <button className=\"report-modal-close\" onClick={() => setShowReportModal(false)}>\r\n              <i className=\"bi bi-x-lg\"></i>\r\n            </button>\r\n        <div className=\"report-results\">\r\n          <div className=\"empty-state\">\r\n            <div className=\"empty-icon\">\r\n              <i className=\"bi bi-file-earmark-bar-graph\"></i>\r\n            </div>\r\n            <h4 className=\"empty-title\">{t('readyToGenerateTitle')}</h4>\r\n            <p className=\"empty-text\">{t('readyToGenerateText')}</p>\r\n          </div>\r\n        </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportGeneration;\r\n"],"names":["_ref","title","subtitle","icon","actions","onBack","_jsxs","_Fragment","children","className","onClick","style","marginBottom","background","color","border","width","padding","_jsx","fontWeight","src","logo","alt","forwardRef","ref","_reportData$data","_reportData$dates","_reportData$data2","_reportData$data3","_reportData$data3$","_reportData$dates2","_reportData$data4","_reportData$data4$","_reportData$data4$$da","_reportData$dates3","reportData","getHeaders","formatRow","reportType","dateRange","console","log","hasData","dataLength","data","length","hasDates","dates","datesLength","sampleEmployee","sampleDailyAttendance","dailyAttendance","firstDateKey","firstDateData","useImperativeHandle","print","Array","isArray","alert","headers","reportTitle","punches","dateOrder","dateSet","Set","forEach","emp","p","add","date","punchDate","date_","Object","keys","k","from","sort","a","b","Date","filter","String","pIndex","inferredType","scan_type","type","direction","push","employee_ID","employeeId","emp_no","empNo","employee_name","employeeName","name","time_","time","punchTime","dayData","eventDescription","checkIn","checkOut","da","db","isNaN","getTime","empA","empB","ta","tb","aIsIn","toUpperCase","bIsIn","sortedRecords","map","rec","_punchDateKey","toLocaleDateString","day","month","year","replace","ROWS_PER_PAGE","Math","max","PAGE_RECORDS","pages","currentPage","lastKey","lastDateHeader","currentCount","record","dateHeader","row","key","cell","ci","join","slice","totalPages","html","idx","renderPage","pageRows","pageNum","startDate","endDate","toLocaleTimeString","h","w","window","open","document","write","close","setTimeout","focus","previewElements","lastDateSeen","displayCount","i","dateVal","colSpan","fontSize","textAlign","whiteSpace","verticalAlign","borderCollapse","height","borderTop","borderRadius","animation","margin","employeeInfo","_dropSet","s","toLowerCase","keepIndices","has","trim","r","pDate","status","toString","recDate","origI","colIdx","undefined","employee_id","employeeNo","empName","isLastPage","_dropSetPreview","previewKeepIndices","expandedGroups","setExpandedGroups","useState","useEffect","allExpanded","_","index","summary","grouping","marginTop","divisionFilter","sectionFilter","subSectionFilter","totalEmployees","totalGroups","toLocaleString","group","groupIndex","_group$employees$","backgroundColor","groupName","count","employees","eventDate","empIndex","fontFamily","designation","eventTime","divisionName","paddingTop","opacity","to","display","gridTemplateColumns","gap","boxShadow","totalRecords","textTransform","groupingMethod","flexWrap","timePeriod","overflow","prev","toggleGroup","cursor","justifyContent","alignItems","totalIssues","borderBottom","issueCount","fontStyle","_employeeInfo$divisio","_employeeInfo$section","_divisions$find","_sections$find","initialEmployeeId","t","useLanguage","API_BASE_URL","process","formatDateToYYYYMMDD","getFullYear","getMonth","padStart","getDate","activeStep","setActiveStep","setReportType","reportScope","setReportScope","setTimePeriod","reportGrouping","setReportGrouping","setEmployeeId","empField","querySelector","scrollIntoView","behavior","block","divisionId","setDivisionId","sectionId","setSectionId","divisions","setDivisions","sections","setSections","allSections","setAllSections","subSections","setSubSections","subSectionId","setSubSectionId","currentMonth","setCurrentMonth","endMonth","setEndMonth","showReportModal","setShowReportModal","calendarSelectMode","setCalendarSelectMode","lastClickTime","setLastClickTime","lastClickedDay","setLastClickedDay","sectionsForDivision","section","sectionDivId","division_code","division_id","DIVISION_ID","selectedDivId","startsWith","id","_id","fetchSubSections","setDateRange","selectionMode","setSelectionMode","startMode","setStartMode","endMode","setEndMode","selectedYear","setSelectedYear","selectedMonth","setSelectedMonth","loading","setLoading","setReportData","error","setError","setEmployeeInfo","searchQuery","autoSelectedDivisionRef","useRef","autoSelectedSectionRef","groupReportRef","individualReportRef","filteredData","useMemo","q","item","empId","includes","flattenedPunches","EMP_NUMBER","EMP_NO","FULLNAME","d","entries","_ref2","individualFlatReportData","empIdStr","filteredReportData","ensureSeconds","timeVal","hour12","e","canGenerateFallback","usePermission","canGenerateAttendance","canDownloadAttendance","canGenerateAudit","canGenerateMeal","canViewReports","hasGeneratePermissionForType","fetchDivisions","fetchAllSections","today","dayOfWeek","getDay","startOfWeek","setDate","startOfMonth","startOfYear","allowedTypes","current","target","find","code","DIVISION_CODE","DIVISION_NAME","sec","section_code","SECTION_CODE","section_name","SECTION_NAME","section_id","async","token","localStorage","getItem","response","fetch","ok","json","divisionsArray","normalized","arguments","out","seen","_ref3","_ref4","_ref5","_ref6","_ref7","_d$_id","_ref8","_ref9","_ref0","_ref1","_d$code","_ref10","_ref11","_ref12","_d$name","_d$hie_code","_d$hie_name","_d$def_level","_ref13","_d$isActive","hie_code","hie_name","hie_relationship","def_level","DEF_LEVEL","isActive","active","localeCompare","normalizeDivisions","err","sectionsArray","_ref14","_ref15","_ref16","_ref17","_ref18","_ref19","_s$_id","_ref20","_ref21","_ref22","_ref23","_ref24","_s$division_code","_ref25","_ref26","_ref27","_s$code","_ref28","_ref29","_ref30","_s$name","_ref31","_s$division_code2","_ref32","_s$division_name","_s$def_level","_ref33","_s$isActive","SECTION_ID","divisionCode","division_name","normalizeSections","cleanSectionId","encodeURIComponent","subSectionsArray","handlePrint","division","mealPacket","mealMoney","_record$scan_type","_record$scan_type2","punchDateObj","formattedDate","weekday","functionCode","_record$scan_type3","_record$scan_type4","generateCalendarDays","monthDate","daysInMonth","getDaysInMonth","firstDay","getFirstDayOfMonth","days","handleCalendarDateClick","selectedDate","dateStr","PageHeader","onSubmit","preventDefault","apiUrl","payload","report_type","from_date","to_date","time_period","selectedSubSection","ss","sub_section_id","_selectedSubSection$s","_selectedSubSection$s2","sub_section_db_id","sub_section_name","subSection","sub_hie_name","sub_name","sub_code","full_sub_section","selectedSection","full_section","selectedDivision","section_filter","full_division","empPreview","employeesUrl","resp","arr","warn","fetchFilteredEmployeesPreview","preview_employee_count","_selectedSubSection$p","_selectedSubSection$p2","_selectedSubSection$s3","_selectedSubSection$s4","parentSection","parentDivision","JSON","stringify","method","body","jsonErr","message","reportArray","success","hasOwnProperty","fullData","chunkSize","floor","currentIndex","loadDataChunk","nextIndex","min","chunkData","processedData","htmlFor","value","onChange","disabled","placeholder","required","sub","_sub$subSection","_sub$subSection2","_sub$subSection3","subName","minWidth","borderRight","paddingRight","label","action","y","first","start","end","preset","transition","onMouseEnter","currentTarget","onMouseLeave","flex","setMonth","dayDate","isSelected","isInRange","marginRight","parseInt","newStart","endOfMonth","newEnd","endOfYear","toISOString","split","gridColumn","_sub$subSection4","_sub$subSection5","_sub$subSection6","_sub$subSection7","_sub$subSection8","sub_hie_code","FULL_NAME","CALLING_NAME","stopPropagation","maxWidth","letterSpacing","marginLeft","totalMealPacketEmployees","totalMealMoneyEmployees","totalBothTypesEmployees","totalMealRecords","format","dataToExport","exportReport","AuditReport","GroupReport","IndividualReport"],"sourceRoot":""}