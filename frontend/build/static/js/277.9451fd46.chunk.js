"use strict";(self.webpackChunktime_attendance_frontend=self.webpackChunktime_attendance_frontend||[]).push([[277],{83:(e,i,n)=>{n.d(i,{A:()=>t});n(43);var l=n(769),o=n(579);const t=e=>{let{title:i,subtitle:n,icon:t="bi-folder",actions:s,onBack:a}=e;return(0,o.jsxs)(o.Fragment,{children:[a&&(0,o.jsxs)("button",{className:"back-arrow-btn",onClick:a,title:"Back to Dashboard",style:{marginBottom:"12px",background:"transparent",color:"#0f172a",border:"1px solid rgba(15,23,42,0.08)",width:"auto",padding:"8px 12px"},children:[(0,o.jsx)("i",{className:"bi bi-arrow-left"}),"\xa0",(0,o.jsx)("span",{style:{fontWeight:600},children:"Back"})]}),(0,o.jsxs)("div",{className:"page-header-banner",children:[(0,o.jsxs)("div",{className:"page-header-content",children:[(0,o.jsxs)("div",{className:"page-header-left",children:[(0,o.jsx)("div",{className:"page-header-icon",children:(0,o.jsx)("i",{className:`bi ${t}`})}),(0,o.jsxs)("div",{className:"page-header-text",children:[(0,o.jsx)("h1",{children:i}),n&&(0,o.jsx)("p",{children:n})]})]}),(0,o.jsxs)("div",{className:"page-header-right",children:[s&&(0,o.jsx)("div",{className:"page-header-actions",children:s}),(0,o.jsx)("div",{className:"page-header-logo",children:(0,o.jsx)("img",{src:l,alt:"Company Logo"})})]})]}),(0,o.jsxs)("div",{className:"page-header-decoration",children:[(0,o.jsx)("div",{className:"decoration-circle decoration-circle-1"}),(0,o.jsx)("div",{className:"decoration-circle decoration-circle-2"}),(0,o.jsx)("div",{className:"decoration-circle decoration-circle-3"})]})]})]})}},277:(e,i,n)=>{n.r(i),n.d(i,{default:()=>d});var l=n(43),o=n(213),t=(n(347),n(477)),s=n(83),a=n(579);const d=e=>{var i,n,d,r,c,u;let{onBack:p}=e;const[v,g]=(0,l.useState)([]),[h,m]=(0,l.useState)([]),[f,x]=(0,l.useState)([]),[S,b]=(0,l.useState)([]),[y,_]=(0,l.useState)([]),[N,j]=(0,l.useState)([]),[I,E]=(0,l.useState)(0),[w,k]=(0,l.useState)(!1),[C,A]=(0,l.useState)(""),[D,T]=(0,l.useState)("all"),[O,$]=(0,l.useState)("all"),[z,F]=(0,l.useState)("all"),[M,R]=(0,l.useState)("all"),[W,B]=(0,l.useState)([]),[L,V]=(0,l.useState)([]),[H,U]=(0,l.useState)([]),[P,G]=(0,l.useState)([]),[q,Y]=(0,l.useState)(""),J="http://10.70.4.186:5000/api",{t:K}=(0,t.ok)(),Q=e=>{if(!e)return"";let i=String(e).replace(/\s*\([^)]*\)/g,"").trim();return i=i.replace(/\s*-\s*$/,"").trim(),i},X=()=>{const e=new Map,i=new Map,n=new Map;return v.forEach(l=>{l.code&&e.set(String(l.code),String(l.id)),l.name&&i.set(String(l.name),String(l.id)),n.set(String(l.id),l.name)}),{codeToId:e,nameToId:i,idToName:n}},Z=e=>e.divisionHierarchyName||e.divisionName||String(e.divisionId||e.divisionCode||"Unknown Division"),ee=(e,i)=>{var n,l,o;const t=String(e.divisionId||"");if(t&&null!==i&&void 0!==i&&null!==(n=i.idToName)&&void 0!==n&&n.has(t))return`id:${t}`;const s=String(e.divisionCode||"");if(s&&null!==i&&void 0!==i&&null!==(l=i.codeToId)&&void 0!==l&&l.has(s))return`id:${i.codeToId.get(s)}`;const a=Z(e);return a&&null!==i&&void 0!==i&&null!==(o=i.nameToId)&&void 0!==o&&o.has(a)?`id:${i.nameToId.get(a)}`:`name:${a}`},ie=()=>{const e=X();if(console.log("getEmployeeDivisions - divisions:",v.length,"allEmployees:",y.length),y&&y.length&&console.log("getEmployeeDivisions - sample employees:",y.slice(0,5)),v&&v.length){const i=new Map;y.forEach(n=>{const l=ee(n,e);i.set(l,(i.get(l)||0)+1)}),console.log("Division counts (derived):",Array.from(i.entries()));const n=v.map(e=>{var n,l;const o=`id:${String(e.id)}`,t=Number(null!==(n=null!==(l=e.employeeCount)&&void 0!==l?l:i.get(o))&&void 0!==n?n:0);return{key:o,name:e.name,count:t}}),l=[],o=new Set(n.map(e=>e.key));y.forEach(i=>{const n=ee(i,e);if(o.has(n)){const e=l.find(e=>e.key===n);e&&(e.count+=1)}else o.add(n),l.push({key:n,name:Z(i),count:1})});const t=[...n,...l].sort((e,i)=>e.name.localeCompare(i.name));return console.log("Final divisions:",t),t}console.log("Using fallback - deriving divisions from employees");const i=new Map;y.forEach(n=>{const l=ee(n,e),o=Z(n),t=i.get(l);t?t.count+=1:i.set(l,{key:l,name:o,count:1})});const n=Array.from(i.values()).sort((e,i)=>e.name.localeCompare(i.name));return console.log("Fallback divisions:",n),n},ne=async()=>{try{var e,i,n,l;k(!0),A(null);const t=localStorage.getItem("token"),s={Authorization:`Bearer ${t}`,"Content-Type":"application/json"};console.log("\ud83d\udd04 Fetching HRIS data...",{API_BASE_URL:J,tokenPresent:!!t}),console.log("\ud83d\udccd Current timestamp:",(new Date).toLocaleTimeString());const a=[{key:"sections",url:`${J}/mysql-data/sections`},{key:"divisions",url:`${J}/mysql-data/divisions?includeEmployeeCount=true`},{key:"subsections",url:`${J}/mysql-subsections`}],d=async e=>{try{var i,n,l,t;const c=await o.A.get(e.url,{headers:s});if(null!==(i=c.data)&&void 0!==i&&i.success&&(null===(n=c.data)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.length)>0)return c;if(e.fallbackUrl&&(null===(t=c.data)||void 0===t||!t.data||0===c.data.data.length)){var a,d,r;console.log(`${e.key} primary returned empty data, trying cache fallback...`);const i=await o.A.get(e.fallbackUrl,{headers:s});if(null!==(a=i.data)&&void 0!==a&&a.success&&(null===(d=i.data)||void 0===d||null===(r=d.data)||void 0===r?void 0:r.length)>0)return console.log(`${e.key} fallback cache successful with ${i.data.data.length} items`),i.data.fromCache=!0,i}return c}catch(C){if(e.fallbackUrl){console.log(`${e.key} primary failed, trying cache fallback...`);try{var c;const i=await o.A.get(e.fallbackUrl,{headers:s});var u;if(null!==(c=i.data)&&void 0!==c&&c.success)return console.log(`${e.key} fallback cache successful with ${(null===(u=i.data.data)||void 0===u?void 0:u.length)||0} items`),i.data.fromCache=!0,i}catch(v){var p;console.warn(`${e.key} fallback also failed:`,(null===v||void 0===v||null===(p=v.response)||void 0===p?void 0:p.status)||(null===v||void 0===v?void 0:v.message))}}throw C}},r=await Promise.allSettled(a.map(e=>d(e))),c={},u=[];r.forEach((e,i)=>{const n=a[i];if("fulfilled"===e.status){var l,o,t,s,d;c[n.key]=e.value;const i=null!==(l=e.value)&&void 0!==l&&null!==(o=l.data)&&void 0!==o&&o.fromCache?" (from cache)":"",a=(null===(t=e.value)||void 0===t||null===(s=t.data)||void 0===s||null===(d=s.data)||void 0===d?void 0:d.length)||0;console.log(`${n.key} OK${i}:`,n.url,`(${a} items)`)}else{var r,p,v;u.push({key:n.key,url:n.url,reason:e.reason}),console.warn(`${n.key} failed:`,n.url,(null===(r=e.reason)||void 0===r||null===(p=r.response)||void 0===p?void 0:p.status)||(null===(v=e.reason)||void 0===v?void 0:v.message)),c[n.key]=null}});const p=c.sections,v=c.divisions,h=c.subsections;if(u.length){const e=u.map(e=>{var i,n;const l=(null===(i=e.reason)||void 0===i||null===(n=i.response)||void 0===n?void 0:n.status)||"network_error";return`${e.key} (${l})`}).join(", "),i=Object.values(c).some(e=>!!e)?`\u26a0\ufe0f Some endpoints failed: ${e}`:`Failed to fetch: ${e}`;A(e=>null!==e&&void 0!==e?e:i)}if(console.log("Division Response:",null===v||void 0===v?void 0:v.data),console.log("Section Response:",null===p||void 0===p?void 0:p.data),null!==v&&void 0!==v&&null!==(e=v.data)&&void 0!==e&&e.success){const e=v.data.data||[];console.log("Raw divisions:",e.length);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const i=[],n=new Set;return e.forEach(e=>{var l,o,t,s,a,d,r,c,u,p,v;const g=null!==(l=null!==(o=null!==(t=null!==(s=e.HIE_CODE)&&void 0!==s?s:e.code)&&void 0!==t?t:e.DIVISION_CODE)&&void 0!==o?o:e.hie_code)&&void 0!==l?l:"",h=String(g||e._id||e.id||e.DIVISION_ID||"");h&&(n.has(h)||(n.add(h),i.push({id:h,code:String(g||h),name:null!==(a=null!==(d=null!==(r=null!==(c=e.name)&&void 0!==c?c:e.DIVISION_NAME)&&void 0!==r?r:e.hie_name)&&void 0!==d?d:e.hie_relationship)&&void 0!==a?a:"Unknown Division",def_level:null!==(u=e.def_level)&&void 0!==u?u:e.DEF_LEVEL,hie_relationship:e.hie_relationship,employeeCount:Number(e.employeeCount||e.count||0),isActive:null===(p=null!==(v=e.isActive)&&void 0!==v?v:e.active)||void 0===p||p})))}),i.sort((e,i)=>e.name.localeCompare(i.name))}(e);console.log("Normalized divisions:",i.length),g(i),v.data.fallback&&A(`\u26a0\ufe0f ${v.data.message}`)}else A(v?e=>null!==e&&void 0!==e?e:"Failed to fetch divisions from HRIS API":e=>null!==e&&void 0!==e?e:"Failed to fetch divisions: endpoint not reachable (404/Network)");if(null!==p&&void 0!==p&&null!==(i=p.data)&&void 0!==i&&i.success){const e=p.data.data||[];console.log("Raw sections:",e.length);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const i=[],n=new Set;return e.forEach(e=>{var l,o,t,s,a,d,r,c,u,p,v,g,h,m,f,x,S,b,y,_;const N=null!==(l=null!==(o=null!==(t=null!==(s=e.HIE_CODE)&&void 0!==s?s:e.code)&&void 0!==t?t:e.SECTION_CODE)&&void 0!==o?o:e.hie_code)&&void 0!==l?l:"",j=String(N||e._id||e.id||e.SECTION_ID||e.section_code||"");if(!j)return;if(n.has(j))return;n.add(j);const I=String(null!==(a=null!==(d=null!==(r=null!==(c=null!==(u=e.HIE_RELATIONSHIP)&&void 0!==u?u:e.division_code)&&void 0!==c?c:e.division_id)&&void 0!==r?r:e.DIVISION_ID)&&void 0!==d?d:e.DIVISION_CODE)&&void 0!==a?a:"");i.push({id:j,code:String(N||j),name:null!==(p=null!==(v=null!==(g=null!==(h=e.name)&&void 0!==h?h:e.section_name)&&void 0!==g?g:e.SECTION_NAME)&&void 0!==v?v:e.hie_relationship)&&void 0!==p?p:`Section ${j}`,divisionId:I||"",divisionCode:I||String(null!==(m=null!==(f=e.division_code)&&void 0!==f?f:e.DIVISION_CODE)&&void 0!==m?m:""),divisionName:null!==(x=null!==(S=e.division_name)&&void 0!==S?S:e.DIVISION_NAME)&&void 0!==x?x:"",def_level:null!==(b=e.def_level)&&void 0!==b?b:e.DEF_LEVEL,isActive:null===(y=null!==(_=e.isActive)&&void 0!==_?_:e.active)||void 0===y||y})}),i.sort((e,i)=>e.name.localeCompare(i.name))}(e);console.log("Normalized sections:",i.length),m(i),p.data.fallback&&A(e=>null!==e&&void 0!==e?e:`\u26a0\ufe0f ${p.data.message}`)}else A(p?e=>null!==e&&void 0!==e?e:"Failed to fetch sections from HRIS API":e=>null!==e&&void 0!==e?e:"Failed to fetch sections: endpoint not reachable (404/Network)");if(null!==h&&void 0!==h&&null!==(n=h.data)&&void 0!==n&&n.success){const e=h.data.data||[];console.log("Raw sub-sections:",e.length),x(e)}else h?console.warn("Failed to fetch sub-sections"):console.warn("Failed to fetch sub-sections: endpoint not reachable (404/Network)");const f=await o.A.get(`${J}/mysql-subsections/transferred/all/list`,{headers:s}).catch(e=>{var i;return console.warn("transfer endpoint fetch failed:",(null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.status)||(null===e||void 0===e?void 0:e.message)),null});if(null!==f&&void 0!==f&&null!==(l=f.data)&&void 0!==l&&l.success){const e=f.data.data||[];console.log("Transferred employees:",e.length),console.log("Transferred employees data:",e),e.length>0&&console.log("Sample transferred employee:",e[0]),j(e)}}catch(C){var t,s;console.error("Error fetching data:",C),A(`Failed to fetch data: ${(null===(t=C.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||C.message||"Unknown error"}`)}finally{k(!1)}};(0,l.useEffect)(()=>{ne()},[]);(0,l.useEffect)(()=>{if("all"===D)return B([]),void V([]);const e=(e=>{if("all"===e)return[];const i=X();if(e.startsWith("id:")){const i=e.slice(3),n=h.filter(e=>String(e.divisionId)===String(i)).map(e=>({id:e.id,code:e.code,name:e.name}));if(n.length){const e=new Set,i=[];return n.forEach(n=>{e.has(n.id)||(e.add(n.id),i.push(n))}),i.sort((e,i)=>e.name.localeCompare(i.name))}}const n=[],l=new Set;return y.filter(n=>ee(n,i)===String(e)).forEach(e=>{const i=e.sectionId||e.sectionCode,o=e.sectionHierarchyName||e.sectionName||String(i),t=String(i||"");t&&!l.has(t)&&(l.add(t),n.push({id:t,code:t,name:o}))}),n.sort((e,i)=>e.name.localeCompare(i.name))})(D);B(e)},[D,h,y]),(0,l.useEffect)(()=>{if("all"===O||!O)return void V([]);const e=h.find(e=>String(e.id)===String(O));if(console.log("Selected section object:",e),console.log("All sub-sections:",f.length),!e)return console.warn("Selected section not found:",O),void V([]);const i=f.filter(i=>{var n,l;const o=String((null===(n=i.parentSection)||void 0===n?void 0:n.id)||""),t=String((null===(l=i.parentSection)||void 0===l?void 0:l.hie_code)||""),s=String(O),a=String(e.code||""),d=o===s,r=t&&a&&t===a,c=o&&a&&o===a,u=d||r||c;var p;u&&console.log(`\u2705 SubSection match found: ${null===(p=i.subSection)||void 0===p?void 0:p.sub_hie_name}`,{parentSecId:o,parentSecCode:t,selectedSecId:s,selectedSecCode:a,matchById:d,matchByCode:r,matchByIdToCode:c});return u});console.log("Sub-sections for section",O,":",i.length),V(i)},[O,f,h]);const le=(0,l.useRef)(!1),oe=(0,l.useRef)(!1);(0,l.useEffect)(()=>{if("all"!==D)return;if(!v||!v.length)return;if(le.current)return;const e=v.find(e=>{const i=String(e.code||"").toLowerCase(),n=String(e.name||"").toLowerCase();return"is"===i||n.includes("information systems")||n.includes("information system")});e&&(T(`id:${String(e.id)}`),le.current=!0,oe.current=!1)},[v,D]),(0,l.useEffect)(()=>{if("all"!==O)return;if(!W||!W.length)return;if(oe.current)return;const e=W.find(e=>{const i=String(e.code||"").toLowerCase(),n=String(e.name||"").toLowerCase();return"is"===i||n.includes("(is)")||n.includes("information systems")||n.includes("information system")});e&&($(String(e.id)),oe.current=!0)},[W,O]);const te=async()=>{k(!0),A(null);const e={Authorization:`Bearer ${localStorage.getItem("token")}`};try{if(z&&"all"!==z){const i=`${J}/mysql-subsections/transferred/${z}`;console.log(`Fetching sub-section employees: ${i}`);const n=await o.A.get(i,{headers:e});if(n.data.success){const e=n.data.data.map(e=>({empNumber:e.employee_id||e.employeeId,fullName:e.employee_name||e.employeeName,divisionCode:e.division_code,divisionName:e.division_name,sectionCode:e.section_code||e.hie_code,sectionName:e.section_name||e.sub_section_name,subSectionId:e.sub_section_id,designation:e.designation||"Transferred",nic:e.nic||"",isActive:!0,_raw:e}));b(e),_(e.length>0?e:[])}else b([]),_([])}else{let i={};if(D&&"all"!==D)if(D.startsWith("id:")){const e=D.replace("id:",""),n=v.find(i=>String(i.id)===String(e));n&&(i.divisionCode=n.code)}else if(D.startsWith("name:")){const e=D.replace("name:",""),n=v.find(i=>i.name===e);n&&(i.divisionCode=n.code)}if(O&&"all"!==O){const e=h.find(e=>String(e.id)===String(O));e&&(i.sectionCode=e.code)}q&&(i.search=q);const n=new URLSearchParams(i).toString(),l=`${J}/mysql-data/employees?${n}&limit=1000`;console.log(`Fetching employees: ${l}`);const t=await o.A.get(l,{headers:e});if(t.data.success){let e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const i=[],n=new Set;return e.forEach(e=>{var l,o,t,s,a,d,r,c,u,p,v,g,h,m,f,x,S,b,y,_,N,j,I,E,w,k,C,A,D,T,O,$,z,F,M,R,W,B,L,V,H,U,P,G,q,Y,J,K,Q,X,Z,ee,ie,ne,le,oe,te,se,ae,de,re,ce,ue,pe,ve,ge;const he=String(null!==(l=null!==(o=null!==(t=null!==(s=e.EMP_NUMBER)&&void 0!==s?s:e.empNumber)&&void 0!==t?t:e.EMP_NO)&&void 0!==o?o:e.id)&&void 0!==l?l:"");if(!he)return;if(n.has(he))return;n.add(he);const me=null!==(a=null!==(d=null!==(r=e.HIE_NAME_3)&&void 0!==r?r:e.hie_name_3)&&void 0!==d?d:null===e||void 0===e||null===(c=e.currentwork)||void 0===c?void 0:c.HIE_NAME_3)&&void 0!==a?a:null===e||void 0===e||null===(u=e.currentwork)||void 0===u?void 0:u.hie_name_3,fe=null!==(p=null!==(v=null!==(g=e.HIE_NAME_4)&&void 0!==g?g:e.hie_name_4)&&void 0!==v?v:null===e||void 0===e||null===(h=e.currentwork)||void 0===h?void 0:h.HIE_NAME_4)&&void 0!==p?p:null===e||void 0===e||null===(m=e.currentwork)||void 0===m?void 0:m.hie_name_4;i.push({empNumber:he,fullName:null!==(f=null!==(x=null!==(S=null!==(b=e.EMP_NAME)&&void 0!==b?b:e.FULLNAME)&&void 0!==S?S:e.fullName)&&void 0!==x?x:e.name)&&void 0!==f?f:"Unknown",callingName:null!==(y=null!==(_=null!==(N=e.CALLING_NAME)&&void 0!==N?N:e.calling_name)&&void 0!==_?_:e.preferredName)&&void 0!==y?y:"",designation:null!==(j=null!==(I=null!==(E=e.EMP_DESIGNATION)&&void 0!==E?E:e.DESIGNATION)&&void 0!==I?I:e.designation)&&void 0!==j?j:"",nic:String(null!==(w=null!==(k=null!==(C=e.EMP_NIC)&&void 0!==C?C:e.NIC)&&void 0!==k?k:e.nic)&&void 0!==w?w:""),divisionId:String(null!==(A=null!==(D=null!==(T=null!==(O=null!==($=e.DIV_CODE)&&void 0!==$?$:e.DIVISION_ID)&&void 0!==O?O:e.division_id)&&void 0!==T?T:e.DIVISION_CODE)&&void 0!==D?D:e.division_code)&&void 0!==A?A:""),divisionCode:String(null!==(z=null!==(F=null!==(M=e.DIV_CODE)&&void 0!==M?M:e.DIVISION_CODE)&&void 0!==F?F:e.division_code)&&void 0!==z?z:""),divisionName:null!==(R=null!==(W=null!==(B=null!==(L=e.DIV_NAME)&&void 0!==L?L:e.DIVISION_NAME)&&void 0!==B?B:e.division_name)&&void 0!==W?W:me)&&void 0!==R?R:"",sectionId:String(null!==(V=null!==(H=null!==(U=null!==(P=null!==(G=e.SEC_CODE)&&void 0!==G?G:e.SECTION_ID)&&void 0!==P?P:e.section_id)&&void 0!==U?U:e.SECTION_CODE)&&void 0!==H?H:e.section_code)&&void 0!==V?V:""),sectionCode:String(null!==(q=null!==(Y=null!==(J=e.SEC_CODE)&&void 0!==J?J:e.SECTION_CODE)&&void 0!==Y?Y:e.section_code)&&void 0!==q?q:""),sectionName:null!==(K=null!==(Q=null!==(X=null!==(Z=e.SEC_NAME)&&void 0!==Z?Z:e.SECTION_NAME)&&void 0!==X?X:e.section_name)&&void 0!==Q?Q:fe)&&void 0!==K?K:"",gender:null!==(ee=null!==(ie=null!==(ne=e.EMP_GENDER)&&void 0!==ne?ne:e.GENDER)&&void 0!==ie?ie:e.gender)&&void 0!==ee?ee:"",status:null!==(le=null!==(oe=null!==(te=e.EMP_STATUS)&&void 0!==te?te:e.STATUS)&&void 0!==oe?oe:e.status)&&void 0!==le?le:"ACTIVE",isActive:null!==(se=null!==(ae=e.isActive)&&void 0!==ae?ae:e.IS_ACTIVE)&&void 0!==se?se:"ACTIVE"===e.STATUS||"ACTIVE"===e.status,dateOfBirth:null!==(de=null!==(re=null!==(ce=e.DATE_OF_BIRTH)&&void 0!==ce?ce:e.date_of_birth)&&void 0!==re?re:e.dob)&&void 0!==de?de:"",dateOfJoining:null!==(ue=null!==(pe=null!==(ve=null!==(ge=e.EMP_DATE_JOINED)&&void 0!==ge?ge:e.DATE_OF_JOINING)&&void 0!==ve?ve:e.date_of_joining)&&void 0!==pe?pe:e.doj)&&void 0!==ue?ue:"",divisionHierarchyName:null!==me&&void 0!==me?me:"",sectionHierarchyName:null!==fe&&void 0!==fe?fe:""})}),i}(t.data.data);if("all"!==M){const i="active"===M;e=e.filter(e=>e.isActive===i)}b(e),_(e)}else b([]),_([])}}catch(i){console.error("Error fetching filtered employees:",i),A("Failed to fetch filtered list"),b([])}finally{k(!1)}};(0,l.useEffect)(()=>{const e=setTimeout(()=>{te()},400);return()=>clearTimeout(e)},[D,O,z,M,q,v,h]);return(0,a.jsxs)("div",{className:"report-generation",children:[(0,a.jsx)(s.A,{title:K("employeeManagement"),subtitle:"View and manage employee records and assignments",icon:"bi-people",onBack:p}),("all"!==D||"all"!==O||"all"!==z)&&(0,a.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea15 0%, #764ba215 100%)",border:"2px solid #667eea",borderRadius:"8px",padding:"16px 20px",margin:"20px 20px 0 20px",display:"flex",alignItems:"center",gap:"12px"},children:[(0,a.jsx)("i",{className:"bi bi-funnel-fill",style:{color:"#667eea",fontSize:"20px"}}),(0,a.jsxs)("div",{style:{flex:1},children:[(0,a.jsx)("div",{style:{fontWeight:"600",color:"#495057",marginBottom:"4px"},children:K("activeFiltersLabel")}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:["all"!==D&&(0,a.jsx)("span",{style:{background:"#667eea",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:"500"},children:(null===(i=ie().find(e=>String(e.key)===String(D)))||void 0===i?void 0:i.name)||D}),"all"!==O&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("i",{className:"bi bi-chevron-right",style:{color:"#667eea"}}),(0,a.jsx)("span",{style:{background:"#764ba2",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:"500"},children:(null===(n=W.find(e=>String(e.id)===String(O)))||void 0===n?void 0:n.name)||O})]}),"all"!==z&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("i",{className:"bi bi-chevron-right",style:{color:"#667eea"}}),(0,a.jsx)("span",{style:{background:"#f093fb",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:"500"},children:(null===(d=L.find(e=>String(e._id)===String(z)))||void 0===d||null===(r=d.subSection)||void 0===r?void 0:r.sub_hie_name)||(null===(c=L.find(e=>String(e._id)===String(z)))||void 0===c||null===(u=c.subSection)||void 0===u?void 0:u.hie_name)||z})]})]})]}),(0,a.jsx)("div",{style:{background:"white",padding:"8px 16px",borderRadius:"20px",fontWeight:"600",color:"#667eea",fontSize:"14px",border:"2px solid #667eea"},children:D&&"all"!==D?`${S.length} of ${(()=>{if(!D||"all"===D)return(null===y||void 0===y?void 0:y.length)||(null===S||void 0===S?void 0:S.length)||0;const e=D;if(e.startsWith("id:")){const i=e.slice(3),n=v.find(e=>String(e.id)===String(i));if(n)return Number(n.employeeCount||0)}if(e.startsWith("name:")){const i=e.slice(5),n=v.find(e=>e.name===i);if(n)return Number(n.employeeCount||0)}const i=e.replace(/^name:/,""),n=v.find(e=>e.name===i);return n?Number(n.employeeCount||0):(null===y||void 0===y?void 0:y.length)||(null===S||void 0===S?void 0:S.length)||0})()} employees`:`${S.length} employees`})]}),(0,a.jsx)("div",{className:"report-config",style:{padding:"16px 20px",background:"white",borderRadius:"8px",margin:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.08)"},children:(0,a.jsxs)("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end",flexWrap:"wrap"},children:[(0,a.jsxs)("div",{style:{flex:"1",minWidth:"200px"},children:[(0,a.jsx)("label",{htmlFor:"employee-division-select",style:{fontWeight:"600",color:"#495057",fontSize:"12px",display:"block",marginBottom:"4px"},children:K("divisionLabel")}),(0,a.jsxs)("select",{id:"employee-division-select",className:"form-select",value:D,onChange:e=>{const i=e.target.value;T(i),$("all"),F("all")},style:{padding:"8px 10px",fontSize:"13px",border:"1px solid #dee2e6",borderRadius:"4px"},disabled:w,children:[(0,a.jsx)("option",{value:"all",children:K("allDivisionsLabel")}),!w&&ie().map(e=>(0,a.jsx)("option",{value:e.key,children:e.name},e.key))]})]}),(0,a.jsxs)("div",{style:{flex:"1",minWidth:"200px"},children:[(0,a.jsx)("label",{htmlFor:"employee-section-select",style:{fontWeight:"600",color:"#495057",fontSize:"12px",display:"block",marginBottom:"4px"},children:K("sectionLabel")}),(0,a.jsx)("select",{id:"employee-section-select",className:"form-select",value:O,onChange:e=>{const i=e.target.value;$(i),F("all")},style:{padding:"8px 10px",fontSize:"13px",border:"1px solid #dee2e6",borderRadius:"4px"},disabled:!D||"all"===D,children:D&&"all"!==D?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("option",{value:"all",children:K("allSectionsLabel")}),W.length?W.map(e=>(0,a.jsx)("option",{value:e.id,children:Q(e.name)},e.id)):(0,a.jsx)("option",{value:"__no_sections",disabled:!0,children:K("noSections")})]}):(0,a.jsx)("option",{value:"all",children:K("selectDivisionFirst")})})]}),(0,a.jsxs)("div",{style:{flex:"1",minWidth:"200px"},children:[(0,a.jsx)("label",{htmlFor:"employee-subsection-select",style:{fontWeight:"600",color:"#495057",fontSize:"12px",display:"block",marginBottom:"4px"},children:K("subSectionLabel")}),(0,a.jsx)("select",{id:"employee-subsection-select",className:"form-select",value:z,onChange:e=>{const i=e.target.value;F(i)},style:{padding:"8px 10px",fontSize:"13px",border:"1px solid #dee2e6",borderRadius:"4px"},disabled:!O||"all"===O,children:O&&"all"!==O?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("option",{value:"all",children:K("allSubSectionsLabel")}),L.length?L.map(e=>{var i,n;return(0,a.jsx)("option",{value:e._id,children:(null===(i=e.subSection)||void 0===i?void 0:i.sub_hie_name)||(null===(n=e.subSection)||void 0===n?void 0:n.hie_name)||"Unnamed"},e._id)}):(0,a.jsx)("option",{value:"__no_subsections",disabled:!0,children:K("noSubsections")})]}):(0,a.jsx)("option",{value:"all",children:K("selectSectionFirst")})})]}),(0,a.jsxs)("div",{style:{flex:"1.5",minWidth:"250px"},children:[(0,a.jsx)("label",{htmlFor:"employee-search",style:{fontWeight:"600",color:"#495057",fontSize:"12px",display:"block",marginBottom:"4px"},children:K("searchLabel")}),(0,a.jsxs)("div",{style:{position:"relative"},children:[(0,a.jsx)("i",{className:"bi bi-search",style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"#6c757d",fontSize:"14px"}}),(0,a.jsx)("input",{id:"employee-search",type:"text",className:"form-control",placeholder:K("searchPlaceholder"),value:q,onChange:e=>Y(e.target.value),style:{padding:"8px 10px 8px 32px",fontSize:"13px",border:"1px solid #dee2e6",borderRadius:"4px"}}),q&&(0,a.jsx)("button",{onClick:()=>Y(""),style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#6c757d",cursor:"pointer",padding:"4px",fontSize:"16px"},title:K("clearSearchTitle"),children:(0,a.jsx)("i",{className:"bi bi-x-circle-fill"})})]})]}),(0,a.jsx)("div",{style:{display:"flex",alignItems:"flex-end"},children:(0,a.jsxs)("button",{onClick:()=>{ne(),T("all"),$("all"),F("all"),R("all"),B([]),V([]),Y("")},disabled:w,style:{padding:"8px 16px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"600",cursor:w?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s",opacity:w?.6:1,height:"34px"},onMouseOver:e=>!w&&(e.target.style.transform="translateY(-1px)"),onMouseOut:e=>e.target.style.transform="translateY(0)",children:[(0,a.jsx)("i",{className:"bi bi-arrow-clockwise"}),K("refresh")]})})]})}),C&&(0,a.jsxs)("div",{className:"alert "+(C.includes("\u26a0\ufe0f")?"alert-warning":"alert-danger"),style:{margin:"18px"},children:[(0,a.jsx)("i",{className:"bi "+(C.includes("\u26a0\ufe0f")?"bi-exclamation-triangle":"bi-exclamation-circle")}),C]}),w?(0,a.jsxs)("div",{style:{padding:"60px 20px",textAlign:"center",background:"white",margin:"20px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.08)"},children:[(0,a.jsx)("div",{className:"spinner-border",style:{color:"#667eea",width:"3rem",height:"3rem"},role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:K("loading")})}),(0,a.jsx)("p",{style:{marginTop:"20px",color:"#6c757d",fontSize:"16px"},children:K("fetchingHris")})]}):(0,a.jsxs)("div",{style:{padding:"0 20px 20px 20px"},children:["all"!==z&&I>0&&(0,a.jsxs)("div",{style:{margin:"12px 0 8px 12px",color:"#495057",fontSize:"14px",fontWeight:600},children:[(0,a.jsx)("i",{className:"bi bi-arrow-repeat",style:{marginRight:8,color:"#667eea"}}),"Showing ",(0,a.jsx)("strong",{style:{color:"#333"},children:I})," transferred employee",I>1?"s":""]}),(0,a.jsx)("div",{style:{background:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.08)",overflow:"hidden"},children:(0,a.jsx)("div",{className:"table-responsive",children:(0,a.jsxs)("table",{className:"table",style:{marginBottom:0},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[(0,a.jsx)("th",{style:{color:"white !important",fontWeight:"600",padding:"14px 16px",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px",border:"none",whiteSpace:"nowrap"},children:"Employee ID"}),(0,a.jsx)("th",{style:{color:"white !important",fontWeight:"600",padding:"14px 16px",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px",border:"none",whiteSpace:"nowrap"},children:"Full Name"}),(0,a.jsx)("th",{style:{color:"white !important",fontWeight:"600",padding:"14px 16px",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px",border:"none",whiteSpace:"nowrap"},children:"Designation"}),(0,a.jsx)("th",{style:{color:"white !important",fontWeight:"600",padding:"14px 16px",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px",border:"none",whiteSpace:"nowrap"},children:"Gender"}),(0,a.jsx)("th",{style:{color:"white !important",fontWeight:"600",padding:"14px 16px",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px",border:"none",whiteSpace:"nowrap"},children:"Status"}),(0,a.jsx)("th",{style:{color:"white !important",fontWeight:"600",padding:"14px 16px",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px",border:"none",whiteSpace:"nowrap"},children:"NIC"})]})}),(0,a.jsxs)("tbody",{children:[S.map((e,i)=>(0,a.jsxs)("tr",{style:{background:i%2===0?"#ffffff":"#f8f9fa",transition:"all 0.2s",cursor:"default"},onMouseOver:e=>{e.currentTarget.style.background="#667eea15",e.currentTarget.style.transform="scale(1.01)"},onMouseOut:e=>{e.currentTarget.style.background=i%2===0?"#ffffff":"#f8f9fa",e.currentTarget.style.transform="scale(1)"},children:[(0,a.jsx)("td",{style:{padding:"12px 16px",fontSize:"13px",color:"#495057",fontWeight:"600",borderBottom:"1px solid #e9ecef"},children:e.empNumber}),(0,a.jsx)("td",{style:{padding:"12px 16px",fontSize:"13px",color:"#212529",fontWeight:"500",borderBottom:"1px solid #e9ecef"},children:e.fullName}),(0,a.jsx)("td",{style:{padding:"12px 16px",fontSize:"13px",color:"#6c757d",borderBottom:"1px solid #e9ecef"},children:e.designation}),(0,a.jsx)("td",{style:{padding:"12px 16px",fontSize:"13px",color:"#6c757d",borderBottom:"1px solid #e9ecef"},children:(0,a.jsx)("span",{style:{background:"Male"===e.gender?"#e3f2fd":"Female"===e.gender?"#fce4ec":"#f5f5f5",color:"Male"===e.gender?"#1976d2":"Female"===e.gender?"#c2185b":"#757575",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:e.gender})}),(0,a.jsx)("td",{style:{padding:"12px 16px",fontSize:"13px",color:"#6c757d",borderBottom:"1px solid #e9ecef"},children:(0,a.jsxs)("span",{style:{background:e.isActive?"#d4edda":"#f8d7da",color:e.isActive?"#155724":"#721c24",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"500",display:"inline-flex",alignItems:"center",gap:"4px"},children:[(0,a.jsx)("i",{className:"bi bi-"+(e.isActive?"check-circle-fill":"x-circle-fill")}),e.isActive?"Active":"Inactive"]})}),(0,a.jsx)("td",{style:{padding:"12px 16px",fontSize:"13px",color:"#6c757d",fontFamily:"monospace",borderBottom:"1px solid #e9ecef"},children:e.nic})]},e.empNumber)),0===S.length&&(0,a.jsx)("tr",{children:(0,a.jsxs)("td",{colSpan:6,style:{textAlign:"center",padding:"60px 24px",color:"#9e9e9e",fontSize:"16px"},children:[(0,a.jsx)("i",{className:"bi bi-inbox",style:{fontSize:"48px",display:"block",marginBottom:"16px",opacity:.5}}),K("noEmployeesFoundMsg")]})})]})]})})})]})]})}},347:()=>{}}]);
//# sourceMappingURL=277.9451fd46.chunk.js.map